const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StockView-CC0-GzHy.js","assets/vendor-pdf-Dyj7cThZ.js","assets/vendor-react-KfUPlHYY.js","assets/vendor-utils-C5S46NFB.js","assets/SoldCarsView-9KORK4RY.js","assets/AdminView-CZWtiChu.js","assets/TestDriveForm-D8JMNfSE.js"])))=>i.map(i=>d[i]);
import{j as e,G as Bl,g as Wl,D as Gl,P as ql}from"./vendor-pdf-Dyj7cThZ.js";import{a as rr,c as nr,r as m,R as _e}from"./vendor-react-KfUPlHYY.js";import{h as Ye}from"./vendor-utils-C5S46NFB.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function o(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(u){if(u.ep)return;u.ep=!0;const h=o(u);fetch(u.href,h)}})();var ca={},Ba=rr;ca.createRoot=Ba.createRoot,ca.hydrateRoot=Ba.hydrateRoot;const Xl="modulepreload",Kl=function(n){return"/ordermanagement/"+n},Wa={},Ds=function(l,o,i){let u=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),x=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));u=Promise.allSettled(o.map(g=>{if(g=Kl(g),g in Wa)return;Wa[g]=!0;const b=g.endsWith(".css"),c=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${c}`))return;const y=document.createElement("link");if(y.rel=b?"stylesheet":Xl,b||(y.as="script"),y.crossOrigin="",y.href=g,x&&y.setAttribute("nonce",x),document.head.appendChild(y),b)return new Promise((N,j)=>{y.addEventListener("load",N),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${g}`)))})}))}function h(f){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=f,window.dispatchEvent(x),!x.defaultPrevented)throw f}return u.then(f=>{for(const x of f||[])x.status==="rejected"&&h(x.reason);return l().catch(h)})};function ir(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ra={exports:{}},Ga;function Zl(){return Ga||(Ga=1,function(n,l){(function(o,i){n.exports=i()})(nr,function(){var o;function i(){return o.apply(null,arguments)}function u(t){o=t}function h(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function f(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function x(t,s){return Object.prototype.hasOwnProperty.call(t,s)}function g(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var s;for(s in t)if(x(t,s))return!1;return!0}function b(t){return t===void 0}function c(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function y(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function N(t,s){var a=[],r,d=t.length;for(r=0;r<d;++r)a.push(s(t[r],r));return a}function j(t,s){for(var a in s)x(s,a)&&(t[a]=s[a]);return x(s,"toString")&&(t.toString=s.toString),x(s,"valueOf")&&(t.valueOf=s.valueOf),t}function _(t,s,a,r){return ja(t,s,a,r,!0).utc()}function D(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function w(t){return t._pf==null&&(t._pf=D()),t._pf}var k;Array.prototype.some?k=Array.prototype.some:k=function(t){var s=Object(this),a=s.length>>>0,r;for(r=0;r<a;r++)if(r in s&&t.call(this,s[r],r,s))return!0;return!1};function P(t){var s=null,a=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(s=w(t),a=k.call(s.parsedDateParts,function(d){return d!=null}),r=s.overflow<0&&!s.empty&&!s.invalidEra&&!s.invalidMonth&&!s.invalidWeekday&&!s.weekdayMismatch&&!s.nullInput&&!s.invalidFormat&&!s.userInvalidated&&(!s.meridiem||s.meridiem&&a),t._strict&&(r=r&&s.charsLeftOver===0&&s.unusedTokens.length===0&&s.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function C(t){var s=_(NaN);return t!=null?j(w(s),t):w(s).userInvalidated=!0,s}var I=i.momentProperties=[],E=!1;function R(t,s){var a,r,d,p=I.length;if(b(s._isAMomentObject)||(t._isAMomentObject=s._isAMomentObject),b(s._i)||(t._i=s._i),b(s._f)||(t._f=s._f),b(s._l)||(t._l=s._l),b(s._strict)||(t._strict=s._strict),b(s._tzm)||(t._tzm=s._tzm),b(s._isUTC)||(t._isUTC=s._isUTC),b(s._offset)||(t._offset=s._offset),b(s._pf)||(t._pf=w(s)),b(s._locale)||(t._locale=s._locale),p>0)for(a=0;a<p;a++)r=I[a],d=s[r],b(d)||(t[r]=d);return t}function H(t){R(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),E===!1&&(E=!0,i.updateOffset(this),E=!1)}function O(t){return t instanceof H||t!=null&&t._isAMomentObject!=null}function M(t){i.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function $(t,s){var a=!0;return j(function(){if(i.deprecationHandler!=null&&i.deprecationHandler(null,t),a){var r=[],d,p,S,G=arguments.length;for(p=0;p<G;p++){if(d="",typeof arguments[p]=="object"){d+=`
[`+p+"] ";for(S in arguments[0])x(arguments[0],S)&&(d+=S+": "+arguments[0][S]+", ");d=d.slice(0,-2)}else d=arguments[p];r.push(d)}M(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),a=!1}return s.apply(this,arguments)},s)}var V={};function z(t,s){i.deprecationHandler!=null&&i.deprecationHandler(t,s),V[t]||(M(s),V[t]=!0)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;function L(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Q(t){var s,a;for(a in t)x(t,a)&&(s=t[a],L(s)?this[a]=s:this["_"+a]=s);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function q(t,s){var a=j({},t),r;for(r in s)x(s,r)&&(f(t[r])&&f(s[r])?(a[r]={},j(a[r],t[r]),j(a[r],s[r])):s[r]!=null?a[r]=s[r]:delete a[r]);for(r in t)x(t,r)&&!x(s,r)&&f(t[r])&&(a[r]=j({},a[r]));return a}function ee(t){t!=null&&this.set(t)}var ie;Object.keys?ie=Object.keys:ie=function(t){var s,a=[];for(s in t)x(t,s)&&a.push(s);return a};var oe={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function xe(t,s,a){var r=this._calendar[t]||this._calendar.sameElse;return L(r)?r.call(s,a):r}function W(t,s,a){var r=""+Math.abs(t),d=s-r.length,p=t>=0;return(p?a?"+":"":"-")+Math.pow(10,Math.max(0,d)).toString().substr(1)+r}var Z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,v={},Y={};function T(t,s,a,r){var d=r;typeof r=="string"&&(d=function(){return this[r]()}),t&&(Y[t]=d),s&&(Y[s[0]]=function(){return W(d.apply(this,arguments),s[1],s[2])}),a&&(Y[a]=function(){return this.localeData().ordinal(d.apply(this,arguments),t)})}function U(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function te(t){var s=t.match(Z),a,r;for(a=0,r=s.length;a<r;a++)Y[s[a]]?s[a]=Y[s[a]]:s[a]=U(s[a]);return function(d){var p="",S;for(S=0;S<r;S++)p+=L(s[S])?s[S].call(d,t):s[S];return p}}function de(t,s){return t.isValid()?(s=De(s,t.localeData()),v[s]=v[s]||te(s),v[s](t)):t.localeData().invalidDate()}function De(t,s){var a=5;function r(d){return s.longDateFormat(d)||d}for(F.lastIndex=0;a>=0&&F.test(t);)t=t.replace(F,r),F.lastIndex=0,a-=1;return t}var Je={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function X(t){var s=this._longDateFormat[t],a=this._longDateFormat[t.toUpperCase()];return s||!a?s:(this._longDateFormat[t]=a.match(Z).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var ue="Invalid date";function ge(){return this._invalidDate}var ye="%d",Oe=/\d{1,2}/;function Fe(t){return this._ordinal.replace("%d",t)}var Se={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Me(t,s,a,r){var d=this._relativeTime[a];return L(d)?d(t,s,a,r):d.replace(/%d/i,t)}function Ct(t,s){var a=this._relativeTime[t>0?"future":"past"];return L(a)?a(s):a.replace(/%s/i,s)}var Dt={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Ce(t){return typeof t=="string"?Dt[t]||Dt[t.toLowerCase()]:void 0}function yt(t){var s={},a,r;for(r in t)x(t,r)&&(a=Ce(r),a&&(s[a]=t[r]));return s}var Ts={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function zt(t){var s=[],a;for(a in t)x(t,a)&&s.push({unit:a,priority:Ts[a]});return s.sort(function(r,d){return r.priority-d.priority}),s}var Mt=/\d/,Te=/\d\d/,Ut=/\d{3}/,Bt=/\d{4}/,Tt=/[+-]?\d{6}/,he=/\d\d?/,$e=/\d\d\d\d?/,is=/\d\d\d\d\d\d?/,tt=/\d{1,3}/,Wt=/\d{1,4}/,Pt=/[+-]?\d{1,6}/,st=/\d+/,Et=/[+-]?\d+/,Ps=/Z|[+-]\d\d:?\d\d/gi,Yt=/Z|[+-]\d\d(?::?\d\d)?/gi,Es=/[+-]?\d+(\.\d{1,3})?/,bt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ht=/^[1-9]\d?/,Gt=/^([1-9]\d|\d)/,It;It={};function B(t,s,a){It[t]=L(s)?s:function(r,d){return r&&a?a:s}}function Ys(t,s){return x(It,t)?It[t](s._strict,s._locale):new RegExp(Is(t))}function Is(t){return Ge(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(s,a,r,d,p){return a||r||d||p}))}function Ge(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ae(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ae(t){var s=+t,a=0;return s!==0&&isFinite(s)&&(a=Ae(s)),a}var vt={};function ce(t,s){var a,r=s,d;for(typeof t=="string"&&(t=[t]),c(s)&&(r=function(p,S){S[s]=ae(p)}),d=t.length,a=0;a<d;a++)vt[t[a]]=r}function mt(t,s){ce(t,function(a,r,d,p){d._w=d._w||{},s(a,d._w,d,p)})}function ls(t,s,a){s!=null&&x(vt,t)&&vt[t](s,a._a,a,t)}function Ot(t){return t%4===0&&t%100!==0||t%400===0}var Ne=0,qe=1,Ve=2,je=3,He=4,Xe=5,Pe=6,Os=7,Fs=8;T("Y",0,0,function(){var t=this.year();return t<=9999?W(t,4):"+"+t}),T(0,["YY",2],0,function(){return this.year()%100}),T(0,["YYYY",4],0,"year"),T(0,["YYYYY",5],0,"year"),T(0,["YYYYYY",6,!0],0,"year"),B("Y",Et),B("YY",he,Te),B("YYYY",Wt,Bt),B("YYYYY",Pt,Tt),B("YYYYYY",Pt,Tt),ce(["YYYYY","YYYYYY"],Ne),ce("YYYY",function(t,s){s[Ne]=t.length===2?i.parseTwoDigitYear(t):ae(t)}),ce("YY",function(t,s){s[Ne]=i.parseTwoDigitYear(t)}),ce("Y",function(t,s){s[Ne]=parseInt(t,10)});function Qe(t){return Ot(t)?366:365}i.parseTwoDigitYear=function(t){return ae(t)+(ae(t)>68?1900:2e3)};var qt=Be("FullYear",!0);function os(){return Ot(this.year())}function Be(t,s){return function(a){return a!=null?(cs(this,t,a),i.updateOffset(this,s),this):wt(this,t)}}function wt(t,s){if(!t.isValid())return NaN;var a=t._d,r=t._isUTC;switch(s){case"Milliseconds":return r?a.getUTCMilliseconds():a.getMilliseconds();case"Seconds":return r?a.getUTCSeconds():a.getSeconds();case"Minutes":return r?a.getUTCMinutes():a.getMinutes();case"Hours":return r?a.getUTCHours():a.getHours();case"Date":return r?a.getUTCDate():a.getDate();case"Day":return r?a.getUTCDay():a.getDay();case"Month":return r?a.getUTCMonth():a.getMonth();case"FullYear":return r?a.getUTCFullYear():a.getFullYear();default:return NaN}}function cs(t,s,a){var r,d,p,S,G;if(!(!t.isValid()||isNaN(a))){switch(r=t._d,d=t._isUTC,s){case"Milliseconds":return void(d?r.setUTCMilliseconds(a):r.setMilliseconds(a));case"Seconds":return void(d?r.setUTCSeconds(a):r.setSeconds(a));case"Minutes":return void(d?r.setUTCMinutes(a):r.setMinutes(a));case"Hours":return void(d?r.setUTCHours(a):r.setHours(a));case"Date":return void(d?r.setUTCDate(a):r.setDate(a));case"FullYear":break;default:return}p=a,S=t.month(),G=t.date(),G=G===29&&S===1&&!Ot(p)?28:G,d?r.setUTCFullYear(p,S,G):r.setFullYear(p,S,G)}}function As(t){return t=Ce(t),L(this[t])?this[t]():this}function Ls(t,s){if(typeof t=="object"){t=yt(t);var a=zt(t),r,d=a.length;for(r=0;r<d;r++)this[a[r].unit](t[a[r].unit])}else if(t=Ce(t),L(this[t]))return this[t](s);return this}function Rs(t,s){return(t%s+s)%s}var be;Array.prototype.indexOf?be=Array.prototype.indexOf:be=function(t){var s;for(s=0;s<this.length;++s)if(this[s]===t)return s;return-1};function Xt(t,s){if(isNaN(t)||isNaN(s))return NaN;var a=Rs(s,12);return t+=(s-a)/12,a===1?Ot(t)?29:28:31-a%7%2}T("M",["MM",2],"Mo",function(){return this.month()+1}),T("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),T("MMMM",0,0,function(t){return this.localeData().months(this,t)}),B("M",he,ht),B("MM",he,Te),B("MMM",function(t,s){return s.monthsShortRegex(t)}),B("MMMM",function(t,s){return s.monthsRegex(t)}),ce(["M","MM"],function(t,s){s[qe]=ae(t)-1}),ce(["MMM","MMMM"],function(t,s,a,r){var d=a._locale.monthsParse(t,r,a._strict);d!=null?s[qe]=d:w(a).invalidMonth=t});var $s="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ds="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),se=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,me=bt,ke=bt;function Ee(t,s){return t?h(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||se).test(s)?"format":"standalone"][t.month()]:h(this._months)?this._months:this._months.standalone}function ve(t,s){return t?h(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[se.test(s)?"format":"standalone"][t.month()]:h(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function we(t,s,a){var r,d,p,S=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)p=_([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(p,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(p,"").toLocaleLowerCase();return a?s==="MMM"?(d=be.call(this._shortMonthsParse,S),d!==-1?d:null):(d=be.call(this._longMonthsParse,S),d!==-1?d:null):s==="MMM"?(d=be.call(this._shortMonthsParse,S),d!==-1?d:(d=be.call(this._longMonthsParse,S),d!==-1?d:null)):(d=be.call(this._longMonthsParse,S),d!==-1?d:(d=be.call(this._shortMonthsParse,S),d!==-1?d:null))}function et(t,s,a){var r,d,p;if(this._monthsParseExact)return we.call(this,t,s,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(d=_([2e3,r]),a&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(d,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(d,"").replace(".","")+"$","i")),!a&&!this._monthsParse[r]&&(p="^"+this.months(d,"")+"|^"+this.monthsShort(d,""),this._monthsParse[r]=new RegExp(p.replace(".",""),"i")),a&&s==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(a&&s==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!a&&this._monthsParse[r].test(t))return r}}function Le(t,s){if(!t.isValid())return t;if(typeof s=="string"){if(/^\d+$/.test(s))s=ae(s);else if(s=t.localeData().monthsParse(s),!c(s))return t}var a=s,r=t.date();return r=r<29?r:Math.min(r,Xt(t.year(),a)),t._isUTC?t._d.setUTCMonth(a,r):t._d.setMonth(a,r),t}function ft(t){return t!=null?(Le(this,t),i.updateOffset(this,!0),this):wt(this,"Month")}function Re(){return Xt(this.year(),this.month())}function Ft(t){return this._monthsParseExact?(x(this,"_monthsRegex")||ha.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(x(this,"_monthsShortRegex")||(this._monthsShortRegex=me),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function us(t){return this._monthsParseExact?(x(this,"_monthsRegex")||ha.call(this),t?this._monthsStrictRegex:this._monthsRegex):(x(this,"_monthsRegex")||(this._monthsRegex=ke),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function ha(){function t(J,re){return re.length-J.length}var s=[],a=[],r=[],d,p,S,G;for(d=0;d<12;d++)p=_([2e3,d]),S=Ge(this.monthsShort(p,"")),G=Ge(this.months(p,"")),s.push(S),a.push(G),r.push(G),r.push(S);s.sort(t),a.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Tr(t,s,a,r,d,p,S){var G;return t<100&&t>=0?(G=new Date(t+400,s,a,r,d,p,S),isFinite(G.getFullYear())&&G.setFullYear(t)):G=new Date(t,s,a,r,d,p,S),G}function Kt(t){var s,a;return t<100&&t>=0?(a=Array.prototype.slice.call(arguments),a[0]=t+400,s=new Date(Date.UTC.apply(null,a)),isFinite(s.getUTCFullYear())&&s.setUTCFullYear(t)):s=new Date(Date.UTC.apply(null,arguments)),s}function hs(t,s,a){var r=7+s-a,d=(7+Kt(t,0,r).getUTCDay()-s)%7;return-d+r-1}function ma(t,s,a,r,d){var p=(7+a-r)%7,S=hs(t,r,d),G=1+7*(s-1)+p+S,J,re;return G<=0?(J=t-1,re=Qe(J)+G):G>Qe(t)?(J=t+1,re=G-Qe(t)):(J=t,re=G),{year:J,dayOfYear:re}}function Zt(t,s,a){var r=hs(t.year(),s,a),d=Math.floor((t.dayOfYear()-r-1)/7)+1,p,S;return d<1?(S=t.year()-1,p=d+at(S,s,a)):d>at(t.year(),s,a)?(p=d-at(t.year(),s,a),S=t.year()+1):(S=t.year(),p=d),{week:p,year:S}}function at(t,s,a){var r=hs(t,s,a),d=hs(t+1,s,a);return(Qe(t)-r+d)/7}T("w",["ww",2],"wo","week"),T("W",["WW",2],"Wo","isoWeek"),B("w",he,ht),B("ww",he,Te),B("W",he,ht),B("WW",he,Te),mt(["w","ww","W","WW"],function(t,s,a,r){s[r.substr(0,1)]=ae(t)});function Pr(t){return Zt(t,this._week.dow,this._week.doy).week}var Er={dow:0,doy:6};function Yr(){return this._week.dow}function Ir(){return this._week.doy}function Or(t){var s=this.localeData().week(this);return t==null?s:this.add((t-s)*7,"d")}function Fr(t){var s=Zt(this,1,4).week;return t==null?s:this.add((t-s)*7,"d")}T("d",0,"do","day"),T("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),T("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),T("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),T("e",0,0,"weekday"),T("E",0,0,"isoWeekday"),B("d",he),B("e",he),B("E",he),B("dd",function(t,s){return s.weekdaysMinRegex(t)}),B("ddd",function(t,s){return s.weekdaysShortRegex(t)}),B("dddd",function(t,s){return s.weekdaysRegex(t)}),mt(["dd","ddd","dddd"],function(t,s,a,r){var d=a._locale.weekdaysParse(t,r,a._strict);d!=null?s.d=d:w(a).invalidWeekday=t}),mt(["d","e","E"],function(t,s,a,r){s[r]=ae(t)});function Ar(t,s){return typeof t!="string"?t:isNaN(t)?(t=s.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function Lr(t,s){return typeof t=="string"?s.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Vs(t,s){return t.slice(s,7).concat(t.slice(0,s))}var Rr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),fa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),$r="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Vr=bt,Hr=bt,zr=bt;function Ur(t,s){var a=h(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(s)?"format":"standalone"];return t===!0?Vs(a,this._week.dow):t?a[t.day()]:a}function Br(t){return t===!0?Vs(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Wr(t){return t===!0?Vs(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Gr(t,s,a){var r,d,p,S=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)p=_([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(p,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(p,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(p,"").toLocaleLowerCase();return a?s==="dddd"?(d=be.call(this._weekdaysParse,S),d!==-1?d:null):s==="ddd"?(d=be.call(this._shortWeekdaysParse,S),d!==-1?d:null):(d=be.call(this._minWeekdaysParse,S),d!==-1?d:null):s==="dddd"?(d=be.call(this._weekdaysParse,S),d!==-1||(d=be.call(this._shortWeekdaysParse,S),d!==-1)?d:(d=be.call(this._minWeekdaysParse,S),d!==-1?d:null)):s==="ddd"?(d=be.call(this._shortWeekdaysParse,S),d!==-1||(d=be.call(this._weekdaysParse,S),d!==-1)?d:(d=be.call(this._minWeekdaysParse,S),d!==-1?d:null)):(d=be.call(this._minWeekdaysParse,S),d!==-1||(d=be.call(this._weekdaysParse,S),d!==-1)?d:(d=be.call(this._shortWeekdaysParse,S),d!==-1?d:null))}function qr(t,s,a){var r,d,p;if(this._weekdaysParseExact)return Gr.call(this,t,s,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(d=_([2e3,1]).day(r),a&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(d,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(d,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(d,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(p="^"+this.weekdays(d,"")+"|^"+this.weekdaysShort(d,"")+"|^"+this.weekdaysMin(d,""),this._weekdaysParse[r]=new RegExp(p.replace(".",""),"i")),a&&s==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(a&&s==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(a&&s==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!a&&this._weekdaysParse[r].test(t))return r}}function Xr(t){if(!this.isValid())return t!=null?this:NaN;var s=wt(this,"Day");return t!=null?(t=Ar(t,this.localeData()),this.add(t-s,"d")):s}function Kr(t){if(!this.isValid())return t!=null?this:NaN;var s=(this.day()+7-this.localeData()._week.dow)%7;return t==null?s:this.add(t-s,"d")}function Zr(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var s=Lr(t,this.localeData());return this.day(this.day()%7?s:s-7)}else return this.day()||7}function Jr(t){return this._weekdaysParseExact?(x(this,"_weekdaysRegex")||Hs.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(x(this,"_weekdaysRegex")||(this._weekdaysRegex=Vr),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Qr(t){return this._weekdaysParseExact?(x(this,"_weekdaysRegex")||Hs.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(x(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Hr),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function en(t){return this._weekdaysParseExact?(x(this,"_weekdaysRegex")||Hs.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(x(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=zr),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Hs(){function t(Ie,ot){return ot.length-Ie.length}var s=[],a=[],r=[],d=[],p,S,G,J,re;for(p=0;p<7;p++)S=_([2e3,1]).day(p),G=Ge(this.weekdaysMin(S,"")),J=Ge(this.weekdaysShort(S,"")),re=Ge(this.weekdays(S,"")),s.push(G),a.push(J),r.push(re),d.push(G),d.push(J),d.push(re);s.sort(t),a.sort(t),r.sort(t),d.sort(t),this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function zs(){return this.hours()%12||12}function tn(){return this.hours()||24}T("H",["HH",2],0,"hour"),T("h",["hh",2],0,zs),T("k",["kk",2],0,tn),T("hmm",0,0,function(){return""+zs.apply(this)+W(this.minutes(),2)}),T("hmmss",0,0,function(){return""+zs.apply(this)+W(this.minutes(),2)+W(this.seconds(),2)}),T("Hmm",0,0,function(){return""+this.hours()+W(this.minutes(),2)}),T("Hmmss",0,0,function(){return""+this.hours()+W(this.minutes(),2)+W(this.seconds(),2)});function xa(t,s){T(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),s)})}xa("a",!0),xa("A",!1);function ga(t,s){return s._meridiemParse}B("a",ga),B("A",ga),B("H",he,Gt),B("h",he,ht),B("k",he,ht),B("HH",he,Te),B("hh",he,Te),B("kk",he,Te),B("hmm",$e),B("hmmss",is),B("Hmm",$e),B("Hmmss",is),ce(["H","HH"],je),ce(["k","kk"],function(t,s,a){var r=ae(t);s[je]=r===24?0:r}),ce(["a","A"],function(t,s,a){a._isPm=a._locale.isPM(t),a._meridiem=t}),ce(["h","hh"],function(t,s,a){s[je]=ae(t),w(a).bigHour=!0}),ce("hmm",function(t,s,a){var r=t.length-2;s[je]=ae(t.substr(0,r)),s[He]=ae(t.substr(r)),w(a).bigHour=!0}),ce("hmmss",function(t,s,a){var r=t.length-4,d=t.length-2;s[je]=ae(t.substr(0,r)),s[He]=ae(t.substr(r,2)),s[Xe]=ae(t.substr(d)),w(a).bigHour=!0}),ce("Hmm",function(t,s,a){var r=t.length-2;s[je]=ae(t.substr(0,r)),s[He]=ae(t.substr(r))}),ce("Hmmss",function(t,s,a){var r=t.length-4,d=t.length-2;s[je]=ae(t.substr(0,r)),s[He]=ae(t.substr(r,2)),s[Xe]=ae(t.substr(d))});function sn(t){return(t+"").toLowerCase().charAt(0)==="p"}var an=/[ap]\.?m?\.?/i,rn=Be("Hours",!0);function nn(t,s,a){return t>11?a?"pm":"PM":a?"am":"AM"}var pa={calendar:oe,longDateFormat:Je,invalidDate:ue,ordinal:ye,dayOfMonthOrdinalParse:Oe,relativeTime:Se,months:$s,monthsShort:ds,week:Er,weekdays:Rr,weekdaysMin:$r,weekdaysShort:fa,meridiemParse:an},pe={},Jt={},Qt;function ln(t,s){var a,r=Math.min(t.length,s.length);for(a=0;a<r;a+=1)if(t[a]!==s[a])return a;return r}function ya(t){return t&&t.toLowerCase().replace("_","-")}function on(t){for(var s=0,a,r,d,p;s<t.length;){for(p=ya(t[s]).split("-"),a=p.length,r=ya(t[s+1]),r=r?r.split("-"):null;a>0;){if(d=ms(p.slice(0,a).join("-")),d)return d;if(r&&r.length>=a&&ln(p,r)>=a-1)break;a--}s++}return Qt}function cn(t){return!!(t&&t.match("^[^/\\\\]*$"))}function ms(t){var s=null,a;if(pe[t]===void 0&&n&&n.exports&&cn(t))try{s=Qt._abbr,a=ir,a("./locale/"+t),xt(s)}catch{pe[t]=null}return pe[t]}function xt(t,s){var a;return t&&(b(s)?a=rt(t):a=Us(t,s),a?Qt=a:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Qt._abbr}function Us(t,s){if(s!==null){var a,r=pa;if(s.abbr=t,pe[t]!=null)z("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=pe[t]._config;else if(s.parentLocale!=null)if(pe[s.parentLocale]!=null)r=pe[s.parentLocale]._config;else if(a=ms(s.parentLocale),a!=null)r=a._config;else return Jt[s.parentLocale]||(Jt[s.parentLocale]=[]),Jt[s.parentLocale].push({name:t,config:s}),null;return pe[t]=new ee(q(r,s)),Jt[t]&&Jt[t].forEach(function(d){Us(d.name,d.config)}),xt(t),pe[t]}else return delete pe[t],null}function dn(t,s){if(s!=null){var a,r,d=pa;pe[t]!=null&&pe[t].parentLocale!=null?pe[t].set(q(pe[t]._config,s)):(r=ms(t),r!=null&&(d=r._config),s=q(d,s),r==null&&(s.abbr=t),a=new ee(s),a.parentLocale=pe[t],pe[t]=a),xt(t)}else pe[t]!=null&&(pe[t].parentLocale!=null?(pe[t]=pe[t].parentLocale,t===xt()&&xt(t)):pe[t]!=null&&delete pe[t]);return pe[t]}function rt(t){var s;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Qt;if(!h(t)){if(s=ms(t),s)return s;t=[t]}return on(t)}function un(){return ie(pe)}function Bs(t){var s,a=t._a;return a&&w(t).overflow===-2&&(s=a[qe]<0||a[qe]>11?qe:a[Ve]<1||a[Ve]>Xt(a[Ne],a[qe])?Ve:a[je]<0||a[je]>24||a[je]===24&&(a[He]!==0||a[Xe]!==0||a[Pe]!==0)?je:a[He]<0||a[He]>59?He:a[Xe]<0||a[Xe]>59?Xe:a[Pe]<0||a[Pe]>999?Pe:-1,w(t)._overflowDayOfYear&&(s<Ne||s>Ve)&&(s=Ve),w(t)._overflowWeeks&&s===-1&&(s=Os),w(t)._overflowWeekday&&s===-1&&(s=Fs),w(t).overflow=s),t}var hn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,fn=/Z|[+-]\d\d(?::?\d\d)?/,fs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ws=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],xn=/^\/?Date\((-?\d+)/i,gn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,pn={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ba(t){var s,a,r=t._i,d=hn.exec(r)||mn.exec(r),p,S,G,J,re=fs.length,Ie=Ws.length;if(d){for(w(t).iso=!0,s=0,a=re;s<a;s++)if(fs[s][1].exec(d[1])){S=fs[s][0],p=fs[s][2]!==!1;break}if(S==null){t._isValid=!1;return}if(d[3]){for(s=0,a=Ie;s<a;s++)if(Ws[s][1].exec(d[3])){G=(d[2]||" ")+Ws[s][0];break}if(G==null){t._isValid=!1;return}}if(!p&&G!=null){t._isValid=!1;return}if(d[4])if(fn.exec(d[4]))J="Z";else{t._isValid=!1;return}t._f=S+(G||"")+(J||""),qs(t)}else t._isValid=!1}function yn(t,s,a,r,d,p){var S=[bn(t),ds.indexOf(s),parseInt(a,10),parseInt(r,10),parseInt(d,10)];return p&&S.push(parseInt(p,10)),S}function bn(t){var s=parseInt(t,10);return s<=49?2e3+s:s<=999?1900+s:s}function vn(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function wn(t,s,a){if(t){var r=fa.indexOf(t),d=new Date(s[0],s[1],s[2]).getDay();if(r!==d)return w(a).weekdayMismatch=!0,a._isValid=!1,!1}return!0}function jn(t,s,a){if(t)return pn[t];if(s)return 0;var r=parseInt(a,10),d=r%100,p=(r-d)/100;return p*60+d}function va(t){var s=gn.exec(vn(t._i)),a;if(s){if(a=yn(s[4],s[3],s[2],s[5],s[6],s[7]),!wn(s[1],a,t))return;t._a=a,t._tzm=jn(s[8],s[9],s[10]),t._d=Kt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),w(t).rfc2822=!0}else t._isValid=!1}function Nn(t){var s=xn.exec(t._i);if(s!==null){t._d=new Date(+s[1]);return}if(ba(t),t._isValid===!1)delete t._isValid;else return;if(va(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:i.createFromInputFallback(t)}i.createFromInputFallback=$("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function At(t,s,a){return t??s??a}function kn(t){var s=new Date(i.now());return t._useUTC?[s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()]:[s.getFullYear(),s.getMonth(),s.getDate()]}function Gs(t){var s,a,r=[],d,p,S;if(!t._d){for(d=kn(t),t._w&&t._a[Ve]==null&&t._a[qe]==null&&_n(t),t._dayOfYear!=null&&(S=At(t._a[Ne],d[Ne]),(t._dayOfYear>Qe(S)||t._dayOfYear===0)&&(w(t)._overflowDayOfYear=!0),a=Kt(S,0,t._dayOfYear),t._a[qe]=a.getUTCMonth(),t._a[Ve]=a.getUTCDate()),s=0;s<3&&t._a[s]==null;++s)t._a[s]=r[s]=d[s];for(;s<7;s++)t._a[s]=r[s]=t._a[s]==null?s===2?1:0:t._a[s];t._a[je]===24&&t._a[He]===0&&t._a[Xe]===0&&t._a[Pe]===0&&(t._nextDay=!0,t._a[je]=0),t._d=(t._useUTC?Kt:Tr).apply(null,r),p=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[je]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==p&&(w(t).weekdayMismatch=!0)}}function _n(t){var s,a,r,d,p,S,G,J,re;s=t._w,s.GG!=null||s.W!=null||s.E!=null?(p=1,S=4,a=At(s.GG,t._a[Ne],Zt(fe(),1,4).year),r=At(s.W,1),d=At(s.E,1),(d<1||d>7)&&(J=!0)):(p=t._locale._week.dow,S=t._locale._week.doy,re=Zt(fe(),p,S),a=At(s.gg,t._a[Ne],re.year),r=At(s.w,re.week),s.d!=null?(d=s.d,(d<0||d>6)&&(J=!0)):s.e!=null?(d=s.e+p,(s.e<0||s.e>6)&&(J=!0)):d=p),r<1||r>at(a,p,S)?w(t)._overflowWeeks=!0:J!=null?w(t)._overflowWeekday=!0:(G=ma(a,r,d,p,S),t._a[Ne]=G.year,t._dayOfYear=G.dayOfYear)}i.ISO_8601=function(){},i.RFC_2822=function(){};function qs(t){if(t._f===i.ISO_8601){ba(t);return}if(t._f===i.RFC_2822){va(t);return}t._a=[],w(t).empty=!0;var s=""+t._i,a,r,d,p,S,G=s.length,J=0,re,Ie;for(d=De(t._f,t._locale).match(Z)||[],Ie=d.length,a=0;a<Ie;a++)p=d[a],r=(s.match(Ys(p,t))||[])[0],r&&(S=s.substr(0,s.indexOf(r)),S.length>0&&w(t).unusedInput.push(S),s=s.slice(s.indexOf(r)+r.length),J+=r.length),Y[p]?(r?w(t).empty=!1:w(t).unusedTokens.push(p),ls(p,r,t)):t._strict&&!r&&w(t).unusedTokens.push(p);w(t).charsLeftOver=G-J,s.length>0&&w(t).unusedInput.push(s),t._a[je]<=12&&w(t).bigHour===!0&&t._a[je]>0&&(w(t).bigHour=void 0),w(t).parsedDateParts=t._a.slice(0),w(t).meridiem=t._meridiem,t._a[je]=Sn(t._locale,t._a[je],t._meridiem),re=w(t).era,re!==null&&(t._a[Ne]=t._locale.erasConvertYear(re,t._a[Ne])),Gs(t),Bs(t)}function Sn(t,s,a){var r;return a==null?s:t.meridiemHour!=null?t.meridiemHour(s,a):(t.isPM!=null&&(r=t.isPM(a),r&&s<12&&(s+=12),!r&&s===12&&(s=0)),s)}function Cn(t){var s,a,r,d,p,S,G=!1,J=t._f.length;if(J===0){w(t).invalidFormat=!0,t._d=new Date(NaN);return}for(d=0;d<J;d++)p=0,S=!1,s=R({},t),t._useUTC!=null&&(s._useUTC=t._useUTC),s._f=t._f[d],qs(s),P(s)&&(S=!0),p+=w(s).charsLeftOver,p+=w(s).unusedTokens.length*10,w(s).score=p,G?p<r&&(r=p,a=s):(r==null||p<r||S)&&(r=p,a=s,S&&(G=!0));j(t,a||s)}function Dn(t){if(!t._d){var s=yt(t._i),a=s.day===void 0?s.date:s.day;t._a=N([s.year,s.month,a,s.hour,s.minute,s.second,s.millisecond],function(r){return r&&parseInt(r,10)}),Gs(t)}}function Mn(t){var s=new H(Bs(wa(t)));return s._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function wa(t){var s=t._i,a=t._f;return t._locale=t._locale||rt(t._l),s===null||a===void 0&&s===""?C({nullInput:!0}):(typeof s=="string"&&(t._i=s=t._locale.preparse(s)),O(s)?new H(Bs(s)):(y(s)?t._d=s:h(a)?Cn(t):a?qs(t):Tn(t),P(t)||(t._d=null),t))}function Tn(t){var s=t._i;b(s)?t._d=new Date(i.now()):y(s)?t._d=new Date(s.valueOf()):typeof s=="string"?Nn(t):h(s)?(t._a=N(s.slice(0),function(a){return parseInt(a,10)}),Gs(t)):f(s)?Dn(t):c(s)?t._d=new Date(s):i.createFromInputFallback(t)}function ja(t,s,a,r,d){var p={};return(s===!0||s===!1)&&(r=s,s=void 0),(a===!0||a===!1)&&(r=a,a=void 0),(f(t)&&g(t)||h(t)&&t.length===0)&&(t=void 0),p._isAMomentObject=!0,p._useUTC=p._isUTC=d,p._l=a,p._i=t,p._f=s,p._strict=r,Mn(p)}function fe(t,s,a,r){return ja(t,s,a,r,!1)}var Pn=$("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=fe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:C()}),En=$("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=fe.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:C()});function Na(t,s){var a,r;if(s.length===1&&h(s[0])&&(s=s[0]),!s.length)return fe();for(a=s[0],r=1;r<s.length;++r)(!s[r].isValid()||s[r][t](a))&&(a=s[r]);return a}function Yn(){var t=[].slice.call(arguments,0);return Na("isBefore",t)}function In(){var t=[].slice.call(arguments,0);return Na("isAfter",t)}var On=function(){return Date.now?Date.now():+new Date},es=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Fn(t){var s,a=!1,r,d=es.length;for(s in t)if(x(t,s)&&!(be.call(es,s)!==-1&&(t[s]==null||!isNaN(t[s]))))return!1;for(r=0;r<d;++r)if(t[es[r]]){if(a)return!1;parseFloat(t[es[r]])!==ae(t[es[r]])&&(a=!0)}return!0}function An(){return this._isValid}function Ln(){return Ke(NaN)}function xs(t){var s=yt(t),a=s.year||0,r=s.quarter||0,d=s.month||0,p=s.week||s.isoWeek||0,S=s.day||0,G=s.hour||0,J=s.minute||0,re=s.second||0,Ie=s.millisecond||0;this._isValid=Fn(s),this._milliseconds=+Ie+re*1e3+J*6e4+G*1e3*60*60,this._days=+S+p*7,this._months=+d+r*3+a*12,this._data={},this._locale=rt(),this._bubble()}function gs(t){return t instanceof xs}function Xs(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Rn(t,s,a){var r=Math.min(t.length,s.length),d=Math.abs(t.length-s.length),p=0,S;for(S=0;S<r;S++)ae(t[S])!==ae(s[S])&&p++;return p+d}function ka(t,s){T(t,0,0,function(){var a=this.utcOffset(),r="+";return a<0&&(a=-a,r="-"),r+W(~~(a/60),2)+s+W(~~a%60,2)})}ka("Z",":"),ka("ZZ",""),B("Z",Yt),B("ZZ",Yt),ce(["Z","ZZ"],function(t,s,a){a._useUTC=!0,a._tzm=Ks(Yt,t)});var $n=/([\+\-]|\d\d)/gi;function Ks(t,s){var a=(s||"").match(t),r,d,p;return a===null?null:(r=a[a.length-1]||[],d=(r+"").match($n)||["-",0,0],p=+(d[1]*60)+ae(d[2]),p===0?0:d[0]==="+"?p:-p)}function Zs(t,s){var a,r;return s._isUTC?(a=s.clone(),r=(O(t)||y(t)?t.valueOf():fe(t).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+r),i.updateOffset(a,!1),a):fe(t).local()}function Js(t){return-Math.round(t._d.getTimezoneOffset())}i.updateOffset=function(){};function Vn(t,s,a){var r=this._offset||0,d;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Ks(Yt,t),t===null)return this}else Math.abs(t)<16&&!a&&(t=t*60);return!this._isUTC&&s&&(d=Js(this)),this._offset=t,this._isUTC=!0,d!=null&&this.add(d,"m"),r!==t&&(!s||this._changeInProgress?Da(this,Ke(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:Js(this)}function Hn(t,s){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,s),this):-this.utcOffset()}function zn(t){return this.utcOffset(0,t)}function Un(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Js(this),"m")),this}function Bn(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Ks(Ps,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Wn(t){return this.isValid()?(t=t?fe(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Gn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qn(){if(!b(this._isDSTShifted))return this._isDSTShifted;var t={},s;return R(t,this),t=wa(t),t._a?(s=t._isUTC?_(t._a):fe(t._a),this._isDSTShifted=this.isValid()&&Rn(t._a,s.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Xn(){return this.isValid()?!this._isUTC:!1}function Kn(){return this.isValid()?this._isUTC:!1}function _a(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Zn=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Jn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ke(t,s){var a=t,r=null,d,p,S;return gs(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:c(t)||!isNaN(+t)?(a={},s?a[s]=+t:a.milliseconds=+t):(r=Zn.exec(t))?(d=r[1]==="-"?-1:1,a={y:0,d:ae(r[Ve])*d,h:ae(r[je])*d,m:ae(r[He])*d,s:ae(r[Xe])*d,ms:ae(Xs(r[Pe]*1e3))*d}):(r=Jn.exec(t))?(d=r[1]==="-"?-1:1,a={y:jt(r[2],d),M:jt(r[3],d),w:jt(r[4],d),d:jt(r[5],d),h:jt(r[6],d),m:jt(r[7],d),s:jt(r[8],d)}):a==null?a={}:typeof a=="object"&&("from"in a||"to"in a)&&(S=Qn(fe(a.from),fe(a.to)),a={},a.ms=S.milliseconds,a.M=S.months),p=new xs(a),gs(t)&&x(t,"_locale")&&(p._locale=t._locale),gs(t)&&x(t,"_isValid")&&(p._isValid=t._isValid),p}Ke.fn=xs.prototype,Ke.invalid=Ln;function jt(t,s){var a=t&&parseFloat(t.replace(",","."));return(isNaN(a)?0:a)*s}function Sa(t,s){var a={};return a.months=s.month()-t.month()+(s.year()-t.year())*12,t.clone().add(a.months,"M").isAfter(s)&&--a.months,a.milliseconds=+s-+t.clone().add(a.months,"M"),a}function Qn(t,s){var a;return t.isValid()&&s.isValid()?(s=Zs(s,t),t.isBefore(s)?a=Sa(t,s):(a=Sa(s,t),a.milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}function Ca(t,s){return function(a,r){var d,p;return r!==null&&!isNaN(+r)&&(z(s,"moment()."+s+"(period, number) is deprecated. Please use moment()."+s+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),p=a,a=r,r=p),d=Ke(a,r),Da(this,d,t),this}}function Da(t,s,a,r){var d=s._milliseconds,p=Xs(s._days),S=Xs(s._months);t.isValid()&&(r=r??!0,S&&Le(t,wt(t,"Month")+S*a),p&&cs(t,"Date",wt(t,"Date")+p*a),d&&t._d.setTime(t._d.valueOf()+d*a),r&&i.updateOffset(t,p||S))}var ei=Ca(1,"add"),ti=Ca(-1,"subtract");function Ma(t){return typeof t=="string"||t instanceof String}function si(t){return O(t)||y(t)||Ma(t)||c(t)||ri(t)||ai(t)||t===null||t===void 0}function ai(t){var s=f(t)&&!g(t),a=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],d,p,S=r.length;for(d=0;d<S;d+=1)p=r[d],a=a||x(t,p);return s&&a}function ri(t){var s=h(t),a=!1;return s&&(a=t.filter(function(r){return!c(r)&&Ma(t)}).length===0),s&&a}function ni(t){var s=f(t)&&!g(t),a=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],d,p;for(d=0;d<r.length;d+=1)p=r[d],a=a||x(t,p);return s&&a}function ii(t,s){var a=t.diff(s,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function li(t,s){arguments.length===1&&(arguments[0]?si(arguments[0])?(t=arguments[0],s=void 0):ni(arguments[0])&&(s=arguments[0],t=void 0):(t=void 0,s=void 0));var a=t||fe(),r=Zs(a,this).startOf("day"),d=i.calendarFormat(this,r)||"sameElse",p=s&&(L(s[d])?s[d].call(this,a):s[d]);return this.format(p||this.localeData().calendar(d,this,fe(a)))}function oi(){return new H(this)}function ci(t,s){var a=O(t)?t:fe(t);return this.isValid()&&a.isValid()?(s=Ce(s)||"millisecond",s==="millisecond"?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(s).valueOf()):!1}function di(t,s){var a=O(t)?t:fe(t);return this.isValid()&&a.isValid()?(s=Ce(s)||"millisecond",s==="millisecond"?this.valueOf()<a.valueOf():this.clone().endOf(s).valueOf()<a.valueOf()):!1}function ui(t,s,a,r){var d=O(t)?t:fe(t),p=O(s)?s:fe(s);return this.isValid()&&d.isValid()&&p.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(d,a):!this.isBefore(d,a))&&(r[1]===")"?this.isBefore(p,a):!this.isAfter(p,a))):!1}function hi(t,s){var a=O(t)?t:fe(t),r;return this.isValid()&&a.isValid()?(s=Ce(s)||"millisecond",s==="millisecond"?this.valueOf()===a.valueOf():(r=a.valueOf(),this.clone().startOf(s).valueOf()<=r&&r<=this.clone().endOf(s).valueOf())):!1}function mi(t,s){return this.isSame(t,s)||this.isAfter(t,s)}function fi(t,s){return this.isSame(t,s)||this.isBefore(t,s)}function xi(t,s,a){var r,d,p;if(!this.isValid())return NaN;if(r=Zs(t,this),!r.isValid())return NaN;switch(d=(r.utcOffset()-this.utcOffset())*6e4,s=Ce(s),s){case"year":p=ps(this,r)/12;break;case"month":p=ps(this,r);break;case"quarter":p=ps(this,r)/3;break;case"second":p=(this-r)/1e3;break;case"minute":p=(this-r)/6e4;break;case"hour":p=(this-r)/36e5;break;case"day":p=(this-r-d)/864e5;break;case"week":p=(this-r-d)/6048e5;break;default:p=this-r}return a?p:Ae(p)}function ps(t,s){if(t.date()<s.date())return-ps(s,t);var a=(s.year()-t.year())*12+(s.month()-t.month()),r=t.clone().add(a,"months"),d,p;return s-r<0?(d=t.clone().add(a-1,"months"),p=(s-r)/(r-d)):(d=t.clone().add(a+1,"months"),p=(s-r)/(d-r)),-(a+p)||0}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function gi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function pi(t){if(!this.isValid())return null;var s=t!==!0,a=s?this.clone().utc():this;return a.year()<0||a.year()>9999?de(a,s?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):L(Date.prototype.toISOString)?s?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",de(a,"Z")):de(a,s?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function yi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",s="",a,r,d,p;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",s="Z"),a="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",d="-MM-DD[T]HH:mm:ss.SSS",p=s+'[")]',this.format(a+r+d+p)}function bi(t){t||(t=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var s=de(this,t);return this.localeData().postformat(s)}function vi(t,s){return this.isValid()&&(O(t)&&t.isValid()||fe(t).isValid())?Ke({to:this,from:t}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function wi(t){return this.from(fe(),t)}function ji(t,s){return this.isValid()&&(O(t)&&t.isValid()||fe(t).isValid())?Ke({from:this,to:t}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function Ni(t){return this.to(fe(),t)}function Ta(t){var s;return t===void 0?this._locale._abbr:(s=rt(t),s!=null&&(this._locale=s),this)}var Pa=$("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Ea(){return this._locale}var ys=1e3,Lt=60*ys,bs=60*Lt,Ya=(365*400+97)*24*bs;function Rt(t,s){return(t%s+s)%s}function Ia(t,s,a){return t<100&&t>=0?new Date(t+400,s,a)-Ya:new Date(t,s,a).valueOf()}function Oa(t,s,a){return t<100&&t>=0?Date.UTC(t+400,s,a)-Ya:Date.UTC(t,s,a)}function ki(t){var s,a;if(t=Ce(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?Oa:Ia,t){case"year":s=a(this.year(),0,1);break;case"quarter":s=a(this.year(),this.month()-this.month()%3,1);break;case"month":s=a(this.year(),this.month(),1);break;case"week":s=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":s=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":s=a(this.year(),this.month(),this.date());break;case"hour":s=this._d.valueOf(),s-=Rt(s+(this._isUTC?0:this.utcOffset()*Lt),bs);break;case"minute":s=this._d.valueOf(),s-=Rt(s,Lt);break;case"second":s=this._d.valueOf(),s-=Rt(s,ys);break}return this._d.setTime(s),i.updateOffset(this,!0),this}function _i(t){var s,a;if(t=Ce(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?Oa:Ia,t){case"year":s=a(this.year()+1,0,1)-1;break;case"quarter":s=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":s=a(this.year(),this.month()+1,1)-1;break;case"week":s=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":s=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":s=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":s=this._d.valueOf(),s+=bs-Rt(s+(this._isUTC?0:this.utcOffset()*Lt),bs)-1;break;case"minute":s=this._d.valueOf(),s+=Lt-Rt(s,Lt)-1;break;case"second":s=this._d.valueOf(),s+=ys-Rt(s,ys)-1;break}return this._d.setTime(s),i.updateOffset(this,!0),this}function Si(){return this._d.valueOf()-(this._offset||0)*6e4}function Ci(){return Math.floor(this.valueOf()/1e3)}function Di(){return new Date(this.valueOf())}function Mi(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Ti(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Pi(){return this.isValid()?this.toISOString():null}function Ei(){return P(this)}function Yi(){return j({},w(this))}function Ii(){return w(this).overflow}function Oi(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}T("N",0,0,"eraAbbr"),T("NN",0,0,"eraAbbr"),T("NNN",0,0,"eraAbbr"),T("NNNN",0,0,"eraName"),T("NNNNN",0,0,"eraNarrow"),T("y",["y",1],"yo","eraYear"),T("y",["yy",2],0,"eraYear"),T("y",["yyy",3],0,"eraYear"),T("y",["yyyy",4],0,"eraYear"),B("N",Qs),B("NN",Qs),B("NNN",Qs),B("NNNN",Wi),B("NNNNN",Gi),ce(["N","NN","NNN","NNNN","NNNNN"],function(t,s,a,r){var d=a._locale.erasParse(t,r,a._strict);d?w(a).era=d:w(a).invalidEra=t}),B("y",st),B("yy",st),B("yyy",st),B("yyyy",st),B("yo",qi),ce(["y","yy","yyy","yyyy"],Ne),ce(["yo"],function(t,s,a,r){var d;a._locale._eraYearOrdinalRegex&&(d=t.match(a._locale._eraYearOrdinalRegex)),a._locale.eraYearOrdinalParse?s[Ne]=a._locale.eraYearOrdinalParse(t,d):s[Ne]=parseInt(t,10)});function Fi(t,s){var a,r,d,p=this._eras||rt("en")._eras;for(a=0,r=p.length;a<r;++a){switch(typeof p[a].since){case"string":d=i(p[a].since).startOf("day"),p[a].since=d.valueOf();break}switch(typeof p[a].until){case"undefined":p[a].until=1/0;break;case"string":d=i(p[a].until).startOf("day").valueOf(),p[a].until=d.valueOf();break}}return p}function Ai(t,s,a){var r,d,p=this.eras(),S,G,J;for(t=t.toUpperCase(),r=0,d=p.length;r<d;++r)if(S=p[r].name.toUpperCase(),G=p[r].abbr.toUpperCase(),J=p[r].narrow.toUpperCase(),a)switch(s){case"N":case"NN":case"NNN":if(G===t)return p[r];break;case"NNNN":if(S===t)return p[r];break;case"NNNNN":if(J===t)return p[r];break}else if([S,G,J].indexOf(t)>=0)return p[r]}function Li(t,s){var a=t.since<=t.until?1:-1;return s===void 0?i(t.since).year():i(t.since).year()+(s-t.offset)*a}function Ri(){var t,s,a,r=this.localeData().eras();for(t=0,s=r.length;t<s;++t)if(a=this.clone().startOf("day").valueOf(),r[t].since<=a&&a<=r[t].until||r[t].until<=a&&a<=r[t].since)return r[t].name;return""}function $i(){var t,s,a,r=this.localeData().eras();for(t=0,s=r.length;t<s;++t)if(a=this.clone().startOf("day").valueOf(),r[t].since<=a&&a<=r[t].until||r[t].until<=a&&a<=r[t].since)return r[t].narrow;return""}function Vi(){var t,s,a,r=this.localeData().eras();for(t=0,s=r.length;t<s;++t)if(a=this.clone().startOf("day").valueOf(),r[t].since<=a&&a<=r[t].until||r[t].until<=a&&a<=r[t].since)return r[t].abbr;return""}function Hi(){var t,s,a,r,d=this.localeData().eras();for(t=0,s=d.length;t<s;++t)if(a=d[t].since<=d[t].until?1:-1,r=this.clone().startOf("day").valueOf(),d[t].since<=r&&r<=d[t].until||d[t].until<=r&&r<=d[t].since)return(this.year()-i(d[t].since).year())*a+d[t].offset;return this.year()}function zi(t){return x(this,"_erasNameRegex")||ea.call(this),t?this._erasNameRegex:this._erasRegex}function Ui(t){return x(this,"_erasAbbrRegex")||ea.call(this),t?this._erasAbbrRegex:this._erasRegex}function Bi(t){return x(this,"_erasNarrowRegex")||ea.call(this),t?this._erasNarrowRegex:this._erasRegex}function Qs(t,s){return s.erasAbbrRegex(t)}function Wi(t,s){return s.erasNameRegex(t)}function Gi(t,s){return s.erasNarrowRegex(t)}function qi(t,s){return s._eraYearOrdinalRegex||st}function ea(){var t=[],s=[],a=[],r=[],d,p,S,G,J,re=this.eras();for(d=0,p=re.length;d<p;++d)S=Ge(re[d].name),G=Ge(re[d].abbr),J=Ge(re[d].narrow),s.push(S),t.push(G),a.push(J),r.push(S),r.push(G),r.push(J);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}T(0,["gg",2],0,function(){return this.weekYear()%100}),T(0,["GG",2],0,function(){return this.isoWeekYear()%100});function vs(t,s){T(0,[t,t.length],0,s)}vs("gggg","weekYear"),vs("ggggg","weekYear"),vs("GGGG","isoWeekYear"),vs("GGGGG","isoWeekYear"),B("G",Et),B("g",Et),B("GG",he,Te),B("gg",he,Te),B("GGGG",Wt,Bt),B("gggg",Wt,Bt),B("GGGGG",Pt,Tt),B("ggggg",Pt,Tt),mt(["gggg","ggggg","GGGG","GGGGG"],function(t,s,a,r){s[r.substr(0,2)]=ae(t)}),mt(["gg","GG"],function(t,s,a,r){s[r]=i.parseTwoDigitYear(t)});function Xi(t){return Fa.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Ki(t){return Fa.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Zi(){return at(this.year(),1,4)}function Ji(){return at(this.isoWeekYear(),1,4)}function Qi(){var t=this.localeData()._week;return at(this.year(),t.dow,t.doy)}function el(){var t=this.localeData()._week;return at(this.weekYear(),t.dow,t.doy)}function Fa(t,s,a,r,d){var p;return t==null?Zt(this,r,d).year:(p=at(t,r,d),s>p&&(s=p),tl.call(this,t,s,a,r,d))}function tl(t,s,a,r,d){var p=ma(t,s,a,r,d),S=Kt(p.year,0,p.dayOfYear);return this.year(S.getUTCFullYear()),this.month(S.getUTCMonth()),this.date(S.getUTCDate()),this}T("Q",0,"Qo","quarter"),B("Q",Mt),ce("Q",function(t,s){s[qe]=(ae(t)-1)*3});function sl(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}T("D",["DD",2],"Do","date"),B("D",he,ht),B("DD",he,Te),B("Do",function(t,s){return t?s._dayOfMonthOrdinalParse||s._ordinalParse:s._dayOfMonthOrdinalParseLenient}),ce(["D","DD"],Ve),ce("Do",function(t,s){s[Ve]=ae(t.match(he)[0])});var Aa=Be("Date",!0);T("DDD",["DDDD",3],"DDDo","dayOfYear"),B("DDD",tt),B("DDDD",Ut),ce(["DDD","DDDD"],function(t,s,a){a._dayOfYear=ae(t)});function al(t){var s=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?s:this.add(t-s,"d")}T("m",["mm",2],0,"minute"),B("m",he,Gt),B("mm",he,Te),ce(["m","mm"],He);var rl=Be("Minutes",!1);T("s",["ss",2],0,"second"),B("s",he,Gt),B("ss",he,Te),ce(["s","ss"],Xe);var nl=Be("Seconds",!1);T("S",0,0,function(){return~~(this.millisecond()/100)}),T(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),T(0,["SSS",3],0,"millisecond"),T(0,["SSSS",4],0,function(){return this.millisecond()*10}),T(0,["SSSSS",5],0,function(){return this.millisecond()*100}),T(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),T(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),T(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),T(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),B("S",tt,Mt),B("SS",tt,Te),B("SSS",tt,Ut);var gt,La;for(gt="SSSS";gt.length<=9;gt+="S")B(gt,st);function il(t,s){s[Pe]=ae(("0."+t)*1e3)}for(gt="S";gt.length<=9;gt+="S")ce(gt,il);La=Be("Milliseconds",!1),T("z",0,0,"zoneAbbr"),T("zz",0,0,"zoneName");function ll(){return this._isUTC?"UTC":""}function ol(){return this._isUTC?"Coordinated Universal Time":""}var A=H.prototype;A.add=ei,A.calendar=li,A.clone=oi,A.diff=xi,A.endOf=_i,A.format=bi,A.from=vi,A.fromNow=wi,A.to=ji,A.toNow=Ni,A.get=As,A.invalidAt=Ii,A.isAfter=ci,A.isBefore=di,A.isBetween=ui,A.isSame=hi,A.isSameOrAfter=mi,A.isSameOrBefore=fi,A.isValid=Ei,A.lang=Pa,A.locale=Ta,A.localeData=Ea,A.max=En,A.min=Pn,A.parsingFlags=Yi,A.set=Ls,A.startOf=ki,A.subtract=ti,A.toArray=Mi,A.toObject=Ti,A.toDate=Di,A.toISOString=pi,A.inspect=yi,typeof Symbol<"u"&&Symbol.for!=null&&(A[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),A.toJSON=Pi,A.toString=gi,A.unix=Ci,A.valueOf=Si,A.creationData=Oi,A.eraName=Ri,A.eraNarrow=$i,A.eraAbbr=Vi,A.eraYear=Hi,A.year=qt,A.isLeapYear=os,A.weekYear=Xi,A.isoWeekYear=Ki,A.quarter=A.quarters=sl,A.month=ft,A.daysInMonth=Re,A.week=A.weeks=Or,A.isoWeek=A.isoWeeks=Fr,A.weeksInYear=Qi,A.weeksInWeekYear=el,A.isoWeeksInYear=Zi,A.isoWeeksInISOWeekYear=Ji,A.date=Aa,A.day=A.days=Xr,A.weekday=Kr,A.isoWeekday=Zr,A.dayOfYear=al,A.hour=A.hours=rn,A.minute=A.minutes=rl,A.second=A.seconds=nl,A.millisecond=A.milliseconds=La,A.utcOffset=Vn,A.utc=zn,A.local=Un,A.parseZone=Bn,A.hasAlignedHourOffset=Wn,A.isDST=Gn,A.isLocal=Xn,A.isUtcOffset=Kn,A.isUtc=_a,A.isUTC=_a,A.zoneAbbr=ll,A.zoneName=ol,A.dates=$("dates accessor is deprecated. Use date instead.",Aa),A.months=$("months accessor is deprecated. Use month instead",ft),A.years=$("years accessor is deprecated. Use year instead",qt),A.zone=$("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Hn),A.isDSTShifted=$("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",qn);function cl(t){return fe(t*1e3)}function dl(){return fe.apply(null,arguments).parseZone()}function Ra(t){return t}var le=ee.prototype;le.calendar=xe,le.longDateFormat=X,le.invalidDate=ge,le.ordinal=Fe,le.preparse=Ra,le.postformat=Ra,le.relativeTime=Me,le.pastFuture=Ct,le.set=Q,le.eras=Fi,le.erasParse=Ai,le.erasConvertYear=Li,le.erasAbbrRegex=Ui,le.erasNameRegex=zi,le.erasNarrowRegex=Bi,le.months=Ee,le.monthsShort=ve,le.monthsParse=et,le.monthsRegex=us,le.monthsShortRegex=Ft,le.week=Pr,le.firstDayOfYear=Ir,le.firstDayOfWeek=Yr,le.weekdays=Ur,le.weekdaysMin=Wr,le.weekdaysShort=Br,le.weekdaysParse=qr,le.weekdaysRegex=Jr,le.weekdaysShortRegex=Qr,le.weekdaysMinRegex=en,le.isPM=sn,le.meridiem=nn;function ws(t,s,a,r){var d=rt(),p=_().set(r,s);return d[a](p,t)}function $a(t,s,a){if(c(t)&&(s=t,t=void 0),t=t||"",s!=null)return ws(t,s,a,"month");var r,d=[];for(r=0;r<12;r++)d[r]=ws(t,r,a,"month");return d}function ta(t,s,a,r){typeof t=="boolean"?(c(s)&&(a=s,s=void 0),s=s||""):(s=t,a=s,t=!1,c(s)&&(a=s,s=void 0),s=s||"");var d=rt(),p=t?d._week.dow:0,S,G=[];if(a!=null)return ws(s,(a+p)%7,r,"day");for(S=0;S<7;S++)G[S]=ws(s,(S+p)%7,r,"day");return G}function ul(t,s){return $a(t,s,"months")}function hl(t,s){return $a(t,s,"monthsShort")}function ml(t,s,a){return ta(t,s,a,"weekdays")}function fl(t,s,a){return ta(t,s,a,"weekdaysShort")}function xl(t,s,a){return ta(t,s,a,"weekdaysMin")}xt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var s=t%10,a=ae(t%100/10)===1?"th":s===1?"st":s===2?"nd":s===3?"rd":"th";return t+a}}),i.lang=$("moment.lang is deprecated. Use moment.locale instead.",xt),i.langData=$("moment.langData is deprecated. Use moment.localeData instead.",rt);var nt=Math.abs;function gl(){var t=this._data;return this._milliseconds=nt(this._milliseconds),this._days=nt(this._days),this._months=nt(this._months),t.milliseconds=nt(t.milliseconds),t.seconds=nt(t.seconds),t.minutes=nt(t.minutes),t.hours=nt(t.hours),t.months=nt(t.months),t.years=nt(t.years),this}function Va(t,s,a,r){var d=Ke(s,a);return t._milliseconds+=r*d._milliseconds,t._days+=r*d._days,t._months+=r*d._months,t._bubble()}function pl(t,s){return Va(this,t,s,1)}function yl(t,s){return Va(this,t,s,-1)}function Ha(t){return t<0?Math.floor(t):Math.ceil(t)}function bl(){var t=this._milliseconds,s=this._days,a=this._months,r=this._data,d,p,S,G,J;return t>=0&&s>=0&&a>=0||t<=0&&s<=0&&a<=0||(t+=Ha(sa(a)+s)*864e5,s=0,a=0),r.milliseconds=t%1e3,d=Ae(t/1e3),r.seconds=d%60,p=Ae(d/60),r.minutes=p%60,S=Ae(p/60),r.hours=S%24,s+=Ae(S/24),J=Ae(za(s)),a+=J,s-=Ha(sa(J)),G=Ae(a/12),a%=12,r.days=s,r.months=a,r.years=G,this}function za(t){return t*4800/146097}function sa(t){return t*146097/4800}function vl(t){if(!this.isValid())return NaN;var s,a,r=this._milliseconds;if(t=Ce(t),t==="month"||t==="quarter"||t==="year")switch(s=this._days+r/864e5,a=this._months+za(s),t){case"month":return a;case"quarter":return a/3;case"year":return a/12}else switch(s=this._days+Math.round(sa(this._months)),t){case"week":return s/7+r/6048e5;case"day":return s+r/864e5;case"hour":return s*24+r/36e5;case"minute":return s*1440+r/6e4;case"second":return s*86400+r/1e3;case"millisecond":return Math.floor(s*864e5)+r;default:throw new Error("Unknown unit "+t)}}function it(t){return function(){return this.as(t)}}var Ua=it("ms"),wl=it("s"),jl=it("m"),Nl=it("h"),kl=it("d"),_l=it("w"),Sl=it("M"),Cl=it("Q"),Dl=it("y"),Ml=Ua;function Tl(){return Ke(this)}function Pl(t){return t=Ce(t),this.isValid()?this[t+"s"]():NaN}function Nt(t){return function(){return this.isValid()?this._data[t]:NaN}}var El=Nt("milliseconds"),Yl=Nt("seconds"),Il=Nt("minutes"),Ol=Nt("hours"),Fl=Nt("days"),Al=Nt("months"),Ll=Nt("years");function Rl(){return Ae(this.days()/7)}var lt=Math.round,$t={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function $l(t,s,a,r,d){return d.relativeTime(s||1,!!a,t,r)}function Vl(t,s,a,r){var d=Ke(t).abs(),p=lt(d.as("s")),S=lt(d.as("m")),G=lt(d.as("h")),J=lt(d.as("d")),re=lt(d.as("M")),Ie=lt(d.as("w")),ot=lt(d.as("y")),pt=p<=a.ss&&["s",p]||p<a.s&&["ss",p]||S<=1&&["m"]||S<a.m&&["mm",S]||G<=1&&["h"]||G<a.h&&["hh",G]||J<=1&&["d"]||J<a.d&&["dd",J];return a.w!=null&&(pt=pt||Ie<=1&&["w"]||Ie<a.w&&["ww",Ie]),pt=pt||re<=1&&["M"]||re<a.M&&["MM",re]||ot<=1&&["y"]||["yy",ot],pt[2]=s,pt[3]=+t>0,pt[4]=r,$l.apply(null,pt)}function Hl(t){return t===void 0?lt:typeof t=="function"?(lt=t,!0):!1}function zl(t,s){return $t[t]===void 0?!1:s===void 0?$t[t]:($t[t]=s,t==="s"&&($t.ss=s-1),!0)}function Ul(t,s){if(!this.isValid())return this.localeData().invalidDate();var a=!1,r=$t,d,p;return typeof t=="object"&&(s=t,t=!1),typeof t=="boolean"&&(a=t),typeof s=="object"&&(r=Object.assign({},$t,s),s.s!=null&&s.ss==null&&(r.ss=s.s-1)),d=this.localeData(),p=Vl(this,!a,r,d),a&&(p=d.pastFuture(+this,p)),d.postformat(p)}var aa=Math.abs;function Vt(t){return(t>0)-(t<0)||+t}function js(){if(!this.isValid())return this.localeData().invalidDate();var t=aa(this._milliseconds)/1e3,s=aa(this._days),a=aa(this._months),r,d,p,S,G=this.asSeconds(),J,re,Ie,ot;return G?(r=Ae(t/60),d=Ae(r/60),t%=60,r%=60,p=Ae(a/12),a%=12,S=t?t.toFixed(3).replace(/\.?0+$/,""):"",J=G<0?"-":"",re=Vt(this._months)!==Vt(G)?"-":"",Ie=Vt(this._days)!==Vt(G)?"-":"",ot=Vt(this._milliseconds)!==Vt(G)?"-":"",J+"P"+(p?re+p+"Y":"")+(a?re+a+"M":"")+(s?Ie+s+"D":"")+(d||r||t?"T":"")+(d?ot+d+"H":"")+(r?ot+r+"M":"")+(t?ot+S+"S":"")):"P0D"}var ne=xs.prototype;ne.isValid=An,ne.abs=gl,ne.add=pl,ne.subtract=yl,ne.as=vl,ne.asMilliseconds=Ua,ne.asSeconds=wl,ne.asMinutes=jl,ne.asHours=Nl,ne.asDays=kl,ne.asWeeks=_l,ne.asMonths=Sl,ne.asQuarters=Cl,ne.asYears=Dl,ne.valueOf=Ml,ne._bubble=bl,ne.clone=Tl,ne.get=Pl,ne.milliseconds=El,ne.seconds=Yl,ne.minutes=Il,ne.hours=Ol,ne.days=Fl,ne.weeks=Rl,ne.months=Al,ne.years=Ll,ne.humanize=Ul,ne.toISOString=js,ne.toString=js,ne.toJSON=js,ne.locale=Ta,ne.localeData=Ea,ne.toIsoString=$("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",js),ne.lang=Pa,T("X",0,0,"unix"),T("x",0,0,"valueOf"),B("x",Et),B("X",Es),ce("X",function(t,s,a){a._d=new Date(parseFloat(t)*1e3)}),ce("x",function(t,s,a){a._d=new Date(ae(t))});//! moment.js
return i.version="2.30.1",u(fe),i.fn=A,i.min=Yn,i.max=In,i.now=On,i.utc=_,i.unix=cl,i.months=ul,i.isDate=y,i.locale=xt,i.invalid=C,i.duration=Ke,i.isMoment=O,i.weekdays=ml,i.parseZone=dl,i.localeData=rt,i.isDuration=gs,i.monthsShort=hl,i.weekdaysMin=xl,i.defineLocale=Us,i.updateLocale=dn,i.locales=un,i.weekdaysShort=fl,i.normalizeUnits=Ce,i.relativeTimeRounding=Hl,i.relativeTimeThreshold=zl,i.calendarFormat=ii,i.prototype=A,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i})}(ra)),ra.exports}(function(n,l){(function(o,i){i(typeof ir=="function"?Zl():o.moment)})(nr,function(o){//! moment.js locale configuration
var i=o.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(u){return/^ch$/i.test(u)},meridiem:function(u,h,f){return u<12?f?"sa":"SA":f?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun trc lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",w:"mt tun",ww:"%d tun",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(u){return u},week:{dow:1,doy:4}});return i})})();const Jl=n=>{if(!n||typeof n!="string")return{className:"status-default",icon:"fa-question-circle",pulse:!1};const l=n.toLowerCase().trim().normalize("NFC");switch(l){case" hy":case" hy (ui)":return{className:"status-da-huy",icon:"fa-times-circle",pulse:!1};case"t chi ycvc":return{className:"status-tu-choi-ycvc",icon:"fa-ban",pulse:!1};case"cha ghp":case"cha tm thy vin":return{className:"status-chua-ghep",icon:"fa-check-circle",pulse:!1};case"ch ph duyt":return{className:"status-cho-phe-duyet",icon:"fa-hourglass-half",pulse:!1};case"ch k ha n":case"ch ky hoa n":return{className:"status-cho-ky-hoa-don",icon:"fa-file-signature",pulse:!1};case"ch duyt ycvc":return{className:"status-cho-duyet-ycvc",icon:"fa-user-clock",pulse:!1};case"ch check-in":return{className:"status-cho-check-in",icon:"fa-calendar-check",pulse:!1};case"yu cu b sung":return{className:"status-yeu-cau-bo-sung",icon:"fa-exclamation-circle",pulse:!0};case"ch xc thc vc (tvbh)":return{className:"status-cho-xac-thuc-vc",icon:"fa-exclamation-circle",pulse:!0};case"ang gi":return{className:"status-dang-giu",icon:"fa-lock",pulse:!1};case"ang li th":return{className:"status-dang-lai-thu",icon:"fa-car-side",pulse:!1};case" ghp":return{className:"status-da-ghep",icon:"fa-link",pulse:!1};case" b sung":return{className:"status-da-bo-sung",icon:"fa-plus-circle",pulse:!1};case" ph duyt":return{className:"status-da-phe-duyet",icon:"fa-check",pulse:!1};case" xut ha n":return{className:"status-da-xuat-hoa-don",icon:"fa-check-double",pulse:!1};case"yu cu vinclub":return{className:"status-yeu-cau-vinclub",icon:"fa-star",pulse:!1};case" c vc":return{className:"status-da-co-vc",icon:"fa-star-half-alt",pulse:!1};case" hon tt":return{className:"status-da-hoan-tat",icon:"fa-flag-checkered",pulse:!1};default:return l.startsWith("vpas")||/^[a-z0-9]{17}$/.test(l)?{className:"status-san-sang",icon:"fa-car",pulse:!1}:{className:"status-default",icon:"fa-question-circle",pulse:!1}}},lr=({status:n,size:l="md"})=>{const{className:o,icon:i,pulse:u}=Jl(n),h=l==="sm"?"text-[10px] px-1.5 py-0.5":"";return e.jsxs("div",{className:`status-badge ${o} ${u?"pulse-icon":""} ${h}`,children:[e.jsx("span",{className:"badge-icon",children:e.jsx("i",{className:`fas ${i}`})}),e.jsx("span",{className:"badge-text truncate",children:n})]})},or=n=>{const o={textShadow:"0 0 4px rgba(0,0,0,0.8)"};if(!n)return{};const i=n.toLowerCase().trim();return i==="brahminy white (ce18)"?{color:"white",...o}:i.includes("sunset orb (ce1a)")?{color:"var(--exterior-orange-text)"}:i.includes("crimson red (ce1m)")?{color:"var(--exterior-red-text)"}:i.includes("vinfast blue (ce1n)")?{color:"var(--exterior-blue-text)"}:i.includes("neptune grey (ce14)")?{color:"#778899"}:i.includes("jet black (ce11)")?{color:"black"}:i.includes("electric blue (ce1j)")?{color:"var(--exterior-blue-text)"}:i.includes("zenith grey (ce1v)")?{color:"#B0C4DE"}:i.includes("jet black roof- summer yellow body (111u)")?{color:"var(--exterior-yellow-text)"}:i.includes("brahminy white roof- aquatic azure body (181y)")?{color:"var(--exterior-blue-text)"}:i.includes("brahminy white roof- rose pink body (1821)")?{color:"var(--exterior-pink-text)"}:i.includes("brahminy white roof - iris berry body (181x)")?{color:"var(--exterior-pink-text)"}:i.includes("urbant mint (ce1w)")?{color:"#3CB371"}:i.includes("vinbus green (ce2b)")?{color:"var(--exterior-green-text)"}:i.includes("deep ocean (ce1h)")?{color:"#006400"}:i.includes("iris berry (ce1x)")?{color:"var(--exterior-pink-text)"}:i.includes("zenith grey-desat silver roof (171v)")?{color:"var(--exterior-grey-text)"}:i.includes("urbant mint green - desat silv (171w)")?{color:"var(--exterior-green-text)"}:i.includes("ivy green-desat silver roof (1722)")?{color:"var(--exterior-green-text)"}:i.includes("atlantic blue-aquatic azure ro (1y26)")?{color:"var(--exterior-blue-text)"}:i.includes("jet black-champagne creme roof (2311)")?{color:"white",...o}:i.includes("infinity blanc _ silky white r (2418)")?{color:"var(--exterior-white-text)"}:i.includes("champagne creme - matte champa (2523)")?{color:"var(--exterior-yellow-text)"}:i.includes("jet black - graphite roof (2811)")?{color:"white",...o}:i.includes("crimson velvet - mystery bronz (2927)")?{color:"var(--exterior-red-text)"}:i.includes("ivy_green_gne (ce22)")?{color:"var(--exterior-green-text)"}:i.includes("champagne_creme_ylg (ce23)")?{color:"var(--exterior-yellow-text)"}:i.includes("crimson red - jet black roof (111m)")?{color:"var(--exterior-red-text)"}:i.includes("infinity blanc_zenith grey roof (1v18)")?{color:"var(--exterior-white-text)"}:i.includes("deep ocean_jet black roof (111h)")?{color:"white",...o}:i.includes("alantic blue_denim blue roof (2a26)")?{color:"var(--exterior-blue-text)"}:i.includes("jet black_mystery bronze roof (2911)")?{color:"white",...o}:i.includes("champagne creme_infinity blanc roof (1823)")?{color:"var(--exterior-yellow-text)"}:i.includes("de sat silver ind12007 (ce17)")?{color:"var(--exterior-grey-text)"}:i.includes("crimson red")||i.includes("crimson velvet")?{color:"var(--exterior-red-text)"}:i.includes("rose pink")||i.includes("iris berry")?{color:"var(--exterior-pink-text)"}:i.includes("vinfast blue")||i.includes("electric blue")||i.includes("atlantic blue")||i.includes("aquatic azure")||i.includes("alantic blue")?{color:"var(--exterior-blue-text)"}:i.includes("deep ocean")?{color:"white",...o}:i.includes("sunset orb")?{color:"var(--exterior-orange-text)"}:i.includes("summer yellow")||i.includes("champagne creme")||i.includes("champagne_creme_ylg")?{color:"var(--exterior-yellow-text)"}:i.includes("urbant mint")||i.includes("vinbus green")||i.includes("ivy green")||i.includes("ivy_green_gne")?{color:"var(--exterior-green-text)"}:i.includes("jet black")?{color:"white",...o}:i.includes("brahminy white")||i.includes("infinity blanc")?{color:"var(--exterior-white-text)"}:i.includes("neptune grey")||i.includes("zenith grey")||i.includes("de sat silver")||i.includes("graphite")?{color:"var(--exterior-grey-text)"}:i.includes("mystery bronz")?{color:"var(--exterior-bronze-text)"}:{}},Ql=n=>{if(!n)return{};const l=n.toLowerCase().trim();return l.includes("black")?{color:"#1F2937"}:l.includes("brown")?{color:"#78350F"}:l.includes("beige")?{color:"#B45309"}:{}},cr={"VF 3":"vf3","VF 5":"vf5","VF 6":"vf6","VF 7":"vf7","VF 8":"vf8","VF 9":"vf9","EC Van":"ecvan"},qa={red:"red",white:"white",blanc:"white",grey:"grey",gray:"grey",black:"black",blue:"blue",orange:"orange",orb:"orange",green:"green",mint:"green",pink:"pink",berry:"pink",yellow:"yellow",zenith:"zenith","deep ocean":"deepocean"},eo=(n,l)=>{const o=n?cr[n]||n.toLowerCase().replace(/\s+/g,""):"default",i=(l==null?void 0:l.toLowerCase())||"",u="/ordermanagement/",h=i.match(/\(([^)]+)\)/);if(h&&h[1]){const g=h[1].trim().toLowerCase();if(g)return`${u}pictures/${o}-${g}.webp`}let f="";const x=Object.keys(qa).sort((g,b)=>b.length-g.length);for(const g of x)if(i.includes(g)){f=qa[g];break}return f?`${u}pictures/${o}-${f}.webp`:dr(n)},dr=n=>{const l="/ordermanagement/",o=n?cr[n]||n.toLowerCase().replace(/\s+/g,""):"default";return`${l}pictures/${o}-default.webp`},to=()=>"/ordermanagement/pictures/default.webp",na=["#ef4444","#f97316","#eab308","#84cc16","#22c55e","#10b981","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e"],so=n=>{if(!n)return na[0];let l=0;for(let i=0;i<n.length;i++)l=n.charCodeAt(i)+((l<<5)-l),l=l&l;const o=Math.abs(l%na.length);return na[o]},ut=()=>({}),da=({model:n,exteriorColor:l,className:o,alt:i})=>{const u=eo(n,l),h=dr(n),f=to(),[x,g]=m.useState(u);m.useEffect(()=>{g(u)},[u]);const b=()=>{x===u?(console.warn(`[CarImage] Failed to load primary: ${u}. Trying model fallback: ${h}`),g(h)):x===h?(console.warn(`[CarImage] Failed to load model fallback: ${h}. Trying global fallback: ${f}`),g(f)):console.error(`[CarImage] All fallbacks failed. Last attempted: ${x}`)};return e.jsx("img",{src:x,onError:b,className:o,alt:i||`Image of ${n} in ${l}`,loading:"lazy",draggable:"false"})},K=({children:n,variant:l="primary",size:o="md",isLoading:i=!1,leftIcon:u,rightIcon:h,fullWidth:f=!1,className:x="",disabled:g,...b})=>{const c="inline-flex items-center justify-center rounded-xl font-semibold transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed disabled:shadow-none active:scale-[0.98]",y={primary:"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-[5px_5px_10px_rgba(59,130,246,0.3),-5px_-5px_10px_rgba(255,255,255,0.1)] hover:shadow-[7px_7px_14px_rgba(59,130,246,0.4),-7px_-7px_14px_rgba(255,255,255,0.2)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2),inset_-4px_-4px_8px_rgba(255,255,255,0.1)] border-none",secondary:"bg-[#f0f2f5] text-slate-700 shadow-[5px_5px_10px_#d1d5db,-5px_-5px_10px_#ffffff] hover:shadow-[7px_7px_14px_#d1d5db,-7px_-7px_14px_#ffffff] active:shadow-[inset_4px_4px_8px_#d1d5db,inset_-4px_-4px_8px_#ffffff] border-none",outline:"bg-transparent border-2 border-blue-500 text-blue-600 shadow-none hover:bg-blue-50 active:bg-blue-100",ghost:"bg-transparent text-slate-600 hover:bg-slate-100 hover:shadow-none active:bg-slate-200",danger:"bg-gradient-to-br from-red-500 to-red-600 text-white shadow-[5px_5px_10px_rgba(239,68,68,0.3),-5px_-5px_10px_rgba(255,255,255,0.1)] hover:shadow-[7px_7px_14px_rgba(239,68,68,0.4),-7px_-7px_14px_rgba(255,255,255,0.2)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2),inset_-4px_-4px_8px_rgba(255,255,255,0.1)] border-none",success:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-[5px_5px_10px_rgba(16,185,129,0.3),-5px_-5px_10px_rgba(255,255,255,0.1)] hover:shadow-[7px_7px_14px_rgba(16,185,129,0.4),-7px_-7px_14px_rgba(255,255,255,0.2)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2),inset_-4px_-4px_8px_rgba(255,255,255,0.1)] border-none"},N={sm:"text-xs px-3 py-1.5 h-8 gap-1.5",md:"text-sm px-4 py-2 h-10 gap-2",lg:"text-base px-6 py-2.5 h-12 gap-2.5"};return e.jsxs("button",{className:`
                ${c}
                ${y[l]}
                ${N[o]}
                ${f?"w-full":""}
                ${i?"cursor-wait opacity-80":""}
                ${x}
            `,disabled:g||i,...b,children:[i&&e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),!i&&u&&e.jsx("span",{className:"inline-flex",children:u}),n,!i&&h&&e.jsx("span",{className:"inline-flex",children:h})]})};Ye.locale("vi");const ia=n=>{if(!n)return"";const l=[Ye.ISO_8601,"DD/MM/YYYY HH:mm:ss","D/M/YYYY H:m:s","YYYY-MM-DD HH:mm:ss"],o=Ye(n,l,"vi",!0);return o.isValid()?o.format("HH:mm DD/MM/YYYY"):""},ts=({icon:n,label:l,value:o,children:i,valueClassName:u="",valueStyle:h})=>e.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-lg bg-red-100 border border-red-200",children:e.jsx("i",{className:`fas ${n} text-red-600 text-lg`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-text-secondary",children:l}),o&&e.jsx("p",{style:h,className:`text-text-primary font-bold break-words ${u}`,children:o}),i]})]}),Ns=({icon:n,label:l,value:o,isLast:i})=>e.jsxs("div",{className:"relative pl-0 md:pl-10 flex flex-row md:block items-center md:items-start gap-3 md:gap-0",children:[e.jsx("div",{className:"relative md:absolute top-0 left-0 flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 border border-red-200 flex items-center justify-center",children:e.jsx("i",{className:`fas ${n} text-red-600`})})}),!i&&e.jsx("div",{className:"hidden md:block absolute top-8 left-[15px] h-full w-px bg-border-secondary"}),e.jsxs("div",{className:"flex flex-col pb-0 md:pb-8",children:[e.jsx("p",{className:"text-xs text-text-secondary",children:l}),e.jsx("p",{className:"text-sm font-semibold text-text-primary break-words",children:o||""})]})]}),ao=({vin:n})=>{const[l,o]=m.useState(!1),i=u=>{u.stopPropagation();const h=document.createElement("textarea");h.value=n,document.body.appendChild(h),h.select();try{document.execCommand("copy"),o(!0),setTimeout(()=>o(!1),2e3)}catch(f){console.error("Khng th sao chp VIN:",f)}document.body.removeChild(h)};return e.jsxs("div",{className:"relative p-3 md:p-4 rounded-xl bg-gradient-to-br from-[#CBBACC] to-[#2580B3] shadow-lg group overflow-hidden cursor-pointer",onClick:i,title:"Click  sao chp VIN",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out pointer-events-none"}),e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("p",{className:"text-xs text-blue-200 uppercase tracking-widest",children:"S Khung (VIN)"}),e.jsx("p",{className:"text-white font-mono tracking-wider text-xl md:text-2xl break-all text-shadow-md font-bold",children:n})]}),e.jsx("button",{onClick:i,className:"absolute top-3 right-3 w-9 h-9 bg-white/10 rounded-full flex items-center justify-center text-blue-200 hover:bg-white/20 hover:text-white transition-all duration-200 z-20",title:"Sao chp VIN",children:e.jsx("i",{className:`fas transition-all ${l?"fa-check-circle text-green-400":"fa-copy"}`})})]})},ro=({order:n,onClose:l,orderList:o,onNavigate:i,onCancel:u,onRequestInvoice:h,onSupplement:f,onRequestVC:x,onConfirmVC:g,onEdit:b})=>{const c=ut(),[y,N]=m.useState(null),j=new Date>=new Date("2026-01-05T00:00:00"),_={modalBg:"#FFFBE6",borderColor:"#DA251D",headerBg:"#DA251D",headerText:"#FFCD00"},[D,w]=m.useState(null),[k,P]=m.useState(null);if(!n)return null;const C=(n["Kt qu"]||"cha ghp").toLowerCase().trim().normalize("NFC"),I=(n["Trng thi VC"]||"").toLowerCase().trim().normalize("NFC"),E=I||C,R=["cha ghp"," ghp"].includes(C),H=C===" ghp",O=C==="yu cu b sung",M=!!b&&![" xut ha n"," hy","ch k ha n"].includes(C),$=(C===" xut ha n"||I==="t chi ycvc")&&!["yu cu vinclub","ch duyt ycvc","ch xc thc vc (tvbh)"," c vc"].includes(I),V=E==="ch xc thc vc (tvbh)",z=!!n.LinkHoaDonDaXuat,L=async(Y,T)=>{N(Y);try{await T(n),l()}catch(U){console.error(U)}finally{N(null)}},Q=n["Trng thi VC"]||n["Kt qu"]||"Cha ghp",q=Q.toLowerCase().includes(" hy")||Q.toLowerCase().includes("t chi"),ee=o.findIndex(Y=>Y["S n hng"]===n["S n hng"]),ie=ee>0,oe=ee<o.length-1;let xe="";if(n["Thi gian ghp"]){const Y=[Ye.ISO_8601,"DD/MM/YYYY HH:mm:ss","D/M/YYYY H:m:s","YYYY-MM-DD HH:mm:ss"],T=Ye(n["Thi gian ghp"],Y,"vi",!0);if(T.isValid()){const U=Ye().startOf("day"),te=T.startOf("day"),de=U.diff(te,"days");xe=`${Math.max(0,de)} ngy`}}const W=50,Z=Y=>{P(null),w(Y.targetTouches[0].clientX)},F=Y=>{P(Y.targetTouches[0].clientX)},v=()=>{if(!D||!k)return;const Y=D-k,T=Y>W,U=Y<-W;T&&oe?i("next"):U&&ie&&i("prev")};return e.jsxs("div",{className:"fixed inset-0 bg-black/70 z-[60] flex items-center justify-center p-0 md:p-4 transition-opacity duration-300",onClick:l,children:[ie&&e.jsx("button",{onClick:Y=>{Y.stopPropagation(),i("prev")},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 text-white rounded-full flex items-center justify-center text-2xl hover:bg-white/40 transition-colors z-10 hidden md:flex",title:"Yu cu trc",children:e.jsx("i",{className:"fas fa-chevron-left"})}),e.jsxs("div",{className:"bg-surface-ground w-full md:max-w-5xl h-[100dvh] md:h-auto md:max-h-[85vh] rounded-none md:rounded-2xl shadow-2xl flex flex-col transition-all duration-300 transform scale-100 opacity-100 relative overflow-hidden",onClick:Y=>Y.stopPropagation(),style:{...c,backgroundColor:j?_.modalBg:void 0,border:j?`2px solid ${_.borderColor}`:void 0},onTouchStart:Z,onTouchMove:F,onTouchEnd:v,children:[e.jsxs("header",{className:"flex-shrink-0 flex items-start justify-between p-3 md:p-5 border-b border-border-primary relative z-10",style:j?{backgroundColor:_.headerBg,borderBottomColor:"#FFD700"}:{},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary",style:j?{color:_.headerText,textShadow:"1px 1px 2px rgba(0,0,0,0.3)"}:{},children:"Chi Tit Yu Cu"}),e.jsx("p",{className:"text-sm mt-1 font-mono text-text-secondary",style:j?{color:"#FFE4B5"}:{},children:n["S n hng"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(lr,{status:Q}),e.jsx("button",{onClick:l,className:"w-9 h-9 flex-shrink-0 rounded-full flex items-center justify-center transition-colors hover:bg-white/20 text-text-primary",style:j?{color:_.headerText}:{},"aria-label":"ng",children:e.jsx("i",{className:"fas fa-times text-xl"})})]})]}),e.jsxs("main",{className:"overflow-y-auto flex-grow min-h-0 p-3 md:p-6 grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 relative z-10",children:[e.jsxs("div",{className:"md:col-span-1 bg-surface-card p-5 rounded-lg border border-border-primary shadow-sm flex flex-col gap-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:block md:space-y-4",children:[e.jsx(ts,{icon:"fa-user-circle",label:"Tn khch hng",value:n["Tn khch hng"],valueClassName:"uppercase text-xs md:text-base"}),e.jsx(ts,{icon:"fa-user-tie",label:"T vn bn hng",value:n["Tn t vn bn hng"],valueClassName:"text-xs md:text-base"})]}),e.jsxs("div",{className:"border-t border-border-primary pt-6",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-4",children:"Mc Thi Gian"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:flex md:flex-col md:gap-0",children:[e.jsx(Ns,{icon:"fa-file-invoice-dollar",label:"Ngy cc",value:ia(n["Ngy cc"])}),e.jsx(Ns,{icon:"fa-paper-plane",label:"Ngy yu cu",value:ia(n["Thi gian nhp"])}),e.jsx(Ns,{icon:"fa-link",label:"Ngy ghp VIN",value:ia(n["Thi gian ghp"])}),e.jsx(Ns,{icon:"fa-hourglass-half",label:"S ngy  ghp",value:xe,isLast:!0})]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[q&&n["Ghi ch hy"]&&e.jsx("div",{className:"p-4 rounded-lg bg-danger-bg border border-danger/30",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-danger text-xl mr-4 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-danger",children:"Yu cu  b hy"}),e.jsxs("p",{className:"text-sm text-red-800 mt-1",children:["L do: ",n["Ghi ch hy"]]})]})]})}),n.VIN&&e.jsx(ao,{vin:n.VIN}),e.jsxs("div",{className:"bg-surface-card p-5 rounded-lg border border-border-primary shadow-sm",children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary mb-4",children:"Thng Tin Xe"}),e.jsx("div",{className:"flex items-center justify-center h-24 md:h-48 mb-4 rounded-lg p-2",children:e.jsx(da,{model:n["Dng xe"],exteriorColor:n["Ngoi tht"],className:"h-full w-auto object-contain",alt:n["Dng xe"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ts,{icon:"fa-car-side",label:"Dng xe & Phin bn",value:`${n["Dng xe"]} - ${n["Phin bn"]}`,valueClassName:"text-xs md:text-base"}),e.jsx(ts,{icon:"fa-palette",label:"Ngoi tht",value:n["Ngoi tht"],valueStyle:or(n["Ngoi tht"]),valueClassName:"text-xs md:text-base"}),e.jsx(ts,{icon:"fa-chair",label:"Ni tht",value:n["Ni tht"],valueStyle:Ql(n["Ni tht"]),valueClassName:"text-xs md:text-base"})]})]})]})]}),e.jsxs("footer",{className:"flex-shrink-0 flex items-center justify-end flex-wrap gap-2 md:gap-4 p-3 md:p-5 border-t border-red-200 bg-orange-50 rounded-b-2xl relative z-10",children:[e.jsx(K,{onClick:l,variant:"secondary",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",style:j?{backgroundColor:"#FFD700",color:"#DA251D"}:{},children:"ng"}),z&&e.jsx(K,{onClick:()=>window.open(n.LinkHoaDonDaXuat,"_blank"),variant:"secondary",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:e.jsx("i",{className:"fas fa-download"}),style:j?{backgroundColor:"#FFD700",color:"#DA251D"}:{},children:"Ti Ha n"}),M&&e.jsx(K,{onClick:()=>L("edit",b),variant:"secondary",isLoading:y==="edit",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:y!=="edit"?e.jsx("i",{className:"fas fa-pencil-alt"}):void 0,style:j?{backgroundColor:"#FFD700",color:"#DA251D"}:{},children:"Chnh Sa"}),R&&e.jsx(K,{onClick:()=>L("cancel",u),variant:"danger",isLoading:y==="cancel",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:y!=="cancel"?e.jsx("i",{className:"fas fa-trash-alt"}):void 0,style:j?{backgroundColor:"#8B0000",color:"#FFD700"}:{},children:"Hy Yu Cu"}),H&&e.jsx(K,{onClick:()=>L("requestInvoice",h),variant:"primary",isLoading:y==="requestInvoice",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:y!=="requestInvoice"?e.jsx("i",{className:"fas fa-file-invoice-dollar"}):void 0,style:j?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"Y/C Xut Ha n"}),O&&e.jsx(K,{onClick:()=>L("supplement",f),variant:"primary",isLoading:y==="supplement",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:y!=="supplement"?e.jsx("i",{className:"fas fa-edit"}):void 0,style:j?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"B Sung File"}),$&&e.jsx(K,{onClick:()=>L("requestVC",x),variant:"primary",isLoading:y==="requestVC",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:y!=="requestVC"?e.jsx("i",{className:"fas fa-id-card"}):void 0,style:j?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"Y/C Cp VC"}),V&&e.jsx(K,{onClick:()=>L("confirmVC",g),variant:"primary",isLoading:y==="confirmVC",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:y!=="confirmVC"?e.jsx("i",{className:"fas fa-check"}):void 0,style:j?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"Xc Thc UNC VC"})]})]}),oe&&e.jsx(K,{onClick:Y=>{Y.stopPropagation(),i("next")},variant:"ghost",className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 text-white rounded-full flex items-center justify-center text-2xl hover:bg-white/40 transition-colors z-10 hidden md:flex !p-0",title:"Yu cu tip theo",children:e.jsx("i",{className:"fas fa-chevron-right"})})]})},no=({order:n,onClose:l,onConfirm:o})=>{const[i,u]=m.useState(""),[h,f]=m.useState(!1),x=ut(),g=()=>{if(!i.trim()){alert("Vui lng nhp l do hy.");return}f(!0),o(n,i)};return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("div",{className:"bg-surface-card w-full md:max-w-md h-[100dvh] md:h-auto rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:b=>b.stopPropagation(),style:x,children:[e.jsxs("header",{className:"relative flex flex-col items-center justify-center p-6 text-center bg-surface-card border-b border-border-primary",children:[e.jsx("div",{className:"animate-fade-in-down",children:e.jsx("h2",{className:"text-xl font-bold text-danger",children:"Xc Nhn Hy Yu Cu"})}),e.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 space-y-4 custom-scrollbar",children:[e.jsxs("p",{className:"text-sm text-text-secondary",children:["Bn c chc chn mun hy yu cu cho n hng ",e.jsx("strong",{className:"font-mono text-text-primary",children:n["S n hng"]})," ca khch hng ",e.jsx("strong",{className:"text-text-primary",children:n["Tn khch hng"]}),"?"]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cancel-reason",className:"block text-sm font-medium text-text-primary mb-2",children:"L do hy (bt buc)"}),e.jsx("textarea",{id:"cancel-reason",rows:3,value:i,onChange:b=>u(b.target.value),className:"w-full bg-surface-card border-border-primary rounded-lg shadow-sm p-2 focus:border-accent-primary transition focus:shadow-glow-accent focus:outline-none",placeholder:"VD: Khch hng i , sai thng tin..."})]})]})}),e.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end items-center gap-3 bg-surface-card relative z-10",children:[e.jsx(K,{onClick:l,disabled:h,variant:"secondary",size:"sm",leftIcon:e.jsx("i",{className:"fas fa-times"}),children:"Hy"}),e.jsx(K,{onClick:g,disabled:h,variant:"danger",size:"sm",isLoading:h,leftIcon:e.jsx("i",{className:"fas fa-trash-alt"}),children:"Xc Nhn Hy"})]})]})})},ur="/ordermanagement/assets/pdf.worker.min-qwK7q_zL.mjs";Bl.workerSrc=ur;console.log("PDF Worker configured:",ur);const hr=(n,l={})=>new Promise((o,i)=>{if(!n.type.startsWith("image/"))return o(n);const{maxWidth:u=1920,maxHeight:h=1920,quality:f=.8}=l,x=new FileReader;x.onload=g=>{var c;const b=new Image;b.onload=()=>{let{width:y,height:N}=b;y>N?y>u&&(N=Math.round(N*u/y),y=u):N>h&&(y=Math.round(y*h/N),N=h);const j=document.createElement("canvas");j.width=y,j.height=N;const _=j.getContext("2d");if(!_)return i(new Error("Khng th ly context ca canvas."));_.drawImage(b,0,0,y,N),j.toBlob(D=>{if(!D)return i(new Error("To blob t canvas tht bi."));const w=n.name.substring(0,n.name.lastIndexOf("."))+".jpg",k=new File([D],w,{type:"image/jpeg",lastModified:Date.now()});o(k)},"image/jpeg",f)},b.onerror=y=>i(y),b.src=(c=g.target)==null?void 0:c.result},x.onerror=g=>i(g),x.readAsDataURL(n)}),io=async(n,l)=>{if(typeof jspdf>"u")return console.error("jsPDF library not found. Skipping compression."),n;try{console.log(`Starting PDF compression for: ${n.name} (${(n.size/1024/1024).toFixed(2)} MB)`);const o=await n.arrayBuffer(),u=await Wl({data:o}).promise,h=u.numPages;console.log(`PDF has ${h} pages.`);const{jsPDF:f}=jspdf,x=new f,g=1.5,b=.5,c=16777216,y=4096;for(let _=1;_<=h;_++){if(l){const O=Math.round(_/h*100);l(O)}const D=await u.getPage(_);let w=g,k=D.getViewport({scale:w});for(;k.width*k.height>c||k.width>y||k.height>y;)w*=.8,k=D.getViewport({scale:w}),console.warn(`Page ${_} is too large for canvas. Reduced scale to ${w.toFixed(2)}`);const P=document.createElement("canvas"),C=P.getContext("2d");if(P.height=k.height,P.width=k.width,!C)continue;await D.render({canvasContext:C,viewport:k,canvas:P}).promise;const I=P.toDataURL("image/jpeg",b),E=k.width*.264583,R=k.height*.264583,H=E>R?"l":"p";_===1&&x.deletePage(1),x.addPage([E,R],H),x.addImage(I,"JPEG",0,0,E,R)}const N=x.output("arraybuffer"),j=new File([N],n.name,{type:"application/pdf",lastModified:Date.now()});return console.log(`Compression complete. New size: ${(j.size/1024/1024).toFixed(2)} MB`),j.size<n.size?j:(console.log("Compressed file is larger than original. Keeping original."),n)}catch(o){return console.error("Error during PDF compression:",o),n}},lo=(n,l,o,i,u,h)=>{let f=parseInt(n==null?void 0:n.trim(),10),x=-1,g=parseInt(o==null?void 0:o.trim(),10),b=parseInt((i==null?void 0:i.trim())||"00",10),c=parseInt((u==null?void 0:u.trim())||"00",10),y=parseInt((h==null?void 0:h.trim())||"00",10);if(isNaN(f)||isNaN(g)||isNaN(b)||isNaN(c)||isNaN(y))return null;const N=l==null?void 0:l.trim().toLowerCase().replace(/[.,]/g,""),j={1:1,"thng 1":1,"thg 1":1,t1:1,jan:1,january:1,2:2,"thng 2":2,"thg 2":2,t2:2,feb:2,february:2,3:3,"thng 3":3,"thg 3":3,t3:3,mar:3,march:3,4:4,"thng 4":4,"thg 4":4,t4:4,apr:4,april:4,5:5,"thng 5":5,"thg 5":5,t5:5,may:5,6:6,"thng 6":6,"thg 6":6,t6:6,jun:6,june:6,7:7,"thng 7":7,"thg 7":7,t7:7,jul:7,july:7,8:8,"thng 8":8,"thg 8":8,t8:8,aug:8,august:8,9:9,"thng 9":9,"thg 9":9,t9:9,sep:9,september:9,10:10,"thng 10":10,"thg 10":10,t10:10,oct:10,october:10,11:11,"thng 11":11,"thg 11":11,t11:11,nov:11,november:11,12:12,"thng 12":12,"thg 12":12,t12:12,dec:12,december:12},D=Object.keys(j).sort((P,C)=>C.length-P.length).find(P=>N.includes(P));if(D)x=j[D];else{const P=parseInt(N,10);if(!isNaN(P)&&P>=1&&P<=12)x=P;else return null}if(g<100){const P=new Date().getFullYear(),C=Math.floor(P/100)*100;g+=C,g>P+5&&(g-=100)}if(g<2e3||g>new Date().getFullYear()+5||x<1||x>12||f<1||f>31||b<0||b>23||c<0||c>59||y<0||y>59)return null;const w=new Date(g,x-1,f,b,c,y);if(w.getFullYear()!==g||w.getMonth()!==x-1||w.getDate()!==f)return null;const k=P=>P.toString().padStart(2,"0");return`${g}-${k(x)}-${k(f)}T${k(b)}:${k(c)}:${k(y)}`},oo=async(n,l)=>{if(typeof Tesseract>"u")throw new Error("Th vin Tesseract cha ti.");try{l("ang nhn dng... (0%)");const{data:{text:o}}=await Tesseract.recognize(n,"vie+eng",{logger:c=>{c.status==="recognizing text"&&l(`ang nhn dng... (${Math.round(c.progress*100)}%)`)}});l("ang tm ngy gi...");let i=o.replace(/\n+/g," ");i=i.replace(/(\d{1,2})\s*(gi|h|hr|g)\s*(\d{1,2})\s*(?:pht|phut|ph|p|min|m)?\s*(?:(\d{1,2})\s*(?:giy|giay|s|sec)?)?/gi,(c,y,N,j,_)=>`${y}:${j}${_?":"+_:""}`),i=i.replace(/(\d{1,2})\s*(?:gi|h|hr|g)\s*(\d{1,2})(?!\s*(?:pht|phut|ph|p|min|m))/gi,"$1:$2"),i=i.replace(/(\d{1,2})\s*(pht|phut|ph|p|min|m)\s*(\d{1,2})/gi,"$1:$2"),i=i.replace(/(\d{1,2})\s*:\s*(\d{1,2})\s*(?:pht|phut|ph|p|min|m)/gi,"$1:$2"),i=i.replace(/(\d{1,2})\s*(pht|phut|ph|p|min|m)/gi,"$1"),i=i.replace(/(\d{1,2})\s*(giy|giay|s|sec)/gi,"$1"),i=i.replace(/\s*:\s*/g,":").replace(/\s*-\s*/g,"-").replace(/\s*\/\s*/g,"/").replace(/\s*\.\s*/g,"."),i=i.replace(/(\d{1,2})([\/.-])(\d{1,2})\2(\d{2})(?!\d)/g,(c,y,N,j,_)=>{const D=new Date().getFullYear(),w=parseInt(_,10);let k;return w>D%100+15&&w<=99?k=1900+w:k=Math.floor(D/100)*100+w,`${y}/${j}/${k}`}),i=i.replace(/(\d{1,2})\.(\d{1,2})\/(\d{1,2})\/(\d{4})/g,"$2/$3/$4"),i=i.replace(/(\d{1,2})\/(\d{1,2})\.(\d{1,2})\/(\d{4})/g,"$1/$2/$4"),i=i.replace(/[\u200B-\u200D\uFEFF]/g,"");let u=null,h=-1,f={};const x="(?:thng|thg|t|Thng|Thg\\.?|T\\.)?\\s*\\d{1,2}[\\.,]{0,2}|[A-Za-z-]{3,}",g="[\\s\\/\\.-]+",b=[{regex:new RegExp("Ngy in:?\\s*(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})\\s+(\\d{1,2}):(\\d{1,2}):(\\d{1,2})","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:20,name:"BIDV Print Date (Ngy in)"},{regex:new RegExp("\\b(\\d{2})(\\d{2})(\\d{2})-(\\d{2}):(\\d{2}):(\\d{2})\\b","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:18,name:"DDMMYY-HH:MM:SS format"},{regex:new RegExp("(?:Ngy|Date(?: time)?)[:\\s]*?(\\d{1,2})-(\\d{1,2})-(\\d{4})","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:"00",minute:"00",second:"00"}),score:16,name:"BIDV/Specific DD-MM-YYYY with Keyword"},{regex:new RegExp(`(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*-\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:15.5,name:"HH:MM(:SS) - DD/MM/YYYY (MB Bank, etc.)"},{regex:new RegExp("(?:Ngy\\s*chuyn|Ngy\\s*thc hin|Transaction Date)\\s*[:\\s]*?(\\d{1,2})\\s*(?:thng|thg|/|-|\\.)\\s*(\\d{1,2})(?:,\\s*|\\s+|/|-|\\.)(\\d{4})\\s*(?:lc|\\@|at|\\s)\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:15,name:"Techcombank & similar"},{regex:new RegExp("(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})-(\\d{1,2}):(\\d{1,2})","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:"00"}),score:14.9,name:"DD/MM/YYYY-HH:MM (Cleaned Vietinbank iPay style)"},{regex:new RegExp(`\\b(\\d{1,2})${g}(\\d{1,2})${g}(\\d{4})\\s+(\\d{1,2}):(\\d{1,2}):(\\d{1,2})\\b`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:14.8,name:"DD/MM/YYYY HH:MM:SS (Common, Boosted)"},{regex:new RegExp(`(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s+(?:Th\\s*[2-7CNTtBbSsHhNn]{1,7}|Ch\\s*Nht|Mon|Tue|Wed|Thu|Fri|Sat|Sun)?\\s*,?\\s*(?:ngy\\s*|date\\s*)?(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3]||"00",day:c[4],month:c[5],year:c[6]}),score:14.5,name:"HH:MM(:SS) [DayOfWeek] DD/MM/YYYY (VCB)"},{regex:new RegExp(`Chuyn\\s*nhanh\\s*Napas\\s*247\\s*:?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s+(\\d{1,2})${g}(${x})${g}(\\d{4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:14,name:"TPBank Napas"},{regex:new RegExp(`(\\d{4})${g}(\\d{1,2})${g}(\\d{1,2})[\\sT]+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({year:c[1],month:c[2],day:c[3],hour:c[4],minute:c[5],second:c[6]}),score:13.5,name:"YYYY-MM-DD[ T]HH:MM:SS (Sacombank, ISO)"},{regex:new RegExp(`(?:Ngy\\s*thc\\s*hin|Date\\s*of\\s*transaction)\\s*:?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s+(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:13,name:"Ngy thc hin HH:MM:SS DD/MM/YYYY"},{regex:new RegExp(`(?:vo\\s*lc|lc|at)\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})\\s*,?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:12.5,name:"(vo) lc/at DD/MM/YYYY HH:MM:SS (BIDV)"},{regex:new RegExp(`(?:Thi\\s*gian|Time)\\s*:?\\s*(\\d{1,2}):(\\d{1,2}):(\\d{1,2}),\\s*(?:ngy\\s*)?(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:12,name:"SHB Thi gian/Time"},{regex:new RegExp(`(\\d{1,2})${g}(${x})${g}(\\d{2})(?!\\d)\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:11.2,name:"DD/MM/YY HH:MM:SS (2-digit year)"},{regex:new RegExp(`(?:Ngy\\s*giao dch|GD|lp lnh|to|thanh ton|chuyn tin|hch ton|lp|hiu lc|ghi nhn|transaction|payment|value)\\s*:?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})(?:\\s*,?\\s*(?:lc|at|@|thi gian|time)|\\s*-)?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:11,name:"Ngy GD/Keyword DD/MM/YYYY lc/time HH:MM(:SS)"},{regex:new RegExp(`(?:Thi\\s*gian|Time)\\s*(?:lp|to|giao dch|thanh ton|GD|thc hin|record)\\s*:?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*(?:ngy|,|on)?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:10,name:"Thi gian/Time ... HH:MM:SS ngy/on DD/MM/YYYY"},{regex:new RegExp(`(?<![:\\d\\w])(\\d{1,2})${g}(${x})${g}(\\d{4})\\s+(\\d{1,2}):(\\d{1,2})(?![:\\d])`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:"00"}),score:9.5,name:"DD/MM/YYYY HH:MM (Standalone, Vietinbank)"},{regex:new RegExp(`(?:Ngy\\s*)?(\\d{1,2})\\s*(?:thng|Thg\\.?|T)?\\s*(${x})\\s*(?:nm|nam)?\\s*(\\d{2,4})\\s*(?:vo\\s*lc|lc|Time|@)?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:9,name:"Ngy DD thng MM nm Yokohama lc HHMMSS"},{regex:new RegExp(`(${x})\\s+(\\d{1,2}),\\s*(\\d{4})\\s+(?:at|lc)\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*(AM|PM)?`,"i"),parser:c=>{let y=parseInt(c[4],10);return c[7]&&c[7].toUpperCase()==="PM"&&y<12&&(y+=12),c[7]&&c[7].toUpperCase()==="AM"&&y===12&&(y=0),{month:c[1],day:c[2],year:c[3],hour:String(y),minute:c[5],second:c[6]}},score:8.8,name:"Month DD, YYYY at HH:MM(:SS) AM/PM"},{regex:new RegExp(`(?:Ngy|Date\\s*Time)?:?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})[\\s,T]+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:8.5,name:"DD/MM/YYYY[ T]HH:MM:SS (Generic)"},{regex:new RegExp(`(?:Vo\\s*lc|Time):?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?,\\s*(?:ngy)?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:8,name:"Vo lc HH:MM, ngy DD/MM/YYYY"},{regex:new RegExp(`(?:Date:|Ngy:)?\\s*(\\d{4})${g}(${x})${g}(\\d{1,2})[\\sT,]+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({year:c[1],month:c[2],day:c[3],hour:c[4],minute:c[5],second:c[6]}),score:7.5,name:"YYYY/MM/DD[ T]HH:MM:SS (Generic)"},{regex:new RegExp(`(?:^|\\s|[^\\d\\w.,])(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?(?!=\\d{3}[,\\.])\\s+(?:ngy\\s*)?(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:7,name:"HH:MM:SS DD/MM/YYYY (Improved)"},{regex:new RegExp(`(\\d{1,2})${g}(${x})${g}(\\d{2,4})\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*(AM|PM|SA|CH)`,"i"),parser:c=>{let y=parseInt(c[4],10);const N=c[7]?c[7].toUpperCase():null;return N&&((N==="PM"||N==="CH")&&y<12&&(y+=12),(N==="AM"||N==="SA")&&y===12&&(y=0)),{day:c[1],month:c[2],year:c[3],hour:String(y),minute:c[5],second:c[6]}},score:6.5,name:"DD/MM/YYYY HH:MM(:SS) AM/PM/SA/CH"},{regex:new RegExp(`(?:Ngy\\s*giao dch|GD|lp lnh|to|thanh ton|chuyn tin|hch ton|lp|hiu lc|ghi nhn|transaction|payment|value)\\s*:?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})(?!\\s*[:\\d])(?!\\s*\\d{1,2}\\s*VND)`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:"00",minute:"00",second:"00"}),score:5,name:"Date only with keyword"},{regex:new RegExp(`(?<![\\d:\\/\\.-])(\\d{1,2})([\\/\\.-])(${x})\\2(\\d{2,4})(?![.,:\\/\\.-]?\\d)(?!\\s*VND|\\s*USD)`,"i"),parser:c=>({day:c[1],month:c[3],year:c[4],hour:"00",minute:"00",second:"00"}),score:4,name:"Date only DD/MM/YYYY (generic)"},{regex:new RegExp("(?:Ngy|Date):?\\s*(\\d{2})(\\d{2})(\\d{4})(?!\\d)","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:"00",minute:"00",second:"00"}),score:3.5,name:"Date only DDMMYYYY with keyword"},{regex:new RegExp("(?:Ngy|Date):?\\s*(\\d{4})(\\d{2})(\\d{2})(?!\\d)","i"),parser:c=>({year:c[1],month:c[2],day:c[3],hour:"00",minute:"00",second:"00"}),score:3,name:"Date only YYYYMMDD with keyword"}];for(const c of b){let y;const N=new RegExp(c.regex.source,c.regex.flags+(c.regex.flags.includes("g")?"":"g"));for(;(y=N.exec(i))!==null;){const j=c.parser(y);if(j){const _=lo(j.day,j.month,j.year,j.hour,j.minute,j.second);if(_){if(c.score>h)h=c.score,u=_,f={name:c.name,score:c.score,components:j,match:y,rawText:y[0]};else if(c.score===h){const D=f.components&&(f.components.hour!=="00"||f.components.minute!=="00");j.hour&&(j.hour!=="00"||j.minute!=="00")&&!D&&(u=_,f={name:c.name,score:c.score,components:j,match:y,rawText:y[0]})}}}}if(h>=15&&u)break}return u}catch(o){throw console.error("Li OCR:",o),new Error("X l nh tht bi.")}},rs=n=>{if(!n||typeof n!="string")return null;n.includes("google.com");const l=n.match(/\/d\/([a-zA-Z0-9_-]{25,})|[?&]id=([a-zA-Z0-9_-]{25,})/);return l?l[1]||l[2]:null},Xa=(n,l)=>{if(n&&n.startsWith("data:image"))return n;const o=rs(n);if(o){const i=l?`w${l}`:"w1920";return`https://drive.google.com/thumbnail?id=${o}&sz=${i}`}return n},co=n=>{const l=rs(n);return l?`https://drive.google.com/uc?export=view&id=${l}`:n},mr=n=>{const l=rs(n);return l?`https://drive.google.com/uc?export=download&id=${l}`:n},uo=(n,l)=>{if(!n||!l)return"image.jpg";const i=(h=>h.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"D").replace(//g,"d"))(n).replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""),u=l.replace(/\s+/g,"_");return`${i}_${u}.jpg`},ho=({url:n,width:l,height:o,className:i})=>{const[u,h]=m.useState(!0),[f,x]=m.useState(!1),[g,b]=m.useState(!1);!l&&!o&&(l=100);const c=m.useMemo(()=>rs(n),[n]),y=m.useMemo(()=>!!c,[c]),N=m.useMemo(()=>n&&(c?mr(n):n),[n,c]),j=m.useMemo(()=>c?`https://drive.google.com/file/d/${c}/preview`:null,[c]);function _(){h(!1),x(!1)}function D(w){console.error("PDF load error:",w),y&&!g?(console.log("Switching to iframe fallback for Google Drive PDF"),b(!0),h(!1)):(x(!0),h(!1))}return f?e.jsx("div",{className:`flex items-center justify-center bg-gray-100 text-red-400 ${i}`,style:{width:l||"auto",height:o||(l?l*1.4:"auto")},children:e.jsx("i",{className:"fas fa-file-pdf text-2xl"})}):g&&j?e.jsxs("div",{className:`relative overflow-hidden ${i}`,style:{width:l||"100%",height:o||"100%"},children:[e.jsx("iframe",{src:j,className:"w-full h-full border-0 pointer-events-none scale-[2] origin-top-left",title:"PDF Preview",tabIndex:-1}),e.jsx("div",{className:"absolute inset-0 bg-transparent"})]}):e.jsxs("div",{className:`relative overflow-hidden ${i}`,children:[u&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-gray-400"})}),e.jsx(Gl,{file:N,onLoadSuccess:_,onLoadError:D,loading:e.jsx("div",{className:"w-full h-full bg-gray-100"}),className:"flex items-center justify-center",children:e.jsx(ql,{pageNumber:1,width:l,height:o,renderTextLayer:!1,renderAnnotationLayer:!1})})]})},mo=_e.memo(ho),ct=({id:n,label:l,onFileSelect:o,required:i=!1,accept:u,disableCompression:h=!1})=>{const[f,x]=m.useState(null),[g,b]=m.useState(null),c=m.useRef(null),[y,N]=m.useState(!1),[j,_]=m.useState(!1),[D,w]=m.useState("");m.useEffect(()=>{if(f){const M=URL.createObjectURL(f);return b(M),()=>URL.revokeObjectURL(M)}else b(null)},[f]);const k=m.useCallback(M=>{if(u){const $=M.type;if(!u.split(",").map(L=>L.trim()).some(L=>L.endsWith("/*")?$.startsWith(L.slice(0,-1)):L.startsWith(".")?M.name.toLowerCase().endsWith(L):$===L))return alert(`Loi tp khng hp l. Vui lng chn tp c nh dng: ${u}`),!1}return!0},[u]),P=m.useCallback(async M=>{if(M){if(!k(M)){x(null),o(null),c.current&&(c.current.value="");return}_(!0);try{let $;M.type.startsWith("image/")?h?$=M:(w("ang nn nh..."),$=await hr(M)):M.type==="application/pdf"?h?$=M:(w("ang ti u file..."),$=await io(M,V=>{w("ang ti u file...")})):$=M,x($),o($)}catch($){console.error("File processing failed:",$),alert("Li x l file. Vui lng th li."),x(null),o(null)}finally{_(!1)}}else x(null),o(null)},[o,k]),C=M=>{var $;P((($=M.target.files)==null?void 0:$[0])||null)},I=M=>{M.stopPropagation(),P(null),c.current&&(c.current.value="")},E=M=>{M.stopPropagation(),M.preventDefault(),_(!1),x(null),o(null),c.current&&(c.current.value="")},R=M=>{M.preventDefault(),M.stopPropagation(),M.type==="dragenter"||M.type==="dragover"?N(!0):M.type==="dragleave"&&N(!1)},H=M=>{M.preventDefault(),M.stopPropagation(),N(!1),M.dataTransfer.files&&M.dataTransfer.files[0]&&P(M.dataTransfer.files[0])},O=()=>u?u.includes(".pdf")?"Ch chp nhn file PDF":u.includes("image/*")?"Ch chp nhn file nh (PNG, JPG)":`Chp nhn: ${u}`:"PDF, PNG, JPG, DOCX, etc.";return e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-text-primary mb-2",children:[l,i&&e.jsx("span",{className:"text-danger ml-1",children:"*"})]}),f?e.jsxs("div",{className:"relative group overflow-hidden rounded-lg border border-accent-primary/20 bg-surface-accent transition-all duration-300 hover:shadow-md",children:[e.jsxs("div",{className:"w-full h-48 bg-surface-ground flex items-start justify-center overflow-hidden relative border-b border-accent-primary/10",children:[f.type==="application/pdf"&&g?e.jsx(mo,{url:g,width:500,className:"w-full h-full flex justify-center"}):e.jsx("i",{className:"fas fa-file-alt text-accent-primary text-6xl opacity-50 self-center"}),e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx(K,{type:"button",onClick:I,disabled:j,variant:"ghost",className:"w-8 h-8 bg-black/50 text-white rounded-full flex items-center justify-center hover:bg-danger hover:text-white transition-colors backdrop-blur-sm !p-0 shadow-sm",children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"p-3 bg-surface-card flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-text-primary truncate",title:f.name,children:f.name}),e.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:[(f.size/1024).toFixed(1)," KB"]})]}),e.jsxs(K,{type:"button",onClick:I,disabled:j,variant:"ghost",className:"text-white hover:text-white bg-danger hover:bg-danger-hover text-xs py-1.5 px-3 rounded shadow-sm flex-shrink-0",children:[e.jsx("i",{className:"fas fa-trash-alt mr-1"}),"Xa"]})]})]}):e.jsx("div",{onClick:()=>{var M;return(M=c.current)==null?void 0:M.click()},onDragEnter:R,onDragLeave:R,onDragOver:R,onDrop:H,className:`mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${y?"border-accent-primary bg-surface-accent":"border-border-primary hover:border-accent-primary"}`,children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("i",{className:"fas fa-folder-open text-text-placeholder text-3xl"}),e.jsxs("div",{className:"flex text-sm text-text-secondary",children:[e.jsxs("span",{className:"relative rounded-md font-semibold text-accent-primary hover:text-accent-primary-hover",children:[e.jsx("span",{children:"Ti ln mt file"}),e.jsx("input",{ref:c,id:n,name:n,type:"file",className:"sr-only",onChange:C,accept:u})]}),e.jsx("p",{className:"pl-1",children:"hoc ko v th"})]}),e.jsx("p",{className:"text-xs text-text-placeholder",children:O()})]})}),j&&e.jsxs("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center rounded-lg z-20",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-accent-primary"}),e.jsx("p",{className:"text-sm font-semibold text-accent-primary mt-2 mb-3",children:D||"ang x l..."}),e.jsx(K,{type:"button",onClick:E,variant:"ghost",className:"text-xs text-danger hover:bg-danger-bg px-3 py-1 rounded-full border border-danger/30",children:"Hy b"})]})]})},ns="https://script.google.com/macros/s/AKfycbx7fmwiiBvA63KT9LEoSIOLooI4jPNSJjGRgZyM3yTYuW54RD3jINBWZNUxcDktjckW/exec",We="PHM THNH NHN",fr=["January","February","March","April","May","June","July","August","September","October","November","December"],ss={"VF 3":["Base","Base Tiu chun 2","Plus"],"VF 5":["Plus"],"VF 6":["Eco Tiu chun","Eco Nng cp","Plus Tiu chun","Plus Nng cp","Plus_US","Plus Tiu chun 1","Plus Tiu chun 2"],"VF 7":["Eco","Eco_HUD","Plus_Metal Nng cp","Plus_Metal Tiu chun","Plus Tiu chun","Plus Nng cp","Eco Tiu chun 1","Eco Tiu chun 2","Eco_HUD Tiu chun 1","Eco_HUD Tiu chun 2","Plus_Metal Tiu chun 1","Plus_Metal Tiu chun 2","Plus Tiu chun 2","Plus Tiu chun 1","Plus_Metal Tiu chun 1 (FWD)","Plus_Metal Tiu chun 1 (AWD)"],"VF 8":["Eco Tiu chun","Eco Nng cp","Plus"],"VF 9":["Plus_CAP_Metal_3ZONES","Plus_Metal_3ZONES","Eco_3ZONES","Plus_Metal","Plus_CAP_Metal"],HERIO:["HERIO"],NERIO:["NERIO"],LIMO:["LIMO"],MINIO:["MINIO"],"EC Van":["Base","Plus","Plus_Ca trt"]},xr=["Base","Plus","Plus Tiu chun","Plus Nng cp","Eco","Eco_HUD","Eco Tiu chun","Eco Nng cp","Plus_Metal Tiu chun","Plus_Metal Nng cp","Plus_CAP_Metal","Plus_Metal_3ZONES","Eco_3ZONES","Plus_CAP_Metal_3ZONES","HERIO","NERIO","LIMO","MINIO","Plus_US","Plus Tiu chun 1","Plus Tiu chun 2","Eco Tiu chun 1","Eco Tiu chun 2","Eco_HUD Tiu chun 1","Eco_HUD Tiu chun 2","Plus_Metal Tiu chun 1","Plus_Metal Tiu chun 2","Base Tiu chun 2","Plus_Metal Tiu chun 1 (FWD)","Plus_Metal Tiu chun 1 (AWD)","EC Van","Plus_Ca trt"],dt=["Brahminy White (CE18)","Yellow (CE1U)","Sunset ORB (CE1A)","Crimson Red (CE1M)","Vinfast Blue (CE1N)","Neptune Grey (CE14)","Jet Black (CE11)","Electric Blue (CE1J)","Zenith Grey (CE1V)","Jet Black Roof- Summer Yellow Body (111U)","Brahminy White Roof- Aquatic Azure Body (181Y)","Brahminy White Roof- Rose Pink Body (1821)","Brahminy White Roof - Iris Berry Body (181X)","Urbant Mint (CE1W)","Vinbus Green (CE2B)","Deep Ocean (CE1H)","Brahminy White Roof- Summer Yellow Body (181U)","Iris Berry (CE1X)","Zenith Grey-desat Silver Roof (171V)","Urbant Mint Green - Desat Silv (171W)","Ivy Green-desat Silver Roof (1722)","Atlantic Blue-Aquatic Azure Ro (1Y26)","Jet Black-Champagne Creme Roof (2311)","Infinity Blanc _ Silky White R (2418)","Champagne Creme - Matte Champa (2523)","Jet Black - Graphite Roof (2811)","Crimson Velvet - Mystery Bronz (2927)","Ivy_Green_GNE (CE22)","Champagne_Creme_YLG (CE23)","Crimson Red - Jet Black Roof (111M)","Infinity Blanc_Zenith Grey Roof (1v18)","Deep Ocean_Jet Black Roof (111H)","Alantic Blue_Denim Blue Roof (2A26)","Jet Black_Mystery Bronze Roof (2911)","Champagne Creme_Infinity Blanc Roof (1823)","Silver (CE17)","Pink Gold (CE2K)"],la=["Black","Brown","Beige"],gr=[{models:["vf 3","vf 5"],colors:["Black"]},{models:["vf 6","vf 7","vf 8","vf 9"],versions:["plus tiu chun","plus nng cp","plus","plus_metal nng cp","plus_metal tiu chun","plus_cap_metal_3zones","plus_metal_3zones","plus_cap_metal","plus_metal","plus_us","plus tiu chun 1","plus tiu chun 2","plus_metal tiu chun 1","plus_metal tiu chun 2","plus_metal tiu chun 1 (fwd)","plus_metal tiu chun 1 (awd)"],colors:["Black","Brown","Beige"]},{models:["vf 6","vf 7","vf 8","vf 9"],versions:["eco tiu chun","eco nng cp","eco","eco_hud","eco_3zones","eco tiu chun 1","eco tiu chun 2","eco_hud tiu chun 1","eco_hud tiu chun 2"],colors:["Black"]},{models:["herio","nerio","limo","minio","ec van"],colors:["Black","Grey"]}],Ka={vf3:["181u","181y","1821","ce18","ce1j","ce1m","ce1v","ce1w","ce1x"],vf5:["111u","181y","ce11","ce14","ce18","ce1m","ce1v","ce1w","ce1x"],vf6:["ce11","ce14","ce18","ce1h","ce1m","ce1n","ce1v","ce1w"],vf7:["ce11","ce14","ce17","ce18","ce1h","ce1m","ce1n","ce1v","ce1w"],vf8:["ce11","ce14","ce18","ce1h","ce1m","ce1n","ce1v","ce1w","ce22"],vf9:["ce11","ce14","ce17","ce18","ce1h","ce1m","ce1n","ce1w","ce22"],ecvan:["ce18","ce1m","ce1u","ce1w"],herio:["ce11","ce17","ce1m","ce1u"],limo:["ce11","ce17","ce18","ce1m","ce1u"],nerio:["ce11","ce17","ce1m","ce1u"]},as=n=>new Promise((l,o)=>{const i=new FileReader;i.readAsDataURL(n),i.onload=()=>l(i.result),i.onerror=u=>o(u)}),fo="https://script.google.com/macros/s/AKfycbzElHHCjX_RnObRE3VX42qlz_PnKiF8SvMKieuOwtsV1VlByJXNeZkZ2MvP9fa4ACIgIQ/exec",ze=async(n,l=ns)=>{var o,i;try{const u=new URLSearchParams;for(const x in n)n[x]!==null&&n[x]!==void 0&&u.append(x,String(n[x]));const h=await axios.post(l,u),f=typeof h.data=="string"?JSON.parse(h.data):h.data;if(f.status!=="SUCCESS")throw new Error(f.message||"API returned an unspecified error.");return f}catch(u){const h=((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.message)||u.message||"An unknown API error occurred.";throw console.error("API service error (POST):",u),new Error(h)}},Ue=async(n,l=ns)=>{var o,i;try{const u=new URL(l);Object.keys(n).forEach(x=>{n[x]!==void 0&&n[x]!==null&&u.searchParams.append(x,String(n[x]))});const h=await axios.get(u.toString()),f=typeof h.data=="string"?JSON.parse(h.data):h.data;if(f.status!=="SUCCESS")throw new Error(f.message||"API returned an unspecified error.");return f}catch(u){const h=((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.message)||u.message||"An unknown API error occurred.";throw console.error("API service error (GET):",u),new Error(h)}},jd=async()=>Ue({action:"getActiveUsers"}),Ss=async()=>{try{const n=sessionStorage.getItem("userEmail");n&&ze({action:"recordUserPresence",userEmail:n})}catch(n){console.warn("Failed to record user presence:",n)}},xo=async n=>{const o={action:"getPaginatedData",page:"1",pageSize:"9999",sortBy:"Thi gian nhp",sortOrder:"desc",filters:JSON.stringify({}),isAdmin:"true"};return Ue(o)},go=async()=>Ue({action:"getXuathoadonData"}),po=async()=>Ue({action:"getChinhSachData"}),Nd=async()=>Ue({action:"getYeuCauVcData"}),pr=async()=>{const n=sessionStorage.getItem("currentConsultant")||We,o={action:"getKhoXeData",currentUser:n,isAdmin:String(n===We)};return Ue(o)},yo=async n=>{const l={action:"holdCar",vin:n,updatedBy:sessionStorage.getItem("currentConsultant")||We};return ze(l)},bo=async n=>{const l={action:"releaseCar",vin:n,updatedBy:sessionStorage.getItem("currentConsultant")||We};return ze(l)},vo=async(n,l)=>{const o=await as(l),i={...n};i.vin&&(i.vin_giu_yeu_cau=i.vin,delete i.vin);const u={...i,thoi_gian_nhap:new Date().toISOString(),action:"addRequest",chic_file_base64:o,chic_file_name:l.name,chic_file_type:l.type};return ze(u)},wo=async(n,l)=>{const o={action:"cancelRequest",orderNumber:n,reason:l,cancelledBy:sessionStorage.getItem("currentConsultant")||"Unknown",fromUI:"true"};return ze(o)},jo=async(n,l,o,i,u,h)=>{const[f,x]=await Promise.all([as(l),as(o)]),g={action:"requestInvoice",orderNumber:n,requestedBy:sessionStorage.getItem("currentConsultant")||"Unknown User",hop_dong_file_base64:f,hop_dong_file_name:l.name,hop_dong_file_type:l.type,denghi_xhd_file_base64:x,denghi_xhd_file_name:o.name,denghi_xhd_file_type:o.type,policy:i,commission:u,vpoint:h};return ze(g)},No=async(n,l,o)=>{const i={action:"updateInvoiceFiles",orderNumber:n,updatedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"};return l&&(i.hop_dong_file_base64=await as(l),i.hop_dong_file_name=l.name,i.hop_dong_file_type=l.type),o&&(i.denghi_xhd_file_base64=await as(o),i.denghi_xhd_file_name=o.name,i.denghi_xhd_file_type=o.type),ze(i)},ko=async(n,l)=>{const o={action:"updateOrderDetails",updatedBy:sessionStorage.getItem("currentConsultant")||"Unknown User",orderNumber:n,...l};return ze(o)},_o=async()=>{const n=sessionStorage.getItem("currentConsultant")||"Unknown User",l={action:"getAllArchivedDataForUser",currentUser:n,isAdmin:String(n===We)};return Ue(l)},So=async()=>{const n=sessionStorage.getItem("currentConsultant")||We,l={action:"getNotifications",currentUser:n,isAdmin:String(n===We)};return Ue(l)},Co=async()=>{const n={action:"markAllNotificationsAsRead",currentUser:sessionStorage.getItem("currentConsultant")||We,timestamp:new Date().toISOString()};return ze(n)},Do=async n=>{const l={action:"markNotificationAsRead",notificationId:n,currentUser:sessionStorage.getItem("currentConsultant")||We,timestamp:new Date().toISOString()};return ze(l)},yr=async(n,l)=>{const o=`${n} ${l}`,i=`${fo}?sheet=${o}`;try{const u=await axios.get(i),h=typeof u.data=="string"?JSON.parse(u.data):u.data;return h&&h[o]&&Array.isArray(h[o])||h&&h[o]?h[o]:Array.isArray(h)?h:[]}catch(u){return console.warn(`Error fetching sold data for ${o}:`,u),[]}},br=(n,l,o,i)=>{let u=new Date().toISOString();if(o){const h=fr.indexOf(o);if(h>-1){const f=i||new Date().getFullYear();u=new Date(f,h,15).toISOString()}}return{"Tn khch hng":String(n[0]||""),"S n hng":String(n[2]||`SOLD-${o}-${i}-${l}`),"Dng xe":String(n[3]||""),"Phin bn":String(n[4]||""),"Ngoi tht":String(n[5]||""),"Ni tht":String(n[6]||""),"Tn t vn bn hng":String(n[7]||""),VIN:String(n[8]||""),"CHNH SCH":String(n[9]||""),"Ngy cc":u,"Thi gian nhp":u,"Thi gian ghp":u,"Kt qu":" xut ha n"}},Mo=async(n,l)=>{try{const i=(await yr(n,l)).filter(u=>Array.isArray(u)&&u.length>2&&u[2]).map((u,h)=>br(u,h,n,l));return{status:"SUCCESS",message:`Successfully fetched data for ${n} ${l}.`,data:i}}catch(o){return{status:"ERROR",message:o instanceof Error?o.message:`An unknown error occurred while fetching data for ${n} ${l}.`}}},To=async n=>{try{const l=fr.map(h=>yr(h,n).then(f=>({month:h,data:f}))),u=(await Promise.all(l)).flatMap(({month:h,data:f})=>f.filter(x=>Array.isArray(x)&&x.length>8&&x[8]).map(x=>({row:x,month:h}))).map(({row:h,month:f},x)=>br(h,x,f,n));return{status:"SUCCESS",message:`Successfully fetched all sold car data for ${n}.`,data:u}}catch(l){return{status:"ERROR",message:l instanceof Error?l.message:"An unknown error occurred while fetching sold cars data."}}},Po=async n=>{const l={action:"requestVinClub",...n,requestedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"};return ze(l)},Eo=async n=>{try{const l=new URLSearchParams;for(const f in n)n[f]!==null&&n[f]!==void 0&&l.append(f,String(n[f]));const o=await axios.post(ns,l),i=typeof o.data=="string"?JSON.parse(o.data):o.data;if(!i.success)throw new Error(i.message||"User API returned an unspecified error.");const{success:u,...h}=i;return{status:"SUCCESS",...h}}catch(l){const o=l instanceof Error?l.message:"An unknown user API error occurred.";throw new Error(o)}},Yo=async()=>Ue({action:"getTeamData"}),Io=async()=>Ue({action:"getUsers"}),Za=async(n,l="all")=>{const o=sessionStorage.getItem("currentConsultant")||We,i=sessionStorage.getItem("currentUser")||"",u=o===We||i.toLowerCase()==="admin";return Ue({action:"searchGlobal",keyword:n,scope:l,isAdmin:String(u)})},Oo=async(n,l)=>{const o=sessionStorage.getItem("currentUser")||"Unknown Admin";return["addUser","updateTeams"].includes(n)?Eo({action:n,...l,adminUser:o}):ze({action:n,...l,adminUser:o})},kd=async n=>Ue({action:"getOrderHistory",orderNumber:n}),_d=async n=>{const l={action:"handleBulkUploadIssuedInvoices",filesData:JSON.stringify(n),uploadedBy:sessionStorage.getItem("currentConsultant")||"Admin"};return ze(l)},ua=async n=>{var l,o;try{const i=new URLSearchParams;for(const b in n)n[b]!==void 0&&n[b]!==null&&i.append(b,String(n[b]));const u=await axios.post(ns,i),h=typeof u.data=="string"?JSON.parse(u.data):u.data;if(!(h.success===!0||h.status==="SUCCESS"))throw new Error(h.message||"API returned a failure response.");const{success:x,...g}=h;return{status:"SUCCESS",...g}}catch(i){const u=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.message)||i.message||"An unknown API error occurred.";throw console.error("Legacy API service error (POST):",i),new Error(u)}},Fo=async()=>Ue({action:"getTestDriveSchedule"}),Sd=async n=>ua({action:"saveTestDriveBooking",...n}),Cd=async n=>{const l={action:"submitTestDriveCheckin",soPhieu:n.soPhieu,updatedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"};return n.odoBefore&&(l.odoBefore=n.odoBefore),n.imagesBefore&&(l.imagesBefore=JSON.stringify(n.imagesBefore)),n.odoAfter&&(l.odoAfter=n.odoAfter),n.imagesAfter&&(l.imagesAfter=JSON.stringify(n.imagesAfter)),ua(l)},Dd=async n=>ua({action:"deleteTestDriveBooking",soPhieu:n,deletedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"}),Ao=({currentStep:n})=>{const l=["Thng tin BH","Ti chng t","Xc nhn"];return e.jsx("div",{className:"flex items-center justify-center mb-6",children:l.map((o,i)=>{const u=i+1,h=u===n,f=u<n;return e.jsxs(_e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center text-center w-24",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold ${f?"bg-success text-white":h?"bg-accent-primary text-white":"bg-surface-ground border-2 border-border-primary text-text-secondary"}`,children:f?e.jsx("i",{className:"fas fa-check"}):u}),e.jsx("p",{className:`mt-2 text-xs font-semibold transition-colors ${h||f?"text-text-primary":"text-text-secondary"}`,children:o})]}),i<l.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-colors duration-300 ${f?"bg-success":"bg-border-primary"}`})]},u)})})},Lo=({order:n,onClose:l,onConfirm:o})=>{const[i,u]=m.useState(1),[h,f]=m.useState(null),[x,g]=m.useState(null),[b,c]=m.useState(!1),[y,N]=m.useState(!1),[j,_]=m.useState([]),[D,w]=m.useState(""),[k,P]=m.useState(""),[C,I]=m.useState([]),[E,R]=m.useState(!0),H=ut();m.useEffect(()=>{(async()=>{try{R(!0);const v=await po();v.status==="SUCCESS"&&Array.isArray(v.data)?I(v.data):(console.error("Failed to fetch sales policies:",v.message),I([]))}catch(v){console.error("Error fetching sales policies:",v),I([])}finally{R(!1)}})()},[]);const O=m.useMemo(()=>{if(!n||!n["Dng xe"]||C.length===0)return C.sort();const F=Object.keys(ss).map(te=>te.replace(/\s+/g,"").toLowerCase()),v=n["Dng xe"].replace(/\s+/g,"").toLowerCase(),Y=C.filter(te=>te.toLowerCase().replace(/\s+/g,"").includes(v)),T=C.filter(te=>{const de=te.toLowerCase().replace(/\s+/g,"");return!F.some(De=>de.includes(De))}),U=[...new Set([...Y,...T])];return U.length>0?U.sort():C.sort()},[n,C]);m.useEffect(()=>{O.length>0&&_(F=>F.filter(v=>O.includes(v)))},[O]);const[M,$]=m.useState(0),V=F=>F.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."),z=F=>v=>{const Y=v.target.value;F(V(Y))},L=F=>F.replace(/\./g,""),Q=j.length>0&&D&&parseFloat(L(D))>=0&&k&&parseFloat(L(k))>=0,q=h&&x,ie=Q&&q&&b,oe=()=>u(F=>Math.min(F+1,3)),xe=()=>u(F=>Math.max(F-1,1)),W=async()=>{if(!ie||!h||!x){alert("Vui lng hon thnh tt c cc bc.");return}N(!0);try{$(1),await new Promise(F=>setTimeout(F,800)),$(2),await new Promise(F=>setTimeout(F,800)),$(3),await o(n,h,x,j,L(D),L(k)),$(4),await new Promise(F=>setTimeout(F,2e3)),l()}catch(F){console.error("Submission failed",F),N(!1),$(0)}},Z=({label:F,status:v})=>{let Y="fa-circle text-border-secondary",T="text-text-secondary",U="bg-surface-ground";return v==="active"?(Y="fa-spinner fa-spin text-accent-primary",T="text-accent-primary font-semibold",U="bg-accent-primary/5 border-accent-primary/20"):v==="completed"&&(Y="fa-check-circle text-success",T="text-text-primary font-medium",U="bg-success/5 border-success/20"),e.jsxs("div",{className:`flex items-center p-3 rounded-lg border ${v==="pending"?"border-transparent":"border-border-secondary"} ${U} transition-all duration-300`,children:[e.jsx("div",{className:"w-8 flex justify-center mr-3",children:e.jsx("i",{className:`fas ${Y} text-lg transition-all duration-300`})}),e.jsx("span",{className:`${T} transition-all duration-300`,children:F})]})};return y?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-surface-card w-full max-w-md rounded-2xl shadow-xl p-6 flex flex-col items-center animate-fade-in-scale-up",style:H,children:[e.jsxs("div",{className:"w-16 h-16 mb-4 relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-border-primary"}),e.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${M===4?"border-success":"border-accent-primary border-t-transparent animate-spin"}`}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("i",{className:`fas ${M===4?"fa-check text-success":"fa-paper-plane text-accent-primary"} text-xl`})})]}),e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-1",children:M===4?"Hon tt!":"ang x l h s"}),e.jsx("p",{className:"text-sm text-text-secondary mb-6",children:M===4?"Yu cu  c gi thnh cng.":"Vui lng khng tt trnh duyt..."}),e.jsxs("div",{className:"w-full space-y-3",children:[e.jsx(Z,{label:"X l Hp ng mua bn",status:M>1?"completed":M===1?"active":"pending"}),e.jsx(Z,{label:"X l  ngh xut ha n",status:M>2?"completed":M===2?"active":"pending"}),e.jsx(Z,{label:"ang gi d liu...",status:M>3?"completed":M===3?"active":"pending"})]})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("div",{className:"bg-surface-card w-full md:max-w-4xl h-[100dvh] md:h-[700px] md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:F=>F.stopPropagation(),style:H,children:[e.jsxs("header",{className:"relative flex-shrink-0 flex flex-col items-center justify-center p-4 text-center border-b border-border-primary",children:[e.jsxs("div",{className:"animate-fade-in-down",children:[e.jsx("h2",{className:"text-lg font-bold text-gradient uppercase",children:"YU CU XUT HA N"}),e.jsx("p",{className:"text-xs text-text-secondary mt-0.5",children:"Cung cp chng t  tin hnh xut ha n."})]}),e.jsx("button",{onClick:l,className:"absolute top-3 right-3 w-8 h-8 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 custom-scrollbar",children:[e.jsx(Ao,{currentStep:i}),e.jsxs("div",{className:"bg-surface-accent/50 rounded-xl border border-accent-primary/20 p-2.5 mb-4 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx("i",{className:"fas fa-file-invoice-dollar text-5xl text-accent-primary transform rotate-12"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 relative z-10",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-text-secondary font-semibold mb-0.5",children:"S n hng"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-accent-primary",children:[e.jsx("i",{className:"fas fa-barcode text-base opacity-70"}),e.jsx("span",{className:"text-base font-bold font-mono tracking-tight",children:n["S n hng"]})]})]}),e.jsxs("div",{className:"flex flex-col md:border-l md:border-accent-primary/20 md:pl-3",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-text-secondary font-semibold mb-0.5",children:"Khch hng"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-text-primary",children:[e.jsx("i",{className:"fas fa-user text-base text-accent-secondary opacity-70"}),e.jsx("span",{className:"text-base font-bold truncate",title:n["Tn khch hng"],children:n["Tn khch hng"]})]})]}),e.jsxs("div",{className:"flex flex-col md:border-l md:border-accent-primary/20 md:pl-3",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-text-secondary font-semibold mb-0.5",children:"S VIN"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-text-primary",children:[e.jsx("i",{className:"fas fa-car text-base text-accent-secondary opacity-70"}),e.jsx("span",{className:"text-base font-bold font-mono tracking-tight",children:n.VIN||"---"})]})]})]})]}),e.jsxs("div",{style:{display:i===1?"block":"none"},children:[e.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"1. Thng tin Bn hng"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-primary mb-2",children:["Chnh sch bn hng ",e.jsx("span",{className:"text-danger",children:"*"})]}),E?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary p-2 bg-surface-ground rounded-lg",children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("span",{children:"ang ti danh sch chnh sch..."})]}):e.jsx("div",{className:"flex flex-wrap gap-2 p-2 bg-surface-ground rounded-lg border border-border-primary",children:O.length>0?O.map(F=>{const v=j.includes(F);return e.jsxs("button",{type:"button",onClick:()=>{const Y=v?j.filter(T=>T!==F):[...j,F];_(Y)},className:`group inline-flex items-center gap-2 px-3 py-1.5 text-xs font-semibold rounded-full border cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-primary
                                                            ${v?"bg-accent-primary border-accent-primary text-white shadow-sm hover:bg-accent-primary-hover":"bg-white border-border-secondary text-text-secondary hover:border-accent-primary hover:text-accent-primary"}
                                                        `,children:[e.jsx("i",{className:`fas ${v?"fa-check-circle":"fa-plus-circle"} transition-transform duration-200 ${v?"":"group-hover:rotate-90"}`}),F]},F)}):e.jsx("p",{className:"text-xs text-text-secondary",children:"Khng tm thy chnh sch no ph hp."})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"commission-amount",className:"block text-sm font-medium text-text-primary mb-2",children:["Hoa hng ng trc (VND) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"commission-amount",type:"text",value:D,onChange:z(w),className:"w-full bg-surface-ground border border-border-primary rounded-lg p-2.5 futuristic-input",placeholder:"Nhp s tin",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"vpoint-amount",className:"block text-sm font-medium text-text-primary mb-2",children:["S im Vpoint s dng (im) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"vpoint-amount",type:"text",value:k,onChange:z(P),className:"w-full bg-surface-ground border border-border-primary rounded-lg p-2.5 futuristic-input",placeholder:"Nhp s im",required:!0})]})]})]})]}),e.jsxs("div",{style:{display:i===2?"block":"none"},children:[e.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"2. Ti ln chng t"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ct,{id:"hop_dong_file_input",label:"Hp ng mua bn",onFileSelect:f,required:!0,accept:".pdf"}),e.jsx(ct,{id:"denghi_xhd_file_input",label:" ngh xut ha n",onFileSelect:g,required:!0,accept:".pdf"})]})]}),e.jsxs("div",{style:{display:i===3?"block":"none"},children:[e.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"3. Xc nhn cui cng"}),e.jsx("div",{className:"p-4 bg-surface-ground rounded-lg border border-border-primary mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("p",{className:"text-xs text-text-secondary mb-1.5 font-semibold uppercase",children:"Chnh sch bn hng"}),j.length>0?e.jsx("div",{className:"bg-surface-card rounded-md border border-border-secondary divide-y divide-border-secondary/50 flex-grow overflow-y-auto custom-scrollbar shadow-sm min-h-[120px]",children:j.map((F,v)=>e.jsxs("div",{className:"p-2.5 text-sm font-medium text-text-primary flex items-start hover:bg-surface-hover transition-colors",children:[e.jsx("i",{className:"fas fa-check-circle text-success mt-0.5 mr-2.5 flex-shrink-0"}),e.jsx("span",{className:"leading-tight",children:F})]},v))}):e.jsx("div",{className:"bg-surface-card rounded-md border border-border-secondary flex items-center justify-center flex-grow min-h-[120px]",children:e.jsx("p",{className:"font-semibold text-text-placeholder italic",children:"Cha chn chnh sch no"})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"bg-surface-card p-3 rounded-md border border-border-secondary shadow-sm",children:[e.jsx("p",{className:"text-xs text-text-secondary mb-2 font-semibold uppercase border-b border-border-secondary pb-1",children:"Thng tin thanh ton"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:"Hoa hng ng:"}),e.jsx("span",{className:"font-bold text-text-primary",children:D?`${parseInt(L(D)).toLocaleString("vi-VN")} VND`:"Cha nhp"})]}),k&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:"Vpoint s dng:"}),e.jsx("span",{className:"font-bold text-purple-600",children:`${parseInt(L(k)).toLocaleString("vi-VN")} im`})]})]})]}),e.jsxs("div",{className:"bg-surface-card p-3 rounded-md border border-border-secondary shadow-sm flex-grow",children:[e.jsx("p",{className:"text-xs text-text-secondary mb-2 font-semibold uppercase border-b border-border-secondary pb-1",children:"Tp nh km"}),e.jsxs("ul",{className:"list-none text-sm text-text-primary space-y-2",children:[e.jsxs("li",{className:`flex items-center ${h?"text-text-primary":"text-danger"}`,children:[e.jsx("i",{className:`fas ${h?"fa-file-contract text-success":"fa-times-circle"} mr-2 w-4 text-center`}),e.jsx("span",{className:"truncate flex-1",title:h==null?void 0:h.name,children:(h==null?void 0:h.name)||"Thiu Hp ng"})]}),e.jsxs("li",{className:`flex items-center ${x?"text-text-primary":"text-danger"}`,children:[e.jsx("i",{className:`fas ${x?"fa-file-invoice text-success":"fa-times-circle"} mr-2 w-4 text-center`}),e.jsx("span",{className:"truncate flex-1",title:x==null?void 0:x.name,children:(x==null?void 0:x.name)||"Thiu  ngh XHD"})]})]})]})]})]})}),e.jsx("div",{className:"relative p-4 rounded-lg border border-accent-primary/20 bg-surface-accent",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-6",children:e.jsx("input",{id:"vinclub-confirm",type:"checkbox",checked:b,onChange:F=>c(F.target.checked),className:"focus:ring-accent-primary h-5 w-5 text-accent-primary border-border-secondary rounded-md cursor-pointer"})}),e.jsxs("div",{className:"ml-3 text-sm",children:[e.jsx("label",{htmlFor:"vinclub-confirm",className:"font-medium text-text-primary cursor-pointer",children:"Ti xc nhn khch hng  to ti khon Vinclub."}),e.jsx("p",{className:"text-accent-primary/80",children:"y l iu kin bt buc  tip tc."})]})]})})]})]})}),e.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-between items-center bg-surface-card relative z-10",children:[i>1?e.jsx(K,{onClick:xe,disabled:y,variant:"secondary",size:"sm",leftIcon:e.jsx("i",{className:"fas fa-arrow-left"}),children:"Quay li"}):e.jsx(K,{onClick:l,disabled:y,variant:"secondary",size:"sm",children:"Hy"}),i<3?e.jsx(K,{onClick:oe,disabled:y||i===1&&!Q||i===2&&!q,variant:"primary",size:"sm",rightIcon:e.jsx("i",{className:"fas fa-arrow-right"}),children:"Tip theo"}):e.jsx(K,{onClick:W,disabled:y||!ie,variant:"success",size:"sm",isLoading:y,leftIcon:y?void 0:e.jsx("i",{className:"fas fa-paper-plane"}),children:"Gi Yu Cu"})]})]})})},Ja=({label:n,value:l,icon:o,isMono:i=!1})=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("i",{className:`fas ${o} fa-fw w-4 text-center text-accent-secondary`}),e.jsxs("span",{className:"text-text-secondary",children:[n,":"]}),e.jsx("span",{className:`font-semibold text-text-primary ${i?"font-mono":""}`,children:l})]}),Ro=({order:n,onClose:l,onConfirm:o})=>{const[i,u]=m.useState(null),[h,f]=m.useState(null),[x,g]=m.useState(!1),b=ut(),c=()=>{if(!i&&!h){alert("Vui lng chn t nht mt file  b sung.");return}g(!0),o(n,i,h)},y=i||h;return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("div",{className:"bg-surface-card w-full md:max-w-2xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:N=>N.stopPropagation(),style:b,children:[e.jsxs("header",{className:"relative flex flex-col items-center justify-center p-6 text-center bg-surface-card border-b border-border-primary",children:[e.jsxs("div",{className:"animate-fade-in-down",children:[e.jsx("h2",{className:"text-xl font-bold text-gradient",children:"B Sung Chng T"}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Ti ln cc tp mi  cp nht hoc thay th."})]}),e.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex-shrink-0 flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 custom-scrollbar",children:[e.jsxs("div",{className:"p-4 bg-surface-ground rounded-lg border border-border-primary space-y-2",children:[e.jsx("h3",{className:"font-semibold text-text-primary text-base mb-2",children:"Tm tt yu cu"}),e.jsx(Ja,{label:"S n hng",value:n["S n hng"],icon:"fa-barcode",isMono:!0}),e.jsx(Ja,{label:"Khch hng",value:n["Tn khch hng"],icon:"fa-user"})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 text-sm bg-warning-bg rounded-lg border border-warning/30 text-yellow-800 my-4",children:[e.jsx("i",{className:"fas fa-info-circle mt-0.5"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Lu :"})," Ch cn ti ln tp bn mun thay th. Cc tp khng c ti ln s c gi nguyn."]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"Ti ln tp mi"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(ct,{id:"supp_hop_dong_file_input",label:"Hp ng mua bn (Mi)",onFileSelect:u,accept:".pdf"}),e.jsx(ct,{id:"supp_denghi_xhd_file_input",label:" ngh XHD (Mi)",onFileSelect:f,accept:".pdf"})]})]})]})}),e.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end items-center gap-3 bg-surface-card relative z-10",children:[e.jsx(K,{onClick:l,disabled:x,variant:"secondary",size:"sm",leftIcon:e.jsx("i",{className:"fas fa-times"}),children:"Hy"}),e.jsx(K,{onClick:c,disabled:x||!y,variant:"primary",size:"sm",isLoading:x,leftIcon:e.jsx("i",{className:"fas fa-save"}),children:"Cp nht & Gi"})]})]})})},$o=({onFileSelect:n,isProcessing:l,ocrStatus:o,showToast:i})=>{const[u,h]=m.useState(!1),[f,x]=m.useState(null),[g,b]=m.useState(null),c=m.useRef(null),[y,N]=m.useState(!1),j=m.useCallback(async I=>{if(n(null),x(null),b(null),I){if(!I.type.startsWith("image/")){i("Tp khng hp l","Vui lng ch chn tp hnh nh.","warning");return}N(!0);try{const E=await hr(I);x(E),n(E);const R=new FileReader;R.onloadend=()=>{b(R.result)},R.readAsDataURL(E)}catch(E){console.error("Image compression failed:",E),i("Li Nn nh","Khng th x l nh ca bn. Vui lng th nh khc.","error")}finally{N(!1)}}},[n,i]),_=I=>{I.preventDefault(),I.stopPropagation(),I.type==="dragenter"||I.type==="dragover"?h(!0):I.type==="dragleave"&&h(!1)},D=I=>{I.preventDefault(),I.stopPropagation(),h(!1),I.dataTransfer.files&&I.dataTransfer.files[0]&&j(I.dataTransfer.files[0])},w=I=>{I.preventDefault(),I.target.files&&I.target.files[0]&&j(I.target.files[0])},k=()=>{var I;(I=c.current)==null||I.click()},P=I=>{I.stopPropagation(),j(null)},C=()=>o.includes("Li")||o.includes("Khng tm thy")?"text-danger":o.includes(" in")?"text-success font-medium":"text-accent-secondary";return e.jsxs("div",{onDragEnter:_,className:"w-full",children:[e.jsx("input",{ref:c,type:"file",className:"hidden",accept:"image/*",onChange:w}),e.jsxs("div",{className:`relative w-full h-24 border-2 border-dashed rounded-lg flex items-center justify-center transition-all duration-300 group cursor-pointer overflow-hidden bg-surface-ground
                    ${u?"border-accent-primary bg-surface-accent":"border-border-primary"}
                    ${f?"border-solid border-accent-primary/50":""}`,onClick:k,onDragLeave:_,onDragOver:_,onDrop:D,children:[!f&&e.jsxs("div",{className:"text-center text-text-placeholder group-hover:text-text-primary transition-colors",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt fa-lg mb-1 group-hover:text-accent-primary"}),e.jsx("p",{className:"font-semibold text-text-primary text-xs",children:"Nhn  ti nh"}),e.jsx("p",{className:"text-[10px] hidden md:block opacity-70",children:"Ti a 10MB"})]}),f&&g&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 p-2 z-0",children:e.jsx("img",{src:g,alt:"Preview",className:"w-full h-full object-contain rounded-md"})}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 hover:bg-black/60 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300 rounded-lg cursor-pointer z-10",children:[e.jsx("span",{className:"text-white font-bold",children:"Thay i nh"}),e.jsx(K,{type:"button",onClick:P,disabled:l,variant:"ghost",className:"flex-shrink-0 w-8 h-8 bg-surface-hover text-text-secondary rounded-full flex items-center justify-center hover:bg-danger-bg hover:text-danger-hover transition-colors disabled:opacity-50 !p-0",children:e.jsx("i",{className:"fas fa-times"})})]})]})]}),(y||l||o)&&e.jsx("p",{className:`mt-2 text-sm text-center italic ${C()} `,children:y?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"ang nn nh..."]}):l?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),o]}):o})]})},Qa=n=>n?n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"d").replace(//g,"d").trim():"",Ze=(n,l)=>{if(!l)return!0;if(!n)return!1;const o=Qa(l),i=l.toLowerCase();return i!==o?n.normalize("NFC").toLowerCase().includes(i.normalize("NFC")):Qa(n).includes(o)},Ht=({label:n,options:l,selectedOptions:o,onChange:i,icon:u,displayMode:h="count",size:f="default",variant:x="default",mode:g="dropdown",selectionMode:b="multiple",placeholder:c,disabled:y=!1,searchable:N=!0})=>{const[j,_]=m.useState(!1),[D,w]=m.useState(""),k=m.useRef(null);m.useEffect(()=>{const V=z=>{k.current&&!k.current.contains(z.target)&&_(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]);const P=l.filter(V=>Ze(V,D)),C=V=>{if(b==="single")i([V]),_(!1);else{const z=o.includes(V)?o.filter(L=>L!==V):[...o,V];i(z)}},I=()=>{i(Array.from(new Set([...o,...P])))},E=()=>{i([])},R=()=>{i(o.filter(V=>!P.includes(V)))},H=m.useMemo(()=>o.length===0?c||n:b==="single"?o[0]:h==="selection"?o.length<=2?o.join(", "):`${o.length} la chn`:`${n} (${o.length})`,[o,n,h,b,c]),O=f==="compact",M=b==="multiple"&&P.length>0&&P.every(V=>o.includes(V)),$=m.useMemo(()=>{const V="flex items-center justify-between transition-all duration-200 outline-none focus:ring-2 focus:ring-accent-primary/20",z="rounded-xl",L=y?"opacity-60 cursor-not-allowed bg-gray-50":"cursor-pointer";if(x==="modern"){const ee=O?"px-2 h-7 text-[10px]":"px-4 h-10 text-sm",ie=!y&&(j||o.length>0&&b==="multiple")?"bg-accent-primary/5 border border-accent-primary text-accent-primary shadow-sm":"bg-white border border-gray-200 text-gray-600 hover:border-accent-primary/50 hover:text-gray-900 hover:shadow-sm";return`${V} ${z} ${ee} ${ie} ${L} w-full`}const Q=O?"px-2 h-7 text-[10px]":"px-4 h-11 text-sm lg:h-14 lg:text-lg lg:px-6",q=!y&&(j||o.length>0&&b==="multiple")?"bg-white text-[#6d5dfc] shadow-[inset_2px_2px_5px_#e5e7eb,inset_-2px_-2px_5px_#ffffff] font-bold":"bg-white text-gray-700 shadow-[-2px_-2px_5px_#ffffff,2px_2px_5px_#e5e7eb] hover:text-[#6d5dfc] font-medium";return`${V} ${z} ${Q} ${q} ${L} w-full`},[O,j,o.length,x,b,y]);return g==="chips"?e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(V=>{const z=o.includes(V);return e.jsxs("button",{type:"button",onClick:()=>!y&&C(V),disabled:y,className:`
                px-3 py-1.5 text-xs font-medium rounded-full border transition-all duration-200 ease-out flex items-center gap-1.5
                ${z?"bg-accent-primary text-white border-accent-primary shadow-md shadow-accent-primary/20 transform scale-105":"bg-white text-gray-600 border-gray-200 hover:border-accent-primary/50 hover:text-accent-primary hover:bg-accent-primary/5"}
                ${y?"opacity-50 cursor-not-allowed":""}
              `,children:[z&&e.jsx("i",{className:"fas fa-check text-[10px]"}),V]},V)})}):g==="inline"?e.jsxs("div",{className:`w-full bg-gray-50/50 rounded-xl border border-gray-100 p-2 ${y?"opacity-60 pointer-events-none":""}`,children:[N&&l.length>5&&e.jsxs("div",{className:"relative mb-2",children:[e.jsx("i",{className:"fas fa-search absolute top-1/2 left-3 -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",placeholder:"Tm kim...",value:D,onChange:V=>w(V.target.value),disabled:y,className:"w-full pl-9 pr-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/20 transition-all text-sm placeholder:text-gray-400"})]}),e.jsxs("ul",{className:"max-h-60 overflow-y-auto space-y-0.5 custom-scrollbar pr-1",children:[b==="multiple"&&P.length>0&&e.jsx("li",{children:e.jsxs("label",{className:"flex items-center gap-3 w-full px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-white hover:shadow-sm transition-all cursor-pointer group",children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${M?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:M&&e.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),e.jsx("input",{type:"checkbox",checked:M,onChange:()=>M?R():I(),className:"hidden"}),e.jsx("span",{className:"font-semibold italic text-xs text-gray-500 group-hover:text-accent-primary transition-colors",children:M?"B chn tt c":"Chn tt c"})]})}),P.length>0?P.map(V=>{const z=o.includes(V);return e.jsx("li",{children:e.jsxs("label",{className:`flex items-center gap-3 w-full px-3 py-2 text-sm rounded-lg transition-all cursor-pointer group ${z?"bg-accent-primary/5 text-accent-primary font-medium":"text-gray-700 hover:bg-white hover:shadow-sm"}`,children:[b==="multiple"&&e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${z?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:z&&e.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),e.jsx("input",{type:b==="single"?"radio":"checkbox",checked:z,onChange:()=>C(V),className:"hidden"}),e.jsx("span",{children:V}),b==="single"&&z&&e.jsx("i",{className:"fas fa-check text-accent-primary ml-auto text-xs"})]})},V)}):e.jsx("li",{className:"px-3 py-4 text-sm text-gray-400 text-center italic",children:"Khng tm thy kt qu."})]})]}):e.jsxs("div",{className:"relative w-full",ref:k,children:[e.jsxs("button",{type:"button",onClick:()=>!y&&_(!j),disabled:y,className:$,children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${j||o.length>0&&b==="multiple"?"bg-accent-primary/10 text-accent-primary":"bg-gray-100 text-gray-400"}`,children:e.jsx("i",{className:`fas ${u} text-xs`})}),e.jsx("span",{className:`truncate ${o.length>0?"font-semibold text-gray-900":""}`,children:H})]}),e.jsx("i",{className:`fas fa-chevron-down text-xs transition-transform duration-300 ${j?"rotate-180 text-accent-primary":"text-gray-400"}`})]}),j&&e.jsxs("div",{className:"absolute top-full mt-2 w-full min-w-[200px] bg-white border border-gray-100 rounded-xl shadow-xl shadow-gray-200/50 z-50 animate-in fade-in zoom-in-95 duration-200 flex flex-col overflow-hidden ring-1 ring-black/5",children:[N&&l.length>5&&e.jsx("div",{className:"p-3 border-b border-gray-50 bg-gray-50/30",children:e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-search absolute top-1/2 left-3 -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",placeholder:"Tm kim...",autoFocus:!0,value:D,onChange:V=>w(V.target.value),className:"w-full pl-9 pr-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/20 transition-all text-sm placeholder:text-gray-400"})]})}),e.jsxs("ul",{className:"flex-grow max-h-64 overflow-y-auto p-2 space-y-0.5 custom-scrollbar",children:[b==="multiple"&&P.length>0&&e.jsx("li",{children:e.jsxs("label",{className:`flex items-center gap-3 w-full ${O?"px-2 py-1.5 text-xs":"px-3 py-2 text-sm lg:text-base"} text-gray-700 rounded-lg hover:bg-gray-50 transition-all cursor-pointer group`,children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${M?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:M&&e.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),e.jsx("input",{type:"checkbox",checked:M,onChange:()=>M?R():I(),className:"hidden"}),e.jsx("span",{className:"font-semibold italic text-xs text-gray-500 group-hover:text-accent-primary transition-colors",children:M?"B chn tt c":"Chn tt c"})]})}),P.length>0?P.map(V=>{const z=o.includes(V);return e.jsx("li",{children:e.jsxs("label",{className:`flex items-center gap-3 w-full ${O?"px-2 py-1.5 text-xs":"px-3 py-2 text-sm lg:text-base"} rounded-lg transition-all cursor-pointer group ${z?"bg-accent-primary/5 text-accent-primary font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[b==="multiple"&&e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${z?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:z&&e.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),e.jsx("input",{type:b==="single"?"radio":"checkbox",checked:z,onChange:()=>C(V),className:"hidden"}),e.jsx("span",{children:V}),b==="single"&&z&&e.jsx("i",{className:"fas fa-check text-accent-primary ml-auto text-xs"})]})},V)}):e.jsxs("li",{className:`px-3 ${O?"py-4 text-xs":"py-8 text-sm"} text-gray-400 text-center flex flex-col items-center gap-2`,children:[e.jsx("i",{className:"fas fa-search text-2xl opacity-20"}),e.jsx("span",{children:"Khng tm thy kt qu"})]})]}),b==="multiple"&&e.jsxs("div",{className:"p-3 border-t border-gray-50 bg-gray-50/50 flex justify-between items-center",children:[e.jsxs(K,{onClick:E,variant:"ghost",size:"sm",className:"text-xs font-semibold text-red-500 hover:text-red-600 hover:bg-red-50 !px-2 h-8",children:["Xa chn (",o.length,")"]}),e.jsx(K,{onClick:()=>_(!1),variant:"primary",size:"sm",className:"px-4 py-1.5 text-xs font-bold rounded-lg shadow-sm shadow-accent-primary/30",children:"p dng"})]})]})]})},Vo="/ordermanagement/assets/than_tai_anim-D47ZTG_Q.gif",kt=({icon:n,children:l,label:o,htmlFor:i})=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:i,className:"hidden md:block text-sm font-medium text-text-secondary mb-1 md:mb-1.5",children:o}),e.jsxs("div",{className:"relative",children:[n&&e.jsx("i",{className:`fas ${n} absolute top-1/2 left-3 md:left-4 -translate-y-1/2 text-slate-500 peer-focus:text-accent-primary transition-colors text-base z-10`}),l]})]}),oa=({icon:n,title:l})=>e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 p-3 md:p-4 border-b border-white/20 bg-accent-primary/5",children:[e.jsx("i",{className:`fas ${n} text-accent-secondary text-base md:text-lg`}),e.jsx("h3",{className:"text-sm md:text-base font-bold text-text-primary",children:l})]}),Ho=({onSuccess:n,showToast:l,hideToast:o,existingOrderNumbers:i,initialVehicle:u,currentUser:h,vehicleAnalyticsData:f,onOpenImagePreview:x})=>{const[g,b]=m.useState({ten_ban_hang:h,ten_khach_hang:"",so_don_hang:"",dong_xe:"",phien_ban:"",ngoai_that:"",noi_that:"",ngay_coc:"",vin:""}),[c,y]=m.useState(null),N=new Date>=new Date("2026-01-05T00:00:00"),[j,_]=m.useState(!1),[D,w]=m.useState(""),[k,P]=m.useState(""),[C,I]=m.useState(null),[E,R]=m.useState(!1),[H,O]=m.useState(dt),[M,$]=m.useState(la),V="peer w-full pl-10 md:pl-11 pr-3 md:pr-4 py-2 md:py-2.5 text-sm md:text-base rounded-lg focus:outline-none transition-all placeholder:text-text-placeholder futuristic-input",z=!!u;m.useEffect(()=>{if(u){b(Z=>({...Z,dong_xe:u["Dng xe"]||"",phien_ban:u["Phin bn"]||"",ngoai_that:u["Ngoi tht"]||"",noi_that:u["Ni tht"]||"",vin:u.VIN||""}));const W=u["Dng xe"];if(W){const Z=W.toLowerCase().replace(/\s+/g,""),F=Ka[Z];if(F){const v=dt.filter(Y=>{const T=Y.match(/\(([^)]+)\)/);return T&&T[1]&&F.includes(T[1].toLowerCase())});O(v)}else O(dt)}}},[u]);const L=W=>{const{name:Z,value:F}=W.target;b(v=>{const Y={...v,[Z]:F};if(Z==="dong_xe"){Y.phien_ban="",Y.ngoai_that="",Y.noi_that="",F==="VF 5"&&(Y.phien_ban="Plus");const T=F.toLowerCase().replace(/\s+/g,""),U=Ka[T];if(U){const te=dt.filter(de=>{const De=de.match(/\(([^)]+)\)/);return De&&De[1]&&U.includes(De[1].toLowerCase())});O(te)}else O(dt)}return Z==="phien_ban"&&(Y.ngoai_that="",Y.noi_that=""),Y})};m.useEffect(()=>{const{dong_xe:W,phien_ban:Z}=g;if(!W){$(la);return}const F=W.toLowerCase(),v=Z.toLowerCase();let Y=la;for(const T of gr)if(T.models.includes(F)&&(!T.versions||T.versions.includes(v))){Y=T.colors;break}$(Y),Y.length===1&&b(T=>({...T,noi_that:Y[0]}))},[g.dong_xe,g.phien_ban]);const Q=m.useCallback(async W=>{if(y(W),b(Z=>({...Z,ngay_coc:""})),w(""),W){_(!0),w("ang chun b x l...");try{const Z=await oo(W,F=>w(F));Z?(b(F=>({...F,ngay_coc:Z})),w("  in Ngy Cc thnh cng!")):w("Li: Khng tm thy ngy gi hp l trong nh.")}catch(Z){const F=Z instanceof Error?Z.message:"X l nh tht bi.";F.includes("Tesseract")&&l("Li Ti Th Vin","Th vin nhn dng nh cha sn sng. Vui lng lm mi trang (F5).","error",5e3),w(`Li: ${F}`)}finally{_(!1)}}},[l]),q=()=>{b({ten_ban_hang:h,ten_khach_hang:"",so_don_hang:"",dong_xe:"",phien_ban:"",ngoai_that:"",noi_that:"",ngay_coc:"",vin:""}),Q(null)};m.useEffect(()=>{var U,te;if(!f||z)return;const{dong_xe:W,phien_ban:Z,ngoai_that:F}=g;if(!W||!Z||!F){P(""),I(null);return}const v=`${W}|${Z}|${F}`.trim().toLowerCase(),Y=((U=f.pendingRequestCount)==null?void 0:U[v])||0,T=((te=f.stockStatus)==null?void 0:te[v])||{count:0,isSlowMoving:!1};Y>0?(P(`Lu : ang c <strong>${Y}</strong> yu cu khc ang ch ghp cho Mu xe ny.`),I("hot")):T.isSlowMoving&&T.count>0?(P("Gi : Xe ny ang c sn trong kho, c th giao ngay."),I("slow")):(P(""),I(null))},[g.dong_xe,g.phien_ban,g.ngoai_that,f,z]);const ee=async W=>{if(W.preventDefault(),["ten_khach_hang","so_don_hang","dong_xe","phien_ban","ngoai_that","noi_that"].some(v=>!g[v])){l("Thiu Thng Tin","Vui lng in y  thng tin xe v khch hng.","warning",3e3);return}if(!new RegExp("^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$").test(g.so_don_hang)){l("Sai nh Dng","S n hng khng ng nh dng. VD: N31913-VSO-25-04-0028","warning",4e3);return}if(i.includes(g.so_don_hang)){l("n Hng Trng Lp",`S n hng "${g.so_don_hang}"  tn ti.`,"error",4e3);return}if(!c){l("Thiu Chng T","Vui lng ti ln nh y nhim chi.","warning",3e3);return}if(!g.ngay_coc){l("Ch X L nh","Vui lng ch x l Ngy cc t nh.","warning",3e3);return}R(!0),l("ang Gi Yu Cu","Vui lng ch trong giy lt...","loading");try{const v=await vo(g,c);if(o(),v.status==="SUCCESS"&&v.newRecord)n(v.newRecord),q();else throw new Error(v.message||"Gi yu cu tht bi.")}catch(v){o();const Y=v instanceof Error?v.message:"Li khng xc nh.";l("Gi Yu Cu Tht Bi",Y,"error",5e3)}finally{R(!1)}},ie=W=>{W.preventDefault(),x([{src:"pictures/uynhiemchi.webp",originalUrl:"pictures/uynhiemchi.webp",label:"Mu y nhim chi hp l"}],0,"nh Mu")},oe=g.dong_xe?ss[g.dong_xe]||xr:[],xe={hot:"bg-warning-bg border-warning/50 text-warning",slow:"bg-success-bg border-success/50 text-success"};return e.jsxs("form",{onSubmit:ee,className:"flex flex-col h-full relative",children:[e.jsxs("div",{className:"flex-grow overflow-hidden p-4 md:p-6 relative z-10",children:[z&&e.jsxs("div",{className:"p-3 mb-4 rounded-lg border border-accent-primary/50 bg-surface-accent flex items-start gap-3 shadow-sm relative z-10",children:[e.jsx("i",{className:"fas fa-lock text-accent-primary text-xl mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-text-primary text-sm",children:"Yu cu cho xe  gi"}),e.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:["ang to yu cu cho VIN: ",e.jsx("strong",{className:"font-mono text-accent-primary",children:g.vin}),"."]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-x-6 xl:gap-x-8 gap-y-4 md:gap-y-8 relative z-10 h-full",children:[e.jsxs("section",{className:"bg-white/60 backdrop-blur-md rounded-2xl p-0 border border-white/40 shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full overflow-hidden",children:[e.jsx(oa,{icon:"fa-cogs",title:"1. Cu hnh Xe"}),e.jsxs("div",{className:"p-3 md:p-4 space-y-2 md:space-y-3 flex-grow overflow-y-auto custom-scrollbar",children:[e.jsx(kt,{label:"Dng xe",htmlFor:"dong_xe",children:e.jsx(Ht,{id:"dong_xe",label:"Dng xe",placeholder:"Chn dng xe",options:Object.keys(ss),selectedOptions:g.dong_xe?[g.dong_xe]:[],onChange:W=>L({target:{name:"dong_xe",value:W[0]||""}}),icon:"fa-car",selectionMode:"single",variant:"modern",disabled:z,searchable:!1})}),e.jsx(kt,{label:"Phin bn",htmlFor:"phien_ban",children:e.jsx(Ht,{id:"phien_ban",label:"Phin bn",placeholder:"Chn phin bn",options:oe,selectedOptions:g.phien_ban?[g.phien_ban]:[],onChange:W=>L({target:{name:"phien_ban",value:W[0]||""}}),icon:"fa-code-branch",selectionMode:"single",variant:"modern",disabled:!g.dong_xe||z,searchable:!1})}),e.jsx(kt,{label:"Ngoi tht",htmlFor:"ngoai_that",children:e.jsx(Ht,{id:"ngoai_that",label:"Ngoi tht",placeholder:"Chn mu ngoi tht",options:H,selectedOptions:g.ngoai_that?[g.ngoai_that]:[],onChange:W=>L({target:{name:"ngoai_that",value:W[0]||""}}),icon:"fa-fill-drip",selectionMode:"single",variant:"modern",disabled:!g.phien_ban||z,searchable:!1})}),e.jsx(kt,{label:"Ni tht",htmlFor:"noi_that",children:e.jsx(Ht,{id:"noi_that",label:"Ni tht",placeholder:"Chn ni tht",options:M,selectedOptions:g.noi_that?[g.noi_that]:[],onChange:W=>L({target:{name:"noi_that",value:W[0]||""}}),icon:"fa-couch",selectionMode:"single",variant:"modern",disabled:!g.phien_ban||z,searchable:!1})}),k&&C&&e.jsxs("div",{className:`p-3 mt-2 rounded-lg border text-sm flex items-start ${xe[C]}`,children:[e.jsx("i",{className:`fas ${C==="hot"?"fa-exclamation-triangle":"fa-check-circle"} mr-3 mt-1`}),e.jsx("p",{dangerouslySetInnerHTML:{__html:k}})]})]})]}),e.jsxs("section",{className:"bg-white/60 backdrop-blur-md rounded-2xl p-0 border border-white/40 shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full overflow-hidden",children:[e.jsx(oa,{icon:"fa-user-circle",title:"2. Thng tin & Chng t"}),e.jsxs("div",{className:"p-3 md:p-4 space-y-2 md:space-y-3 flex-grow overflow-y-auto custom-scrollbar",children:[e.jsx(kt,{icon:"fa-user-tie",label:"Tn khch hng",htmlFor:"ten_khach_hang",children:e.jsx("input",{id:"ten_khach_hang",type:"text",name:"ten_khach_hang",value:g.ten_khach_hang,onChange:L,onInput:W=>W.currentTarget.value=W.currentTarget.value.toUpperCase(),required:!0,className:V,placeholder:"VD: NGUYEN VAN A"})}),e.jsx(kt,{icon:"fa-barcode",label:"S n hng",htmlFor:"so_don_hang",children:e.jsx("input",{id:"so_don_hang",type:"text",name:"so_don_hang",value:g.so_don_hang,onChange:L,required:!0,pattern:"^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$",title:"nh dng: Nxxxxx-XXX-yy-mm-zzzz",onInvalid:W=>W.target.setCustomValidity("S n hng khng ng nh dng. Yu cu nh dng: Nxxxxx-XXX-yy-mm-zzzz"),onInput:W=>W.target.setCustomValidity(""),className:V,placeholder:"VD: N12345-VSO-24-01-0001"})}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"y nhim chi"}),e.jsxs(K,{type:"button",onClick:ie,variant:"ghost",size:"sm",className:"text-xs text-accent-secondary hover:underline hover:text-accent-primary-hover !p-0 !h-auto",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Xem mu"]})]}),e.jsx($o,{onFileSelect:Q,isProcessing:j,ocrStatus:D,showToast:l})]}),e.jsx("div",{className:"mt-2",children:e.jsx(kt,{icon:"fa-calendar-alt",label:"Ngy Cc (T ng in t nh)",htmlFor:"ngay_coc",children:e.jsx("input",{id:"ngay_coc",name:"ngay_coc",type:"datetime-local",value:g.ngay_coc?g.ngay_coc.slice(0,16):"",required:!0,readOnly:!0,className:`${V} !bg-surface-input cursor-not-allowed`})})})]})]}),e.jsxs("section",{className:"bg-white/60 backdrop-blur-md rounded-2xl p-0 border border-white/40 shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-accent-primary/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsx(oa,{icon:"fa-eye",title:"3. Xem trc & Xc thc"}),e.jsxs("div",{className:"p-3 md:p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"relative h-52 bg-surface-ground rounded-xl flex items-center justify-center p-4 border border-border-primary text-center shadow-inner-sm z-10",children:[g.dong_xe&&g.ngoai_that?e.jsx(da,{model:g.dong_xe,exteriorColor:g.ngoai_that,className:"max-w-full max-h-full object-contain drop-shadow-lg",alt:"Cu hnh xe"}):e.jsxs("div",{className:"text-text-placeholder transition-all duration-300",children:[e.jsx("i",{className:"fas fa-car text-5xl text-slate-400 mb-3 opacity-50"}),e.jsx("p",{className:"font-semibold text-sm text-slate-500",children:"Xem trc xe ca bn"}),e.jsx("p",{className:"text-xs mt-1",children:"Chn cu hnh xe  xem trc"})]}),(E||j)&&e.jsx("div",{className:"absolute inset-0 bg-white/50 backdrop-blur-sm flex items-center justify-center rounded-xl",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-accent-primary"})})]}),N&&e.jsx("div",{className:"flex-grow relative mt-2 flex justify-center items-end min-h-[60px]",children:e.jsx("img",{src:Vo,alt:"Thn Ti",className:"w-24 md:w-32 object-contain animate-bounce-slow drop-shadow-xl"})})]})]})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row justify-end items-center gap-3 p-4 md:p-6 border-t border-white/20 relative z-10 bg-white/60 backdrop-blur-md",children:[e.jsx(K,{type:"button",onClick:q,disabled:E||z,variant:"secondary",size:"sm",className:"w-auto",leftIcon:e.jsx("i",{className:"fas fa-eraser"}),children:"Xa Nhp"}),e.jsx(K,{type:"submit",disabled:E,isLoading:E,variant:"primary",size:"sm",className:"w-auto",leftIcon:E?void 0:e.jsx("i",{className:"fas fa-paper-plane"}),children:"Xc nhn & Gi"})]})]})},zo=_e.memo(Ho),er="/ordermanagement/assets/lantern_anim_new-DHaWNgRc.gif",Uo=({isOpen:n,onClose:l,onSuccess:o,showToast:i,hideToast:u,existingOrderNumbers:h,initialVehicle:f,currentUser:x,vehicleAnalyticsData:g,onOpenImagePreview:b})=>{const c=new Date>=new Date("2026-01-05T00:00:00");return n?e.jsx("div",{className:"fixed inset-0 bg-slate-900/80 z-[60] flex items-center justify-center p-0 md:p-4 animate-fade-in",onClick:l,children:e.jsxs("div",{className:`relative bg-white w-full h-[100dvh] md:h-[90vh] md:max-w-7xl flex flex-col md:rounded-2xl shadow-2xl animate-fade-in-scale-up border-[3px] overflow-hidden ${c?"border-[#D32F2F]":"border-gray-200"}`,onClick:y=>y.stopPropagation(),children:[e.jsxs("header",{className:`relative flex items-center justify-center p-5 border-b-2 flex-shrink-0 z-10 bg-white ${c?"border-[#D32F2F]/20":"border-gray-100"}`,children:[e.jsxs("div",{className:"relative text-center animate-fade-in-down",children:[c&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:er,className:"absolute -top-4 -left-12 md:-left-32 w-16 md:w-24 h-auto z-[60] drop-shadow-md pointer-events-none select-none",alt:"",draggable:"false"}),e.jsx("img",{src:er,className:"absolute -top-4 -right-12 md:-right-32 w-16 md:w-24 h-auto z-[60] drop-shadow-md pointer-events-none select-none",alt:"",draggable:"false"})]}),e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold uppercase tracking-wide drop-shadow-sm ${c?"text-[#D32F2F] font-serif":"text-gray-800 font-sans"}`,children:"Yu Cu Ghp Xe"}),c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-24 h-1 bg-[#FFD700] mx-auto my-1.5 rounded-full shadow-sm"}),e.jsx("p",{className:"text-sm text-[#8B5E3C] font-medium",children:"Khai xun c lc - Vn dm bnh an"})]}):e.jsx("div",{className:"w-16 h-1 bg-blue-500 mx-auto my-2 rounded-full"})]}),e.jsx(K,{onClick:l,variant:"ghost",className:`absolute top-3 right-3 md:top-4 md:right-4 w-9 h-9 rounded-full flex items-center justify-center transition-colors !p-0 z-50 ${c?"text-[#D32F2F] hover:bg-[#FFE0B2] hover:text-[#B71C1C] border border-[#D32F2F]/30":"text-gray-500 hover:bg-gray-100"}`,children:e.jsx("i",{className:"fas fa-times text-lg"})})]}),e.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden relative z-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]",children:e.jsx(zo,{onSuccess:o,showToast:i,hideToast:u,existingOrderNumbers:h,initialVehicle:f,currentUser:x,vehicleAnalyticsData:g,onOpenImagePreview:b})}),c&&e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-2 bg-gradient-to-r from-[#D32F2F] via-[#FFD700] to-[#D32F2F]"})]})}):null},Bo=_e.memo(Uo),_t=({icon:n,children:l})=>e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:`fas ${n} absolute top-1/2 left-4 -translate-y-1/2 text-slate-500 peer-focus:text-accent-primary transition-colors text-base z-10`}),l]})}),Wo=({isOpen:n,onClose:l,onSuccess:o,showToast:i,order:u,existingOrderNumbers:h})=>{var P;const[f,x]=m.useState({}),[g,b]=m.useState(!1),[c,y]=m.useState(dt),N=ut();m.useEffect(()=>{u&&x({"Tn khch hng":u["Tn khch hng"],"S n hng":u["S n hng"],"Dng xe":u["Dng xe"],"Phin bn":u["Phin bn"],"Ngoi tht":u["Ngoi tht"],"Ni tht":u["Ni tht"],"Ngy cc":u["Ngy cc"]?Ye(u["Ngy cc"]).format("YYYY-MM-DDTHH:mm"):""})},[u]);const j=C=>{const{name:I,value:E}=C.target;x(R=>{const H={...R,[I]:E};return I==="Dng xe"&&(H["Phin bn"]="",H["Ngoi tht"]="",H["Ni tht"]="",E==="VF 5"&&(H["Phin bn"]="Plus")),I==="Phin bn"&&(H["Ngoi tht"]="",H["Ni tht"]=""),H})};if(m.useEffect(()=>{const{"Dng xe":C,"Phin bn":I}=f;if(!C){y(dt);return}const E=C.toLowerCase(),R=I.toLowerCase();let H=dt;for(const O of gr)if(O.models.includes(E)&&(!O.versions||O.versions.includes(R))){H=O.colors;break}y(H),H.length===1&&f["Ni tht"]!==H[0]&&x(O=>({...O,"Ni tht":H[0]}))},[f["Dng xe"],f["Phin bn"]]),!n||!u)return null;const _=(P=u["Kt qu"])==null?void 0:P.toLowerCase().includes(" ghp"),D="peer w-full pl-11 pr-4 py-2.5 rounded-lg focus:outline-none transition-all placeholder:text-text-placeholder futuristic-input",w=async C=>{if(C.preventDefault(),["Tn khch hng","S n hng","Dng xe","Phin bn","Ngoi tht","Ni tht","Ngy cc"].some(R=>!f[R])){i("Thiu Thng Tin","Vui lng in y  thng tin.","warning");return}if(!new RegExp("^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$").test(f["S n hng"])){i("Sai nh Dng","S n hng khng ng nh dng. VD: N31913-VSO-25-04-0028","warning");return}if(h.includes(f["S n hng"])){i("n Hng Trng Lp",`S n hng "${f["S n hng"]}"  tn ti.`,"error");return}b(!0),i("ang cp nht...","Vui lng ch trong giy lt.","loading");try{const R={};if(Object.keys(f).forEach(O=>{const M=O,$=u[M],V=f[M];if(M==="Ngy cc"){const z=$?Ye($).format("YYYY-MM-DDTHH:mm"):"",L=V?Ye(V).format("YYYY-MM-DDTHH:mm"):"";z!==L&&(R[M]=new Date(V).toISOString())}else String(V||"")!==String($||"")&&(R[M]=V)}),Object.keys(R).length===0){i("Thng Bo","Khng c thay i no  lu.","info"),l();return}const H=await ko(u["S n hng"],R);o(H.message)}catch(R){const H=R instanceof Error?R.message:"Li khng xc nh.";i("Cp Nht Tht Bi",H,"error",5e3)}finally{b(!1)}},k=f["Dng xe"]?ss[f["Dng xe"]]||xr:[];return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("form",{onSubmit:w,className:"bg-surface-card w-full md:max-w-2xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:C=>C.stopPropagation(),style:N,children:[e.jsxs("header",{className:"flex items-center justify-between p-5 border-b border-border-primary",children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Chnh Sa n Hng"}),e.jsx("button",{type:"button",onClick:l,className:"w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 space-y-4 custom-scrollbar",children:[_&&e.jsxs("div",{className:"p-3 mb-4 rounded-lg border border-amber-500/50 bg-amber-500/10 flex items-start gap-3 shadow-sm",children:[e.jsx("i",{className:"fas fa-info-circle text-amber-500 text-lg mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-700 text-sm",children:"n hng  ghp xe"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:'Thng tin xe (Dng xe, Phin bn, Mu sc) khng th thay i. Vui lng "Hy ghp" nu mun thay i.'})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(_t,{icon:"fa-user-tie",label:"Tn khch hng",htmlFor:"Tn khch hng",children:e.jsx("input",{id:"Tn khch hng",type:"text",name:"Tn khch hng",value:f["Tn khch hng"]||"",onChange:j,onInput:C=>C.currentTarget.value=C.currentTarget.value.toUpperCase(),required:!0,className:D,placeholder:"VD: NGUYEN VAN A"})}),e.jsx(_t,{icon:"fa-barcode",label:"S n hng",htmlFor:"S n hng",children:e.jsx("input",{id:"S n hng",type:"text",name:"S n hng",value:f["S n hng"]||"",onChange:j,required:!0,pattern:"^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$",title:"nh dng: Nxxxxx-XXX-yy-mm-zzzz",onInvalid:C=>C.target.setCustomValidity("S n hng khng ng nh dng."),onInput:C=>C.target.setCustomValidity(""),className:D,placeholder:"VD: N12345-VSO-24-01-0001"})}),e.jsx(_t,{icon:"fa-car",label:"Dng xe",htmlFor:"Dng xe",children:e.jsxs("select",{id:"Dng xe",name:"Dng xe",value:f["Dng xe"]||"",onChange:j,required:!0,className:`${D} futuristic-select disabled:opacity-50`,disabled:_,children:[e.jsx("option",{value:"",disabled:!0,children:"Chn dng xe"}),Object.keys(ss).map(C=>e.jsx("option",{value:C,children:C},C))]})}),e.jsx(_t,{icon:"fa-sitemap",label:"Phin bn",htmlFor:"Phin bn",children:e.jsxs("select",{id:"Phin bn",name:"Phin bn",value:f["Phin bn"]||"",onChange:j,required:!0,disabled:!f["Dng xe"]||_,className:`${D} futuristic-select disabled:opacity-50`,children:[e.jsx("option",{value:"",disabled:!0,children:"Chn phin bn"}),k.map(C=>e.jsx("option",{value:C,children:C},C))]})}),e.jsx(_t,{icon:"fa-palette",label:"Ngoi tht",htmlFor:"Ngoi tht",children:e.jsxs("select",{id:"Ngoi tht",name:"Ngoi tht",value:f["Ngoi tht"]||"",onChange:j,required:!0,disabled:!f["Phin bn"]||_,className:`${D} futuristic-select disabled:opacity-50`,children:[e.jsx("option",{value:"",disabled:!0,children:"Chn mu ngoi tht"}),dt.map(C=>e.jsx("option",{value:C,children:C},C))]})}),e.jsx(_t,{icon:"fa-chair",label:"Ni tht",htmlFor:"Ni tht",children:e.jsxs("select",{id:"Ni tht",name:"Ni tht",value:f["Ni tht"]||"",onChange:j,required:!0,disabled:!f["Phin bn"]||_,className:`${D} futuristic-select disabled:opacity-50`,children:[e.jsx("option",{value:"",disabled:!0,children:"Chn ni tht"}),c.map(C=>e.jsx("option",{value:C,children:C},C))]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(_t,{icon:"fa-calendar-alt",label:"Ngy cc",htmlFor:"Ngy cc",children:e.jsx("input",{id:"Ngy cc",name:"Ngy cc",type:"datetime-local",value:f["Ngy cc"]||"",onChange:j,required:!0,className:`${D} disabled:opacity-50 disabled:cursor-not-allowed`,disabled:!0})})})]})]})}),e.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end items-center gap-3 bg-surface-card relative z-10",children:[e.jsx(K,{onClick:l,variant:"secondary",size:"sm",disabled:g,leftIcon:e.jsx("i",{className:"fas fa-times"}),children:"Hy"}),e.jsx(K,{onClick:w,variant:"primary",size:"sm",isLoading:g,leftIcon:e.jsx("i",{className:"fas fa-save"}),children:"Lu Thay i"})]})]})})},St=n=>typeof n!="string"?"":n.trim().replace(/\s+/g," ").normalize("NFC"),Ms=async n=>{const l=new URLSearchParams(n);return(await axios.post(ns,l)).data},Go=async(n,l)=>{try{const o=await Ms({action:"login",username:n.toLowerCase(),password:l});if(o.success&&o.username&&o.consultantName){const i=o.consultantName||o.username,u=o.role||"T vn bn hng",h=o.email;return sessionStorage.setItem("isLoggedIn","true"),sessionStorage.setItem("currentUser",o.username),sessionStorage.setItem("currentConsultant",i),sessionStorage.setItem("userRole",u),h&&sessionStorage.setItem("userEmail",h),{success:!0,username:o.username,consultantName:i,role:u,email:h}}else return{success:!1,message:o.message||"Tn ng nhp hoc mt khu khng ng."}}catch(o){return console.error("Login API error:",o),{success:!1,message:"Khng th kt ni n my ch. Vui lng th li."}}},qo=async(n,l,o)=>{try{const i=await Ms({action:"changePassword",username:n.toLowerCase(),oldPassword:l,newPassword:o});return i.success?{success:!0,message:i.message}:{success:!1,message:i.message||"i mt khu tht bi."}}catch(i){return console.error("Change Password API error:",i),{success:!1,message:"Khng th kt ni n my ch. Vui lng th li."}}},Xo=async n=>{try{const l=await Ms({action:"forgotPassword",email:n});return l.success?{success:!0,message:l.message}:{success:!1,message:l.message||"Yu cu m OTP tht bi."}}catch(l){return console.error("Forgot Password API error:",l),{success:!1,message:l instanceof Error?l.message:"Khng th kt ni n my ch."}}},Ko=async(n,l,o)=>{try{const i=await Ms({action:"resetPassword",email:n,otp:l,newPassword:o});return i.success?{success:!0,message:i.message}:{success:!1,message:i.message||"t li mt khu tht bi."}}catch(i){return console.error("Reset Password API error:",i),{success:!1,message:i instanceof Error?i.message:"Khng th kt ni n my ch."}}},Zo=({isOpen:n,onClose:l,showToast:o,username:i})=>{const[u,h]=m.useState(""),[f,x]=m.useState(""),[g,b]=m.useState(""),[c,y]=m.useState(!1),N=ut(),j=async w=>{if(w.preventDefault(),!u||!f||!g){o("Thiu Thng Tin","Vui lng in y  cc trng.","warning");return}if(f.length<6){o("Mt Khu Yu","Mt khu mi phi c t nht 6 k t.","warning");return}if(f!==g){o("Li","Mt khu xc nhn khng khp.","error");return}if(u===f){o("Lu ","Mt khu mi phi khc mt khu c.","info");return}y(!0);const k=await qo(i,u,f);y(!1),k.success?(o("Thnh Cng",k.message||"Mt khu  c thay i thnh cng!","success"),l()):o("Tht Bi",k.message||"i mt khu khng thnh cng.","error")},_=()=>{h(""),x(""),b(""),y(!1),l()};if(!n)return null;const D="peer w-full pl-12 pr-4 py-3 bg-surface-ground text-text-primary border border-border-primary rounded-lg focus:outline-none focus:border-accent-primary transition-all placeholder:text-text-placeholder focus:shadow-glow-accent";return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-0 md:p-4",onClick:_,children:e.jsx("div",{className:"bg-surface-card w-full md:max-w-md h-[100dvh] md:h-auto rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:w=>w.stopPropagation(),style:N,children:e.jsxs("form",{onSubmit:j,children:[e.jsxs("header",{className:"relative flex flex-col items-center justify-center p-6 text-center bg-surface-card border-b border-border-primary",children:[e.jsxs("div",{className:"animate-fade-in-down",children:[e.jsx("h2",{className:"text-xl font-bold text-gradient",children:"i Mt Khu"}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Bo mt ti khon ca bn."})]}),e.jsx("button",{type:"button",onClick:_,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex-shrink-0 flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("main",{className:"p-4 md:p-6 space-y-4 overflow-y-auto flex-grow min-h-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-shield-alt absolute top-1/2 left-4 -translate-y-1/2 text-text-secondary peer-focus:text-accent-primary"}),e.jsx("input",{type:"password",value:u,onChange:w=>h(w.target.value),placeholder:"Mt khu c",required:!0,className:D})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-lock absolute top-1/2 left-4 -translate-y-1/2 text-text-secondary peer-focus:text-accent-primary"}),e.jsx("input",{type:"password",value:f,onChange:w=>x(w.target.value),placeholder:"Mt khu mi (t nht 6 k t)",required:!0,className:D})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-check-circle absolute top-1/2 left-4 -translate-y-1/2 text-text-secondary peer-focus:text-accent-primary"}),e.jsx("input",{type:"password",value:g,onChange:w=>b(w.target.value),placeholder:"Xc nhn mt khu mi",required:!0,className:D})]})]}),e.jsxs("footer",{className:"p-4 border-t border-border-primary flex justify-end gap-4 bg-surface-ground rounded-b-2xl",children:[e.jsx("button",{type:"button",onClick:_,disabled:c,className:"btn-secondary",children:"Hy"}),e.jsx("button",{type:"submit",disabled:c,className:"btn-primary",children:c?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"})," ang x l..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save mr-2"})," Xc Nhn"]})})]})]})})})},Jo=({isOpen:n,onClose:l,images:o=[],startIndex:i=0,customerName:u})=>{const[h,f]=m.useState(i),[x,g]=m.useState(!0),[b,c]=m.useState(null),[y,N]=m.useState(null),[j,_]=m.useState(0),[D,w]=m.useState(!1),[k,P]=m.useState({scale:1,x:0,y:0,rotate:0}),[C,I]=m.useState(!1),[E,R]=m.useState({x:0,y:0}),[H,O]=m.useState(!0),M=m.useRef(null),$=m.useRef(null),V=()=>P({scale:1,x:0,y:0,rotate:0}),z=m.useCallback(v=>{if(o.length===0)return;const Y=(v+o.length)%o.length;Y!==h&&(f(Y),V())},[o,h]);m.useEffect(()=>{if(n){const v=o.length>0&&i>=0&&i<o.length?i:0;f(v),O(!0)}},[n,i,o]),m.useEffect(()=>{if(!n||o.length===0)return;g(!0),c(null),N(null),_(0),w(!1);const v=o[h];if(!v)return;const Y=Xa(v.src,1920);N(Y)},[n,o,h]);const L=m.useCallback(v=>{v.key==="Escape"&&l(),v.key==="ArrowRight"&&z(h+1),v.key==="ArrowLeft"&&z(h-1),v.key===" "&&(v.preventDefault(),O(Y=>!Y))},[l,z,h]);m.useEffect(()=>{if(n)return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[n,L]);const Q=v=>{if(!M.current)return;v.preventDefault();const Y=.1,{deltaY:T}=v,U=k.scale-(T>0?Y:-Y),te=Math.max(.2,Math.min(U,10));te<=1?P(de=>({...de,scale:te,x:0,y:0})):P(de=>({...de,scale:te}))},q=v=>{k.scale<=1||(v.preventDefault(),I(!0),R({x:v.clientX-k.x,y:v.clientY-k.y}))},ee=v=>{!C||k.scale<=1||(v.preventDefault(),P(Y=>({...Y,x:v.clientX-E.x,y:v.clientY-E.y})))},ie=v=>{C&&(v.preventDefault(),I(!1))},oe=v=>{const Y=k.scale+(v==="in"?.2:-.2),T=Math.max(.2,Math.min(Y,10));T<=1?P(U=>({...U,scale:T,x:0,y:0})):P(U=>({...U,scale:T}))},xe=v=>{P(Y=>({...Y,rotate:Y.rotate+(v==="right"?90:-90)}))},W=()=>{var v;document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():(v=$.current)==null||v.requestFullscreen().catch(Y=>{console.error(`Error attempting to enable full-screen mode: ${Y.message} (${Y.name})`)})},Z=()=>{const v=o[h];if(!v)return;const Y=mr(v.originalUrl||v.src),T=uo(u,v.label),U=document.createElement("a");U.href=Y,U.setAttribute("download",T),document.body.appendChild(U),U.click(),document.body.removeChild(U)};if(!n)return null;const F=o.length>0?o[h]:null;return e.jsxs("div",{ref:$,className:"fixed inset-0 bg-black/95 z-[100] flex flex-col animate-fade-in overflow-hidden select-none",onClick:()=>O(v=>!v),onWheel:Q,children:[e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",onMouseMove:ee,onMouseUp:ie,onMouseLeave:ie,children:[x&&e.jsxs("div",{className:"flex flex-col items-center gap-3 text-white/70",children:[e.jsx("i",{className:"fas fa-circle-notch fa-spin text-4xl"}),e.jsx("span",{className:"text-sm font-medium",children:"ang ti nh..."})]}),b&&!x&&e.jsxs("div",{className:"text-center p-6 bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 max-w-sm mx-4 text-white",onClick:v=>v.stopPropagation(),children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-4xl text-amber-400 mb-4"}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Khng th ti nh"}),e.jsx("p",{className:"text-sm text-white/70 mb-4",children:b==="IMAGE_LOAD_FAILED"?"C li xy ra khi ti nh t ngun.":b}),(F==null?void 0:F.originalUrl)&&e.jsxs("a",{href:F.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-white text-black rounded-full font-bold hover:bg-gray-200 transition-colors text-sm",children:["M trong tab mi ",e.jsx("i",{className:"fas fa-external-link-alt text-xs"})]})]}),y&&!b&&!D&&e.jsx("img",{ref:M,src:y,alt:F==null?void 0:F.label,className:`max-w-full max-h-full object-contain transition-opacity duration-300 ${x?"opacity-0":"opacity-100"}`,style:{transform:`scale(${k.scale}) translate(${k.x/k.scale}px, ${k.y/k.scale}px) rotate(${k.rotate}deg)`,cursor:C?"grabbing":k.scale>1?"grab":"default",transition:C?"none":"transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)",willChange:"transform"},onLoad:()=>g(!1),onError:()=>{if(F){if(j===0){_(1);const Y=co(F.src);if(Y!==y){N(Y);return}}const v=rs(F.src);if(v&&!D){w(!0),N(`https://drive.google.com/file/d/${v}/preview`),g(!1);return}}g(!1),c("IMAGE_LOAD_FAILED")},onMouseDown:q,onClick:v=>v.stopPropagation(),onDoubleClick:v=>{v.stopPropagation(),W()}}),D&&y&&e.jsxs("div",{className:"w-full h-full md:max-w-6xl md:max-h-[85vh] relative shadow-2xl md:rounded-2xl overflow-hidden bg-[#1e1e1e] border border-white/10",children:[e.jsx("iframe",{src:y,title:"File Preview",className:"w-full h-full w-full h-full border-0",allow:"autoplay",onLoad:()=>g(!1)}),e.jsx("div",{className:"absolute top-0 right-0 w-14 h-14 bg-[#1e1e1e] z-20 pointer-events-none"})]})]}),e.jsxs("div",{className:`absolute top-0 left-0 right-0 h-24 bg-gradient-to-b from-black/90 via-black/50 to-transparent z-50 flex items-start pt-6 px-6 justify-between transition-all duration-500 transform ${H?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,style:{pointerEvents:H?"auto":"none"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-4 animate-slide-in-left",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 backdrop-blur-md border border-white/10 flex items-center justify-center shadow-glow-sm",children:e.jsx("i",{className:"fas fa-image text-xl text-purple-500 drop-shadow-md"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-white tracking-wide drop-shadow-sm line-clamp-1 max-w-[200px] md:max-w-md",children:F==null?void 0:F.label}),e.jsxs("p",{className:"text-xs text-white/60 font-medium tracking-wider uppercase",children:[u,"  ",h+1,"/",o.length]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 animate-slide-in-right",children:[e.jsxs("button",{onClick:Z,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-white/20 backdrop-blur-md border border-white/10 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-cyan-500/20 hover:scale-110 active:scale-95",title:"Ti v",children:[e.jsx("i",{className:"fas fa-download text-lg group-hover:text-cyan-400 transition-colors"}),e.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/80 text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Ti v"})]}),e.jsx("button",{onClick:l,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-red-500/20 backdrop-blur-md border border-white/10 hover:border-red-500/50 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-red-500/20 hover:scale-110 active:scale-95",title:"ng (Esc)",children:e.jsx("i",{className:"fas fa-times text-lg group-hover:text-red-400 transition-colors"})})]})]}),o.length>1&&H&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:v=>{v.stopPropagation(),z(h-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 text-white flex items-center justify-center hover:bg-black/50 transition-all hover:scale-110 active:scale-95 z-10 hidden sm:flex",children:e.jsx("i",{className:"fas fa-chevron-left text-xl"})}),e.jsx("button",{onClick:v=>{v.stopPropagation(),z(h+1)},className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 text-white flex items-center justify-center hover:bg-black/50 transition-all hover:scale-110 active:scale-95 z-10 hidden sm:flex",children:e.jsx("i",{className:"fas fa-chevron-right text-xl"})})]}),e.jsxs("div",{className:`absolute bottom-0 left-0 right-0 p-6 transition-all duration-300 transform ${H?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"max-w-3xl mx-auto flex flex-col gap-4",children:[o.length>1&&e.jsx("div",{className:"flex justify-center overflow-x-auto py-2 px-4 gap-2 no-scrollbar mask-gradient",children:o.map((v,Y)=>e.jsx("button",{onClick:()=>z(Y),className:`relative w-12 h-12 sm:w-16 sm:h-16 flex-shrink-0 rounded-lg overflow-hidden transition-all duration-300 border-2 ${h===Y?"border-white scale-110 shadow-lg ring-2 ring-black/20":"border-transparent opacity-50 hover:opacity-100 hover:scale-105"}`,children:e.jsx("img",{src:Xa(v.src,320),alt:v.label,className:"w-full h-full object-cover"})},Y))}),e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-4 bg-black/60 backdrop-blur-xl border border-white/10 px-6 py-3 rounded-full shadow-2xl mx-auto",children:[e.jsx("button",{onClick:()=>oe("out"),disabled:k.scale<=.2,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors disabled:opacity-30",children:e.jsx("i",{className:"fas fa-minus"})}),e.jsxs("span",{className:"text-sm font-mono text-white/90 w-12 text-center select-none",children:[Math.round(k.scale*100),"%"]}),e.jsx("button",{onClick:()=>oe("in"),disabled:k.scale>=10,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors disabled:opacity-30",children:e.jsx("i",{className:"fas fa-plus"})}),e.jsx("div",{className:"w-px h-6 bg-white/20"}),e.jsx("button",{onClick:()=>xe("left"),className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"Xoay tri",children:e.jsx("i",{className:"fas fa-undo"})}),e.jsx("button",{onClick:()=>xe("right"),className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"Xoay phi",children:e.jsx("i",{className:"fas fa-redo"})}),e.jsx("div",{className:"w-px h-6 bg-white/20"}),e.jsx("button",{onClick:V,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"t li",children:e.jsx("i",{className:"fas fa-compress"})}),e.jsx("button",{onClick:W,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"Ton mn hnh",children:e.jsx("i",{className:"fas fa-expand"})})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("span",{className:"px-4 py-2 rounded-full bg-black/60 backdrop-blur-md border border-white/5 text-white/50 text-xs inline-block",children:"Nhn vo mn hnh  n/hin cng c"})})]})]})},Qo="/ordermanagement/assets/yes-DSvs6nbc.json",ec="/ordermanagement/assets/no-animation-DB21lGdK.json",tc=({isOpen:n,onClose:l,onSubmit:o,title:i,description:u,inputs:h=[],submitText:f,submitColor:x,icon:g,targetId:b,showToast:c})=>{const[y,N]=m.useState({}),[j,_]=m.useState(!1),D=ut();if(m.useEffect(()=>{n?(N(E=>Object.keys(E).length>0&&h.length>0?E:h.reduce((R,H)=>(R[H.id]="",R),{})),_(!1)):(N({}),_(!1))},[n]),!n)return null;const w=E=>{let R=E.target.value;const H=h.find(O=>O.id===E.target.name);H!=null&&H.isVIN&&(R=R.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,17)),N(O=>({...O,[E.target.name]:R}))},k=()=>{var E;for(const R of h){const H=(E=y[R.id])==null?void 0:E.trim();if(!H||R.isVIN&&H.length!==17)return!1}return!0},P=async()=>{if(h.length>0&&!k()){c?c("Thng tin khng hp l","Vui lng in y  v chnh xc thng tin.","warning"):alert("Vui lng in y  v chnh xc thng tin.");return}_(!0),await o(y)||_(!1)},C={primary:{bg:"bg-accent-primary",iconBg:"bg-blue-100",iconText:"text-accent-primary"},danger:{bg:"bg-danger",iconBg:"bg-danger-bg",iconText:"text-danger"},success:{bg:"bg-success",iconBg:"bg-success-bg",iconText:"text-success"}},I=C[x]||C.primary;return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("div",{className:"bg-surface-card w-full md:max-w-md h-full md:h-auto rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:E=>E.stopPropagation(),style:D,children:[e.jsx("div",{className:`h-1.5 rounded-t-none md:rounded-t-2xl ${I.bg} flex-shrink-0`}),e.jsxs("header",{className:"p-3 flex items-start gap-2",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-lg ${I.iconBg}`,children:e.jsx("i",{className:`fas ${g} text-2xl ${I.iconText}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold leading-6 text-text-primary",children:i}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:u})]})]}),e.jsxs("main",{className:"p-4 md:p-6 space-y-4 overflow-y-auto flex-grow min-h-0",children:[b&&e.jsxs("div",{className:"bg-surface-ground border border-border-primary rounded-md p-1.5 text-center",children:[e.jsx("p",{className:"text-xs text-text-secondary",children:"Thc hin cho:"}),e.jsx("p",{className:"text-sm font-semibold text-text-primary font-mono",children:b})]}),h.length>0&&e.jsx("div",{className:"space-y-2",children:h.map(E=>{var R;return e.jsxs("div",{children:[e.jsx("label",{htmlFor:E.id,className:"block text-sm font-medium text-text-secondary mb-1",children:E.label}),E.type==="textarea"?e.jsx("textarea",{id:E.id,name:E.id,value:y[E.id]||"",onChange:w,placeholder:E.placeholder,rows:3,className:"w-full bg-surface-ground border border-border-primary rounded-lg shadow-inner-sm p-2 focus:ring-accent-primary focus:border-accent-primary transition futuristic-input"}):E.type==="select"?e.jsxs("select",{id:E.id,name:E.id,value:y[E.id]||"",onChange:w,className:"w-full bg-surface-ground border border-border-primary rounded-lg shadow-inner-sm p-2 focus:ring-accent-primary focus:border-accent-primary transition futuristic-input",children:[e.jsx("option",{value:"",disabled:!0,children:E.placeholder||"Chn mt ty chn"}),(R=E.options)==null?void 0:R.map(H=>e.jsx("option",{value:H,children:H},H))]}):e.jsx("input",{id:E.id,name:E.id,type:E.type||"text",value:y[E.id]||"",onChange:w,placeholder:E.placeholder,maxLength:E.isVIN?17:void 0,className:"w-full bg-surface-ground border border-border-primary rounded-lg shadow-inner-sm p-2 focus:ring-accent-primary focus:border-accent-primary transition futuristic-input"})]},E.id)})})]}),e.jsxs("footer",{className:"px-3 py-2 flex justify-end items-center gap-1.5 bg-surface-ground rounded-none md:rounded-b-2xl border-t border-border-primary flex-shrink-0",children:[e.jsx("div",{onClick:j?void 0:l,title:"Hy",className:`cursor-pointer ${j?"opacity-50 cursor-not-allowed":"hover:scale-110 transition-transform"}`,children:e.jsx("lottie-player",{src:ec,background:"transparent",speed:"1",style:{width:"52px",height:"52px"},loop:!0,autoplay:!0})}),e.jsx("div",{onClick:j?void 0:P,title:f,className:`cursor-pointer flex items-center justify-center w-[52px] h-[52px] ${j||h.length>0&&!k()?"opacity-50 cursor-not-allowed":"hover:scale-110 transition-transform"}`,children:j?e.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-accent-primary"}):e.jsx("lottie-player",{src:Qo,background:"transparent",speed:"1",style:{width:"52px",height:"52px"},loop:!0,autoplay:!0})})]})]})})},sc=({order:n,onClose:l,onSubmit:o})=>{const[i,u]=m.useState("personal"),[h,f]=m.useState(""),[x,g]=m.useState(null),[b,c]=m.useState(null),[y,N]=m.useState(null),[j,_]=m.useState(null),[D,w]=m.useState(null),[k,P]=m.useState(!1),C=ut();if(m.useEffect(()=>{n||(u("personal"),f(""),g(null),c(null),N(null),_(null),w(null),P(!1))},[n]),!n)return null;const I=()=>!j||!D?!1:i==="personal"?x&&b:i==="company"?y&&h.trim()!=="":!1,E=async()=>{if(!I()){alert("Vui lng in y  thng tin v ti ln tt c cc tp cn thit.");return}P(!0);const R={orderNumber:n["S n hng"],customerType:i,files:{idCardFront:x,idCardBack:b,businessLicense:y,regFront:j,regBack:D}};i==="company"&&(R.dmsCode=h),await o(R,n.VIN)||P(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("div",{className:"bg-surface-card w-full md:max-w-xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:R=>R.stopPropagation(),style:C,children:[e.jsxs("header",{className:"flex-shrink-0 relative flex flex-col items-center justify-center p-6 text-center border-b border-border-primary",children:[e.jsx("h2",{className:"text-xl font-bold text-gradient",children:"Yu Cu Cp VinClub"}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Cung cp chng t  to ti khon VinClub cho khch hng."}),e.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 custom-scrollbar",children:[e.jsxs("div",{className:"p-4 bg-surface-ground rounded-lg border border-border-primary text-sm mb-4",children:["ang yu cu cho SH: ",e.jsx("strong",{className:"font-mono",children:n["S n hng"]})," - KH: ",e.jsx("strong",{children:n["Tn khch hng"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Loi khch hng"}),e.jsxs("div",{className:"flex gap-4 p-1 bg-surface-ground rounded-lg border border-border-primary w-fit",children:[e.jsxs("button",{onClick:()=>u("personal"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-all ${i==="personal"?"bg-white shadow-sm text-accent-primary":"text-text-secondary hover:text-text-primary"}`,children:[e.jsx("i",{className:"fas fa-user mr-2"}),"C Nhn"]}),e.jsxs("button",{onClick:()=>u("company"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-all ${i==="company"?"bg-white shadow-sm text-accent-primary":"text-text-secondary hover:text-text-primary"}`,children:[e.jsx("i",{className:"fas fa-building mr-2"}),"Cng Ty"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[i==="personal"?e.jsxs(e.Fragment,{children:[e.jsx(ct,{id:"cccd-front",label:"CCCD Mt Trc",onFileSelect:g,required:!0,accept:"image/*"}),e.jsx(ct,{id:"cccd-back",label:"CCCD Mt Sau",onFileSelect:c,required:!0,accept:"image/*"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{id:"biz-license",label:"Giy Php Kinh Doanh",onFileSelect:N,required:!0,accept:"image/*"}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"dms-code",className:"block text-sm font-medium text-text-primary mb-2",children:["M KH DMS ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"dms-code",type:"text",value:h,onChange:R=>f(R.target.value),className:"w-full bg-surface-ground border border-border-primary rounded-lg p-2.5 futuristic-input",placeholder:"Nhp m khch hng DMS",required:!0})]})]}),e.jsx(ct,{id:"reg-front",label:"Cavet Xe Mt Trc",onFileSelect:_,required:!0,accept:"image/*"}),e.jsx(ct,{id:"reg-back",label:"Cavet Xe Mt Sau",onFileSelect:w,required:!0,accept:"image/*"})]})]})}),e.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end gap-3 bg-surface-card relative z-10",children:[e.jsx(K,{onClick:l,disabled:k,variant:"secondary",size:"sm",leftIcon:e.jsx("i",{className:"fas fa-times"}),children:"Hy"}),e.jsx(K,{onClick:E,disabled:!I()||k,variant:"primary",size:"sm",isLoading:k,leftIcon:k?void 0:e.jsx("i",{className:"fas fa-paper-plane"}),children:"Gi Yu Cu"})]})]})})},ac=n=>{if(!n||!n.includes("drive.google.com"))return n;const l=n.match(/\/d\/([a-zA-Z0-9_-]{25,})|id=([a-zA-Z0-9_-]{25,})/);if(l){const o=l[1]||l[2];if(o)return`https://drive.google.com/file/d/${o}/preview`}return n.replace("/open?","/preview?")},rc=n=>{if(!n||!n.includes("drive.google.com"))return n;const l=n.match(/\/d\/([a-zA-Z0-9_-]{25,})|id=([a-zA-Z0-9_-]{25,})/);if(l){const o=l[1]||l[2];if(o)return`https://drive.google.com/uc?export=download&id=${o}`}return n},nc=n=>{if(!n||!n.includes("drive.google.com"))return n;const l=n.match(/\/d\/([a-zA-Z0-9_-]{25,})|id=([a-zA-Z0-9_-]{25,})/);if(l){const o=l[1]||l[2];if(o)return`https://drive.google.com/file/d/${o}/view`}return n},ic=n=>(o=>o.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"D").replace(//g,"d"))(n).replace(/[^a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_"),lc=({isOpen:n,onClose:l,fileUrl:o,fileLabel:i})=>{const[u,h]=_e.useState(!1),f=m.useCallback(()=>{const N=nc(o);window.open(N,"_blank"),h(!0),setTimeout(()=>h(!1),4e3)},[o]),x=m.useCallback(N=>{N.key==="Escape"?l():(N.ctrlKey||N.metaKey)&&N.key==="p"&&(N.preventDefault(),f())},[l,f]);if(m.useEffect(()=>{if(n)return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[n,x]),!n)return null;const g=ac(o),b=N=>{N.stopPropagation();const j=rc(o),_=ic(i),D=document.createElement("a");D.href=j,D.setAttribute("download",_),document.body.appendChild(D),D.click(),document.body.removeChild(D)},[c,y]=_e.useState(!0);return e.jsxs("div",{className:"fixed inset-0 bg-black/95 z-[100] flex flex-col animate-fade-in overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden p-0 md:p-8",onClick:()=>y(N=>!N),children:e.jsxs("div",{className:"relative w-full h-full md:max-w-6xl md:max-h-[85vh] shadow-2xl md:rounded-2xl overflow-hidden bg-[#1e1e1e] border border-white/10 transition-all duration-300",children:[e.jsx("iframe",{src:g,className:"w-full h-full w-full h-full border-0",title:i}),e.jsx("div",{className:"absolute top-0 right-0 w-14 h-14 bg-[#1e1e1e] z-20 pointer-events-none"})]})}),e.jsxs("div",{className:`absolute top-0 left-0 right-0 h-24 bg-gradient-to-b from-black/90 via-black/50 to-transparent z-50 flex items-start pt-6 px-6 justify-between transition-all duration-500 transform ${c?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,style:{pointerEvents:c?"auto":"none"},children:[e.jsxs("div",{className:"flex items-center gap-4 animate-slide-in-left",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 backdrop-blur-md border border-white/10 flex items-center justify-center shadow-glow-sm",children:e.jsx("i",{className:"fas fa-file-pdf text-xl text-red-500 drop-shadow-md"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-white tracking-wide drop-shadow-sm line-clamp-1 max-w-[200px] md:max-w-md",children:i}),e.jsx("p",{className:"text-xs text-white/60 font-medium tracking-wider uppercase",children:"Xem trc ti liu"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 animate-slide-in-right",children:[e.jsxs("button",{onClick:b,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-white/20 backdrop-blur-md border border-white/10 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-cyan-500/20 hover:scale-110 active:scale-95",title:"Ti v",children:[e.jsx("i",{className:"fas fa-download text-lg group-hover:text-cyan-400 transition-colors"}),e.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/80 text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Ti v"})]}),e.jsxs("button",{onClick:f,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-white/20 backdrop-blur-md border border-white/10 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-green-500/20 hover:scale-110 active:scale-95",title:"In (Ctrl+P)",children:[e.jsx("i",{className:"fas fa-print text-lg group-hover:text-green-400 transition-colors"}),e.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/80 text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"In (Ctrl+P)"})]}),e.jsx("button",{onClick:l,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-red-500/20 backdrop-blur-md border border-white/10 hover:border-red-500/50 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-red-500/20 hover:scale-110 active:scale-95",title:"ng (Esc)",children:e.jsx("i",{className:"fas fa-times text-lg group-hover:text-red-400 transition-colors"})})]})]}),u&&e.jsx("div",{className:"absolute top-24 left-1/2 -translate-x-1/2 z-50 animate-slide-in-down",children:e.jsx("div",{className:"px-6 py-3 rounded-xl bg-green-500/90 backdrop-blur-md border border-green-400/50 text-white shadow-lg shadow-green-500/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-xl"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:"ang m hp thoi in..."}),e.jsx("div",{className:"text-xs opacity-90",children:"Vui lng ch trong giy lt"})]})]})})}),e.jsx("div",{className:`absolute bottom-8 left-1/2 -translate-x-1/2 transition-opacity duration-500 ${c?"opacity-100":"opacity-0"}`,children:e.jsx("div",{className:"px-4 py-2 rounded-full bg-black/60 backdrop-blur-md border border-white/5 text-white/50 text-xs",children:"Nhn vo mn hnh  n/hin cng c"})})]})},oc=({rank:n})=>n===1?e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-amber-400/20 text-amber-500",title:"Hng 1",children:e.jsx("i",{className:"fas fa-crown"})}):n===2?e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-400/20 font-bold text-slate-500",title:"Hng 2",children:"2"}):n===3?e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-yellow-600/20 font-bold text-yellow-700",title:"Hng 3",children:"3"}):e.jsx("div",{className:"flex items-center justify-center w-8 h-8 font-semibold text-text-secondary",children:n}),cc=({isOpen:n,onClose:l,stats:o})=>{const i=ut(),u=m.useMemo(()=>o.flatMap(h=>h.variants.map(f=>{const[x,g]=f.variant.split(" / "),b=x.split(" - "),c=b.length>1?b.slice(0,-1).join(" - "):"N/A",y=b.length>1?b[b.length-1]:x;return{model:h.model,version:c,exterior:y,interior:g,count:f.count}})).sort((h,f)=>f.count-h.count),[o]);return n?e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("div",{className:"bg-surface-card w-full md:max-w-4xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:h=>h.stopPropagation(),style:i,children:[e.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-5 border-b border-border-primary",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-amber-500/10",children:e.jsx("i",{className:"fas fa-chart-pie text-lg text-amber-500"})}),e.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Thng K Xe Ch Ghp"})]}),e.jsx("button",{onClick:l,className:"w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("main",{className:"p-4 md:p-6 overflow-y-auto flex-grow min-h-0 bg-surface-ground",children:u.length>0?e.jsxs("div",{className:"bg-surface-card border border-border-primary rounded-lg shadow-sm",children:[e.jsxs("header",{className:"grid grid-cols-[3.5rem_1fr_4rem] items-center gap-4 px-4 py-2 border-b border-border-primary text-xs font-bold text-text-secondary uppercase",children:[e.jsx("span",{className:"text-center",children:"Hng"}),e.jsx("span",{children:"Cu hnh xe"}),e.jsx("span",{className:"text-right",children:"S Lng"})]}),e.jsx("div",{className:"divide-y divide-border-primary/70",children:u.map((h,f)=>e.jsxs("div",{className:"grid grid-cols-[3.5rem_1fr_4rem] items-center gap-4 px-4 py-3 hover:bg-surface-hover transition-colors",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(oc,{rank:f+1})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"font-semibold text-sm text-text-primary truncate",title:`${h.model} - ${h.version}`,children:[h.model," - ",h.version]}),e.jsxs("p",{className:"text-xs text-text-secondary truncate",title:`${h.exterior} / ${h.interior}`,children:[h.exterior," / ",h.interior]})]}),e.jsx("div",{className:"font-bold text-lg text-accent-primary text-right font-mono",children:h.count})]},f))})]}):e.jsxs("div",{className:"text-center text-text-secondary py-12 flex flex-col items-center justify-center h-full",children:[e.jsx("i",{className:"fas fa-box-open fa-3x mb-4"}),e.jsx("p",{children:"Khng c yu cu no ang ch."})]})}),e.jsx("footer",{className:"p-4 border-t flex justify-end gap-4 bg-surface-card rounded-b-2xl",children:e.jsx("button",{onClick:l,className:"btn-secondary",children:"ng"})})]})}):null},dc=({isOpen:n,onClose:l})=>{const[o,i]=m.useState(""),[u,h]=m.useState(!1),[f,x]=m.useState(null),[g,b]=m.useState(null);if(!n)return null;const c=async()=>{if(o.trim()){h(!0),x({}),b(null);try{const _=new Date().getTime(),D=Za(o,"active"),w=Za(o,"archive"),k=await D;let P={};if(k&&k.status==="SUCCESS"&&k.data){P={...k.data},x(P);const C=(new Date().getTime()-_)/1e3;b(C)}w.then(C=>{if(C&&C.status==="SUCCESS"&&C.data){const I={...P,...C.data};if(Object.keys(C.data).length>0){x(I);const E=(new Date().getTime()-_)/1e3;b(E)}}h(!1)}).catch(C=>{console.error("Archive search failed",C),h(!1)})}catch(_){console.error("Search error:",_),alert(" xy ra li khi tm kim: "+_),h(!1)}}},y=_=>{_.key==="Enter"&&c()},N=(_,D)=>{if(D==null)return"";const w=String(D);if(w.trim().startsWith("{")||w.trim().startsWith("["))try{const k=JSON.parse(w);if(typeof k=="object"&&k!==null&&!Array.isArray(k)){const P=Object.entries(k);if(P.some(([I,E])=>typeof E=="string"&&(E.startsWith("http")||E.startsWith("data:")))||_.toLowerCase().includes("url")||_.toLowerCase().includes("file"))return e.jsx("div",{className:"flex flex-col gap-1",children:P.map(([I,E])=>typeof E=="string"&&(E.startsWith("http")||E.startsWith("data:"))?e.jsxs("a",{href:E,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-paperclip"})," ",I]},I):e.jsxs("span",{className:"text-xs text-gray-500",children:[I,": ",String(E)]},I))})}if(Array.isArray(k)&&k.some(C=>typeof C=="string"&&C.startsWith("http")||typeof C=="object"&&C&&(C.url||C.data)))return e.jsx("div",{className:"flex flex-wrap gap-1",children:k.map((C,I)=>{if(typeof C=="string"&&C.startsWith("http"))return e.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs",title:`Link ${I+1}`,children:e.jsx("i",{className:"fas fa-external-link-alt"})},I);const E=C.url||C.data,R=C.name||`File ${I+1}`;return typeof E=="string"&&(E.startsWith("http")||E.startsWith("data:"))?e.jsx("a",{href:E,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs",title:R,children:e.jsx("i",{className:"fas fa-image"})},I):null})})}catch{}if(typeof w=="string"&&(w.startsWith("http://")||w.startsWith("https://")))return e.jsxs("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs break-all",title:w,children:[e.jsx("i",{className:"fas fa-external-link-alt mr-1"}),"Link"]});if(typeof w=="string"&&/^\d{4}-\d{2}-\d{2}T/.test(w))try{return new Date(w).toLocaleString("vi-VN")}catch{}return w},j=()=>{if(!f)return null;const _=Object.keys(f);return _.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"fas fa-search-minus text-4xl mb-3"}),e.jsxs("p",{children:['Khng tm thy kt qu no cho t kha "',o,'".']})]}):e.jsx("div",{className:"space-y-8",children:_.map(D=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden flex flex-col",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex justify-between items-center sticky left-0",children:e.jsxs("h3",{className:"font-bold text-gray-700 font-lg",children:[e.jsx("i",{className:"fas fa-table mr-2 text-blue-500"}),D," ",e.jsxs("span",{className:"text-gray-400 font-normal text-sm ml-2",children:["(",f[D].length," kt qu)"]})]})}),e.jsx("div",{className:"overflow-x-auto relative",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:f[D].length>0&&Object.keys(f[D][0]).map(w=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider whitespace-nowrap bg-gray-100 border-r border-gray-200 last:border-r-0",children:w},w))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f[D].map((w,k)=>e.jsx("tr",{className:"hover:bg-blue-50 transition-colors",children:Object.keys(w).map(P=>e.jsx("td",{className:"px-4 py-2 text-sm text-gray-700 whitespace-nowrap border-r border-gray-100 last:border-r-0 max-w-xs overflow-hidden text-ellipsis",children:N(P,w[P])},P))},k))})]})})]},D))})};return e.jsxs("div",{className:"fixed inset-0 bg-gray-100 z-[60] flex flex-col animate-fade-in",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm flex-shrink-0 z-20",children:e.jsxs("div",{className:"w-full px-4 py-3 flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:e.jsx("i",{className:"fas fa-search text-lg"})}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 leading-none",children:"Tm Kim"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Ton h thng"})]})]}),e.jsxs("div",{className:"flex-grow max-w-3xl mx-auto relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:`fas fa-search ${u?"text-blue-500 animate-pulse":"text-gray-400"}`})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-24 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-base focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all outline-none",placeholder:"Nhp VIN, SH, Tn khch hng... (nhn Enter  tm)",value:o,onChange:_=>i(_.target.value),onKeyDown:y,autoFocus:!0}),e.jsx("div",{className:"absolute inset-y-0 right-1.5 flex items-center",children:e.jsx(K,{onClick:c,isLoading:u,disabled:o.length<2||u,className:"!rounded-lg !px-4 !py-1.5 !text-sm font-medium shadow-sm",children:"Tm Kim"})})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[g!==null&&e.jsxs("span",{className:"text-xs text-green-600 font-medium hidden lg:block whitespace-nowrap",children:[e.jsx("i",{className:"fas fa-bolt mr-1"}),g,"s"]}),e.jsx("button",{onClick:l,className:"w-9 h-9 rounded-full bg-gray-100 hover:bg-red-50 hover:text-red-500 flex items-center justify-center transition-all duration-200",title:"ng (Esc)",children:e.jsx("i",{className:"fas fa-times text-lg"})})]})]})}),e.jsx("div",{className:"flex-grow overflow-y-auto bg-gray-100 p-4 sm:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-[1920px] mx-auto space-y-8",children:u?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-600",children:"ang qut ton b d liu..."}),e.jsx("p",{className:"text-sm",children:"Qu trnh ny c th mt vi giy ty thuc vo  ln d liu."})]}):j()})}),e.jsx("div",{className:"bg-white border-t border-gray-200 py-2 px-4 text-center text-xs text-gray-400",children:"Mo: Bn c th nhp mt phn ca s VIN hoc tn  tm kim rng hn."})]})},ks=({label:n,value:l,onChange:o})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:n}),e.jsx("input",{type:"date",value:l,onChange:i=>o(i.target.value),className:"w-full bg-surface-input border border-border-primary rounded-md p-2 text-sm focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary futuristic-input"})]}),uc=({filters:n,onFilterChange:l,onReset:o,dropdowns:i,searchPlaceholder:u,totalCount:h,onRefresh:f,isLoading:x,hideSearch:g=!1,size:b="default",plain:c=!1,dateRangeEnabled:y=!1,dateFilterEnabled:N=!1,viewSwitcherEnabled:j=!1,activeView:_="table",onViewChange:D,extraActionButton:w,variant:k="default",dropdownClassName:P="w-28 md:w-36 lg:w-64",searchable:C=!0})=>{const[I,E]=m.useState(n.keyword||""),[R,H]=m.useState(!1),[O,M]=m.useState(!1),[$,V]=m.useState([]),z=m.useRef(null),L=n.dateRange||{start:"",end:""},Q=(v,Y)=>{l({dateRange:{...L,[v]:Y}})},q=v=>{V(Y=>Y.includes(v)?Y.filter(T=>T!==v):[...Y,v])};m.useEffect(()=>{const v=Y=>{z.current&&!z.current.contains(Y.target)&&M(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),m.useEffect(()=>{n.keyword!==I&&E(n.keyword||"")},[n.keyword]),m.useEffect(()=>{const v=setTimeout(()=>{I!==n.keyword&&l({keyword:I})},300);return()=>clearTimeout(v)},[I,n.keyword,l]);const ee=i.flatMap(v=>{const Y=n[v.key]||[];return Y.map(T=>({key:`${v.key}-${T}`,label:v.label,value:T,onRemove:()=>{l({[v.key]:Y.filter(U=>U!==T)})}}))}),ie=L.start&&L.end?{key:`date-range-${L.start}-${L.end}`,label:"Date Range",value:`${new Date(L.start).toLocaleDateString("vi-VN")} - ${new Date(L.end).toLocaleDateString("vi-VN")}`,onRemove:()=>l({dateRange:{start:"",end:""}})}:null,oe=[...ee];ie&&oe.push(ie);const xe=n.keyword&&n.keyword.length>0||oe.length>0,W=i.map(v=>e.jsx("div",{className:P,children:e.jsx(Ht,{id:v.id,label:v.label,options:v.options,selectedOptions:n[v.key]||[],onChange:Y=>l({[v.key]:Y}),icon:v.icon,displayMode:v.displayMode||"count",size:b,variant:k,searchable:C})},v.id)),Z=e.jsxs("div",{className:`${k==="modern"?"flex items-center gap-2":`flex items-center gap-2 ${c?"!shadow-none !bg-transparent !p-0 !border-none":""}`}`,children:[!g&&e.jsxs("div",{className:`relative flex items-center transition-all duration-300 ${k==="modern"?"w-32 focus-within:w-48 flex-shrink":"flex-grow min-w-[200px] lg:min-w-[300px]"}`,children:[e.jsx("i",{className:`fas fa-search absolute left-2 z-10 ${k==="modern"?"text-accent-primary text-[10px] top-1.5":"left-4 text-gray-400"}`}),e.jsx("input",{type:"text",id:"search-input-desktop",placeholder:u,value:I,onChange:v=>E(v.target.value),className:`w-full ${b==="compact"?"h-9 text-xs py-1.5":"h-10 text-sm py-1.5"} pl-7 pr-8 focus:outline-none text-text-primary placeholder:text-text-placeholder transition-all duration-300 ${k==="modern"?"bg-white border border-border-secondary rounded-full shadow-sm focus:border-accent-primary focus:ring-2 focus:ring-accent-primary/20":"relative"}`}),I&&e.jsx("button",{onClick:()=>{E(""),l({keyword:""})},className:"absolute right-2 text-gray-400 hover:text-danger transition-colors",title:"Xa tm kim",children:e.jsx("i",{className:"fas fa-times-circle text-xs"})})]}),W,e.jsx("div",{className:`w-8 h-8 flex items-center justify-center transition-all duration-200 ${k==="modern"?"":"ml-2"}`,children:e.jsx(K,{onClick:o,variant:"danger",className:`!p-0 w-8 h-8 rounded-full transition-all duration-200 ${xe?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none"}`,title:"Xa tt c b lc",tabIndex:xe?0:-1,children:e.jsx("i",{className:"fas fa-times"})})}),y&&e.jsxs("div",{className:"relative",ref:z,children:[e.jsx(K,{onClick:()=>M(!O),variant:"ghost",className:`h-9 px-3 text-xs ${L.start&&L.end||O?"bg-surface-hover text-accent-primary":""}`,leftIcon:e.jsx("i",{className:"fas fa-calendar-alt text-text-placeholder text-xs"}),children:e.jsx("span",{className:`${L.start&&L.end?"font-semibold":""}`,children:L.start&&L.end?`${Ye(L.start).format("DD/MM")} - ${Ye(L.end).format("DD/MM")}`:"Chn ngy"})}),O&&e.jsx("div",{className:"absolute top-full mt-2 right-0 z-20 bg-surface-card p-4 rounded-lg shadow-lg border border-border-primary date-range-picker-popover",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(ks,{label:"T ngy",value:L.start,onChange:v=>Q("start",v)}),e.jsx(ks,{label:"n ngy",value:L.end,onChange:v=>Q("end",v)})]})})]}),e.jsxs("span",{className:"text-sm font-medium text-text-secondary px-3 whitespace-nowrap border-l border-border-primary/50 ml-auto",children:[h," kt qu"]}),j&&e.jsxs("div",{className:"view-switcher-group flex gap-1",children:[e.jsx(K,{onClick:()=>D==null?void 0:D("table"),variant:_==="table"?"primary":"ghost",size:"sm",className:"!p-2",title:"Xem dng danh sch",children:e.jsx("i",{className:"fas fa-list"})}),e.jsx(K,{onClick:()=>D==null?void 0:D("grid"),variant:_==="grid"?"primary":"ghost",size:"sm",className:"!p-2",title:"Xem dng li",children:e.jsx("i",{className:"fas fa-th-large"})})]}),w,e.jsx(K,{onClick:f,disabled:x,variant:"ghost",className:`w-9 h-9 flex-shrink-0 ${k==="modern"?"!rounded-full !bg-gray-50 hover:!bg-gray-100 !border-transparent":""}`,"aria-label":"Lm mi",title:"Lm mi",children:e.jsx("i",{className:`fas fa-sync-alt text-base ${x?"animate-spin":""}`})})]}),F=e.jsx("div",{className:`hidden md:block flex-shrink-0 ${!c&&k!=="modern"&&"p-2"}`,children:Z});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:hidden flex w-full items-center gap-2 ",children:[!g&&e.jsxs("div",{className:"relative flex-grow flex items-center min-w-0",children:[e.jsx("i",{className:"fas fa-search absolute left-4 text-gray-400 z-10"}),e.jsx("input",{type:"text",id:"search-input-mobile",placeholder:u,value:I,onChange:v=>E(v.target.value),className:"w-full h-9 pl-11 pr-9 py-1.5 relative focus:outline-none text-text-primary placeholder:text-text-placeholder text-sm bg-surface-ground rounded-lg border border-transparent focus:bg-white focus:border-accent-primary transition-all duration-300"}),I&&e.jsx("button",{onClick:()=>{E(""),l({keyword:""})},className:"absolute right-3 text-gray-400 hover:text-danger transition-colors",children:e.jsx("i",{className:"fas fa-times-circle"})})]}),e.jsxs(K,{onClick:()=>H(!0),variant:"ghost",className:"flex-shrink-0 w-9 h-9 relative !p-0",children:[e.jsx("i",{className:"fas fa-filter text-accent-primary"}),oe.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-danger text-white text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center border-2 border-surface-ground",children:oe.length})]}),e.jsx(K,{onClick:f,disabled:x,variant:"ghost",className:"flex-shrink-0 w-9 h-9 !p-0","aria-label":"Lm mi",title:"Lm mi",children:e.jsx("i",{className:`fas fa-sync-alt text-base ${x?"animate-spin":""}`})})]}),R&&rr.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex flex-col justify-end md:hidden",onClick:()=>H(!1),children:e.jsxs("div",{className:"bg-surface-card rounded-t-2xl p-4 animate-fade-in-up flex flex-col max-h-[85vh]",style:{animationDuration:"300ms"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-border-primary flex-shrink-0",children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary",children:"B Lc"}),e.jsx(K,{onClick:()=>H(!1),variant:"ghost",className:"w-8 h-8 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover !p-0",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"space-y-3 overflow-y-auto pr-2 -mr-2 custom-scrollbar py-2 flex-grow",children:[(y||N)&&e.jsxs("div",{className:"bg-gray-50/50 rounded-xl p-3 border border-gray-100",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 block",children:y?"Thi gian":"Ngy"}),e.jsxs("div",{className:`grid ${y?"grid-cols-2 gap-3":"grid-cols-1"}`,children:[e.jsx(ks,{label:y?"T ngy":"Chn ngy",value:L.start,onChange:v=>Q("start",v)}),y&&e.jsx(ks,{label:"n ngy",value:L.end,onChange:v=>Q("end",v)})]})]}),i.map(v=>{var U;const Y=$.includes(v.id),T=((U=n[v.key])==null?void 0:U.length)>0;return e.jsxs("div",{className:`border rounded-xl transition-all duration-300 overflow-hidden ${Y?"bg-white border-accent-primary/30 shadow-sm":"bg-white border-gray-100"}`,children:[e.jsxs("button",{type:"button",onClick:()=>q(v.id),className:"flex items-center justify-between w-full p-3 text-left group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${T?"bg-accent-primary text-white shadow-sm shadow-accent-primary/30":"bg-gray-100 text-gray-400 group-hover:bg-accent-primary/10 group-hover:text-accent-primary"}`,children:e.jsx("i",{className:`fas ${v.icon} text-xs`})}),e.jsxs("div",{children:[e.jsx("span",{className:`text-sm font-semibold transition-colors ${T?"text-accent-primary":"text-gray-700 group-hover:text-gray-900"}`,children:v.label}),T&&e.jsxs("div",{className:"text-[10px] text-gray-500 font-medium",children:[" chn ",n[v.key].length]})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center transition-transform duration-300 ${Y?"rotate-180 bg-gray-100 text-gray-600":"text-gray-300"}`,children:e.jsx("i",{className:"fas fa-chevron-down text-xs"})})]}),e.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${Y?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"p-3 pt-0 border-t border-gray-50",children:e.jsx("div",{className:"mt-3",children:e.jsx(Ht,{id:"mobile-"+v.id,label:v.label,options:v.options,selectedOptions:n[v.key]||[],onChange:te=>l({[v.key]:te}),icon:v.icon,displayMode:v.displayMode,size:"default",mode:v.mode||(v.options.length>6?"inline":"chips"),searchable:!1})})})})})]},"mobile-"+v.id)})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3 pt-3 border-t border-border-primary flex-shrink-0",children:[e.jsx(K,{onClick:()=>{o()},disabled:!xe,variant:"secondary",fullWidth:!0,className:"rounded-xl",children:"Xa Lc"}),e.jsxs(K,{onClick:()=>H(!1),variant:"primary",fullWidth:!0,className:"rounded-xl shadow-lg shadow-accent-primary/20",children:["Xem ",h," kt qu"]})]})]})}),document.body),F]})},hc="/ordermanagement/assets/hoa_dao_branch_bloom-yVxm6oGr.gif",mc="/ordermanagement/assets/hoa_dao_static-BRbspx5L.png",fc="/ordermanagement/assets/hoa_mai_bloom-B4Zuhbv-.gif",xc="/ordermanagement/assets/hoa_mai_static-BwGnp57_.png",gc="/ordermanagement/assets/petal_1-BI1qgdVS.webp",vr="/ordermanagement/assets/petal_2-BMhGF0Jm.webp",wr="/ordermanagement/assets/petal_3-Bvyh7_MT.webp",pc="/ordermanagement/assets/petal_4-Dsz0xQbq.webp",jr="/ordermanagement/assets/petal_5-CCrXKZhb.webp",yc="/ordermanagement/assets/petal_6-xsqu7hkg.webp",bc="/ordermanagement/assets/petal_7-DsiQX_VS.webp",vc="/ordermanagement/assets/petal_8-BzjmCj-W.webp",wc="/ordermanagement/assets/petal_9-BJSNNJsy.webp",jc="/ordermanagement/assets/petal_10-Bo4wKqSo.webp",Nr=[gc,vr,wr,pc,jr],kr=[yc,bc,vc,wc,jc],Nc=[...Nr,...kr],_r=({flowerType:n="mixed",delay:l=0,sizeMode:o="normal"})=>{const i=m.useMemo(()=>{let x=Nc;n==="dao"&&(x=Nr),n==="mai"&&(x=kr);const g=o==="large"?30:15;return Array.from({length:g}).map((b,c)=>({id:c,img:x[Math.floor(Math.random()*x.length)],left:`${Math.random()*100}%`,duration:`${25+Math.random()*20}s`,delay:`-${Math.random()*25}s`,animationName:`fall-wind-${1+Math.floor(Math.random()*4)}`}))},[n,o]),[u,h]=m.useState(l===0);if(m.useEffect(()=>{if(l>0){const x=setTimeout(()=>h(!0),l);return()=>clearTimeout(x)}else h(!0)},[l]),!u)return null;const f=o==="large"?"w-3 h-3 md:w-4 md:h-4":"w-1.5 h-1.5 md:w-2 md:h-2";return e.jsxs("div",{className:"absolute inset-0 z-[6] pointer-events-none overflow-hidden select-none",children:[i.map(x=>e.jsx("img",{src:x.img,className:`absolute ${f} object-contain drop-shadow-sm will-change-transform`,draggable:"false",style:{left:x.left,top:"-10%",animationName:x.animationName,animationDuration:x.duration,animationDelay:x.delay,animationTimingFunction:"linear",animationIterationCount:"infinite"},alt:""},x.id)),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                /* Wind-blown animations: Start Right -> Drift Left + Fall Down */
                
                /* Gentle Breeze (Stays mostly right/center) */
                @keyframes fall-wind-1 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    50% { transform: translate3d(-50px, 50vh, 0) rotate(90deg); }
                    100% { transform: translate3d(-80px, 120vh, 0) rotate(180deg); opacity: 0; }
                }
                
                /* Moderate Wind (Reaches center/left) */
                @keyframes fall-wind-2 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    40% { transform: translate3d(-100px, 40vh, 0) rotate(-45deg); }
                    100% { transform: translate3d(-200px, 120vh, 0) rotate(-180deg); opacity: 0; }
                }

                /* Strong Gust (Drifts across to far left) */
                @keyframes fall-wind-3 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    35% { transform: translate3d(-150px, 35vh, 0) rotate(30deg); }
                    100% { transform: translate3d(-350px, 120vh, 0) rotate(120deg); opacity: 0; }
                }

                /* Fast & Flat (Blows almost horizontally) */
                @keyframes fall-wind-4 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    30% { transform: translate3d(-100px, 20vh, 0) rotate(60deg); }
                    100% { transform: translate3d(-400px, 120vh, 0) rotate(360deg); opacity: 0; }
                }
            `}})]})},kc=({order:n,onViewDetails:l,processingOrder:o})=>{const i=n["Trng thi VC"]||n["Kt qu"]||"Cha ghp",u=o===n["S n hng"],h=new Date>=new Date("2026-01-05T00:00:00"),[f,x]=m.useState(""),[g,b]=m.useState("dao"),[c,y]=m.useState(0);return m.useEffect(()=>{if(!h)return;const N=Math.random()>.5?"mai":"dao";b(N),x(N==="dao"?mc:xc);const j=Math.random()*1e4;y(j);const _=setTimeout(()=>{x(`${N==="dao"?hc:fc}?v=${n["S n hng"]}-${Date.now()}`)},j);return()=>{clearTimeout(_)}},[n,h]),e.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-white p-3 shadow-md border border-light-border hover:shadow-lg transition-all duration-200 ease-out active:scale-[0.98] cursor-pointer flex flex-col group",onClick:()=>l(n),children:[e.jsx("div",{className:"absolute -right-10 -bottom-6 w-48 z-0 transition-all duration-700 ease-out group-hover:scale-125 group-hover:-translate-x-4 group-hover:-translate-y-2 group-hover:opacity-100 group-hover:rotate-0 opacity-60 transform -rotate-12 animate-drive-in-right origin-bottom-right",children:e.jsx(da,{model:n["Dng xe"],exteriorColor:n["Ngoi tht"],className:"w-full h-auto object-contain drop-shadow-xl",alt:""})}),h&&e.jsx("div",{className:"absolute -top-2 -right-2 w-24 h-auto z-[8] pointer-events-none",children:e.jsx("img",{src:f,className:"w-full h-auto object-contain select-none",alt:"",draggable:"false"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white via-white/80 to-transparent z-5"}),h&&e.jsx(_r,{flowerType:g,delay:c}),e.jsxs("div",{className:"relative z-10 flex flex-col flex-grow gap-1.5 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-light-text-primary text-sm font-bold leading-tight pr-2 truncate",title:n["Tn khch hng"],children:n["Tn khch hng"]}),e.jsx("div",{className:"flex-shrink-0",onClick:N=>N.stopPropagation(),children:u&&e.jsx("div",{className:"flex items-center justify-center w-8 h-8",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-accent-primary text-lg"})})})]}),e.jsx("p",{className:"text-light-text-secondary text-xs font-mono truncate",title:n["S n hng"],children:n["S n hng"]}),e.jsxs("div",{className:"text-xs text-light-text-secondary space-y-1 my-1 py-1 border-y border-dashed",children:[e.jsxs("p",{className:"truncate",title:`${n["Dng xe"]} - ${n["Phin bn"]}`,children:[e.jsx("i",{className:"fas fa-car fa-fw mr-1.5 text-slate-400"})," ",n["Dng xe"]," - ",n["Phin bn"]]}),e.jsxs("p",{className:"truncate font-medium",title:`${n["Ngoi tht"]} / ${n["Ni tht"]}`,children:[e.jsx("i",{className:"fas fa-palette fa-fw mr-1.5 text-slate-400"}),e.jsx("span",{style:or(n["Ngoi tht"]),children:n["Ngoi tht"]}),e.jsxs("span",{children:[" / ",n["Ni tht"]]})]})]}),e.jsx("div",{className:"flex items-center justify-between text-xs text-light-text-secondary",children:e.jsxs("div",{className:"flex items-center gap-1.5 truncate",title:`TVBH: ${n["Tn t vn bn hng"]}`,children:[e.jsx("i",{className:"fas fa-user-tie fa-fw text-slate-400"}),e.jsx("span",{className:"truncate",children:n["Tn t vn bn hng"]})]})}),e.jsx("div",{className:"mt-auto pt-2",children:e.jsx(lr,{status:i})})]})]})},_c=n=>n.orders.length===0?e.jsxs("div",{className:"text-center py-16 text-text-secondary",children:[e.jsx("i",{className:"fas fa-folder-open fa-3x mb-4 text-text-placeholder"}),e.jsx("p",{className:"font-semibold text-text-primary",children:"Khng tm thy yu cu no."}),e.jsx("p",{className:"text-sm",children:"Hy th thay i b lc hoc to yu cu mi."})]}):e.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4 p-1",children:n.orders.map(l=>e.jsx(kc,{order:l,...n},l["S n hng"]))}),Sc=()=>{const n=typeof window<"u"&&window.electronAPI,[l,o]=m.useState(!0);m.useEffect(()=>{if(!n)return;let f;const x=()=>{o(!0),f&&clearTimeout(f),f=setTimeout(()=>{o(!1)},3e3)},g=setTimeout(()=>{o(!1)},3e3),b=y=>{y.key==="Escape"&&x()},c=y=>{y.clientY<50&&x()};return window.addEventListener("keydown",b),window.addEventListener("mousemove",c),()=>{window.removeEventListener("keydown",b),window.removeEventListener("mousemove",c),f&&clearTimeout(f),clearTimeout(g),f&&clearTimeout(f),clearTimeout(g)}},[n]);const i=()=>{var f;return(f=window.electronAPI)==null?void 0:f.minimizeWindow()},u=()=>{var f;return(f=window.electronAPI)==null?void 0:f.maximizeWindow()},h=()=>{var f;return(f=window.electronAPI)==null?void 0:f.closeWindow()};return!n||!l?null:e.jsxs("div",{className:"fixed top-0 left-0 w-full h-8 bg-slate-900 border-b border-slate-700 flex items-center justify-between px-3 z-[99999] animate-slide-down select-none text-white shadow-lg",style:{WebkitAppRegion:"drag"},children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-slate-300",children:[e.jsx("i",{className:"fas fa-car-side"}),e.jsx("span",{children:"Order Management"})]}),e.jsxs("div",{className:"flex items-center h-full",style:{WebkitAppRegion:"no-drag"},children:[e.jsx("button",{onClick:i,className:"h-8 w-10 flex items-center justify-center hover:bg-slate-700/50 transition-colors",children:e.jsx("i",{className:"fas fa-minus text-[10px]"})}),e.jsx("button",{onClick:u,className:"h-8 w-10 flex items-center justify-center hover:bg-slate-700/50 transition-colors",children:e.jsx("i",{className:"far fa-square text-[10px]"})}),e.jsx("button",{onClick:h,className:"h-8 w-10 flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx("i",{className:"fas fa-times text-[10px]"})})]})]})},Cc=()=>{const[n,l]=m.useState(!1),[o,i]=m.useState(!1),[u,h]=m.useState("orders"),[f,x]=m.useState(null);m.useEffect(()=>{const N=localStorage.getItem("sidebarState");l(N==="collapsed")},[]);const g=m.useCallback(()=>{l(N=>{const j=!N;return localStorage.setItem("sidebarState",j?"collapsed":"expanded"),j})},[]),b=m.useCallback((N,j)=>{h("admin"),x({orderToShow:N,targetTab:j})},[]),c=m.useCallback(N=>{h("admin"),x({targetTab:N})},[]),y=m.useCallback(()=>{x(null)},[]);return{isSidebarCollapsed:n,isMobileMenuOpen:o,setIsMobileMenuOpen:i,activeView:u,setActiveView:h,initialAdminState:f,toggleSidebar:g,showOrderInAdmin:b,showAdminTab:c,clearInitialState:y}},Dc=n=>{const[l,o]=m.useState([]),[i,u]=m.useState(0),[h,f]=m.useState(!1),x=m.useRef(null),g=m.useCallback(async()=>{try{const{notifications:N=[],unreadCount:j=0}=await So();o(N),u(_=>{if(j>_){const D=document.getElementById("notification-badge");D==null||D.classList.add("animate-pop"),setTimeout(()=>D==null?void 0:D.classList.remove("animate-pop"),300)}return j})}catch(N){console.error("Failed to fetch notifications:",N)}},[]);return m.useEffect(()=>{g();const N=setInterval(g,3e4);return()=>clearInterval(N)},[g]),m.useEffect(()=>{const N=j=>{x.current&&!x.current.contains(j.target)&&f(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),{notifications:l,unreadCount:i,isNotificationPanelOpen:h,notificationContainerRef:x,toggleNotificationPanel:()=>{f(N=>!N)},handleMarkAllAsRead:async N=>{if(N.stopPropagation(),i===0)return;const j=[...l],_=i;u(0),o(D=>D.map(w=>({...w,isRead:!0})));try{await Co()}catch(D){console.error("Failed to mark all notifications as read",D),o(j),u(_),n("Thao Tc Tht Bi","Khng th nh du  c tt c thng bo.","error",3e3)}},handleNotificationClick:async(N,j,_,D)=>{if(j.stopPropagation(),!N.isRead){o(w=>w.map(k=>k.id===N.id?{...k,isRead:!0}:k)),u(w=>Math.max(0,w-1));try{await Do(N.id)}catch(w){console.error("Failed to mark notification as read",w),o(k=>k.map(P=>P.id===N.id?{...P,isRead:!1}:P)),u(k=>k+1)}}if(N.link){const w=N.link.match(/orderNumber=([^&]+)/);if(w&&w[1]){const k=_.find(P=>P["S n hng"]===decodeURIComponent(w[1]));k?D(k):window.location.href=N.link}else window.location.href=N.link}f(!1)},setIsNotificationPanelOpen:f}},tr="archivedOrdersData",Mc=()=>{const[n,l]=m.useState([]),[o,i]=m.useState(!0),[u,h]=m.useState(null),[f,x]=m.useState(!1),g=m.useCallback(async(b=!1)=>{b||i(!0),h(null);try{let y=(await xo()).data||[];const N=sessionStorage.getItem(tr);if(N)try{const j=JSON.parse(N);y=[...y,...j],x(!0)}catch(j){console.error("Failed to parse cached archives:",j),sessionStorage.removeItem(tr),x(!1)}else x(!1);l(y)}catch(c){const y=c instanceof Error?c.message:"An unknown error occurred";h(y)}finally{b||i(!1)}},[]);return m.useEffect(()=>{g()},[g]),{historyData:n,setHistoryData:l,isLoading:o,error:u,refetch:g,archivesLoadedFromCache:f}},Tc=()=>{const[n,l]=m.useState([]),[o,i]=m.useState(!0),[u,h]=m.useState(null),f=m.useCallback(async(x=!1)=>{x||i(!0),h(null);try{const g=await pr();l(g.khoxe||[])}catch(g){const b=g instanceof Error?g.message:"An unknown error occurred";h(b)}finally{x||i(!1)}},[]);return m.useEffect(()=>{f()},[f]),{stockData:n,setStockData:l,isLoading:o,error:u,refetch:f}},Pc=(n,l)=>{const[o,i]=m.useState([]),[u,h]=m.useState(!0),[f,x]=m.useState(null),g=m.useCallback(async()=>{h(!0),x(null);try{let b;if(n!==null?b=await Mo(["January","February","March","April","May","June","July","August","September","October","November","December"][n],l):b=await To(l),b.status==="SUCCESS")i(b.data||[]);else throw new Error(b.message||"Failed to fetch sold cars data.")}catch(b){const c=b instanceof Error?b.message:"An unknown error occurred";x(c)}finally{h(!1)}},[n,l]);return m.useEffect(()=>{g()},[g]),{soldData:o,isLoading:u,error:f,refetch:g}},sr=n=>{if(!n)return 0;if(n.includes("T")||n.includes(" ")){const o=Ye(n);if(o.isValid())return o.hour()*60+o.minute()}const l=n.split(":");if(l.length>=2){const o=parseInt(l[0],10),i=parseInt(l[1],10);if(!isNaN(o)&&!isNaN(i))return o*60+i}return 0},Ec=()=>{const[n,l]=m.useState([]),[o,i]=m.useState(!0),[u,h]=m.useState(null),f=m.useCallback(async(x=!1)=>{x||i(!0),h(null);try{const g=await Fo();if(g.status==="SUCCESS"&&g.data){const c=g.data.sort((y,N)=>{const j=N.ngayThuXe.localeCompare(y.ngayThuXe);return j!==0?j:sr(N.thoiGianKhoiHanh)-sr(y.thoiGianKhoiHanh)});l(c)}else throw new Error(g.message||"Khng th ti d liu lch li th.")}catch(g){const b=g instanceof Error?g.message:"An unknown error occurred";h(b)}finally{x||i(!1)}},[]);return m.useEffect(()=>{f()},[f]),{testDriveData:n,setTestDriveData:l,isLoading:o,error:u,refetch:f}},Yc=({currentUser:n,userRole:l,isCurrentUserAdmin:o,showToast:i})=>{const{historyData:u,setHistoryData:h,isLoading:f,error:x,refetch:g,archivesLoadedFromCache:b}=Mc(),{stockData:c,setStockData:y,isLoading:N,error:j,refetch:_}=Tc(),{soldData:D,isLoading:w,error:k,refetch:P}=Pc(null,new Date().getFullYear()),{testDriveData:C,setTestDriveData:I,isLoading:E,refetch:R}=Ec(),[H,O]=m.useState([]),[M,$]=m.useState(!0),[V,z]=m.useState(null),[L,Q]=m.useState({}),[q,ee]=m.useState([]),[ie,oe]=m.useState(new Set),xe=m.useRef([]),W=m.useCallback(async(T=!1)=>{T||$(!0),z(null);try{const U=await go();O(U.data||[])}catch(U){const te=U instanceof Error?U.message:"An unknown error occurred";z(te)}finally{T||$(!1)}},[]),Z=m.useCallback(async(T=!1)=>{if(!(!o&&l!=="Trng Phng Kinh Doanh"))try{const[U,te]=await Promise.all([Yo(),Io()]);U.status==="SUCCESS"&&U.teamData?Q(U.teamData):console.error("Failed to fetch team data:",U.message),te.status==="SUCCESS"&&te.users?ee(te.users):console.error("Failed to fetch user list:",te.message)}catch(U){console.error("Failed to fetch admin data:",U),T||i("Li Ti D Liu","Khng th ti d liu qun tr phng ban.","error")}},[o,l,i]);m.useEffect(()=>{Z(),W()},[Z,W]);const F=m.useMemo(()=>{if(l!=="Trng Phng Kinh Doanh")return;const T=St(n),U=Object.keys(L).find(te=>St(te)===T);if(U&&L[U]){const te=L[U];return[U,...te].map(de=>St(de))}return[T]},[n,l,L]),v=m.useMemo(()=>{if(o)return u;if(l==="Trng Phng Kinh Doanh"&&F){const U=new Set(F.map(te=>St(te)));return u.filter(te=>U.has(St(te["Tn t vn bn hng"])))}const T=St(n);return u.filter(U=>St(U["Tn t vn bn hng"])===T)},[u,o,l,F,n]);m.useEffect(()=>{xe.current=c},[c]);const Y=m.useCallback(async()=>{if(!document.hidden)try{const U=(await pr()).khoxe||[],te=xe.current;if(te.length===0){y(U);return}const de=X=>`${X["Trng thi"]}|${X["Ngi Gi Xe"]||""}`,De=new Map(te.map(X=>[X.VIN,de(X)])),Je=new Set;U.forEach(X=>{if(!X.VIN)return;const ue=De.get(X.VIN),ge=de(X);ue!==void 0&&ue!==ge&&Je.add(X.VIN)}),y(U),Je.size>0&&(i("Cp Nht Kho Xe",`C ${Je.size} xe va thay i trng thi.`,"info",4e3),oe(Je),setTimeout(()=>oe(new Set),3e3))}catch(T){console.warn("Real-time stock update failed:",T)}},[i,y]);return m.useEffect(()=>{let U;const te=()=>{de(),Y(),W(!0),U=window.setInterval(()=>{Y(),W(!0)},15e3)},de=()=>{U&&clearInterval(U),U=void 0},De=()=>{document.hidden?de():te()};return!N&&!j&&(te(),document.addEventListener("visibilitychange",De)),()=>{de(),document.removeEventListener("visibilitychange",De)}},[N,j,Y,W]),{allHistoryData:u,setAllHistoryData:h,historyData:v,isLoadingHistory:f,errorHistory:x,refetchHistory:g,archivesLoadedFromCache:b,stockData:c,setStockData:y,isLoadingStock:N,errorStock:j,refetchStock:_,highlightedVins:ie,soldData:D,isLoadingSold:w,errorSold:k,refetchSold:P,testDriveData:C,setTestDriveData:I,isLoadingTestDrive:E,refetchTestDrive:R,xuathoadonData:H,isLoadingXuathoadon:M,errorXuathoadon:V,refetchXuathoadon:W,teamData:L,allUsers:q,fetchAdminData:Z,usersToView:F}},Ic=({showToast:n,hideToast:l,refetchHistory:o,refetchStock:i,setAllHistoryData:u})=>{const[h,f]=m.useState(null),[x,g]=m.useState(null),[b,c]=m.useState(null),[y,N]=m.useState(null),[j,_]=m.useState(null),[D,w]=m.useState(null),[k,P]=m.useState(null),[C,I]=m.useState({isOpen:!1}),[E,R]=m.useState(!1),[H,O]=m.useState(null),[M,$]=m.useState(null),[V,z]=m.useState(!1),[L,Q]=m.useState(null),[q,ee]=m.useState(null),ie=async X=>{ee(X);try{await yo(X),l(),n("Gi Xe Thnh Cng",` gi xe ${X}.`,"success",3e3),i(!0)}catch(ue){l();const ge=ue instanceof Error?ue.message:"Khng th gi xe.";n("Gi Xe Tht Bi",ge,"error",5e3)}finally{ee(null)}},oe=async X=>{ee(X);try{await bo(X),l(),n("Hy Gi Thnh Cng",` hy gi xe ${X}.`,"info",3e3),i(!0)}catch(ue){l();const ge=ue instanceof Error?ue.message:"Khng th hy gi xe.";n("Hy Gi Tht Bi",ge,"error",5e3)}finally{ee(null)}},xe=X=>f(X),W=async(X,ue)=>{Q(X["S n hng"]);try{await wo(X["S n hng"],ue),await o(),l(),n("Hy Thnh Cng"," hy yu cu thnh cng.","success",3e3)}catch(ge){l();const ye=ge instanceof Error?ge.message:"Li khng xc nh";n("Hy Tht Bi",ye,"error",5e3)}finally{g(null),Q(null)}},Z=async(X,ue,ge,ye,Oe,Fe)=>{Q(X["S n hng"]);try{return await jo(X["S n hng"],ue,ge,ye.join(", "),Oe,Fe),await o(),l(),n("Gi Thnh Cng"," gi yu cu xut ha n.","success",3e3),!0}catch(Se){l();const Me=Se instanceof Error?Se.message:"Li khng xc nh";n("Gi Tht Bi",Me,"error",5e3)}finally{Q(null)}},F=async(X,ue,ge)=>{Q(X["S n hng"]);try{await No(X["S n hng"],ue,ge),await o(),l(),n("B Sung Thnh Cng"," b sung h s thnh cng.","success",3e3)}catch(ye){l();const Oe=ye instanceof Error?ye.message:"Li khng xc nh";n("B Sung Tht Bi",Oe,"error",5e3)}finally{N(null),Q(null)}},v=()=>{_(null),n("Cp nht thnh cng!","Thng tin n hng  c cp nht.","success"),o(!0),i(!0)},Y=async(X,ue)=>{if(!D)return!1;Q(D["S n hng"]);const ge=ye=>new Promise((Oe,Fe)=>{const Se=new FileReader;Se.readAsDataURL(ye),Se.onload=()=>Oe(Se.result.split(",")[1]),Se.onerror=Me=>Fe(Me)});try{const ye=[];for(const Se in X.files)if(X.files[Se]){const Me=X.files[Se],Ct=await ge(Me);ye.push({key:Se,name:Me.name,type:Me.type,data:Ct})}const Oe={orderNumber:X.orderNumber,customerType:X.customerType,dmsCode:X.dmsCode,filesData:JSON.stringify(ye),vin:ue},Fe=await Po(Oe);return l(),n("Thnh Cng",Fe.message||"Yu cu VinClub  c gi.","success"),Fe.updatedOrder?u(Se=>Se.map(Me=>Me["S n hng"]===Fe.updatedOrder["S n hng"]?{...Me,...Fe.updatedOrder}:Me)):o(!0),w(null),!0}catch(ye){l();const Oe=ye instanceof Error?ye.message:"Li khng xc nh.";return n("Yu Cu Tht Bi",Oe,"error"),!1}finally{Q(null)}},T=async()=>{if(!k)return!1;Q(k["S n hng"]);try{return await Oo("confirmVcUnc",{orderNumber:k["S n hng"]}),await o(),l(),n("Thnh Cng"," xc thc UNC cho VinClub.","success"),P(null),!0}catch(X){l();const ue=String(X instanceof Error?X.message:"Li khng xc nh");return n("Xc Thc VC Tht Bi",ue,"error"),!1}finally{Q(null)}},U=X=>{I({isOpen:!0,initialVehicle:X})},te=m.useCallback(()=>{I({isOpen:!1})},[]),de=m.useCallback(X=>{I({isOpen:!1}),u(ue=>[X,...ue].sort((ge,ye)=>new Date(ye["Thi gian nhp"]).getTime()-new Date(ge["Thi gian nhp"]).getTime())),n("Yu Cu  Gi","Yu cu ghp xe ca bn  c ghi nhn thnh cng.","success",4e3),i(!0),setTimeout(()=>{f(X)},500)},[u,n,i]),De=m.useCallback((X,ue=0,ge)=>{O({images:X,startIndex:ue,customerName:ge})},[]),Je=m.useCallback((X,ue)=>{$({url:X,label:ue})},[]);return{selectedOrder:h,setSelectedOrder:f,orderToCancel:x,setOrderToCancel:g,orderToRequestInvoice:b,setOrderToRequestInvoice:c,orderToSupplement:y,setOrderToSupplement:N,orderToEdit:j,setOrderToEdit:_,orderToRequestVC:D,setOrderToRequestVC:w,orderToConfirmVC:k,setOrderToConfirmVC:P,createRequestData:C,setCreateRequestData:I,isChangePasswordModalOpen:E,setIsChangePasswordModalOpen:R,imagePreview:H,setImagePreview:O,filePreview:M,setFilePreview:$,isPendingStatsModalOpen:V,setIsPendingStatsModalOpen:z,processingOrder:L,processingVin:q,handleHoldCar:ie,handleReleaseCar:oe,handleViewDetails:xe,handleCancelOrder:W,handleRequestInvoice:Z,handleSupplementFiles:F,handleEditSuccess:v,handleConfirmRequestVC:Y,handleConfirmVC:T,handleCreateRequestForVehicle:U,handleCreateRequestClose:te,handleFormSuccess:de,openImagePreviewModal:De,openFilePreviewModal:Je}},Oc=({allHistoryData:n,isSidebarCollapsed:l,activeView:o,orderView:i})=>{const[u,h]=m.useState({keyword:"",carModel:[],version:[],status:[],exterior:[]}),[f,x]=m.useState({key:"Thi gian nhp",direction:"desc"}),[g,b]=m.useState(1),[c,y]=m.useState(20),[N,j]=m.useState(20),[_,D]=m.useState(()=>o==="orders"&&i==="grid"?l?15:12:l?14:12),w=m.useRef(null),k=m.useCallback(()=>{if(w.current)if(o==="orders"&&i==="grid"){const O=w.current.querySelector(".flex-grow.overflow-y-auto"),M=O==null?void 0:O.querySelector(".grid");if(!O||!M){j(20);return}const $=w.current.clientWidth,V=w.current.clientHeight;if(V===0||$===0){j(20);return}const z=190,L=8;let Q=230,q=Math.floor(($-8+L)/(z+L));if(M){const F=window.getComputedStyle(M).gridTemplateColumns;F&&F!=="none"&&(q=F.split(" ").length);const v=M.querySelector(".bg-white.rounded-xl");if(v){const Y=v.getBoundingClientRect().height;Y>0&&(Q=Y)}}const ee=V-50,ie=ee>=Q?Math.ceil((ee-Q/2)/(Q+L)):0,oe=Math.max(2,ie),xe=Math.max(1,q),W=Math.max(12,oe*xe*2);j(W),y(Z=>Math.max(Z,W))}else D(l?14:12)},[o,i,l]);m.useEffect(()=>{const O=w.current;if(!O)return;const M=new ResizeObserver(()=>{k()});return M.observe(O),k(),()=>M.disconnect()},[k]);const P=m.useCallback(O=>{b(1),y(N),h(M=>({...M,...O}))},[N]),C=m.useCallback(()=>{b(1),y(N),h({keyword:"",carModel:[],version:[],status:[],exterior:[]})},[N]),I=O=>{b(1),y(N);let M="asc";f&&f.key===O&&f.direction==="asc"&&(M="desc"),x({key:O,direction:M})},E=m.useMemo(()=>{let O=[...n];if(u.keyword){const M=u.keyword.toLowerCase();O=O.filter($=>Ze($["Tn khch hng"],M)||Ze($["S n hng"],M)||Ze($.VIN,M)||Ze($["Dng xe"],M)||Ze($["Phin bn"],M)||Ze($["Ngoi tht"],M)||Ze($["Ni tht"],M)||Ze($["Tn t vn bn hng"],M)||Ze($["CHNH SCH"],M)||Ze($["S ng c"],M))}return u.carModel.length>0&&(O=O.filter(M=>u.carModel.includes(M["Dng xe"]))),u.version.length>0&&(O=O.filter(M=>u.version.includes(M["Phin bn"]))),u.status.length>0&&(O=O.filter(M=>u.status.includes(M["Trng thi VC"]||M["Kt qu"]||"Cha ghp"))),u.exterior.length>0&&(O=O.filter(M=>u.exterior.includes(M["Ngoi tht"]))),f!==null&&O.sort((M,$)=>{const V=M[f.key],z=$[f.key];return V==null||V===""?1:z==null||z===""?-1:V<z?f.direction==="asc"?-1:1:V>z?f.direction==="asc"?1:-1:0}),O},[n,u,f]),R=Math.ceil(E.length/_);m.useEffect(()=>{g>R&&R>0&&b(R)},[R,g,_]);const H=m.useMemo(()=>E.slice(0,c),[E,g,_,i,c]);return m.useEffect(()=>{const O=setTimeout(()=>{k()},200);return()=>clearTimeout(O)},[H.length,k]),{filters:u,sortConfig:f,currentPage:g,setCurrentPage:b,handleFilterChange:P,handleResetFilters:C,handleSort:I,processedData:E,paginatedData:H,totalPages:R,pageSize:_,containerRef:w,visibleCount:c,setVisibleCount:y,batchSize:N}},Fc="/ordermanagement/assets/yeucau-CU2pKZso.json",ar="/ordermanagement/assets/logo1-Be-jI06Y.png",Cs="/ordermanagement/assets/lixi_animation-CGpl0Wp_.gif",Ac="/ordermanagement/assets/bell_fixed-mq3DHU6t.gif",Sr="/ordermanagement/assets/hoa_dao_icon_bloom-HCG0szw1.gif",Lc="/ordermanagement/assets/hello_2026_loop-MyhPFczx.webp",Rc=({setCreateRequestData:n,toggleNotificationPanel:l,unreadCount:o,isNotificationPanelOpen:i,notifications:u,handleMarkAllAsRead:h,handleNotificationClick:f,onLogout:x,notificationContainerRef:g,activeView:b,setActiveView:c,isCurrentUserAdmin:y,onOpenGlobalSearch:N})=>{const[j,_]=_e.useState(Cs),[D,w]=_e.useState(ar),k=new Date>=new Date("2026-01-05T00:00:00");_e.useEffect(()=>{w(k?Lc:ar)},[b,k]),_e.useEffect(()=>{k&&_(Math.random()>.5?Cs:Sr)},[b,k]);const P=[{id:"orders",label:"Qun l",icon:"fa-car-side"},{id:"stock",label:"Kho Xe",icon:"fa-warehouse"},{id:"laithu",label:"Li Th",icon:"fa-gauge-high"},{id:"sold",label:"Lch S",icon:"fa-receipt"}];return y&&P.push({id:"admin",label:"Admin",icon:"fa-user-shield"}),e.jsxs("header",{className:"relative sticky top-0 w-full z-20 h-14 bg-surface-card/95 backdrop-blur-md border-b border-border-primary/50 flex items-center justify-between px-4 sm:px-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("img",{src:D,alt:"OrderMgmt",className:"h-[4.5rem] w-auto -ml-2 object-contain"})})}),e.jsx("nav",{className:"hidden lg:flex items-center absolute left-1/2 transform -translate-x-1/2 bg-white/40 backdrop-blur-xl p-1.5 rounded-full border border-white/60 shadow-[0_4px_20px_rgba(0,0,0,0.03)] hover:shadow-[0_4px_25px_rgba(0,0,0,0.06)] transition-all duration-300",children:P.map(C=>{const I=b===C.id;return e.jsxs("button",{onClick:()=>c(C.id),className:`
                                relative px-6 py-2 rounded-full text-xs font-bold uppercase tracking-widest transition-all duration-300 flex items-center gap-2.5 outline-none group
                                ${I?"bg-white text-accent-primary shadow-[0_2px_10px_rgba(0,0,0,0.1)] ring-1 ring-black/5 scale-100":"text-gray-500 hover:text-gray-900 hover:bg-white/50"}
                            `,children:[I&&k&&e.jsx("div",{className:"absolute -top-3 -right-1 z-20",children:e.jsx("img",{src:j,alt:"Festive Icon",className:"w-8 h-auto drop-shadow-sm"})}),I&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white via-transparent to-white/50 opacity-50 rounded-full"}),e.jsx("span",{className:"relative z-10",children:C.label})]},C.id)})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 sm:space-x-4",children:[e.jsx("div",{onClick:()=>n({isOpen:!0}),title:"To Yu Cu Mi",className:"cursor-pointer transition-transform hover:scale-105 active:scale-95",children:e.jsx("lottie-player",{src:Fc,background:"transparent",speed:"1",style:{width:"250px",height:"120px",marginTop:"-10px",marginBottom:"-10px"},loop:!0,autoplay:!0})}),y&&e.jsx(K,{onClick:N,variant:"ghost",className:"w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center !p-0 action-btn text-blue-600 hover:bg-blue-50",title:"Tm kim ton cc",children:e.jsx("i",{className:"fas fa-search text-xl"})}),e.jsxs("div",{ref:g,className:"relative notification-bell-container",children:[e.jsxs(K,{onClick:l,variant:"ghost",className:"w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center !p-0 action-btn",title:"Thng bo",children:[e.jsx("img",{src:Ac,alt:"Notifications",className:"w-8 h-8 object-contain"}),o>0&&e.jsx("span",{id:"notification-badge",className:"notification-badge",children:o>9?"9+":o})]}),e.jsxs("div",{className:`notification-panel ${i?"visible":""}`,children:[e.jsxs("div",{className:"notification-panel-header flex justify-between items-center",children:[e.jsx("span",{children:"Thng Bo"}),o>0&&e.jsx(K,{onClick:h,variant:"ghost",size:"sm",className:"text-xs font-medium text-accent-secondary hover:text-accent-primary-hover transition-colors !h-auto !p-0",children:"nh du  c tt c"})]}),e.jsx("div",{className:"notification-list",children:u.length>0?u.map(C=>{const I={success:"fa-check",danger:"fa-times-circle",warning:"fa-exclamation-triangle",info:"fa-info-circle",error:"fa-times-circle"},E=C.type==="error"?"danger":C.type;return e.jsxs("div",{className:`notification-item ${C.isRead?"":"unread"}`,onClick:R=>f(C,R),children:[e.jsx("div",{className:`notification-icon type-${E}`,children:e.jsx("i",{className:`fa-solid ${I[E]||"fa-bell"}`})}),e.jsxs("div",{className:"notification-content",children:[e.jsx("p",{className:"notification-message",dangerouslySetInnerHTML:{__html:C.message}}),e.jsx("p",{className:"notification-time",children:Ye(C.timestamp).fromNow()})]})]},C.id)}):e.jsxs("div",{className:"no-notifications",children:[e.jsx("i",{className:"fa-solid fa-bell-slash"}),e.jsx("p",{children:"Khng c thng bo no."})]})})]})]}),e.jsx(K,{onClick:x,variant:"ghost",className:"w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center text-text-secondary hover:text-danger !p-0",title:"ng xut",children:e.jsx("i",{className:"fa-solid fa-sign-out-alt"})})]})]})},$c=n=>{if(!n)return"?";const l=n.trim().split(" ").filter(Boolean);if(l.length===0)return"?";if(l.length===1)return l[0].charAt(0).toUpperCase();const o=l[0].charAt(0),i=l[l.length-1].charAt(0);return`${o}${i}`.toUpperCase()},Vc=({name:n,size:l="md",className:o=""})=>{const i=$c(n),u=so(n),h={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-lg",lg:"w-12 h-12 text-xl"};return e.jsx("div",{className:`rounded-full flex items-center justify-center text-white font-bold flex-shrink-0 ${h[l]} ${o}`,style:{backgroundColor:u},title:n,children:i})},Hc=({activeView:n,setActiveView:l,isCurrentUserAdmin:o,currentUser:i,userRole:u,onLogout:h,setIsChangePasswordModalOpen:f})=>{const[x,g]=m.useState(!1),b=m.useRef(null),[c,y]=m.useState(Cs),N=new Date>=new Date("2026-01-05T00:00:00");m.useEffect(()=>{N&&y(Math.random()>.3?Cs:Sr)},[n,N]);const j=[{id:"orders",label:"Ghp Xe",icon:"fa-car-side"},{id:"stock",label:"Kho Xe",icon:"fa-warehouse"},{id:"laithu",label:"Li Th",icon:"fa-gauge-high"},{id:"sold",label:"Lch S",icon:"fa-receipt"}];return o&&j.push({id:"admin",label:"Admin",icon:"fa-user-shield"}),m.useEffect(()=>{const _=D=>{b.current&&!b.current.contains(D.target)&&g(!1)};return x&&document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[x]),e.jsxs(e.Fragment,{children:[x&&e.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col justify-end lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>g(!1)}),e.jsxs("div",{ref:b,className:"relative bg-surface-card rounded-t-2xl shadow-2xl border-t border-border-primary p-4 animate-slide-up-fade",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-border-primary/50",children:[e.jsx(Vc,{name:i,size:"lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary",children:i}),e.jsx("p",{className:"text-sm text-text-secondary capitalize",children:u})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{onClick:()=>{f(!0),g(!1)},variant:"secondary",fullWidth:!0,className:"justify-start gap-3 py-3 text-base",children:[e.jsx("i",{className:"fas fa-key text-text-secondary w-6 text-center"}),e.jsx("span",{children:"i mt khu"})]}),e.jsxs(K,{onClick:()=>{h(),g(!1)},variant:"ghost",fullWidth:!0,className:"justify-start gap-3 py-3 text-base text-danger hover:bg-danger-bg hover:text-danger",children:[e.jsx("i",{className:"fas fa-sign-out-alt w-6 text-center"}),e.jsx("span",{children:"ng xut"})]})]}),e.jsx("div",{className:"mt-6 pt-2 text-center",children:e.jsx("button",{onClick:()=>g(!1),className:"w-12 h-1 bg-gray-300 rounded-full mx-auto"})})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-40 lg:hidden pb-safe",children:e.jsxs("div",{className:"flex justify-around items-center h-16",children:[j.map(_=>{const D=n===_.id;return e.jsxs("button",{onClick:()=>{l(_.id),g(!1)},className:`flex flex-col items-center justify-center w-full h-full space-y-1 relative group ${D?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:[D&&N&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 z-20 animate-bounce-small",children:e.jsx("img",{src:c,alt:"Festive Icon",className:"w-8 h-8 object-contain drop-shadow-sm pointer-events-none select-none",draggable:"false"})}),e.jsx("i",{className:`fas ${_.icon} text-lg ${D?"opacity-0 scale-50":"opacity-100 scale-100"} transition-all duration-300`}),e.jsx("span",{className:"text-[10px] font-medium transition-all duration-300 transform translate-y-0",children:_.label})]},_.id)}),e.jsxs("button",{onClick:()=>g(!0),className:`flex flex-col items-center justify-center w-full h-full space-y-1 ${x?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx("i",{className:`fas fa-user-circle text-lg ${x?"animate-bounce-short":""}`}),e.jsx("span",{className:"text-[10px] font-medium",children:"C nhn"})]})]})})]})},zc="/ordermanagement/assets/footer-DG9Dww7K.png",Uc=_e.lazy(()=>Ds(()=>import("./StockView-CC0-GzHy.js"),__vite__mapDeps([0,1,2,3]))),Bc=_e.lazy(()=>Ds(()=>import("./SoldCarsView-9KORK4RY.js"),__vite__mapDeps([4,1,2,3]))),Wc=_e.lazy(()=>Ds(()=>import("./AdminView-CZWtiChu.js"),__vite__mapDeps([5,1,2,3]))),Gc=_e.lazy(()=>Ds(()=>import("./TestDriveForm-D8JMNfSE.js"),__vite__mapDeps([6,1,2,3])));Ye.locale("vi");const _s=()=>e.jsxs("div",{className:"flex items-center justify-center h-full",children:[e.jsx("div",{style:{border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",width:"30px",height:"30px",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]}),qc=({onLogout:n,showToast:l,hideToast:o})=>{const i=sessionStorage.getItem("currentConsultant")||We,u=sessionStorage.getItem("currentUser")||"User",h=sessionStorage.getItem("userRole")||(u.toLowerCase()==="admin"?"Qun tr vin":"T vn bn hng"),f=u.toLowerCase()==="admin",{isSidebarCollapsed:x,isMobileMenuOpen:g,setIsMobileMenuOpen:b,activeView:c,setActiveView:y,initialAdminState:N,showOrderInAdmin:j,showAdminTab:_,clearInitialState:D}=Cc(),[w,k]=m.useState(new Set(["orders"]));m.useEffect(()=>{k(se=>{const me=new Set(se);return me.add(c),me})},[c]);const{allHistoryData:P,setAllHistoryData:C,historyData:I,isLoadingHistory:E,errorHistory:R,refetchHistory:H,archivesLoadedFromCache:O,stockData:M,isLoadingStock:$,errorStock:V,refetchStock:z,highlightedVins:L,soldData:Q,testDriveData:q,setTestDriveData:ee,isLoadingTestDrive:ie,refetchTestDrive:oe,xuathoadonData:xe,isLoadingXuathoadon:W,errorXuathoadon:Z,refetchXuathoadon:F,teamData:v,allUsers:Y,fetchAdminData:T}=Yc({currentUser:i,currentUserName:u,userRole:h,isCurrentUserAdmin:f,showToast:l}),{notifications:U,unreadCount:te,isNotificationPanelOpen:de,notificationContainerRef:De,toggleNotificationPanel:Je,handleMarkAllAsRead:X,handleNotificationClick:ue}=Dc(l),{selectedOrder:ge,setSelectedOrder:ye,orderToCancel:Oe,setOrderToCancel:Fe,orderToRequestInvoice:Se,setOrderToRequestInvoice:Me,orderToSupplement:Ct,setOrderToSupplement:Dt,orderToEdit:Ce,setOrderToEdit:yt,orderToRequestVC:Ts,setOrderToRequestVC:zt,orderToConfirmVC:Mt,setOrderToConfirmVC:Te,createRequestData:Ut,setCreateRequestData:Bt,isChangePasswordModalOpen:Tt,setIsChangePasswordModalOpen:he,imagePreview:$e,setImagePreview:is,filePreview:tt,setFilePreview:Wt,isPendingStatsModalOpen:Pt,setIsPendingStatsModalOpen:st,processingOrder:Et,processingVin:Ps,handleHoldCar:Yt,handleReleaseCar:Es,handleViewDetails:bt,handleCancelOrder:ht,handleRequestInvoice:Gt,handleSupplementFiles:It,handleEditSuccess:B,handleConfirmRequestVC:Ys,handleConfirmVC:Is,handleCreateRequestForVehicle:Ge,handleCreateRequestClose:Ae,handleFormSuccess:ae,openImagePreviewModal:vt,openFilePreviewModal:ce}=Ic({showToast:l,hideToast:o,refetchHistory:H,refetchStock:z,setAllHistoryData:C}),[mt,ls]=m.useState(!1),[Ot,Ne]=m.useState(O),[qe,Ve]=m.useState(!1);_e.useEffect(()=>{Ne(O)},[O]),_e.useEffect(()=>{const me={orders:"Qun L n Hng",stock:"Kho Xe",sold:"Lch S",admin:"Qun Tr",laithu:"Li Th"}[c]||"Order Management";document.title=me},[c]),m.useEffect(()=>{f&&y("admin")},[f,y]),m.useEffect(()=>{const se=setInterval(()=>{Ss()},3e5);return Ss(),()=>clearInterval(se)},[i]);const{filters:je,handleFilterChange:He,handleResetFilters:Xe,processedData:Pe,paginatedData:Os,containerRef:Fs,visibleCount:Qe,setVisibleCount:qt,batchSize:os}=Oc({allHistoryData:I,isSidebarCollapsed:x,activeView:c,orderView:"grid"}),Be=_e.useRef(null);_e.useEffect(()=>{const se=new IntersectionObserver(me=>{me[0].isIntersecting&&Qe<Pe.length&&qt(ke=>Math.min(ke+os,Pe.length))},{threshold:.1,rootMargin:"100px"});return Be.current&&se.observe(Be.current),()=>{Be.current&&se.unobserve(Be.current)}},[Qe,Pe.length,os,qt]);const wt=async()=>{ls(!0);try{const se=await _o();o(),se.data&&se.data.length>0?(sessionStorage.setItem("archivedOrdersData",JSON.stringify(se.data)),C(me=>[...me,...se.data]),l("Ti Thnh Cng",` ti thm ${se.data.length} mc t kho lu tr.`,"success",3e3)):l("Hon Tt","Khng tm thy thm d liu no trong kho lu tr.","info",3e3),Ne(!0)}catch(se){o();const me=se instanceof Error?se.message:"Li khng xc nh";l("Ti Tht Bi",me,"error",5e3)}finally{ls(!1)}},cs=se=>{if(!ge)return;const me=Pe,ke=me.findIndex(ve=>ve["S n hng"]===ge["S n hng"]);if(ke===-1)return;const Ee=se==="prev"?ke-1:ke+1;Ee>=0&&Ee<me.length&&ye(me[Ee])},As=m.useMemo(()=>{const se=P.filter(Ee=>{var ve;return(ve=Ee["Kt qu"])==null?void 0:ve.toLowerCase().includes("cha")}),me={};se.forEach(Ee=>{const{"Dng xe":ve,"Phin bn":we,"Ngoi tht":et}=Ee;if(ve&&we&&et){const Le=`${ve}|${we}|${et}`.trim().toLowerCase();me[Le]=(me[Le]||0)+1}});const ke={};return M.forEach(Ee=>{const{"Dng xe":ve,"Phin bn":we,"Ngoi tht":et}=Ee;if(ve&&we&&et){const Le=`${ve}|${we}|${et}`.trim().toLowerCase(),ft=ke[Le]||{count:0,isSlowMoving:!1};ft.count+=1;const Re=Ee["Thi gian nhp"]?Ye(Ee["Thi gian nhp"]):null;Re&&Ye().diff(Re,"days")>30&&(ft.isSlowMoving=!0),ke[Le]=ft}}),{pendingRequestCount:me,stockStatus:ke}},[P,M]),Ls=m.useMemo(()=>{const me=P.filter(ve=>{var we;return(we=ve["Kt qu"])==null?void 0:we.toLowerCase().includes("cha")}),ke={};return me.forEach(ve=>{const we=ve["Dng xe"]||"Khng xc nh";ke[we]||(ke[we]=[]),ke[we].push(ve)}),Object.entries(ke).map(([ve,we])=>{const et=we.length,Le={};we.forEach(Re=>{const us=`${Re["Phin bn"]&&Re["Phin bn"]!=="N/A"?`${Re["Phin bn"]} - `:""}${Re["Ngoi tht"]||"N/A"} / ${Re["Ni tht"]||"N/A"}`;Le[us]=(Le[us]||0)+1});const ft=Object.entries(Le).map(([Re,Ft])=>({variant:Re,count:Ft})).sort((Re,Ft)=>Ft.count-Re.count);return{model:ve,total:et,variants:ft}}).sort((ve,we)=>we.total-ve.total)},[P]),Rs=m.useMemo(()=>[...new Set(P.map(se=>se["Dng xe"]).filter(Boolean))].sort(),[P]),be=m.useMemo(()=>[...new Set(P.map(se=>se["Phin bn"]).filter(Boolean))].sort(),[P]),Xt=m.useMemo(()=>[...new Set(P.map(se=>se["Trng thi VC"]||se["Kt qu"]||"Cha ghp").filter(Boolean))].sort(),[P]),$s=m.useMemo(()=>[...new Set(P.map(se=>se["Ngoi tht"]).filter(Boolean))].sort(),[P]),ds=()=>{const se="animate-fade-in-up",me=E,ke=R,Ee=[{id:"order-filter-car-model",key:"carModel",label:"Dng Xe",options:Rs,icon:"fa-car"},{id:"order-filter-version",key:"version",label:"Phin Bn",options:be,icon:"fa-cogs"},{id:"order-filter-status",key:"status",label:"Trng Thi",options:Xt,icon:"fa-tag"},{id:"order-filter-exterior",key:"exterior",label:"Ngoi Tht",options:$s,icon:"fa-palette"}].filter(we=>we.options.length>0),ve=e.jsx("button",{onClick:()=>st(!0),className:"btn-filter w-9 h-9",title:"Xem thng k cc xe ang c yu cu ch ghp",children:e.jsx("i",{className:"fas fa-chart-pie"})});if(me&&P.length===0){const we=Array.from({length:7},(et,Le)=>e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-1 px-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center space-x-4 p-4 w-full",children:[e.jsx("div",{className:"skeleton-item h-6 w-6 !rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2 py-1",children:[e.jsx("div",{className:"skeleton-item h-4 w-3/4"}),e.jsx("div",{className:"skeleton-item h-3 w-1/2"})]}),e.jsxs("div",{className:"flex-1 space-y-2 py-1 hidden md:block",children:[e.jsx("div",{className:"skeleton-item h-4 w-5/6"}),e.jsx("div",{className:"skeleton-item h-3 w-1/3"})]}),e.jsx("div",{className:"flex-1 skeleton-item h-4 w-full hidden md:block"}),e.jsx("div",{className:"flex-1 skeleton-item h-4 w-full hidden md:block"}),e.jsx("div",{className:"flex-1 skeleton-item h-8 w-24 !rounded-full hidden md:block"}),e.jsx("div",{className:"flex-1 skeleton-item h-8 w-8 !rounded-lg hidden md:block"})]})})},Le));return e.jsxs("div",{className:`flex flex-col h-full ${se}`,children:[e.jsx("div",{className:"flex-shrink-0 bg-surface-card rounded-xl shadow-md border border-border-primary p-3 mb-2",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"skeleton-item h-12 rounded-full",style:{flexBasis:"320px",flexGrow:1}}),e.jsx("div",{className:"skeleton-item h-12 w-32 rounded-full"}),e.jsx("div",{className:"skeleton-item h-12 w-32 rounded-full"}),e.jsx("div",{className:"skeleton-item h-12 w-12 !rounded-full ml-auto"})]})}),e.jsx("div",{className:"flex-1 bg-surface-card rounded-xl shadow-md border border-border-primary flex flex-col min-h-0",children:e.jsx("div",{className:"flex-grow overflow-auto",children:e.jsx("table",{className:"min-w-full",children:e.jsx("tbody",{className:"divide-y divide-border-primary",children:we})})})})]})}return ke?e.jsx("div",{className:`flex items-center justify-center h-96 ${se}`,children:e.jsxs("div",{className:"text-center p-8 bg-surface-card rounded-lg shadow-xl",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle fa-3x text-danger"}),e.jsx("p",{className:"mt-4 text-lg font-semibold",children:"Khng th ti d liu"}),e.jsx("p",{className:"mt-2 text-sm text-text-secondary max-w-sm",children:ke}),e.jsx("button",{onClick:()=>H(),className:"mt-6 btn-primary",children:"Th li"})]})}):e.jsxs("div",{className:`flex flex-col h-full ${se}`,children:[e.jsx("div",{className:"flex-shrink-0 bg-surface-card rounded-xl shadow-md border border-border-primary p-3 mb-2 relative z-20",children:e.jsx(uc,{filters:je,onFilterChange:He,onReset:Xe,dropdowns:Ee,searchPlaceholder:"Tm kim SH, tn khch hng, s VIN...",totalCount:Pe.length,onRefresh:()=>H(),isLoading:me,size:"compact",plain:!0,extraActionButton:ve,viewSwitcherEnabled:!1,searchable:!1})}),e.jsx("div",{ref:Fs,className:"flex-1 flex flex-col min-h-0",children:e.jsx("div",{className:"bg-surface-card rounded-xl shadow-md border border-border-primary flex flex-col h-full",children:e.jsxs("div",{className:"flex-grow overflow-y-auto relative hidden-scrollbar p-1",children:[e.jsx(_c,{orders:Os,onViewDetails:bt,onCancel:Fe,onRequestInvoice:Me,onSupplement:Dt,onEdit:yt,onRequestVC:zt,onConfirmVC:Te,processingOrder:Et}),Qe<Pe.length&&e.jsx("div",{ref:Be,className:"h-10 w-full flex items-center justify-center py-4",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-accent-primary text-xl"})}),Qe>=Pe.length&&!Ot&&e.jsx("div",{className:"p-4 flex justify-center",children:e.jsxs("button",{onClick:wt,disabled:mt,className:"btn-secondary",children:[mt?e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}):e.jsx("i",{className:"fas fa-cloud-download-alt mr-2"}),"Ti thm d liu c"]})})]})})})]})};return e.jsxs(e.Fragment,{children:[e.jsx(Sc,{}),e.jsx("div",{className:"circuit-background"}),e.jsx("div",{className:"scanline"}),e.jsx("div",{id:"sidebar-overlay",onClick:()=>b(!1),className:`fixed inset-0 bg-black/50 z-30 transition-opacity duration-300 lg:hidden ${g?"opacity-100 visible":"opacity-0 invisible"}`}),e.jsxs("div",{className:"relative h-screen flex flex-col transition-all duration-300 ease-in-out w-full pb-16 lg:pb-0",children:[e.jsx(Rc,{setCreateRequestData:Bt,toggleNotificationPanel:Je,unreadCount:te,isNotificationPanelOpen:de,notifications:U,handleMarkAllAsRead:X,handleNotificationClick:(se,me)=>ue(se,me,P,ye),onLogout:n,notificationContainerRef:De,activeView:c,setActiveView:y,isCurrentUserAdmin:f,onOpenGlobalSearch:()=>Ve(!0)}),e.jsxs("main",{className:"flex-1 p-2 flex flex-col overflow-y-auto",children:[e.jsx("div",{hidden:c!=="orders",className:"h-full",children:ds()}),w.has("stock")&&e.jsx("div",{hidden:c!=="stock",className:"h-full",children:e.jsx(m.Suspense,{fallback:e.jsx(_s,{}),children:e.jsx(Uc,{stockData:M,isLoading:$,error:V,refetchStock:z,highlightedVins:L,showToast:l,currentUser:i,isAdmin:f,onCreateRequestForVehicle:Ge,onHoldCar:Yt,onReleaseCar:Es,processingVin:Ps,isSidebarCollapsed:x,allOrders:P,showOrderInAdmin:j,showAdminTab:_})})}),w.has("sold")&&e.jsx("div",{hidden:c!=="sold",className:"h-full",children:e.jsx(m.Suspense,{fallback:e.jsx(_s,{}),children:e.jsx(Bc,{showToast:l,isSidebarCollapsed:x})})}),w.has("laithu")&&e.jsx("div",{hidden:c!=="laithu",className:"h-full",children:e.jsx(m.Suspense,{fallback:e.jsx(_s,{}),children:e.jsx(Gc,{showToast:l,hideToast:o,onOpenImagePreview:vt,currentUser:i,isAdmin:f,allTestDrives:q,setAllTestDrives:ee,isLoading:ie,refetch:oe})})}),w.has("admin")&&e.jsx("div",{hidden:c!=="admin",className:"h-full",children:f&&e.jsx(m.Suspense,{fallback:e.jsx(_s,{}),children:e.jsx(Wc,{showToast:l,hideToast:o,refetchHistory:H,refetchStock:z,allOrders:P,xuathoadonData:xe,refetchXuathoadon:F,stockData:M,isLoadingXuathoadon:W,isLoadingHistory:E,errorXuathoadon:Z,onOpenImagePreview:vt,onOpenFilePreview:ce,teamData:v,allUsers:Y,refetchAdminData:T,soldData:Q,isSidebarCollapsed:x,initialState:N,clearInitialState:D,onNavigateTo:y,onShowOrderDetails:ye})})})]}),e.jsx("footer",{className:"hidden lg:flex flex-shrink-0 h-8 bg-surface-card/70 backdrop-blur-xl border-t border-border-primary/50 items-center justify-center px-4 sm:px-6",children:e.jsx("img",{src:zc,alt:"Order Management 2026",className:"h-5 w-auto object-contain opacity-80"})})]}),e.jsx(Bo,{isOpen:Ut.isOpen,onClose:Ae,onSuccess:ae,showToast:l,hideToast:o,existingOrderNumbers:P.map(se=>se["S n hng"]),initialVehicle:Ut.initialVehicle,currentUser:i,vehicleAnalyticsData:As,onOpenImagePreview:vt}),e.jsx(Zo,{isOpen:Tt,onClose:()=>he(!1),showToast:l,username:u}),e.jsx(ro,{order:ge,onClose:()=>ye(null),orderList:Pe,onNavigate:cs,onCancel:Fe,onRequestInvoice:Me,onSupplement:Dt,onRequestVC:zt,onConfirmVC:Te,onEdit:yt}),e.jsx(Wo,{isOpen:!!Ce,onClose:()=>yt(null),onSuccess:B,order:Ce,showToast:l,existingOrderNumbers:P.map(se=>se["S n hng"]).filter(se=>se!==(Ce==null?void 0:Ce["S n hng"]))}),Oe&&e.jsx(no,{order:Oe,onClose:()=>Fe(null),onConfirm:ht}),Se&&e.jsx(Lo,{order:Se,onClose:()=>Me(null),onConfirm:Gt}),Ct&&e.jsx(Ro,{order:Ct,onClose:()=>Dt(null),onConfirm:It}),e.jsx(sc,{order:Ts,onClose:()=>zt(null),onSubmit:Ys}),Mt&&e.jsx(tc,{isOpen:!!Mt,onClose:()=>Te(null),title:"Xc Thc UNC VinClub",description:"Xc nhn bn  nhn c UNC cho yu cu VinClub ca n hng:",targetId:Mt["S n hng"],submitText:" Nhn UNC",submitColor:"success",icon:"fa-check-circle",onSubmit:Is}),e.jsx(Jo,{isOpen:!!$e,onClose:()=>is(null),images:($e==null?void 0:$e.images)||[],startIndex:$e==null?void 0:$e.startIndex,customerName:$e==null?void 0:$e.customerName}),tt&&e.jsx(lc,{isOpen:!!tt,onClose:()=>Wt(null),fileUrl:tt.url,fileLabel:tt.label}),e.jsx(cc,{isOpen:Pt,onClose:()=>st(!1),stats:Ls}),e.jsx(dc,{isOpen:qe,onClose:()=>Ve(!1)}),e.jsx(Hc,{activeView:c,setActiveView:y,isCurrentUserAdmin:f,currentUser:i,userRole:h,onLogout:n,setIsChangePasswordModalOpen:he})]})},Xc="/ordermanagement/assets/emerald_bg-B3TxPc-D.webp",Kc="/ordermanagement/assets/mobile_bg_2026-CqU1E6p8.webp",Zc="/ordermanagement/assets/mobile_mask_2026-Bu3lpM05.webp",Jc="/ordermanagement/assets/lantern_body-ClxCsch6.webp",Qc="/ordermanagement/assets/lantern_tassels-BZqiB8Sc.webp",ed="/ordermanagement/assets/lantern_string-D9biP1bm.webp",td="/ordermanagement/assets/xuan_mask-Cy54r02V.webp",sd="/ordermanagement/assets/tet_scroll_unroll-B9mu4sjd.gif",ad="/ordermanagement/assets/tet_tassel_left-bajjkeLR.png",rd="/ordermanagement/assets/tet_tassel_right-BRdjdVvb.png",nd=()=>{const[n,l]=m.useState([]);return m.useEffect(()=>{const i=[];for(let u=0;u<50;u++)i.push({id:u,top:Math.random()*100,left:Math.random()*100,size:Math.random()*2+.5,duration:Math.random()*20+10,delay:Math.random()*10,opacityStart:Math.random()*.4+.2});l(i)},[]),e.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10 overflow-hidden",children:[n.map(o=>e.jsx("div",{className:"absolute rounded-full bg-[#FCEE21] animate-float-dust mix-blend-screen",style:{top:`${o.top}%`,left:`${o.left}%`,width:`${o.size}px`,height:`${o.size}px`,animationDuration:`${o.duration}s`,animationDelay:`${o.delay}s`,boxShadow:`0 0 ${o.size}px rgba(252, 238, 33, 0.8)`,opacity:0}},o.id)),e.jsx("style",{children:`
                @keyframes float-dust {
                    0% { transform: translateY(0) translateX(0); opacity: 0; filter: brightness(1); }
                    10% { opacity: 0.8; } 
                    50% { transform: translateY(-60px) translateX(20px); opacity: 0.6; filter: brightness(2); }
                    80% { opacity: 0.8; filter: brightness(3); } 
                    100% { transform: translateY(-120px) translateX(-20px); opacity: 0; }
                }
                .animate-float-dust {
                    animation-name: float-dust;
                    animation-timing-function: ease-in-out;
                    animation-iteration-count: infinite;
                    will-change: transform, opacity;
                }
            `})]})},id="/ordermanagement/assets/emerald_bg_blink-BcXudJQx.webp",ld=()=>{const[n,l]=m.useState(!1);return m.useEffect(()=>{let o,i;const u=()=>{const h=Math.random()*4e3+2e3;o=setTimeout(()=>{l(!0),i=setTimeout(()=>{l(!1),u()},900)},h)};return u(),()=>{clearTimeout(o),clearTimeout(i)}},[]),e.jsx("div",{className:"absolute inset-0 transition-opacity duration-500 ease-in-out pointer-events-none z-0",style:{opacity:n?1:0},children:e.jsx("img",{src:id,alt:"Horse Blink",className:"w-full h-full object-cover object-left"})})},od=({onLoginSuccess:n,showToast:l})=>{const[o,i]=m.useState(!1),[u,h]=m.useState("login"),[f,x]=m.useState(""),[g,b]=m.useState(""),[c,y]=m.useState(""),[N,j]=m.useState(""),[_,D]=m.useState(""),[w,k]=m.useState(""),[P,C]=m.useState({x:0,y:0}),[I,E]=m.useState(""),R="Qun L n Hng",H=q=>{const ee=q.clientX-window.innerWidth/2,ie=q.clientY-window.innerHeight/2;C({x:ee,y:ie})};m.useEffect(()=>{let q=0;const ee=setInterval(()=>{q<=R.length?(E(R.slice(0,q)),q++):clearInterval(ee)},100);return()=>clearInterval(ee)},[]);const[O,M]=m.useState({days:0,hours:0,minutes:0,seconds:0});m.useEffect(()=>{const q=new Date("2026-02-17T00:00:00"),ee=setInterval(()=>{const ie=new Date,oe=q.getTime()-ie.getTime();oe>0&&M({days:Math.floor(oe/(1e3*60*60*24)),hours:Math.floor(oe/(1e3*60*60)%24),minutes:Math.floor(oe/1e3/60%60),seconds:Math.floor(oe/1e3%60)})},1e3);return()=>clearInterval(ee)},[]);const $=async q=>{if(q.preventDefault(),!f||!g){l("Thng bo","Vui lng nhp y  thng tin!","warning");return}i(!0),await new Promise(ie=>setTimeout(ie,800));const ee=await Go(f,g);i(!1),ee.success?n():l("Li",ee.message||"Sai thng tin ng nhp.","error")},V=async q=>{q.preventDefault(),i(!0);const ee=await Xo(c);i(!1),ee.success?(l("Thnh cng","M xc thc  gi.","success"),h("reset")):l("Li",ee.message||"Li gi yu cu.","error")},z=async q=>{q.preventDefault(),i(!0);const ee=await Ko(c,N,_);i(!1),ee.success?(l("Thnh cng","i mt khu thnh cng.","success"),L()):l("Li",ee.message||"Tht bi.","error")},L=()=>{y(""),j(""),x(""),b(""),h("login")},Q=({value:q,label:ee})=>e.jsxs("div",{className:"flex flex-col items-center mx-1.5",children:[e.jsx("div",{className:"w-9 h-9 flex items-center justify-center bg-[#043927]/60 backdrop-blur-md rounded-lg border border-[#C5A059]/30 shadow-lg",children:e.jsx("span",{className:"text-sm font-bold text-[#FCEE21] font-mono",children:String(q).padStart(2,"0")})}),e.jsx("span",{className:"text-[8px] text-[#C5A059] uppercase mt-1 tracking-wider",children:ee})]});return e.jsxs("div",{className:"relative min-h-screen w-full flex items-center justify-center overflow-hidden font-sans selection:bg-[#043927] selection:text-[#FCEE21]",onMouseMove:H,children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:Xc,alt:"Emerald Background",className:"hidden lg:block w-full h-full object-cover object-left pointer-events-none select-none",draggable:"false"}),e.jsx("img",{src:Kc,alt:"Mobile Background",className:"block lg:hidden w-full h-full object-cover object-center pointer-events-none select-none",draggable:"false"}),e.jsx("img",{src:Zc,alt:"Mobile Glow",className:"block lg:hidden absolute inset-0 w-full h-full object-cover object-center pointer-events-none select-none mix-blend-screen animate-pulse-fast opacity-100",draggable:"false"}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(ld,{})}),e.jsx("img",{src:td,alt:"Xuan Effect",className:"hidden lg:block absolute inset-0 w-full h-full object-cover object-left z-0 pointer-events-none mix-blend-screen animate-pulse-fast opacity-50 select-none",draggable:"false"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 via-transparent to-black/40 mix-blend-multiply"}),e.jsx(nd,{}),e.jsx(_r,{flowerType:"mixed",delay:0,sizeMode:"large"})]}),e.jsxs("div",{className:"absolute top-[10%] left-[4%] z-30 w-48 hidden lg:flex flex-col items-center origin-top animate-swing pointer-events-none transition-transform duration-100 ease-out",style:{animationDuration:"5s",transform:`translate(${P.x*-.02}px, ${P.y*-.02}px)`},children:[e.jsx("div",{className:"h-40 w-full flex justify-center -mb-2 overflow-visible relative z-10",children:e.jsx("img",{src:ed,alt:"Lantern String",className:"h-full w-auto object-contain filter brightness-110 drop-shadow-md",draggable:"false"})}),e.jsxs("div",{className:"-mt-2 relative w-full flex flex-col items-center",children:[e.jsx("img",{src:Jc,alt:"Lantern Body",className:"w-full relative z-20 animate-candle-glow",draggable:"false"}),e.jsx("div",{className:"absolute top-[92%] w-full flex justify-center z-10 animate-sway origin-top",children:e.jsx("img",{src:Qc,alt:"Lantern Tassels",className:"w-full filter brightness-110",draggable:"false"})})]}),e.jsx("img",{src:wr,className:"absolute top-[35%] right-[20%] w-5 h-5 rotate-45 opacity-90 z-30 animate-sway",style:{animationDuration:"5s"},draggable:"false"})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-7xl h-full flex flex-col lg:flex-row items-center justify-center p-4 lg:p-12 gap-12 lg:gap-24",children:[e.jsx("div",{className:"hidden lg:flex flex-col items-center absolute right-[-12%] top-[8%] z-20 animate-swing-slow origin-top select-none",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:sd,alt:"Tet Scroll",className:"w-[140px] lg:w-[150px] opacity-70 filter brightness-90 animate-unroll",draggable:"false"}),e.jsxs("div",{className:"absolute bottom-3 left-0 w-full flex justify-between px-6 z-[-1] opacity-0 animate-fade-in",style:{animationDelay:"4s",animationFillMode:"forwards"},children:[e.jsx("img",{src:ad,className:"h-14 w-auto animate-sway origin-top",style:{animationDelay:"5.5s"},draggable:"false"}),e.jsx("img",{src:rd,className:"h-14 w-auto animate-sway origin-top",style:{animationDelay:"6s"},draggable:"false"})]})]})}),e.jsx("style",{children:`
                @keyframes text-glow {
                    0%, 100% { opacity: 0.5; filter: brightness(1.2) blur(1px); }
                    50% { opacity: 1; filter: brightness(2) blur(2px) drop-shadow(0 0 5px #00ff00); }
                }
                .animate-text-glow { animation: text-glow 2s ease-in-out infinite; }
                @keyframes swing-slow {
                    0% { transform: rotate(1deg); }
                    100% { transform: rotate(-1deg); }
                }
                .animate-swing-slow { animation: swing-slow 6s ease-in-out infinite alternate; }
                
                /* Unroll Animation */
                @keyframes unroll {
                    0% { 
                        clip-path: inset(0 0 100% 0);
                        opacity: 0;
                    }
                    100% { 
                        clip-path: inset(0 0 0 0);
                        opacity: 1;
                    }
                }
                .animate-unroll {
                    animation: unroll 3s ease-out forwards;
                }
                @keyframes fade-in {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                .animate-fade-in { animation: fade-in 1s ease-out forwards; }
            `}),e.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 flex lg:hidden z-50 w-max",children:e.jsxs("div",{className:"flex items-center gap-3 bg-black/60 px-4 py-2 rounded-full border border-[#C5A059]/40 backdrop-blur-xl shadow-[0_0_15px_rgba(0,0,0,0.5)] overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col items-end mr-1 animate-part-fly-in-top",style:{animationDelay:"0.2s"},children:[e.jsx("span",{className:"text-[8px] text-[#C5A059] uppercase tracking-wider font-bold",children:"Sp n"}),e.jsx("span",{className:"text-[10px] text-white font-bold leading-3",children:"Tt 2026"})]}),e.jsx("div",{className:"h-6 w-[1px] bg-[#C5A059]/30 animate-part-fly-in-bottom",style:{animationDelay:"0.6s"}}),e.jsxs("div",{className:"flex gap-3 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-left",style:{animationDelay:"1.0s"},children:[e.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(O.days).padStart(2,"0")}),e.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Ngy"})]}),e.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-top",style:{animationDelay:"1.4s"},children:[e.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(O.hours).padStart(2,"0")}),e.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Gi"})]}),e.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-bottom",style:{animationDelay:"1.8s"},children:[e.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(O.minutes).padStart(2,"0")}),e.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Pht"})]}),e.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-right",style:{animationDelay:"2.2s"},children:[e.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(O.seconds).padStart(2,"0")}),e.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Giy"})]})]})]})}),e.jsx("div",{className:"fixed bottom-0 right-0 hidden lg:block z-50 m-2",children:e.jsxs("div",{className:"flex items-center bg-black/40 p-3 rounded-xl border border-[#C5A059]/30 backdrop-blur-md scale-90 origin-bottom-right overflow-hidden",children:[e.jsxs("div",{className:"mr-3 text-right animate-part-fly-in-top",style:{animationDelay:"0.2s"},children:[e.jsx("p",{className:"text-[#C5A059] text-[10px] uppercase tracking-[0.2em] font-bold",children:"Countdown to"}),e.jsx("p",{className:"text-white text-base font-bold",children:"Tt 2026"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"animate-part-fly-in-left",style:{animationDelay:"1.0s"},children:e.jsx(Q,{value:O.days,label:"Ngy"})}),e.jsx("div",{className:"animate-part-fly-in-top",style:{animationDelay:"1.4s"},children:e.jsx(Q,{value:O.hours,label:"Gi"})}),e.jsx("div",{className:"animate-part-fly-in-bottom",style:{animationDelay:"1.8s"},children:e.jsx(Q,{value:O.minutes,label:"Pht"})}),e.jsx("div",{className:"animate-part-fly-in-right",style:{animationDelay:"2.2s"},children:e.jsx(Q,{value:O.seconds,label:"Giy"})})]})]})}),e.jsx("div",{className:"w-full flex items-center justify-center animate-fade-in-right relative z-10 px-4 lg:px-0",children:e.jsxs("div",{className:"relative w-full max-w-[400px] p-8 rounded-2xl bg-[#043927]/20 backdrop-blur-xl border border-[#C5A059]/30 shadow-[0_8px_32px_0_rgba(0,0,0,0.36)] flex flex-col items-center justify-center overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 -left-[100%] w-full h-full bg-gradient-to-r from-transparent via-white/5 to-transparent group-hover:transition-all group-hover:duration-1000 group-hover:left-[100%]"}),e.jsx("div",{className:"absolute inset-0 rounded-2xl shadow-[inset_0_0_20px_rgba(197,160,89,0.1)] pointer-events-none"}),e.jsx("img",{src:vr,className:"absolute top-[-10px] left-8 w-6 h-6 rotate-12 opacity-90 z-20 pointer-events-none drop-shadow-sm select-none",draggable:"false"}),e.jsx("img",{src:jr,className:"absolute top-[-5px] right-12 w-5 h-5 -rotate-45 opacity-80 z-20 pointer-events-none drop-shadow-sm select-none",draggable:"false"}),e.jsxs("div",{className:"text-center mb-6 w-full relative z-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#FCEE21] mb-2 uppercase tracking-widest",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:u==="login"?"ng Nhp":u==="forgot"?"Khi Phc":"Mt Khu Mi"}),e.jsxs("p",{className:"text-[#C5A059] text-[10px] tracking-widest uppercase font-bold min-h-[15px]",children:[I,e.jsx("span",{className:"animate-blink",children:"|"})]})]}),u==="login"&&e.jsxs("form",{onSubmit:$,className:"space-y-3 w-full relative z-10",children:[e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"relative group/input",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-[#FCEE21]/70 text-xs transition-colors group-focus-within/input:text-[#FCEE21]"})}),e.jsx("input",{value:f,onChange:q=>x(q.target.value),type:"text",className:"w-full pl-10 pr-4 py-3 bg-black/30 border border-[#C5A059]/40 rounded-xl text-[#FCEE21] placeholder-[#FCEE21]/50 focus:outline-none focus:border-[#FCEE21] focus:bg-black/50 transition-all text-base shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)] backdrop-blur-sm",placeholder:"Tn ng nhp"})]})}),e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"relative group/input",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-[#FCEE21]/70 text-sm transition-colors group-focus-within/input:text-[#FCEE21]"})}),e.jsx("input",{value:g,onChange:q=>b(q.target.value),type:"password",className:"w-full pl-10 pr-4 py-3 bg-black/30 border border-[#C5A059]/40 rounded-xl text-[#FCEE21] placeholder-[#FCEE21]/50 focus:outline-none focus:border-[#FCEE21] focus:bg-black/50 transition-all text-base shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)] backdrop-blur-sm",placeholder:"Mt khu"})]})}),e.jsxs("button",{type:"submit",disabled:o,className:`w-full py-3.5 mt-6 bg-gradient-to-r from-[#C5A059] to-[#997B3C] hover:from-[#D4B36A] hover:to-[#AA8A4B] text-[#043927] font-bold rounded-xl shadow-[0_4px_15px_rgba(197,160,89,0.3)] transform transition-all active:scale-[0.98] uppercase tracking-wider text-sm flex items-center justify-center gap-2 border border-[#FCEE21]/30 relative overflow-hidden ${o?"animate-pulse-gold":""}`,children:[o&&e.jsx("div",{className:"absolute top-0 left-0 h-[2px] w-full bg-gradient-to-r from-transparent via-[#FFF] to-transparent animate-fuse-burn"}),o?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-lg"}),e.jsx("span",{children:"ang Xc Thc..."})]}):"ng Nhp"]}),e.jsx("div",{className:"text-center flex justify-center mt-2",children:e.jsx("button",{type:"button",onClick:()=>h("forgot"),className:"text-[#C5A059]/80 hover:text-[#FCEE21] text-xs hover:underline transition-all font-medium",children:"Qun mt khu?"})})]}),u==="forgot"&&e.jsxs("form",{onSubmit:V,className:"space-y-3 w-full relative z-10 px-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"relative group/input",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-[#FCEE21]/70 text-xs transition-colors group-focus-within/input:text-[#FCEE21]"})}),e.jsx("input",{value:c,onChange:q=>y(q.target.value),type:"email",className:"w-full pl-8 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"Email ng k"})]})}),e.jsx("button",{type:"submit",disabled:o,className:"w-full py-2.5 mt-4 bg-gradient-to-r from-[#C5A059] to-[#997B3C] hover:from-[#D4B36A] hover:to-[#AA8A4B] text-[#043927] font-bold rounded-lg shadow-[0_4px_10px_rgba(0,0,0,0.5)] transform transition-all active:scale-[0.98] uppercase tracking-wider text-xs flex items-center justify-center gap-2 border border-[#FCEE21]/30",children:o?e.jsx("i",{className:"fas fa-spinner fa-spin"}):"Gi M Xc Nhn"}),e.jsx("div",{className:"text-center flex justify-center mt-2",children:e.jsx("button",{type:"button",onClick:L,className:"text-[#C5A059]/80 hover:text-[#FCEE21] text-xs hover:underline transition-all font-medium",children:"Quay li ng nhp"})})]}),u==="reset"&&e.jsxs("form",{onSubmit:z,className:"space-y-3 w-full relative z-10 px-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx("input",{value:N,onChange:q=>j(q.target.value),type:"text",className:"w-full pl-3 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner text-center tracking-widest focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"M OTP"})}),e.jsx("div",{className:"space-y-1",children:e.jsx("input",{value:_,onChange:q=>D(q.target.value),type:"password",className:"w-full pl-3 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"Mt khu mi"})}),e.jsx("div",{className:"space-y-1",children:e.jsx("input",{value:w,onChange:q=>k(q.target.value),type:"password",className:"w-full pl-3 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"Nhp li mt khu"})}),e.jsx("button",{type:"submit",disabled:o,className:"w-full py-2.5 mt-4 bg-gradient-to-r from-[#C5A059] to-[#997B3C] hover:from-[#D4B36A] hover:to-[#AA8A4B] text-[#043927] font-bold rounded-lg shadow-[0_4px_10px_rgba(0,0,0,0.5)] transform transition-all active:scale-[0.98] uppercase tracking-wider text-xs flex items-center justify-center gap-2 border border-[#FCEE21]/30",children:o?e.jsx("i",{className:"fas fa-spinner fa-spin"}):"i Mt Khu"}),e.jsx("div",{className:"text-center flex justify-center mt-2",children:e.jsx("button",{type:"button",onClick:L,className:"text-[#C5A059]/80 hover:text-[#FCEE21] text-xs hover:underline transition-all font-medium",children:"Hy b"})})]})]})})]}),e.jsx("style",{children:`
                @keyframes fade-in-up {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes fade-in-right {
                    from { opacity: 0; transform: translateX(20px); }
                    to { opacity: 1; transform: translateX(0); }
                }
                @keyframes shimmer {
                    from { transform: translateX(-100%) skewX(12deg); }
                    to { transform: translateX(200%) skewX(12deg); }
                }
                @keyframes swing {
                    0% { transform: rotate(3deg); }
                    100% { transform: rotate(-3deg); }
                }
                @keyframes sway {
                    0% { transform: rotate(-5deg); }
                    100% { transform: rotate(5deg); }
                }
                .animate-fade-in-up { animation: fade-in-up 0.8s ease-out forwards; }
                .animate-fade-in-right { animation: fade-in-right 0.8s ease-out forwards; }
                .animate-shimmer { animation: shimmer 2s infinite; }
                .animate-swing { animation: swing 5s ease-in-out infinite alternate; transform-origin: top center; }
                .animate-sway { animation: sway 3s ease-in-out infinite alternate; transform-origin: top center; }
                @keyframes candle-glow {
                    0%, 100% { filter: brightness(1.1) drop-shadow(0 0 25px rgba(252, 238, 33, 0.4)); }
                    50% { filter: brightness(1.3) drop-shadow(0 0 50px rgba(252, 238, 33, 0.8)); }
                    25% { filter: brightness(1.15) drop-shadow(0 0 30px rgba(252, 238, 33, 0.5)); }
                    75% { filter: brightness(1.25) drop-shadow(0 0 40px rgba(252, 238, 33, 0.6)); }
                }
                .animate-candle-glow { animation: candle-glow 2.5s ease-in-out infinite; }
                @keyframes pulse-fast {
                    0%, 100% { opacity: 0.6; filter: brightness(1.2) drop-shadow(0 0 5px rgba(255, 200, 0, 0.5)); }
                    50% { opacity: 1; filter: brightness(1.6) drop-shadow(0 0 20px rgba(255, 100, 0, 0.9)); }
                }
                .animate-pulse-fast { animation: pulse-fast 0.1s ease-in-out infinite; }
                @keyframes blink {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0; }
                }
                .animate-blink { animation: blink 1s step-end infinite; }
                
                @keyframes fuse-burn {
                    0% { transform: translateX(-100%); }
                    100% { transform: translateX(100%); }
                }
                .animate-fuse-burn { animation: fuse-burn 1s linear infinite; }

                @keyframes pulse-gold {
                    0%, 100% { box-shadow: 0 0 0 0 rgba(252, 238, 33, 0.4); }
                    70% { box-shadow: 0 0 0 10px rgba(252, 238, 33, 0); }
                }
                .animate-pulse-gold { animation: pulse-gold 1.5s infinite; }

                /* Transformer / Mechanical Assembly Effects - Multi-directional */
                @keyframes part-fly-in-left {
                    0% { opacity: 0; transform: translateX(-200px) translateY(-50px) rotate(-45deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateX(0) translateY(0) rotate(0) scale(1); filter: blur(0); }
                }
                @keyframes part-fly-in-right {
                    0% { opacity: 0; transform: translateX(200px) translateY(50px) rotate(45deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateX(0) translateY(0) rotate(0) scale(1); filter: blur(0); }
                }
                @keyframes part-fly-in-top {
                    0% { opacity: 0; transform: translateY(-200px) translateX(50px) rotate(180deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateY(0) translateX(0) rotate(0) scale(1); filter: blur(0); }
                }
                 @keyframes part-fly-in-bottom {
                    0% { opacity: 0; transform: translateY(200px) translateX(-50px) rotate(-90deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateY(0) translateX(0) rotate(0) scale(1); filter: blur(0); }
                }

                .animate-part-fly-in-left { animation: part-fly-in-left 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
                .animate-part-fly-in-right { animation: part-fly-in-right 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
                .animate-part-fly-in-top { animation: part-fly-in-top 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
                .animate-part-fly-in-bottom { animation: part-fly-in-bottom 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
            `})]})},cd=({title:n,message:l,type:o,onClose:i,duration:u})=>{const[h,f]=m.useState(!1),x=m.useRef(null),g=m.useCallback(()=>{x.current&&clearTimeout(x.current),f(!0),setTimeout(()=>{i()},400)},[i]);m.useEffect(()=>(o!=="loading"&&u&&u>0&&(x.current=window.setTimeout(g,u)),()=>{x.current&&clearTimeout(x.current)}),[n,l,o,u,g]);const c={success:{icon:"fa-check",gradient:"from-emerald-400 to-green-600",shadow:"shadow-emerald-500/30",textColor:"text-emerald-700"},error:{icon:"fa-times",gradient:"from-rose-400 to-red-600",shadow:"shadow-rose-500/30",textColor:"text-rose-700"},loading:{icon:"fa-spinner fa-spin",gradient:"from-blue-400 to-indigo-600",shadow:"shadow-blue-500/30",textColor:"text-blue-700"},warning:{icon:"fa-exclamation",gradient:"from-amber-400 to-orange-600",shadow:"shadow-amber-500/30",textColor:"text-amber-700"},info:{icon:"fa-info",gradient:"from-sky-400 to-blue-600",shadow:"shadow-sky-500/30",textColor:"text-sky-700"}}[o],y=h?"animate-fade-out":"animate-fade-in-up";return e.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] pointer-events-none flex justify-end",children:e.jsxs("div",{className:`
                    pointer-events-auto 
                    relative overflow-hidden
                    bg-white/95 backdrop-blur-xl 
                    border border-white/60 
                    shadow-xl shadow-black/5 
                    rounded-full
                    py-2 pl-2 pr-4
                    flex items-center gap-3
                    w-auto max-w-sm
                    ${y}
                    transition-all duration-300
                `,role:"alert",children:[e.jsx("div",{className:`absolute -top-6 -left-6 w-16 h-16 bg-gradient-to-br ${c.gradient} opacity-20 blur-xl rounded-full pointer-events-none`}),e.jsx("div",{className:`
                    relative flex-shrink-0 
                    w-8 h-8 
                    rounded-full 
                    bg-gradient-to-br ${c.gradient} 
                    flex items-center justify-center 
                    text-white text-sm
                    ${c.shadow} shadow-md
                `,children:e.jsx("i",{className:`fas ${c.icon}`})}),e.jsxs("div",{className:"flex-grow min-w-0 flex flex-col justify-center",children:[e.jsx("h4",{className:`font-bold text-xs ${c.textColor} leading-tight`,children:n}),l&&e.jsx("p",{className:"text-slate-600 text-[10px] leading-tight truncate max-w-[200px]",children:l})]}),o!=="loading"&&e.jsx("button",{onClick:g,className:"flex-shrink-0 w-5 h-5 rounded-full hover:bg-slate-100 text-slate-400 hover:text-slate-600 flex items-center justify-center transition-colors ml-1",children:e.jsx("i",{className:"fas fa-times text-[10px]"})})]})})},dd="/ordermanagement/assets/message_sent-DyIxiuZB.json",ud=({title:n,message:l,onClose:o,duration:i=3e3})=>{const[u,h]=m.useState(!1),f=m.useRef(null),x=m.useRef(null),g=m.useCallback(()=>{f.current&&clearTimeout(f.current),h(!0),setTimeout(()=>{o()},300)},[o]);m.useEffect(()=>{const c=x.current;return c&&typeof c.stop=="function"&&(c.stop(),c.play()),f.current=window.setTimeout(()=>{g()},i),()=>{f.current&&clearTimeout(f.current)}},[i,g]);const b=u?"toast-hidden":"toast-visible";return e.jsx("div",{className:`toast-container ${b}`,role:"alert","aria-live":"assertive","aria-atomic":"true",children:e.jsxs("div",{className:"toast-content",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 flex items-center justify-center",children:e.jsx("lottie-player",{ref:x,src:dd,background:"transparent",speed:"1",style:{width:"60px",height:"60px",margin:"-5px"},autoplay:!0,loop:!1})}),e.jsxs("div",{className:"toast-body flex-grow",children:[e.jsx("p",{className:"toast-title",children:n}),l&&e.jsx("p",{className:"toast-message",children:l})]}),e.jsx("div",{className:"toast-close",children:e.jsx(K,{onClick:g,variant:"ghost",className:"text-white/80 hover:text-white !p-0 w-8 h-8 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"fas fa-times text-xl"})})})]})})},hd=()=>e.jsxs("div",{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-[#051a14] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-[#043927]/30 via-black to-black"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-[#FCEE21] blur-[40px] opacity-20 animate-pulse"}),e.jsx("h1",{className:"text-6xl md:text-8xl font-bold text-[#FCEE21] tracking-wider animate-bounce-slow",style:{textShadow:"0 0 20px rgba(252, 238, 33, 0.5)"},children:"2026"})]}),e.jsx("div",{className:"w-64 h-1 bg-[#043927] rounded-full overflow-hidden border border-[#C5A059]/30",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#C5A059] via-[#FCEE21] to-[#C5A059] animate-loading-bar w-full origin-left"})}),e.jsx("p",{className:"mt-4 text-[#C5A059] text-xs uppercase tracking-[0.3em] animate-pulse",children:"ang ti d liu..."})]}),e.jsx("style",{children:`
                @keyframes bounce-slow {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-10px); }
                }
                .animate-bounce-slow { animation: bounce-slow 3s infinite ease-in-out; }
                
                @keyframes loading-bar {
                    0% { transform: scaleX(0); }
                    50% { transform: scaleX(0.7); }
                    100% { transform: scaleX(1); }
                }
                .animate-loading-bar { animation: loading-bar 2s infinite ease-in-out; }
            `})]}),md=()=>{const[n,l]=m.useState(!1),[o,i]=m.useState("idle"),[u,h]=m.useState(null),[f,x]=m.useState(0);m.useEffect(()=>{if(!window.electronAPI)return;const N=w=>{h(w),i("available"),l(!0)},j=w=>{i("downloading"),x(w.percent)},_=w=>{i("ready"),h(w),l(!0)},D=w=>{console.error("Update error:",w),i("error"),l(!0)};return window.electronAPI.onUpdateAvailable(N),window.electronAPI.onDownloadProgress(j),window.electronAPI.onUpdateDownloaded(_),window.electronAPI.onUpdateError(D),()=>{window.electronAPI.removeAllListeners("update-available"),window.electronAPI.removeAllListeners("download-progress"),window.electronAPI.removeAllListeners("update-downloaded"),window.electronAPI.removeAllListeners("update-error")}},[]);const g=()=>window.electronAPI.startDownload(),b=()=>window.electronAPI.quitAndInstall(),c=()=>l(!1),y=()=>l(!1);return n?e.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] animate-slide-in-up",children:e.jsxs("div",{className:"bg-black/90 backdrop-blur text-white rounded-full border border-white/10 shadow-xl px-4 py-2 flex items-center gap-3 text-xs font-medium ring-1 ring-white/5 transition-all hover:scale-[1.02] cursor-default select-none",children:[e.jsxs("div",{className:"shrink-0",children:[o==="available"&&e.jsx("i",{className:"fas fa-gift text-blue-400 animate-pulse"}),o==="downloading"&&e.jsxs("div",{className:"relative w-4 h-4 flex items-center justify-center",children:[e.jsx("i",{className:"fas fa-arrow-down text-[10px] text-white/50"}),e.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[e.jsx("path",{className:"text-white/10",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"text-blue-500 transition-all duration-300",strokeDasharray:`${f}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"})]})]}),o==="ready"&&e.jsx("i",{className:"fas fa-check text-emerald-400"}),o==="error"&&e.jsx("i",{className:"fas fa-exclamation text-red-400"})]}),e.jsx("div",{className:"flex flex-col min-w-[80px] max-w-[120px]",children:e.jsxs("span",{className:"truncate font-semibold tracking-wide",children:[o==="available"&&"Update v"+(u==null?void 0:u.version),o==="downloading"&&`${Math.round(f)}% Downloaded`,o==="ready"&&"Ready to Install",o==="error"&&"Update Failed"]})}),e.jsx("div",{className:"h-4 w-[1px] bg-white/10 mx-1"}),o==="available"&&e.jsx("button",{onClick:g,className:"text-blue-400 hover:text-white transition-colors uppercase text-[10px] font-bold tracking-wider",children:"Get"}),o==="downloading"&&e.jsx("button",{onClick:y,className:"text-white/50 hover:text-white transition-colors",children:e.jsx("i",{className:"fas fa-minus"})}),o==="ready"&&e.jsx("button",{onClick:b,className:"text-emerald-400 hover:text-emerald-300 transition-colors uppercase text-[10px] font-bold tracking-wider",children:"Restart"}),(o==="available"||o==="ready"||o==="error")&&e.jsx("button",{onClick:c,className:"text-white/30 hover:text-white transition-colors ml-1",children:e.jsx("i",{className:"fas fa-times"})})]})}):null},fd="1.0.10",Cr={version:fd},Dr="app_version",xd=()=>{console.log("New version detected. Clearing cache..."),"caches"in window&&caches.keys().then(n=>{n.forEach(l=>{caches.delete(l)})}),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(n=>{n.forEach(l=>{l.unregister()})}),localStorage.setItem(Dr,Cr.version),window.location.reload()},gd=()=>{const n=localStorage.getItem(Dr),l=Cr.version;n!==l&&xd()};gd();const pd=()=>{const[n,l]=m.useState(!1),[o,i]=m.useState(!0),[u,h]=m.useState(null),[f,x]=m.useState(null);m.useEffect(()=>{const j=sessionStorage.getItem("isLoggedIn")==="true";if(l(j),i(!1),j){Ss();const _=setInterval(Ss,2*60*1e3);return()=>clearInterval(_)}},[n]);const g=m.useCallback(()=>{l(!0)},[]),b=m.useCallback((j,_,D,w)=>{h({show:!0,title:j,message:_,type:D,duration:D==="loading"?w??0:w??5e3})},[]),c=m.useCallback(()=>h(null),[]),y=m.useCallback(()=>x(null),[]),N=m.useCallback(()=>{sessionStorage.clear(),l(!1)},[b]);return o?new Date>=new Date("2026-01-05T00:00:00")?e.jsx(hd,{}):e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f0f2f5"},children:[e.jsx("div",{style:{border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",width:"40px",height:"40px",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]}):e.jsxs(e.Fragment,{children:[n?e.jsx(qc,{onLogout:N,showToast:b,hideToast:c}):e.jsx(od,{onLoginSuccess:g,showToast:b}),u&&e.jsx(cd,{...u,onClose:c}),f&&e.jsx(ud,{show:!0,title:f.title,message:f.message,onClose:y,duration:3e3}),e.jsx(md,{})]})},Mr=document.getElementById("root");if(!Mr)throw new Error("Could not find root element to mount to");const yd=ca.createRoot(Mr);yd.render(e.jsx(_e.StrictMode,{children:e.jsx(pd,{})}));export{tc as A,K as B,da as C,Wo as E,_r as F,fr as M,mo as P,lr as S,Ql as a,uc as b,rs as c,mr as d,St as e,ut as f,or as g,ct as h,Ze as i,kd as j,_d as k,Nd as l,Ht as m,ec as n,jd as o,Oo as p,co as q,Ss as r,hr as s,Xa as t,Pc as u,ss as v,Sd as w,Cd as x,Qo as y,Dd as z};
