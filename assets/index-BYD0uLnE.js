const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StockView-aZdCQt3V.js","assets/vendor-pdf-Dyj7cThZ.js","assets/vendor-react-KfUPlHYY.js","assets/vendor-utils-C5S46NFB.js","assets/SoldCarsView-BhcVaYEa.js","assets/AdminView-DFfuYisn.js","assets/TestDriveForm-C035qOZh.js"])))=>i.map(i=>d[i]);
import{j as t,G as Ul,g as Bl,D as Wl,P as Gl}from"./vendor-pdf-Dyj7cThZ.js";import{a as tn,c as sn,r as m,R as _e}from"./vendor-react-KfUPlHYY.js";import{h as Ye}from"./vendor-utils-C5S46NFB.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function o(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(u){if(u.ep)return;u.ep=!0;const h=o(u);fetch(u.href,h)}})();var ia={},Va=tn;ia.createRoot=Va.createRoot,ia.hydrateRoot=Va.hydrateRoot;const ql="modulepreload",Xl=function(r){return"/ordermanagement/"+r},za={},Cs=function(l,o,i){let u=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),x=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));u=Promise.allSettled(o.map(g=>{if(g=Xl(g),g in za)return;za[g]=!0;const b=g.endsWith(".css"),c=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${c}`))return;const y=document.createElement("link");if(y.rel=b?"stylesheet":ql,b||(y.as="script"),y.crossOrigin="",y.href=g,x&&y.setAttribute("nonce",x),document.head.appendChild(y),b)return new Promise((j,w)=>{y.addEventListener("load",j),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${g}`)))})}))}function h(f){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=f,window.dispatchEvent(x),!x.defaultPrevented)throw f}return u.then(f=>{for(const x of f||[])x.status==="rejected"&&h(x.reason);return l().catch(h)})};function an(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ta={exports:{}},Ua;function Kl(){return Ua||(Ua=1,function(r,l){(function(o,i){r.exports=i()})(sn,function(){var o;function i(){return o.apply(null,arguments)}function u(e){o=e}function h(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function f(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function x(e,s){return Object.prototype.hasOwnProperty.call(e,s)}function g(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var s;for(s in e)if(x(e,s))return!1;return!0}function b(e){return e===void 0}function c(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function y(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function j(e,s){var a=[],n,d=e.length;for(n=0;n<d;++n)a.push(s(e[n],n));return a}function w(e,s){for(var a in s)x(s,a)&&(e[a]=s[a]);return x(s,"toString")&&(e.toString=s.toString),x(s,"valueOf")&&(e.valueOf=s.valueOf),e}function S(e,s,a,n){return ba(e,s,a,n,!0).utc()}function T(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function N(e){return e._pf==null&&(e._pf=T()),e._pf}var D;Array.prototype.some?D=Array.prototype.some:D=function(e){var s=Object(this),a=s.length>>>0,n;for(n=0;n<a;n++)if(n in s&&e.call(this,s[n],n,s))return!0;return!1};function M(e){var s=null,a=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(s=N(e),a=D.call(s.parsedDateParts,function(d){return d!=null}),n=s.overflow<0&&!s.empty&&!s.invalidEra&&!s.invalidMonth&&!s.invalidWeekday&&!s.weekdayMismatch&&!s.nullInput&&!s.invalidFormat&&!s.userInvalidated&&(!s.meridiem||s.meridiem&&a),e._strict&&(n=n&&s.charsLeftOver===0&&s.unusedTokens.length===0&&s.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function Y(e){var s=S(NaN);return e!=null?w(N(s),e):N(s).userInvalidated=!0,s}var A=i.momentProperties=[],I=!1;function $(e,s){var a,n,d,p=A.length;if(b(s._isAMomentObject)||(e._isAMomentObject=s._isAMomentObject),b(s._i)||(e._i=s._i),b(s._f)||(e._f=s._f),b(s._l)||(e._l=s._l),b(s._strict)||(e._strict=s._strict),b(s._tzm)||(e._tzm=s._tzm),b(s._isUTC)||(e._isUTC=s._isUTC),b(s._offset)||(e._offset=s._offset),b(s._pf)||(e._pf=N(s)),b(s._locale)||(e._locale=s._locale),p>0)for(a=0;a<p;a++)n=A[a],d=s[n],b(d)||(e[n]=d);return e}function V(e){$(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),I===!1&&(I=!0,i.updateOffset(this),I=!1)}function E(e){return e instanceof V||e!=null&&e._isAMomentObject!=null}function _(e){i.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function L(e,s){var a=!0;return w(function(){if(i.deprecationHandler!=null&&i.deprecationHandler(null,e),a){var n=[],d,p,k,G=arguments.length;for(p=0;p<G;p++){if(d="",typeof arguments[p]=="object"){d+=`
[`+p+"] ";for(k in arguments[0])x(arguments[0],k)&&(d+=k+": "+arguments[0][k]+", ");d=d.slice(0,-2)}else d=arguments[p];n.push(d)}_(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),a=!1}return s.apply(this,arguments)},s)}var H={};function z(e,s){i.deprecationHandler!=null&&i.deprecationHandler(e,s),H[e]||(_(s),H[e]=!0)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;function R(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Q(e){var s,a;for(a in e)x(e,a)&&(s=e[a],R(s)?this[a]=s:this["_"+a]=s);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function q(e,s){var a=w({},e),n;for(n in s)x(s,n)&&(f(e[n])&&f(s[n])?(a[n]={},w(a[n],e[n]),w(a[n],s[n])):s[n]!=null?a[n]=s[n]:delete a[n]);for(n in e)x(e,n)&&!x(s,n)&&f(e[n])&&(a[n]=w({},a[n]));return a}function ee(e){e!=null&&this.set(e)}var ie;Object.keys?ie=Object.keys:ie=function(e){var s,a=[];for(s in e)x(e,s)&&a.push(s);return a};var oe={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function xe(e,s,a){var n=this._calendar[e]||this._calendar.sameElse;return R(n)?n.call(s,a):n}function W(e,s,a){var n=""+Math.abs(e),d=s-n.length,p=e>=0;return(p?a?"+":"":"-")+Math.pow(10,Math.max(0,d)).toString().substr(1)+n}var K=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,v={},P={};function C(e,s,a,n){var d=n;typeof n=="string"&&(d=function(){return this[n]()}),e&&(P[e]=d),s&&(P[s[0]]=function(){return W(d.apply(this,arguments),s[1],s[2])}),a&&(P[a]=function(){return this.localeData().ordinal(d.apply(this,arguments),e)})}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function te(e){var s=e.match(K),a,n;for(a=0,n=s.length;a<n;a++)P[s[a]]?s[a]=P[s[a]]:s[a]=U(s[a]);return function(d){var p="",k;for(k=0;k<n;k++)p+=R(s[k])?s[k].call(d,e):s[k];return p}}function de(e,s){return e.isValid()?(s=Me(s,e.localeData()),v[s]=v[s]||te(s),v[s](e)):e.localeData().invalidDate()}function Me(e,s){var a=5;function n(d){return s.longDateFormat(d)||d}for(F.lastIndex=0;a>=0&&F.test(e);)e=e.replace(F,n),F.lastIndex=0,a-=1;return e}var Xe={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function X(e){var s=this._longDateFormat[e],a=this._longDateFormat[e.toUpperCase()];return s||!a?s:(this._longDateFormat[e]=a.match(K).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var ue="Invalid date";function ge(){return this._invalidDate}var ye="%d",Oe=/\d{1,2}/;function Ae(e){return this._ordinal.replace("%d",e)}var Ce={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Te(e,s,a,n){var d=this._relativeTime[a];return R(d)?d(e,s,a,n):d.replace(/%d/i,e)}function Mt(e,s){var a=this._relativeTime[e>0?"future":"past"];return R(a)?a(s):a.replace(/%s/i,s)}var Tt={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function De(e){return typeof e=="string"?Tt[e]||Tt[e.toLowerCase()]:void 0}function yt(e){var s={},a,n;for(n in e)x(e,n)&&(a=De(n),a&&(s[a]=e[n]));return s}var Ms={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Bt(e){var s=[],a;for(a in e)x(e,a)&&s.push({unit:a,priority:Ms[a]});return s.sort(function(n,d){return n.priority-d.priority}),s}var Pt=/\d/,Pe=/\d\d/,Wt=/\d{3}/,Gt=/\d{4}/,Et=/[+-]?\d{6}/,he=/\d\d?/,$e=/\d\d\d\d?/,ls=/\d\d\d\d\d\d?/,Je=/\d{1,3}/,qt=/\d{1,4}/,Yt=/[+-]?\d{1,6}/,Qe=/\d+/,It=/[+-]?\d+/,Ts=/Z|[+-]\d\d:?\d\d/gi,Ft=/Z|[+-]\d\d(?::?\d\d)?/gi,Ps=/[+-]?\d+(\.\d{1,3})?/,bt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,dt=/^[1-9]\d?/,Xt=/^([1-9]\d|\d)/,Ot;Ot={};function B(e,s,a){Ot[e]=R(s)?s:function(n,d){return n&&a?a:s}}function Es(e,s){return x(Ot,e)?Ot[e](s._strict,s._locale):new RegExp(Ys(e))}function Ys(e){return ze(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(s,a,n,d,p){return a||n||d||p}))}function ze(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Re(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ae(e){var s=+e,a=0;return s!==0&&isFinite(s)&&(a=Re(s)),a}var vt={};function ce(e,s){var a,n=s,d;for(typeof e=="string"&&(e=[e]),c(s)&&(n=function(p,k){k[s]=ae(p)}),d=e.length,a=0;a<d;a++)vt[e[a]]=n}function ut(e,s){ce(e,function(a,n,d,p){d._w=d._w||{},s(a,d._w,d,p)})}function os(e,s,a){s!=null&&x(vt,e)&&vt[e](s,a._a,a,e)}function At(e){return e%4===0&&e%100!==0||e%400===0}var Se=0,Ue=1,Ve=2,je=3,Ne=4,Be=5,et=6,Rt=7,cs=8;C("Y",0,0,function(){var e=this.year();return e<=9999?W(e,4):"+"+e}),C(0,["YY",2],0,function(){return this.year()%100}),C(0,["YYYY",4],0,"year"),C(0,["YYYYY",5],0,"year"),C(0,["YYYYYY",6,!0],0,"year"),B("Y",It),B("YY",he,Pe),B("YYYY",qt,Gt),B("YYYYY",Yt,Et),B("YYYYYY",Yt,Et),ce(["YYYYY","YYYYYY"],Se),ce("YYYY",function(e,s){s[Se]=e.length===2?i.parseTwoDigitYear(e):ae(e)}),ce("YY",function(e,s){s[Se]=i.parseTwoDigitYear(e)}),ce("Y",function(e,s){s[Se]=parseInt(e,10)});function ht(e){return At(e)?366:365}i.parseTwoDigitYear=function(e){return ae(e)+(ae(e)>68?1900:2e3)};var mt=ft("FullYear",!0);function Is(){return At(this.year())}function ft(e,s){return function(a){return a!=null?(ds(this,e,a),i.updateOffset(this,s),this):wt(this,e)}}function wt(e,s){if(!e.isValid())return NaN;var a=e._d,n=e._isUTC;switch(s){case"Milliseconds":return n?a.getUTCMilliseconds():a.getMilliseconds();case"Seconds":return n?a.getUTCSeconds():a.getSeconds();case"Minutes":return n?a.getUTCMinutes():a.getMinutes();case"Hours":return n?a.getUTCHours():a.getHours();case"Date":return n?a.getUTCDate():a.getDate();case"Day":return n?a.getUTCDay():a.getDay();case"Month":return n?a.getUTCMonth():a.getMonth();case"FullYear":return n?a.getUTCFullYear():a.getFullYear();default:return NaN}}function ds(e,s,a){var n,d,p,k,G;if(!(!e.isValid()||isNaN(a))){switch(n=e._d,d=e._isUTC,s){case"Milliseconds":return void(d?n.setUTCMilliseconds(a):n.setMilliseconds(a));case"Seconds":return void(d?n.setUTCSeconds(a):n.setSeconds(a));case"Minutes":return void(d?n.setUTCMinutes(a):n.setMinutes(a));case"Hours":return void(d?n.setUTCHours(a):n.setHours(a));case"Date":return void(d?n.setUTCDate(a):n.setDate(a));case"FullYear":break;default:return}p=a,k=e.month(),G=e.date(),G=G===29&&k===1&&!At(p)?28:G,d?n.setUTCFullYear(p,k,G):n.setFullYear(p,k,G)}}function Fs(e){return e=De(e),R(this[e])?this[e]():this}function Os(e,s){if(typeof e=="object"){e=yt(e);var a=Bt(e),n,d=a.length;for(n=0;n<d;n++)this[a[n].unit](e[a[n].unit])}else if(e=De(e),R(this[e]))return this[e](s);return this}function As(e,s){return(e%s+s)%s}var be;Array.prototype.indexOf?be=Array.prototype.indexOf:be=function(e){var s;for(s=0;s<this.length;++s)if(this[s]===e)return s;return-1};function Kt(e,s){if(isNaN(e)||isNaN(s))return NaN;var a=As(s,12);return e+=(s-a)/12,a===1?At(e)?29:28:31-a%7%2}C("M",["MM",2],"Mo",function(){return this.month()+1}),C("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),C("MMMM",0,0,function(e){return this.localeData().months(this,e)}),B("M",he,dt),B("MM",he,Pe),B("MMM",function(e,s){return s.monthsShortRegex(e)}),B("MMMM",function(e,s){return s.monthsRegex(e)}),ce(["M","MM"],function(e,s){s[Ue]=ae(e)-1}),ce(["MMM","MMMM"],function(e,s,a,n){var d=a._locale.monthsParse(e,n,a._strict);d!=null?s[Ue]=d:N(a).invalidMonth=e});var se="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),me="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ke=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ee=bt,ve=bt;function we(e,s){return e?h(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||ke).test(s)?"format":"standalone"][e.month()]:h(this._months)?this._months:this._months.standalone}function Ke(e,s){return e?h(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[ke.test(s)?"format":"standalone"][e.month()]:h(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Le(e,s,a){var n,d,p,k=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)p=S([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(p,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(p,"").toLocaleLowerCase();return a?s==="MMM"?(d=be.call(this._shortMonthsParse,k),d!==-1?d:null):(d=be.call(this._longMonthsParse,k),d!==-1?d:null):s==="MMM"?(d=be.call(this._shortMonthsParse,k),d!==-1?d:(d=be.call(this._longMonthsParse,k),d!==-1?d:null)):(d=be.call(this._longMonthsParse,k),d!==-1?d:(d=be.call(this._shortMonthsParse,k),d!==-1?d:null))}function jt(e,s,a){var n,d,p;if(this._monthsParseExact)return Le.call(this,e,s,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(d=S([2e3,n]),a&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(d,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(d,"").replace(".","")+"$","i")),!a&&!this._monthsParse[n]&&(p="^"+this.months(d,"")+"|^"+this.monthsShort(d,""),this._monthsParse[n]=new RegExp(p.replace(".",""),"i")),a&&s==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(a&&s==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!a&&this._monthsParse[n].test(e))return n}}function Ie(e,s){if(!e.isValid())return e;if(typeof s=="string"){if(/^\d+$/.test(s))s=ae(s);else if(s=e.localeData().monthsParse(s),!c(s))return e}var a=s,n=e.date();return n=n<29?n:Math.min(n,Kt(e.year(),a)),e._isUTC?e._d.setUTCMonth(a,n):e._d.setMonth(a,n),e}function Nt(e){return e!=null?(Ie(this,e),i.updateOffset(this,!0),this):wt(this,"Month")}function us(){return Kt(this.year(),this.month())}function Dn(e){return this._monthsParseExact?(x(this,"_monthsRegex")||ca.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(x(this,"_monthsShortRegex")||(this._monthsShortRegex=Ee),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Mn(e){return this._monthsParseExact?(x(this,"_monthsRegex")||ca.call(this),e?this._monthsStrictRegex:this._monthsRegex):(x(this,"_monthsRegex")||(this._monthsRegex=ve),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ca(){function e(J,ne){return ne.length-J.length}var s=[],a=[],n=[],d,p,k,G;for(d=0;d<12;d++)p=S([2e3,d]),k=ze(this.monthsShort(p,"")),G=ze(this.months(p,"")),s.push(k),a.push(G),n.push(G),n.push(k);s.sort(e),a.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Tn(e,s,a,n,d,p,k){var G;return e<100&&e>=0?(G=new Date(e+400,s,a,n,d,p,k),isFinite(G.getFullYear())&&G.setFullYear(e)):G=new Date(e,s,a,n,d,p,k),G}function Zt(e){var s,a;return e<100&&e>=0?(a=Array.prototype.slice.call(arguments),a[0]=e+400,s=new Date(Date.UTC.apply(null,a)),isFinite(s.getUTCFullYear())&&s.setUTCFullYear(e)):s=new Date(Date.UTC.apply(null,arguments)),s}function hs(e,s,a){var n=7+s-a,d=(7+Zt(e,0,n).getUTCDay()-s)%7;return-d+n-1}function da(e,s,a,n,d){var p=(7+a-n)%7,k=hs(e,n,d),G=1+7*(s-1)+p+k,J,ne;return G<=0?(J=e-1,ne=ht(J)+G):G>ht(e)?(J=e+1,ne=G-ht(e)):(J=e,ne=G),{year:J,dayOfYear:ne}}function Jt(e,s,a){var n=hs(e.year(),s,a),d=Math.floor((e.dayOfYear()-n-1)/7)+1,p,k;return d<1?(k=e.year()-1,p=d+tt(k,s,a)):d>tt(e.year(),s,a)?(p=d-tt(e.year(),s,a),k=e.year()+1):(k=e.year(),p=d),{week:p,year:k}}function tt(e,s,a){var n=hs(e,s,a),d=hs(e+1,s,a);return(ht(e)-n+d)/7}C("w",["ww",2],"wo","week"),C("W",["WW",2],"Wo","isoWeek"),B("w",he,dt),B("ww",he,Pe),B("W",he,dt),B("WW",he,Pe),ut(["w","ww","W","WW"],function(e,s,a,n){s[n.substr(0,1)]=ae(e)});function Pn(e){return Jt(e,this._week.dow,this._week.doy).week}var En={dow:0,doy:6};function Yn(){return this._week.dow}function In(){return this._week.doy}function Fn(e){var s=this.localeData().week(this);return e==null?s:this.add((e-s)*7,"d")}function On(e){var s=Jt(this,1,4).week;return e==null?s:this.add((e-s)*7,"d")}C("d",0,"do","day"),C("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),C("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),C("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),C("e",0,0,"weekday"),C("E",0,0,"isoWeekday"),B("d",he),B("e",he),B("E",he),B("dd",function(e,s){return s.weekdaysMinRegex(e)}),B("ddd",function(e,s){return s.weekdaysShortRegex(e)}),B("dddd",function(e,s){return s.weekdaysRegex(e)}),ut(["dd","ddd","dddd"],function(e,s,a,n){var d=a._locale.weekdaysParse(e,n,a._strict);d!=null?s.d=d:N(a).invalidWeekday=e}),ut(["d","e","E"],function(e,s,a,n){s[n]=ae(e)});function An(e,s){return typeof e!="string"?e:isNaN(e)?(e=s.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Rn(e,s){return typeof e=="string"?s.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Rs(e,s){return e.slice(s,7).concat(e.slice(0,s))}var $n="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ua="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ln="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Hn=bt,Vn=bt,zn=bt;function Un(e,s){var a=h(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(s)?"format":"standalone"];return e===!0?Rs(a,this._week.dow):e?a[e.day()]:a}function Bn(e){return e===!0?Rs(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Wn(e){return e===!0?Rs(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Gn(e,s,a){var n,d,p,k=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)p=S([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(p,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(p,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(p,"").toLocaleLowerCase();return a?s==="dddd"?(d=be.call(this._weekdaysParse,k),d!==-1?d:null):s==="ddd"?(d=be.call(this._shortWeekdaysParse,k),d!==-1?d:null):(d=be.call(this._minWeekdaysParse,k),d!==-1?d:null):s==="dddd"?(d=be.call(this._weekdaysParse,k),d!==-1||(d=be.call(this._shortWeekdaysParse,k),d!==-1)?d:(d=be.call(this._minWeekdaysParse,k),d!==-1?d:null)):s==="ddd"?(d=be.call(this._shortWeekdaysParse,k),d!==-1||(d=be.call(this._weekdaysParse,k),d!==-1)?d:(d=be.call(this._minWeekdaysParse,k),d!==-1?d:null)):(d=be.call(this._minWeekdaysParse,k),d!==-1||(d=be.call(this._weekdaysParse,k),d!==-1)?d:(d=be.call(this._shortWeekdaysParse,k),d!==-1?d:null))}function qn(e,s,a){var n,d,p;if(this._weekdaysParseExact)return Gn.call(this,e,s,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(d=S([2e3,1]).day(n),a&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(d,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(d,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(d,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(p="^"+this.weekdays(d,"")+"|^"+this.weekdaysShort(d,"")+"|^"+this.weekdaysMin(d,""),this._weekdaysParse[n]=new RegExp(p.replace(".",""),"i")),a&&s==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(a&&s==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(a&&s==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!a&&this._weekdaysParse[n].test(e))return n}}function Xn(e){if(!this.isValid())return e!=null?this:NaN;var s=wt(this,"Day");return e!=null?(e=An(e,this.localeData()),this.add(e-s,"d")):s}function Kn(e){if(!this.isValid())return e!=null?this:NaN;var s=(this.day()+7-this.localeData()._week.dow)%7;return e==null?s:this.add(e-s,"d")}function Zn(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var s=Rn(e,this.localeData());return this.day(this.day()%7?s:s-7)}else return this.day()||7}function Jn(e){return this._weekdaysParseExact?(x(this,"_weekdaysRegex")||$s.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(x(this,"_weekdaysRegex")||(this._weekdaysRegex=Hn),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Qn(e){return this._weekdaysParseExact?(x(this,"_weekdaysRegex")||$s.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(x(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Vn),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function er(e){return this._weekdaysParseExact?(x(this,"_weekdaysRegex")||$s.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(x(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=zn),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function $s(){function e(Fe,it){return it.length-Fe.length}var s=[],a=[],n=[],d=[],p,k,G,J,ne;for(p=0;p<7;p++)k=S([2e3,1]).day(p),G=ze(this.weekdaysMin(k,"")),J=ze(this.weekdaysShort(k,"")),ne=ze(this.weekdays(k,"")),s.push(G),a.push(J),n.push(ne),d.push(G),d.push(J),d.push(ne);s.sort(e),a.sort(e),n.sort(e),d.sort(e),this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ls(){return this.hours()%12||12}function tr(){return this.hours()||24}C("H",["HH",2],0,"hour"),C("h",["hh",2],0,Ls),C("k",["kk",2],0,tr),C("hmm",0,0,function(){return""+Ls.apply(this)+W(this.minutes(),2)}),C("hmmss",0,0,function(){return""+Ls.apply(this)+W(this.minutes(),2)+W(this.seconds(),2)}),C("Hmm",0,0,function(){return""+this.hours()+W(this.minutes(),2)}),C("Hmmss",0,0,function(){return""+this.hours()+W(this.minutes(),2)+W(this.seconds(),2)});function ha(e,s){C(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),s)})}ha("a",!0),ha("A",!1);function ma(e,s){return s._meridiemParse}B("a",ma),B("A",ma),B("H",he,Xt),B("h",he,dt),B("k",he,dt),B("HH",he,Pe),B("hh",he,Pe),B("kk",he,Pe),B("hmm",$e),B("hmmss",ls),B("Hmm",$e),B("Hmmss",ls),ce(["H","HH"],je),ce(["k","kk"],function(e,s,a){var n=ae(e);s[je]=n===24?0:n}),ce(["a","A"],function(e,s,a){a._isPm=a._locale.isPM(e),a._meridiem=e}),ce(["h","hh"],function(e,s,a){s[je]=ae(e),N(a).bigHour=!0}),ce("hmm",function(e,s,a){var n=e.length-2;s[je]=ae(e.substr(0,n)),s[Ne]=ae(e.substr(n)),N(a).bigHour=!0}),ce("hmmss",function(e,s,a){var n=e.length-4,d=e.length-2;s[je]=ae(e.substr(0,n)),s[Ne]=ae(e.substr(n,2)),s[Be]=ae(e.substr(d)),N(a).bigHour=!0}),ce("Hmm",function(e,s,a){var n=e.length-2;s[je]=ae(e.substr(0,n)),s[Ne]=ae(e.substr(n))}),ce("Hmmss",function(e,s,a){var n=e.length-4,d=e.length-2;s[je]=ae(e.substr(0,n)),s[Ne]=ae(e.substr(n,2)),s[Be]=ae(e.substr(d))});function sr(e){return(e+"").toLowerCase().charAt(0)==="p"}var ar=/[ap]\.?m?\.?/i,nr=ft("Hours",!0);function rr(e,s,a){return e>11?a?"pm":"PM":a?"am":"AM"}var fa={calendar:oe,longDateFormat:Xe,invalidDate:ue,ordinal:ye,dayOfMonthOrdinalParse:Oe,relativeTime:Ce,months:se,monthsShort:me,week:En,weekdays:$n,weekdaysMin:Ln,weekdaysShort:ua,meridiemParse:ar},pe={},Qt={},es;function ir(e,s){var a,n=Math.min(e.length,s.length);for(a=0;a<n;a+=1)if(e[a]!==s[a])return a;return n}function xa(e){return e&&e.toLowerCase().replace("_","-")}function lr(e){for(var s=0,a,n,d,p;s<e.length;){for(p=xa(e[s]).split("-"),a=p.length,n=xa(e[s+1]),n=n?n.split("-"):null;a>0;){if(d=ms(p.slice(0,a).join("-")),d)return d;if(n&&n.length>=a&&ir(p,n)>=a-1)break;a--}s++}return es}function or(e){return!!(e&&e.match("^[^/\\\\]*$"))}function ms(e){var s=null,a;if(pe[e]===void 0&&r&&r.exports&&or(e))try{s=es._abbr,a=an,a("./locale/"+e),xt(s)}catch{pe[e]=null}return pe[e]}function xt(e,s){var a;return e&&(b(s)?a=st(e):a=Hs(e,s),a?es=a:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),es._abbr}function Hs(e,s){if(s!==null){var a,n=fa;if(s.abbr=e,pe[e]!=null)z("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=pe[e]._config;else if(s.parentLocale!=null)if(pe[s.parentLocale]!=null)n=pe[s.parentLocale]._config;else if(a=ms(s.parentLocale),a!=null)n=a._config;else return Qt[s.parentLocale]||(Qt[s.parentLocale]=[]),Qt[s.parentLocale].push({name:e,config:s}),null;return pe[e]=new ee(q(n,s)),Qt[e]&&Qt[e].forEach(function(d){Hs(d.name,d.config)}),xt(e),pe[e]}else return delete pe[e],null}function cr(e,s){if(s!=null){var a,n,d=fa;pe[e]!=null&&pe[e].parentLocale!=null?pe[e].set(q(pe[e]._config,s)):(n=ms(e),n!=null&&(d=n._config),s=q(d,s),n==null&&(s.abbr=e),a=new ee(s),a.parentLocale=pe[e],pe[e]=a),xt(e)}else pe[e]!=null&&(pe[e].parentLocale!=null?(pe[e]=pe[e].parentLocale,e===xt()&&xt(e)):pe[e]!=null&&delete pe[e]);return pe[e]}function st(e){var s;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return es;if(!h(e)){if(s=ms(e),s)return s;e=[e]}return lr(e)}function dr(){return ie(pe)}function Vs(e){var s,a=e._a;return a&&N(e).overflow===-2&&(s=a[Ue]<0||a[Ue]>11?Ue:a[Ve]<1||a[Ve]>Kt(a[Se],a[Ue])?Ve:a[je]<0||a[je]>24||a[je]===24&&(a[Ne]!==0||a[Be]!==0||a[et]!==0)?je:a[Ne]<0||a[Ne]>59?Ne:a[Be]<0||a[Be]>59?Be:a[et]<0||a[et]>999?et:-1,N(e)._overflowDayOfYear&&(s<Se||s>Ve)&&(s=Ve),N(e)._overflowWeeks&&s===-1&&(s=Rt),N(e)._overflowWeekday&&s===-1&&(s=cs),N(e).overflow=s),e}var ur=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,hr=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mr=/Z|[+-]\d\d(?::?\d\d)?/,fs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],zs=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],fr=/^\/?Date\((-?\d+)/i,xr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,gr={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ga(e){var s,a,n=e._i,d=ur.exec(n)||hr.exec(n),p,k,G,J,ne=fs.length,Fe=zs.length;if(d){for(N(e).iso=!0,s=0,a=ne;s<a;s++)if(fs[s][1].exec(d[1])){k=fs[s][0],p=fs[s][2]!==!1;break}if(k==null){e._isValid=!1;return}if(d[3]){for(s=0,a=Fe;s<a;s++)if(zs[s][1].exec(d[3])){G=(d[2]||" ")+zs[s][0];break}if(G==null){e._isValid=!1;return}}if(!p&&G!=null){e._isValid=!1;return}if(d[4])if(mr.exec(d[4]))J="Z";else{e._isValid=!1;return}e._f=k+(G||"")+(J||""),Bs(e)}else e._isValid=!1}function pr(e,s,a,n,d,p){var k=[yr(e),me.indexOf(s),parseInt(a,10),parseInt(n,10),parseInt(d,10)];return p&&k.push(parseInt(p,10)),k}function yr(e){var s=parseInt(e,10);return s<=49?2e3+s:s<=999?1900+s:s}function br(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function vr(e,s,a){if(e){var n=ua.indexOf(e),d=new Date(s[0],s[1],s[2]).getDay();if(n!==d)return N(a).weekdayMismatch=!0,a._isValid=!1,!1}return!0}function wr(e,s,a){if(e)return gr[e];if(s)return 0;var n=parseInt(a,10),d=n%100,p=(n-d)/100;return p*60+d}function pa(e){var s=xr.exec(br(e._i)),a;if(s){if(a=pr(s[4],s[3],s[2],s[5],s[6],s[7]),!vr(s[1],a,e))return;e._a=a,e._tzm=wr(s[8],s[9],s[10]),e._d=Zt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),N(e).rfc2822=!0}else e._isValid=!1}function jr(e){var s=fr.exec(e._i);if(s!==null){e._d=new Date(+s[1]);return}if(ga(e),e._isValid===!1)delete e._isValid;else return;if(pa(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:i.createFromInputFallback(e)}i.createFromInputFallback=L("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function $t(e,s,a){return e??s??a}function Nr(e){var s=new Date(i.now());return e._useUTC?[s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()]:[s.getFullYear(),s.getMonth(),s.getDate()]}function Us(e){var s,a,n=[],d,p,k;if(!e._d){for(d=Nr(e),e._w&&e._a[Ve]==null&&e._a[Ue]==null&&kr(e),e._dayOfYear!=null&&(k=$t(e._a[Se],d[Se]),(e._dayOfYear>ht(k)||e._dayOfYear===0)&&(N(e)._overflowDayOfYear=!0),a=Zt(k,0,e._dayOfYear),e._a[Ue]=a.getUTCMonth(),e._a[Ve]=a.getUTCDate()),s=0;s<3&&e._a[s]==null;++s)e._a[s]=n[s]=d[s];for(;s<7;s++)e._a[s]=n[s]=e._a[s]==null?s===2?1:0:e._a[s];e._a[je]===24&&e._a[Ne]===0&&e._a[Be]===0&&e._a[et]===0&&(e._nextDay=!0,e._a[je]=0),e._d=(e._useUTC?Zt:Tn).apply(null,n),p=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[je]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==p&&(N(e).weekdayMismatch=!0)}}function kr(e){var s,a,n,d,p,k,G,J,ne;s=e._w,s.GG!=null||s.W!=null||s.E!=null?(p=1,k=4,a=$t(s.GG,e._a[Se],Jt(fe(),1,4).year),n=$t(s.W,1),d=$t(s.E,1),(d<1||d>7)&&(J=!0)):(p=e._locale._week.dow,k=e._locale._week.doy,ne=Jt(fe(),p,k),a=$t(s.gg,e._a[Se],ne.year),n=$t(s.w,ne.week),s.d!=null?(d=s.d,(d<0||d>6)&&(J=!0)):s.e!=null?(d=s.e+p,(s.e<0||s.e>6)&&(J=!0)):d=p),n<1||n>tt(a,p,k)?N(e)._overflowWeeks=!0:J!=null?N(e)._overflowWeekday=!0:(G=da(a,n,d,p,k),e._a[Se]=G.year,e._dayOfYear=G.dayOfYear)}i.ISO_8601=function(){},i.RFC_2822=function(){};function Bs(e){if(e._f===i.ISO_8601){ga(e);return}if(e._f===i.RFC_2822){pa(e);return}e._a=[],N(e).empty=!0;var s=""+e._i,a,n,d,p,k,G=s.length,J=0,ne,Fe;for(d=Me(e._f,e._locale).match(K)||[],Fe=d.length,a=0;a<Fe;a++)p=d[a],n=(s.match(Es(p,e))||[])[0],n&&(k=s.substr(0,s.indexOf(n)),k.length>0&&N(e).unusedInput.push(k),s=s.slice(s.indexOf(n)+n.length),J+=n.length),P[p]?(n?N(e).empty=!1:N(e).unusedTokens.push(p),os(p,n,e)):e._strict&&!n&&N(e).unusedTokens.push(p);N(e).charsLeftOver=G-J,s.length>0&&N(e).unusedInput.push(s),e._a[je]<=12&&N(e).bigHour===!0&&e._a[je]>0&&(N(e).bigHour=void 0),N(e).parsedDateParts=e._a.slice(0),N(e).meridiem=e._meridiem,e._a[je]=_r(e._locale,e._a[je],e._meridiem),ne=N(e).era,ne!==null&&(e._a[Se]=e._locale.erasConvertYear(ne,e._a[Se])),Us(e),Vs(e)}function _r(e,s,a){var n;return a==null?s:e.meridiemHour!=null?e.meridiemHour(s,a):(e.isPM!=null&&(n=e.isPM(a),n&&s<12&&(s+=12),!n&&s===12&&(s=0)),s)}function Sr(e){var s,a,n,d,p,k,G=!1,J=e._f.length;if(J===0){N(e).invalidFormat=!0,e._d=new Date(NaN);return}for(d=0;d<J;d++)p=0,k=!1,s=$({},e),e._useUTC!=null&&(s._useUTC=e._useUTC),s._f=e._f[d],Bs(s),M(s)&&(k=!0),p+=N(s).charsLeftOver,p+=N(s).unusedTokens.length*10,N(s).score=p,G?p<n&&(n=p,a=s):(n==null||p<n||k)&&(n=p,a=s,k&&(G=!0));w(e,a||s)}function Cr(e){if(!e._d){var s=yt(e._i),a=s.day===void 0?s.date:s.day;e._a=j([s.year,s.month,a,s.hour,s.minute,s.second,s.millisecond],function(n){return n&&parseInt(n,10)}),Us(e)}}function Dr(e){var s=new V(Vs(ya(e)));return s._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function ya(e){var s=e._i,a=e._f;return e._locale=e._locale||st(e._l),s===null||a===void 0&&s===""?Y({nullInput:!0}):(typeof s=="string"&&(e._i=s=e._locale.preparse(s)),E(s)?new V(Vs(s)):(y(s)?e._d=s:h(a)?Sr(e):a?Bs(e):Mr(e),M(e)||(e._d=null),e))}function Mr(e){var s=e._i;b(s)?e._d=new Date(i.now()):y(s)?e._d=new Date(s.valueOf()):typeof s=="string"?jr(e):h(s)?(e._a=j(s.slice(0),function(a){return parseInt(a,10)}),Us(e)):f(s)?Cr(e):c(s)?e._d=new Date(s):i.createFromInputFallback(e)}function ba(e,s,a,n,d){var p={};return(s===!0||s===!1)&&(n=s,s=void 0),(a===!0||a===!1)&&(n=a,a=void 0),(f(e)&&g(e)||h(e)&&e.length===0)&&(e=void 0),p._isAMomentObject=!0,p._useUTC=p._isUTC=d,p._l=a,p._i=e,p._f=s,p._strict=n,Dr(p)}function fe(e,s,a,n){return ba(e,s,a,n,!1)}var Tr=L("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=fe.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Y()}),Pr=L("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=fe.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Y()});function va(e,s){var a,n;if(s.length===1&&h(s[0])&&(s=s[0]),!s.length)return fe();for(a=s[0],n=1;n<s.length;++n)(!s[n].isValid()||s[n][e](a))&&(a=s[n]);return a}function Er(){var e=[].slice.call(arguments,0);return va("isBefore",e)}function Yr(){var e=[].slice.call(arguments,0);return va("isAfter",e)}var Ir=function(){return Date.now?Date.now():+new Date},ts=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Fr(e){var s,a=!1,n,d=ts.length;for(s in e)if(x(e,s)&&!(be.call(ts,s)!==-1&&(e[s]==null||!isNaN(e[s]))))return!1;for(n=0;n<d;++n)if(e[ts[n]]){if(a)return!1;parseFloat(e[ts[n]])!==ae(e[ts[n]])&&(a=!0)}return!0}function Or(){return this._isValid}function Ar(){return We(NaN)}function xs(e){var s=yt(e),a=s.year||0,n=s.quarter||0,d=s.month||0,p=s.week||s.isoWeek||0,k=s.day||0,G=s.hour||0,J=s.minute||0,ne=s.second||0,Fe=s.millisecond||0;this._isValid=Fr(s),this._milliseconds=+Fe+ne*1e3+J*6e4+G*1e3*60*60,this._days=+k+p*7,this._months=+d+n*3+a*12,this._data={},this._locale=st(),this._bubble()}function gs(e){return e instanceof xs}function Ws(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Rr(e,s,a){var n=Math.min(e.length,s.length),d=Math.abs(e.length-s.length),p=0,k;for(k=0;k<n;k++)ae(e[k])!==ae(s[k])&&p++;return p+d}function wa(e,s){C(e,0,0,function(){var a=this.utcOffset(),n="+";return a<0&&(a=-a,n="-"),n+W(~~(a/60),2)+s+W(~~a%60,2)})}wa("Z",":"),wa("ZZ",""),B("Z",Ft),B("ZZ",Ft),ce(["Z","ZZ"],function(e,s,a){a._useUTC=!0,a._tzm=Gs(Ft,e)});var $r=/([\+\-]|\d\d)/gi;function Gs(e,s){var a=(s||"").match(e),n,d,p;return a===null?null:(n=a[a.length-1]||[],d=(n+"").match($r)||["-",0,0],p=+(d[1]*60)+ae(d[2]),p===0?0:d[0]==="+"?p:-p)}function qs(e,s){var a,n;return s._isUTC?(a=s.clone(),n=(E(e)||y(e)?e.valueOf():fe(e).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+n),i.updateOffset(a,!1),a):fe(e).local()}function Xs(e){return-Math.round(e._d.getTimezoneOffset())}i.updateOffset=function(){};function Lr(e,s,a){var n=this._offset||0,d;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Gs(Ft,e),e===null)return this}else Math.abs(e)<16&&!a&&(e=e*60);return!this._isUTC&&s&&(d=Xs(this)),this._offset=e,this._isUTC=!0,d!=null&&this.add(d,"m"),n!==e&&(!s||this._changeInProgress?_a(this,We(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:Xs(this)}function Hr(e,s){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,s),this):-this.utcOffset()}function Vr(e){return this.utcOffset(0,e)}function zr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Xs(this),"m")),this}function Ur(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Gs(Ts,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Br(e){return this.isValid()?(e=e?fe(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Wr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Gr(){if(!b(this._isDSTShifted))return this._isDSTShifted;var e={},s;return $(e,this),e=ya(e),e._a?(s=e._isUTC?S(e._a):fe(e._a),this._isDSTShifted=this.isValid()&&Rr(e._a,s.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function qr(){return this.isValid()?!this._isUTC:!1}function Xr(){return this.isValid()?this._isUTC:!1}function ja(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Kr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Zr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function We(e,s){var a=e,n=null,d,p,k;return gs(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(a={},s?a[s]=+e:a.milliseconds=+e):(n=Kr.exec(e))?(d=n[1]==="-"?-1:1,a={y:0,d:ae(n[Ve])*d,h:ae(n[je])*d,m:ae(n[Ne])*d,s:ae(n[Be])*d,ms:ae(Ws(n[et]*1e3))*d}):(n=Zr.exec(e))?(d=n[1]==="-"?-1:1,a={y:kt(n[2],d),M:kt(n[3],d),w:kt(n[4],d),d:kt(n[5],d),h:kt(n[6],d),m:kt(n[7],d),s:kt(n[8],d)}):a==null?a={}:typeof a=="object"&&("from"in a||"to"in a)&&(k=Jr(fe(a.from),fe(a.to)),a={},a.ms=k.milliseconds,a.M=k.months),p=new xs(a),gs(e)&&x(e,"_locale")&&(p._locale=e._locale),gs(e)&&x(e,"_isValid")&&(p._isValid=e._isValid),p}We.fn=xs.prototype,We.invalid=Ar;function kt(e,s){var a=e&&parseFloat(e.replace(",","."));return(isNaN(a)?0:a)*s}function Na(e,s){var a={};return a.months=s.month()-e.month()+(s.year()-e.year())*12,e.clone().add(a.months,"M").isAfter(s)&&--a.months,a.milliseconds=+s-+e.clone().add(a.months,"M"),a}function Jr(e,s){var a;return e.isValid()&&s.isValid()?(s=qs(s,e),e.isBefore(s)?a=Na(e,s):(a=Na(s,e),a.milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}function ka(e,s){return function(a,n){var d,p;return n!==null&&!isNaN(+n)&&(z(s,"moment()."+s+"(period, number) is deprecated. Please use moment()."+s+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),p=a,a=n,n=p),d=We(a,n),_a(this,d,e),this}}function _a(e,s,a,n){var d=s._milliseconds,p=Ws(s._days),k=Ws(s._months);e.isValid()&&(n=n??!0,k&&Ie(e,wt(e,"Month")+k*a),p&&ds(e,"Date",wt(e,"Date")+p*a),d&&e._d.setTime(e._d.valueOf()+d*a),n&&i.updateOffset(e,p||k))}var Qr=ka(1,"add"),ei=ka(-1,"subtract");function Sa(e){return typeof e=="string"||e instanceof String}function ti(e){return E(e)||y(e)||Sa(e)||c(e)||ai(e)||si(e)||e===null||e===void 0}function si(e){var s=f(e)&&!g(e),a=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],d,p,k=n.length;for(d=0;d<k;d+=1)p=n[d],a=a||x(e,p);return s&&a}function ai(e){var s=h(e),a=!1;return s&&(a=e.filter(function(n){return!c(n)&&Sa(e)}).length===0),s&&a}function ni(e){var s=f(e)&&!g(e),a=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],d,p;for(d=0;d<n.length;d+=1)p=n[d],a=a||x(e,p);return s&&a}function ri(e,s){var a=e.diff(s,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function ii(e,s){arguments.length===1&&(arguments[0]?ti(arguments[0])?(e=arguments[0],s=void 0):ni(arguments[0])&&(s=arguments[0],e=void 0):(e=void 0,s=void 0));var a=e||fe(),n=qs(a,this).startOf("day"),d=i.calendarFormat(this,n)||"sameElse",p=s&&(R(s[d])?s[d].call(this,a):s[d]);return this.format(p||this.localeData().calendar(d,this,fe(a)))}function li(){return new V(this)}function oi(e,s){var a=E(e)?e:fe(e);return this.isValid()&&a.isValid()?(s=De(s)||"millisecond",s==="millisecond"?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(s).valueOf()):!1}function ci(e,s){var a=E(e)?e:fe(e);return this.isValid()&&a.isValid()?(s=De(s)||"millisecond",s==="millisecond"?this.valueOf()<a.valueOf():this.clone().endOf(s).valueOf()<a.valueOf()):!1}function di(e,s,a,n){var d=E(e)?e:fe(e),p=E(s)?s:fe(s);return this.isValid()&&d.isValid()&&p.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(d,a):!this.isBefore(d,a))&&(n[1]===")"?this.isBefore(p,a):!this.isAfter(p,a))):!1}function ui(e,s){var a=E(e)?e:fe(e),n;return this.isValid()&&a.isValid()?(s=De(s)||"millisecond",s==="millisecond"?this.valueOf()===a.valueOf():(n=a.valueOf(),this.clone().startOf(s).valueOf()<=n&&n<=this.clone().endOf(s).valueOf())):!1}function hi(e,s){return this.isSame(e,s)||this.isAfter(e,s)}function mi(e,s){return this.isSame(e,s)||this.isBefore(e,s)}function fi(e,s,a){var n,d,p;if(!this.isValid())return NaN;if(n=qs(e,this),!n.isValid())return NaN;switch(d=(n.utcOffset()-this.utcOffset())*6e4,s=De(s),s){case"year":p=ps(this,n)/12;break;case"month":p=ps(this,n);break;case"quarter":p=ps(this,n)/3;break;case"second":p=(this-n)/1e3;break;case"minute":p=(this-n)/6e4;break;case"hour":p=(this-n)/36e5;break;case"day":p=(this-n-d)/864e5;break;case"week":p=(this-n-d)/6048e5;break;default:p=this-n}return a?p:Re(p)}function ps(e,s){if(e.date()<s.date())return-ps(s,e);var a=(s.year()-e.year())*12+(s.month()-e.month()),n=e.clone().add(a,"months"),d,p;return s-n<0?(d=e.clone().add(a-1,"months"),p=(s-n)/(n-d)):(d=e.clone().add(a+1,"months"),p=(s-n)/(d-n)),-(a+p)||0}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function xi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function gi(e){if(!this.isValid())return null;var s=e!==!0,a=s?this.clone().utc():this;return a.year()<0||a.year()>9999?de(a,s?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):R(Date.prototype.toISOString)?s?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",de(a,"Z")):de(a,s?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function pi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",s="",a,n,d,p;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",s="Z"),a="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",d="-MM-DD[T]HH:mm:ss.SSS",p=s+'[")]',this.format(a+n+d+p)}function yi(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var s=de(this,e);return this.localeData().postformat(s)}function bi(e,s){return this.isValid()&&(E(e)&&e.isValid()||fe(e).isValid())?We({to:this,from:e}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function vi(e){return this.from(fe(),e)}function wi(e,s){return this.isValid()&&(E(e)&&e.isValid()||fe(e).isValid())?We({from:this,to:e}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function ji(e){return this.to(fe(),e)}function Ca(e){var s;return e===void 0?this._locale._abbr:(s=st(e),s!=null&&(this._locale=s),this)}var Da=L("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Ma(){return this._locale}var ys=1e3,Lt=60*ys,bs=60*Lt,Ta=(365*400+97)*24*bs;function Ht(e,s){return(e%s+s)%s}function Pa(e,s,a){return e<100&&e>=0?new Date(e+400,s,a)-Ta:new Date(e,s,a).valueOf()}function Ea(e,s,a){return e<100&&e>=0?Date.UTC(e+400,s,a)-Ta:Date.UTC(e,s,a)}function Ni(e){var s,a;if(e=De(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?Ea:Pa,e){case"year":s=a(this.year(),0,1);break;case"quarter":s=a(this.year(),this.month()-this.month()%3,1);break;case"month":s=a(this.year(),this.month(),1);break;case"week":s=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":s=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":s=a(this.year(),this.month(),this.date());break;case"hour":s=this._d.valueOf(),s-=Ht(s+(this._isUTC?0:this.utcOffset()*Lt),bs);break;case"minute":s=this._d.valueOf(),s-=Ht(s,Lt);break;case"second":s=this._d.valueOf(),s-=Ht(s,ys);break}return this._d.setTime(s),i.updateOffset(this,!0),this}function ki(e){var s,a;if(e=De(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?Ea:Pa,e){case"year":s=a(this.year()+1,0,1)-1;break;case"quarter":s=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":s=a(this.year(),this.month()+1,1)-1;break;case"week":s=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":s=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":s=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":s=this._d.valueOf(),s+=bs-Ht(s+(this._isUTC?0:this.utcOffset()*Lt),bs)-1;break;case"minute":s=this._d.valueOf(),s+=Lt-Ht(s,Lt)-1;break;case"second":s=this._d.valueOf(),s+=ys-Ht(s,ys)-1;break}return this._d.setTime(s),i.updateOffset(this,!0),this}function _i(){return this._d.valueOf()-(this._offset||0)*6e4}function Si(){return Math.floor(this.valueOf()/1e3)}function Ci(){return new Date(this.valueOf())}function Di(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Mi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ti(){return this.isValid()?this.toISOString():null}function Pi(){return M(this)}function Ei(){return w({},N(this))}function Yi(){return N(this).overflow}function Ii(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}C("N",0,0,"eraAbbr"),C("NN",0,0,"eraAbbr"),C("NNN",0,0,"eraAbbr"),C("NNNN",0,0,"eraName"),C("NNNNN",0,0,"eraNarrow"),C("y",["y",1],"yo","eraYear"),C("y",["yy",2],0,"eraYear"),C("y",["yyy",3],0,"eraYear"),C("y",["yyyy",4],0,"eraYear"),B("N",Ks),B("NN",Ks),B("NNN",Ks),B("NNNN",Bi),B("NNNNN",Wi),ce(["N","NN","NNN","NNNN","NNNNN"],function(e,s,a,n){var d=a._locale.erasParse(e,n,a._strict);d?N(a).era=d:N(a).invalidEra=e}),B("y",Qe),B("yy",Qe),B("yyy",Qe),B("yyyy",Qe),B("yo",Gi),ce(["y","yy","yyy","yyyy"],Se),ce(["yo"],function(e,s,a,n){var d;a._locale._eraYearOrdinalRegex&&(d=e.match(a._locale._eraYearOrdinalRegex)),a._locale.eraYearOrdinalParse?s[Se]=a._locale.eraYearOrdinalParse(e,d):s[Se]=parseInt(e,10)});function Fi(e,s){var a,n,d,p=this._eras||st("en")._eras;for(a=0,n=p.length;a<n;++a){switch(typeof p[a].since){case"string":d=i(p[a].since).startOf("day"),p[a].since=d.valueOf();break}switch(typeof p[a].until){case"undefined":p[a].until=1/0;break;case"string":d=i(p[a].until).startOf("day").valueOf(),p[a].until=d.valueOf();break}}return p}function Oi(e,s,a){var n,d,p=this.eras(),k,G,J;for(e=e.toUpperCase(),n=0,d=p.length;n<d;++n)if(k=p[n].name.toUpperCase(),G=p[n].abbr.toUpperCase(),J=p[n].narrow.toUpperCase(),a)switch(s){case"N":case"NN":case"NNN":if(G===e)return p[n];break;case"NNNN":if(k===e)return p[n];break;case"NNNNN":if(J===e)return p[n];break}else if([k,G,J].indexOf(e)>=0)return p[n]}function Ai(e,s){var a=e.since<=e.until?1:-1;return s===void 0?i(e.since).year():i(e.since).year()+(s-e.offset)*a}function Ri(){var e,s,a,n=this.localeData().eras();for(e=0,s=n.length;e<s;++e)if(a=this.clone().startOf("day").valueOf(),n[e].since<=a&&a<=n[e].until||n[e].until<=a&&a<=n[e].since)return n[e].name;return""}function $i(){var e,s,a,n=this.localeData().eras();for(e=0,s=n.length;e<s;++e)if(a=this.clone().startOf("day").valueOf(),n[e].since<=a&&a<=n[e].until||n[e].until<=a&&a<=n[e].since)return n[e].narrow;return""}function Li(){var e,s,a,n=this.localeData().eras();for(e=0,s=n.length;e<s;++e)if(a=this.clone().startOf("day").valueOf(),n[e].since<=a&&a<=n[e].until||n[e].until<=a&&a<=n[e].since)return n[e].abbr;return""}function Hi(){var e,s,a,n,d=this.localeData().eras();for(e=0,s=d.length;e<s;++e)if(a=d[e].since<=d[e].until?1:-1,n=this.clone().startOf("day").valueOf(),d[e].since<=n&&n<=d[e].until||d[e].until<=n&&n<=d[e].since)return(this.year()-i(d[e].since).year())*a+d[e].offset;return this.year()}function Vi(e){return x(this,"_erasNameRegex")||Zs.call(this),e?this._erasNameRegex:this._erasRegex}function zi(e){return x(this,"_erasAbbrRegex")||Zs.call(this),e?this._erasAbbrRegex:this._erasRegex}function Ui(e){return x(this,"_erasNarrowRegex")||Zs.call(this),e?this._erasNarrowRegex:this._erasRegex}function Ks(e,s){return s.erasAbbrRegex(e)}function Bi(e,s){return s.erasNameRegex(e)}function Wi(e,s){return s.erasNarrowRegex(e)}function Gi(e,s){return s._eraYearOrdinalRegex||Qe}function Zs(){var e=[],s=[],a=[],n=[],d,p,k,G,J,ne=this.eras();for(d=0,p=ne.length;d<p;++d)k=ze(ne[d].name),G=ze(ne[d].abbr),J=ze(ne[d].narrow),s.push(k),e.push(G),a.push(J),n.push(k),n.push(G),n.push(J);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}C(0,["gg",2],0,function(){return this.weekYear()%100}),C(0,["GG",2],0,function(){return this.isoWeekYear()%100});function vs(e,s){C(0,[e,e.length],0,s)}vs("gggg","weekYear"),vs("ggggg","weekYear"),vs("GGGG","isoWeekYear"),vs("GGGGG","isoWeekYear"),B("G",It),B("g",It),B("GG",he,Pe),B("gg",he,Pe),B("GGGG",qt,Gt),B("gggg",qt,Gt),B("GGGGG",Yt,Et),B("ggggg",Yt,Et),ut(["gggg","ggggg","GGGG","GGGGG"],function(e,s,a,n){s[n.substr(0,2)]=ae(e)}),ut(["gg","GG"],function(e,s,a,n){s[n]=i.parseTwoDigitYear(e)});function qi(e){return Ya.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Xi(e){return Ya.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Ki(){return tt(this.year(),1,4)}function Zi(){return tt(this.isoWeekYear(),1,4)}function Ji(){var e=this.localeData()._week;return tt(this.year(),e.dow,e.doy)}function Qi(){var e=this.localeData()._week;return tt(this.weekYear(),e.dow,e.doy)}function Ya(e,s,a,n,d){var p;return e==null?Jt(this,n,d).year:(p=tt(e,n,d),s>p&&(s=p),el.call(this,e,s,a,n,d))}function el(e,s,a,n,d){var p=da(e,s,a,n,d),k=Zt(p.year,0,p.dayOfYear);return this.year(k.getUTCFullYear()),this.month(k.getUTCMonth()),this.date(k.getUTCDate()),this}C("Q",0,"Qo","quarter"),B("Q",Pt),ce("Q",function(e,s){s[Ue]=(ae(e)-1)*3});function tl(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}C("D",["DD",2],"Do","date"),B("D",he,dt),B("DD",he,Pe),B("Do",function(e,s){return e?s._dayOfMonthOrdinalParse||s._ordinalParse:s._dayOfMonthOrdinalParseLenient}),ce(["D","DD"],Ve),ce("Do",function(e,s){s[Ve]=ae(e.match(he)[0])});var Ia=ft("Date",!0);C("DDD",["DDDD",3],"DDDo","dayOfYear"),B("DDD",Je),B("DDDD",Wt),ce(["DDD","DDDD"],function(e,s,a){a._dayOfYear=ae(e)});function sl(e){var s=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?s:this.add(e-s,"d")}C("m",["mm",2],0,"minute"),B("m",he,Xt),B("mm",he,Pe),ce(["m","mm"],Ne);var al=ft("Minutes",!1);C("s",["ss",2],0,"second"),B("s",he,Xt),B("ss",he,Pe),ce(["s","ss"],Be);var nl=ft("Seconds",!1);C("S",0,0,function(){return~~(this.millisecond()/100)}),C(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),C(0,["SSS",3],0,"millisecond"),C(0,["SSSS",4],0,function(){return this.millisecond()*10}),C(0,["SSSSS",5],0,function(){return this.millisecond()*100}),C(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),C(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),C(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),C(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),B("S",Je,Pt),B("SS",Je,Pe),B("SSS",Je,Wt);var gt,Fa;for(gt="SSSS";gt.length<=9;gt+="S")B(gt,Qe);function rl(e,s){s[et]=ae(("0."+e)*1e3)}for(gt="S";gt.length<=9;gt+="S")ce(gt,rl);Fa=ft("Milliseconds",!1),C("z",0,0,"zoneAbbr"),C("zz",0,0,"zoneName");function il(){return this._isUTC?"UTC":""}function ll(){return this._isUTC?"Coordinated Universal Time":""}var O=V.prototype;O.add=Qr,O.calendar=ii,O.clone=li,O.diff=fi,O.endOf=ki,O.format=yi,O.from=bi,O.fromNow=vi,O.to=wi,O.toNow=ji,O.get=Fs,O.invalidAt=Yi,O.isAfter=oi,O.isBefore=ci,O.isBetween=di,O.isSame=ui,O.isSameOrAfter=hi,O.isSameOrBefore=mi,O.isValid=Pi,O.lang=Da,O.locale=Ca,O.localeData=Ma,O.max=Pr,O.min=Tr,O.parsingFlags=Ei,O.set=Os,O.startOf=Ni,O.subtract=ei,O.toArray=Di,O.toObject=Mi,O.toDate=Ci,O.toISOString=gi,O.inspect=pi,typeof Symbol<"u"&&Symbol.for!=null&&(O[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),O.toJSON=Ti,O.toString=xi,O.unix=Si,O.valueOf=_i,O.creationData=Ii,O.eraName=Ri,O.eraNarrow=$i,O.eraAbbr=Li,O.eraYear=Hi,O.year=mt,O.isLeapYear=Is,O.weekYear=qi,O.isoWeekYear=Xi,O.quarter=O.quarters=tl,O.month=Nt,O.daysInMonth=us,O.week=O.weeks=Fn,O.isoWeek=O.isoWeeks=On,O.weeksInYear=Ji,O.weeksInWeekYear=Qi,O.isoWeeksInYear=Ki,O.isoWeeksInISOWeekYear=Zi,O.date=Ia,O.day=O.days=Xn,O.weekday=Kn,O.isoWeekday=Zn,O.dayOfYear=sl,O.hour=O.hours=nr,O.minute=O.minutes=al,O.second=O.seconds=nl,O.millisecond=O.milliseconds=Fa,O.utcOffset=Lr,O.utc=Vr,O.local=zr,O.parseZone=Ur,O.hasAlignedHourOffset=Br,O.isDST=Wr,O.isLocal=qr,O.isUtcOffset=Xr,O.isUtc=ja,O.isUTC=ja,O.zoneAbbr=il,O.zoneName=ll,O.dates=L("dates accessor is deprecated. Use date instead.",Ia),O.months=L("months accessor is deprecated. Use month instead",Nt),O.years=L("years accessor is deprecated. Use year instead",mt),O.zone=L("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Hr),O.isDSTShifted=L("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Gr);function ol(e){return fe(e*1e3)}function cl(){return fe.apply(null,arguments).parseZone()}function Oa(e){return e}var le=ee.prototype;le.calendar=xe,le.longDateFormat=X,le.invalidDate=ge,le.ordinal=Ae,le.preparse=Oa,le.postformat=Oa,le.relativeTime=Te,le.pastFuture=Mt,le.set=Q,le.eras=Fi,le.erasParse=Oi,le.erasConvertYear=Ai,le.erasAbbrRegex=zi,le.erasNameRegex=Vi,le.erasNarrowRegex=Ui,le.months=we,le.monthsShort=Ke,le.monthsParse=jt,le.monthsRegex=Mn,le.monthsShortRegex=Dn,le.week=Pn,le.firstDayOfYear=In,le.firstDayOfWeek=Yn,le.weekdays=Un,le.weekdaysMin=Wn,le.weekdaysShort=Bn,le.weekdaysParse=qn,le.weekdaysRegex=Jn,le.weekdaysShortRegex=Qn,le.weekdaysMinRegex=er,le.isPM=sr,le.meridiem=rr;function ws(e,s,a,n){var d=st(),p=S().set(n,s);return d[a](p,e)}function Aa(e,s,a){if(c(e)&&(s=e,e=void 0),e=e||"",s!=null)return ws(e,s,a,"month");var n,d=[];for(n=0;n<12;n++)d[n]=ws(e,n,a,"month");return d}function Js(e,s,a,n){typeof e=="boolean"?(c(s)&&(a=s,s=void 0),s=s||""):(s=e,a=s,e=!1,c(s)&&(a=s,s=void 0),s=s||"");var d=st(),p=e?d._week.dow:0,k,G=[];if(a!=null)return ws(s,(a+p)%7,n,"day");for(k=0;k<7;k++)G[k]=ws(s,(k+p)%7,n,"day");return G}function dl(e,s){return Aa(e,s,"months")}function ul(e,s){return Aa(e,s,"monthsShort")}function hl(e,s,a){return Js(e,s,a,"weekdays")}function ml(e,s,a){return Js(e,s,a,"weekdaysShort")}function fl(e,s,a){return Js(e,s,a,"weekdaysMin")}xt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var s=e%10,a=ae(e%100/10)===1?"th":s===1?"st":s===2?"nd":s===3?"rd":"th";return e+a}}),i.lang=L("moment.lang is deprecated. Use moment.locale instead.",xt),i.langData=L("moment.langData is deprecated. Use moment.localeData instead.",st);var at=Math.abs;function xl(){var e=this._data;return this._milliseconds=at(this._milliseconds),this._days=at(this._days),this._months=at(this._months),e.milliseconds=at(e.milliseconds),e.seconds=at(e.seconds),e.minutes=at(e.minutes),e.hours=at(e.hours),e.months=at(e.months),e.years=at(e.years),this}function Ra(e,s,a,n){var d=We(s,a);return e._milliseconds+=n*d._milliseconds,e._days+=n*d._days,e._months+=n*d._months,e._bubble()}function gl(e,s){return Ra(this,e,s,1)}function pl(e,s){return Ra(this,e,s,-1)}function $a(e){return e<0?Math.floor(e):Math.ceil(e)}function yl(){var e=this._milliseconds,s=this._days,a=this._months,n=this._data,d,p,k,G,J;return e>=0&&s>=0&&a>=0||e<=0&&s<=0&&a<=0||(e+=$a(Qs(a)+s)*864e5,s=0,a=0),n.milliseconds=e%1e3,d=Re(e/1e3),n.seconds=d%60,p=Re(d/60),n.minutes=p%60,k=Re(p/60),n.hours=k%24,s+=Re(k/24),J=Re(La(s)),a+=J,s-=$a(Qs(J)),G=Re(a/12),a%=12,n.days=s,n.months=a,n.years=G,this}function La(e){return e*4800/146097}function Qs(e){return e*146097/4800}function bl(e){if(!this.isValid())return NaN;var s,a,n=this._milliseconds;if(e=De(e),e==="month"||e==="quarter"||e==="year")switch(s=this._days+n/864e5,a=this._months+La(s),e){case"month":return a;case"quarter":return a/3;case"year":return a/12}else switch(s=this._days+Math.round(Qs(this._months)),e){case"week":return s/7+n/6048e5;case"day":return s+n/864e5;case"hour":return s*24+n/36e5;case"minute":return s*1440+n/6e4;case"second":return s*86400+n/1e3;case"millisecond":return Math.floor(s*864e5)+n;default:throw new Error("Unknown unit "+e)}}function nt(e){return function(){return this.as(e)}}var Ha=nt("ms"),vl=nt("s"),wl=nt("m"),jl=nt("h"),Nl=nt("d"),kl=nt("w"),_l=nt("M"),Sl=nt("Q"),Cl=nt("y"),Dl=Ha;function Ml(){return We(this)}function Tl(e){return e=De(e),this.isValid()?this[e+"s"]():NaN}function _t(e){return function(){return this.isValid()?this._data[e]:NaN}}var Pl=_t("milliseconds"),El=_t("seconds"),Yl=_t("minutes"),Il=_t("hours"),Fl=_t("days"),Ol=_t("months"),Al=_t("years");function Rl(){return Re(this.days()/7)}var rt=Math.round,Vt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function $l(e,s,a,n,d){return d.relativeTime(s||1,!!a,e,n)}function Ll(e,s,a,n){var d=We(e).abs(),p=rt(d.as("s")),k=rt(d.as("m")),G=rt(d.as("h")),J=rt(d.as("d")),ne=rt(d.as("M")),Fe=rt(d.as("w")),it=rt(d.as("y")),pt=p<=a.ss&&["s",p]||p<a.s&&["ss",p]||k<=1&&["m"]||k<a.m&&["mm",k]||G<=1&&["h"]||G<a.h&&["hh",G]||J<=1&&["d"]||J<a.d&&["dd",J];return a.w!=null&&(pt=pt||Fe<=1&&["w"]||Fe<a.w&&["ww",Fe]),pt=pt||ne<=1&&["M"]||ne<a.M&&["MM",ne]||it<=1&&["y"]||["yy",it],pt[2]=s,pt[3]=+e>0,pt[4]=n,$l.apply(null,pt)}function Hl(e){return e===void 0?rt:typeof e=="function"?(rt=e,!0):!1}function Vl(e,s){return Vt[e]===void 0?!1:s===void 0?Vt[e]:(Vt[e]=s,e==="s"&&(Vt.ss=s-1),!0)}function zl(e,s){if(!this.isValid())return this.localeData().invalidDate();var a=!1,n=Vt,d,p;return typeof e=="object"&&(s=e,e=!1),typeof e=="boolean"&&(a=e),typeof s=="object"&&(n=Object.assign({},Vt,s),s.s!=null&&s.ss==null&&(n.ss=s.s-1)),d=this.localeData(),p=Ll(this,!a,n,d),a&&(p=d.pastFuture(+this,p)),d.postformat(p)}var ea=Math.abs;function zt(e){return(e>0)-(e<0)||+e}function js(){if(!this.isValid())return this.localeData().invalidDate();var e=ea(this._milliseconds)/1e3,s=ea(this._days),a=ea(this._months),n,d,p,k,G=this.asSeconds(),J,ne,Fe,it;return G?(n=Re(e/60),d=Re(n/60),e%=60,n%=60,p=Re(a/12),a%=12,k=e?e.toFixed(3).replace(/\.?0+$/,""):"",J=G<0?"-":"",ne=zt(this._months)!==zt(G)?"-":"",Fe=zt(this._days)!==zt(G)?"-":"",it=zt(this._milliseconds)!==zt(G)?"-":"",J+"P"+(p?ne+p+"Y":"")+(a?ne+a+"M":"")+(s?Fe+s+"D":"")+(d||n||e?"T":"")+(d?it+d+"H":"")+(n?it+n+"M":"")+(e?it+k+"S":"")):"P0D"}var re=xs.prototype;re.isValid=Or,re.abs=xl,re.add=gl,re.subtract=pl,re.as=bl,re.asMilliseconds=Ha,re.asSeconds=vl,re.asMinutes=wl,re.asHours=jl,re.asDays=Nl,re.asWeeks=kl,re.asMonths=_l,re.asQuarters=Sl,re.asYears=Cl,re.valueOf=Dl,re._bubble=yl,re.clone=Ml,re.get=Tl,re.milliseconds=Pl,re.seconds=El,re.minutes=Yl,re.hours=Il,re.days=Fl,re.weeks=Rl,re.months=Ol,re.years=Al,re.humanize=zl,re.toISOString=js,re.toString=js,re.toJSON=js,re.locale=Ca,re.localeData=Ma,re.toIsoString=L("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",js),re.lang=Da,C("X",0,0,"unix"),C("x",0,0,"valueOf"),B("x",It),B("X",Ps),ce("X",function(e,s,a){a._d=new Date(parseFloat(e)*1e3)}),ce("x",function(e,s,a){a._d=new Date(ae(e))});//! moment.js
return i.version="2.30.1",u(fe),i.fn=O,i.min=Er,i.max=Yr,i.now=Ir,i.utc=S,i.unix=ol,i.months=dl,i.isDate=y,i.locale=xt,i.invalid=Y,i.duration=We,i.isMoment=E,i.weekdays=hl,i.parseZone=cl,i.localeData=st,i.isDuration=gs,i.monthsShort=ul,i.weekdaysMin=fl,i.defineLocale=Hs,i.updateLocale=cr,i.locales=dr,i.weekdaysShort=ml,i.normalizeUnits=De,i.relativeTimeRounding=Hl,i.relativeTimeThreshold=Vl,i.calendarFormat=ri,i.prototype=O,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i})}(ta)),ta.exports}(function(r,l){(function(o,i){i(typeof an=="function"?Kl():o.moment)})(sn,function(o){//! moment.js locale configuration
var i=o.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(u){return/^ch$/i.test(u)},meridiem:function(u,h,f){return u<12?f?"sa":"SA":f?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun trc lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",w:"mt tun",ww:"%d tun",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(u){return u},week:{dow:1,doy:4}});return i})})();const Zl=r=>{if(!r||typeof r!="string")return{className:"status-default",icon:"fa-question-circle",pulse:!1};const l=r.toLowerCase().trim().normalize("NFC");switch(l){case" hy":case" hy (ui)":return{className:"status-da-huy",icon:"fa-times-circle",pulse:!1};case"t chi ycvc":return{className:"status-tu-choi-ycvc",icon:"fa-ban",pulse:!1};case"cha ghp":case"cha tm thy vin":return{className:"status-chua-ghep",icon:"fa-check-circle",pulse:!1};case"ch ph duyt":return{className:"status-cho-phe-duyet",icon:"fa-hourglass-half",pulse:!1};case"ch k ha n":case"ch ky hoa n":return{className:"status-cho-ky-hoa-don",icon:"fa-file-signature",pulse:!1};case"ch duyt ycvc":return{className:"status-cho-duyet-ycvc",icon:"fa-user-clock",pulse:!1};case"ch check-in":return{className:"status-cho-check-in",icon:"fa-calendar-check",pulse:!1};case"yu cu b sung":return{className:"status-yeu-cau-bo-sung",icon:"fa-exclamation-circle",pulse:!0};case"ch xc thc vc (tvbh)":return{className:"status-cho-xac-thuc-vc",icon:"fa-exclamation-circle",pulse:!0};case"ang gi":return{className:"status-dang-giu",icon:"fa-lock",pulse:!1};case"ang li th":return{className:"status-dang-lai-thu",icon:"fa-car-side",pulse:!1};case" ghp":return{className:"status-da-ghep",icon:"fa-link",pulse:!1};case" b sung":return{className:"status-da-bo-sung",icon:"fa-plus-circle",pulse:!1};case" ph duyt":return{className:"status-da-phe-duyet",icon:"fa-check",pulse:!1};case" xut ha n":return{className:"status-da-xuat-hoa-don",icon:"fa-check-double",pulse:!1};case"yu cu vinclub":return{className:"status-yeu-cau-vinclub",icon:"fa-star",pulse:!1};case" c vc":return{className:"status-da-co-vc",icon:"fa-star-half-alt",pulse:!1};case" hon tt":return{className:"status-da-hoan-tat",icon:"fa-flag-checkered",pulse:!1};default:return l.startsWith("vpas")||/^[a-z0-9]{17}$/.test(l)?{className:"status-san-sang",icon:"fa-car",pulse:!1}:{className:"status-default",icon:"fa-question-circle",pulse:!1}}},nn=({status:r,size:l="md"})=>{const{className:o,icon:i,pulse:u}=Zl(r),h=l==="sm"?"text-[10px] px-1.5 py-0.5":"";return t.jsxs("div",{className:`status-badge ${o} ${u?"pulse-icon":""} ${h}`,children:[t.jsx("span",{className:"badge-icon",children:t.jsx("i",{className:`fas ${i}`})}),t.jsx("span",{className:"badge-text truncate",children:r})]})},rn=r=>{const o={textShadow:"0 0 4px rgba(0,0,0,0.8)"};if(!r)return{};const i=r.toLowerCase().trim();return i==="brahminy white (ce18)"?{color:"white",...o}:i.includes("sunset orb (ce1a)")?{color:"var(--exterior-orange-text)"}:i.includes("crimson red (ce1m)")?{color:"var(--exterior-red-text)"}:i.includes("vinfast blue (ce1n)")?{color:"var(--exterior-blue-text)"}:i.includes("neptune grey (ce14)")?{color:"#778899"}:i.includes("jet black (ce11)")?{color:"black"}:i.includes("electric blue (ce1j)")?{color:"var(--exterior-blue-text)"}:i.includes("zenith grey (ce1v)")?{color:"#B0C4DE"}:i.includes("jet black roof- summer yellow body (111u)")?{color:"var(--exterior-yellow-text)"}:i.includes("brahminy white roof- aquatic azure body (181y)")?{color:"var(--exterior-blue-text)"}:i.includes("brahminy white roof- rose pink body (1821)")?{color:"var(--exterior-pink-text)"}:i.includes("brahminy white roof - iris berry body (181x)")?{color:"var(--exterior-pink-text)"}:i.includes("urbant mint (ce1w)")?{color:"#3CB371"}:i.includes("vinbus green (ce2b)")?{color:"var(--exterior-green-text)"}:i.includes("deep ocean (ce1h)")?{color:"#006400"}:i.includes("iris berry (ce1x)")?{color:"var(--exterior-pink-text)"}:i.includes("zenith grey-desat silver roof (171v)")?{color:"var(--exterior-grey-text)"}:i.includes("urbant mint green - desat silv (171w)")?{color:"var(--exterior-green-text)"}:i.includes("ivy green-desat silver roof (1722)")?{color:"var(--exterior-green-text)"}:i.includes("atlantic blue-aquatic azure ro (1y26)")?{color:"var(--exterior-blue-text)"}:i.includes("jet black-champagne creme roof (2311)")?{color:"white",...o}:i.includes("infinity blanc _ silky white r (2418)")?{color:"var(--exterior-white-text)"}:i.includes("champagne creme - matte champa (2523)")?{color:"var(--exterior-yellow-text)"}:i.includes("jet black - graphite roof (2811)")?{color:"white",...o}:i.includes("crimson velvet - mystery bronz (2927)")?{color:"var(--exterior-red-text)"}:i.includes("ivy_green_gne (ce22)")?{color:"var(--exterior-green-text)"}:i.includes("champagne_creme_ylg (ce23)")?{color:"var(--exterior-yellow-text)"}:i.includes("crimson red - jet black roof (111m)")?{color:"var(--exterior-red-text)"}:i.includes("infinity blanc_zenith grey roof (1v18)")?{color:"var(--exterior-white-text)"}:i.includes("deep ocean_jet black roof (111h)")?{color:"white",...o}:i.includes("alantic blue_denim blue roof (2a26)")?{color:"var(--exterior-blue-text)"}:i.includes("jet black_mystery bronze roof (2911)")?{color:"white",...o}:i.includes("champagne creme_infinity blanc roof (1823)")?{color:"var(--exterior-yellow-text)"}:i.includes("de sat silver ind12007 (ce17)")?{color:"var(--exterior-grey-text)"}:i.includes("crimson red")||i.includes("crimson velvet")?{color:"var(--exterior-red-text)"}:i.includes("rose pink")||i.includes("iris berry")?{color:"var(--exterior-pink-text)"}:i.includes("vinfast blue")||i.includes("electric blue")||i.includes("atlantic blue")||i.includes("aquatic azure")||i.includes("alantic blue")?{color:"var(--exterior-blue-text)"}:i.includes("deep ocean")?{color:"white",...o}:i.includes("sunset orb")?{color:"var(--exterior-orange-text)"}:i.includes("summer yellow")||i.includes("champagne creme")||i.includes("champagne_creme_ylg")?{color:"var(--exterior-yellow-text)"}:i.includes("urbant mint")||i.includes("vinbus green")||i.includes("ivy green")||i.includes("ivy_green_gne")?{color:"var(--exterior-green-text)"}:i.includes("jet black")?{color:"white",...o}:i.includes("brahminy white")||i.includes("infinity blanc")?{color:"var(--exterior-white-text)"}:i.includes("neptune grey")||i.includes("zenith grey")||i.includes("de sat silver")||i.includes("graphite")?{color:"var(--exterior-grey-text)"}:i.includes("mystery bronz")?{color:"var(--exterior-bronze-text)"}:{}},Jl=r=>{if(!r)return{};const l=r.toLowerCase().trim();return l.includes("black")?{color:"#1F2937"}:l.includes("brown")?{color:"#78350F"}:l.includes("beige")?{color:"#B45309"}:{}},ln={"VF 3":"vf3","VF 5":"vf5","VF 6":"vf6","VF 7":"vf7","VF 8":"vf8","VF 9":"vf9","EC Van":"ecvan"},Ba={red:"red",white:"white",blanc:"white",grey:"grey",gray:"grey",black:"black",blue:"blue",orange:"orange",orb:"orange",green:"green",mint:"green",pink:"pink",berry:"pink",yellow:"yellow",zenith:"zenith","deep ocean":"deepocean"},Ql=(r,l)=>{const o=r?ln[r]||r.toLowerCase().replace(/\s+/g,""):"default",i=(l==null?void 0:l.toLowerCase())||"",u="/ordermanagement/",h=i.match(/\(([^)]+)\)/);if(h&&h[1]){const g=h[1].trim().toLowerCase();if(g)return`${u}pictures/${o}-${g}.webp`}let f="";const x=Object.keys(Ba).sort((g,b)=>b.length-g.length);for(const g of x)if(i.includes(g)){f=Ba[g];break}return f?`${u}pictures/${o}-${f}.webp`:on(r)},on=r=>{const l="/ordermanagement/",o=r?ln[r]||r.toLowerCase().replace(/\s+/g,""):"default";return`${l}pictures/${o}-default.webp`},eo=()=>"/ordermanagement/pictures/default.webp",sa=["#ef4444","#f97316","#eab308","#84cc16","#22c55e","#10b981","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e"],to=r=>{if(!r)return sa[0];let l=0;for(let i=0;i<r.length;i++)l=r.charCodeAt(i)+((l<<5)-l),l=l&l;const o=Math.abs(l%sa.length);return sa[o]},ct=()=>({}),la=({model:r,exteriorColor:l,className:o,alt:i})=>{const u=Ql(r,l),h=on(r),f=eo(),[x,g]=m.useState(u);m.useEffect(()=>{g(u)},[u]);const b=()=>{x===u?(console.warn(`[CarImage] Failed to load primary: ${u}. Trying model fallback: ${h}`),g(h)):x===h?(console.warn(`[CarImage] Failed to load model fallback: ${h}. Trying global fallback: ${f}`),g(f)):console.error(`[CarImage] All fallbacks failed. Last attempted: ${x}`)};return t.jsx("img",{src:x,onError:b,className:o,alt:i||`Image of ${r} in ${l}`,loading:"lazy",draggable:"false"})},Z=({children:r,variant:l="primary",size:o="md",isLoading:i=!1,leftIcon:u,rightIcon:h,fullWidth:f=!1,className:x="",disabled:g,...b})=>{const c="inline-flex items-center justify-center rounded-xl font-semibold transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed disabled:shadow-none active:scale-[0.98]",y={primary:"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-[5px_5px_10px_rgba(59,130,246,0.3),-5px_-5px_10px_rgba(255,255,255,0.1)] hover:shadow-[7px_7px_14px_rgba(59,130,246,0.4),-7px_-7px_14px_rgba(255,255,255,0.2)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2),inset_-4px_-4px_8px_rgba(255,255,255,0.1)] border-none",secondary:"bg-[#f0f2f5] text-slate-700 shadow-[5px_5px_10px_#d1d5db,-5px_-5px_10px_#ffffff] hover:shadow-[7px_7px_14px_#d1d5db,-7px_-7px_14px_#ffffff] active:shadow-[inset_4px_4px_8px_#d1d5db,inset_-4px_-4px_8px_#ffffff] border-none",outline:"bg-transparent border-2 border-blue-500 text-blue-600 shadow-none hover:bg-blue-50 active:bg-blue-100",ghost:"bg-transparent text-slate-600 hover:bg-slate-100 hover:shadow-none active:bg-slate-200",danger:"bg-gradient-to-br from-red-500 to-red-600 text-white shadow-[5px_5px_10px_rgba(239,68,68,0.3),-5px_-5px_10px_rgba(255,255,255,0.1)] hover:shadow-[7px_7px_14px_rgba(239,68,68,0.4),-7px_-7px_14px_rgba(255,255,255,0.2)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2),inset_-4px_-4px_8px_rgba(255,255,255,0.1)] border-none",success:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-[5px_5px_10px_rgba(16,185,129,0.3),-5px_-5px_10px_rgba(255,255,255,0.1)] hover:shadow-[7px_7px_14px_rgba(16,185,129,0.4),-7px_-7px_14px_rgba(255,255,255,0.2)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2),inset_-4px_-4px_8px_rgba(255,255,255,0.1)] border-none"},j={sm:"text-xs px-3 py-1.5 h-8 gap-1.5",md:"text-sm px-4 py-2 h-10 gap-2",lg:"text-base px-6 py-2.5 h-12 gap-2.5"};return t.jsxs("button",{className:`
                ${c}
                ${y[l]}
                ${j[o]}
                ${f?"w-full":""}
                ${i?"cursor-wait opacity-80":""}
                ${x}
            `,disabled:g||i,...b,children:[i&&t.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),!i&&u&&t.jsx("span",{className:"inline-flex",children:u}),r,!i&&h&&t.jsx("span",{className:"inline-flex",children:h})]})};Ye.locale("vi");const aa=r=>{if(!r)return"";const l=[Ye.ISO_8601,"DD/MM/YYYY HH:mm:ss","D/M/YYYY H:m:s","YYYY-MM-DD HH:mm:ss"],o=Ye(r,l,"vi",!0);return o.isValid()?o.format("HH:mm DD/MM/YYYY"):""},ss=({icon:r,label:l,value:o,children:i,valueClassName:u="",valueStyle:h})=>t.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[t.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-lg bg-red-100 border border-red-200",children:t.jsx("i",{className:`fas ${r} text-red-600 text-lg`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs text-text-secondary",children:l}),o&&t.jsx("p",{style:h,className:`text-text-primary font-bold break-words ${u}`,children:o}),i]})]}),Ns=({icon:r,label:l,value:o,isLast:i})=>t.jsxs("div",{className:"relative pl-0 md:pl-10 flex flex-row md:block items-center md:items-start gap-3 md:gap-0",children:[t.jsx("div",{className:"relative md:absolute top-0 left-0 flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 border border-red-200 flex items-center justify-center",children:t.jsx("i",{className:`fas ${r} text-red-600`})})}),!i&&t.jsx("div",{className:"hidden md:block absolute top-8 left-[15px] h-full w-px bg-border-secondary"}),t.jsxs("div",{className:"flex flex-col pb-0 md:pb-8",children:[t.jsx("p",{className:"text-xs text-text-secondary",children:l}),t.jsx("p",{className:"text-sm font-semibold text-text-primary break-words",children:o||""})]})]}),so=({vin:r})=>{const[l,o]=m.useState(!1),i=u=>{u.stopPropagation();const h=document.createElement("textarea");h.value=r,document.body.appendChild(h),h.select();try{document.execCommand("copy"),o(!0),setTimeout(()=>o(!1),2e3)}catch(f){console.error("Khng th sao chp VIN:",f)}document.body.removeChild(h)};return t.jsxs("div",{className:"relative p-3 md:p-4 rounded-xl bg-gradient-to-br from-[#CBBACC] to-[#2580B3] shadow-lg group overflow-hidden cursor-pointer",onClick:i,title:"Click  sao chp VIN",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out pointer-events-none"}),t.jsxs("div",{className:"relative z-10 text-center",children:[t.jsx("p",{className:"text-xs text-blue-200 uppercase tracking-widest",children:"S Khung (VIN)"}),t.jsx("p",{className:"text-white font-mono tracking-wider text-xl md:text-2xl break-all text-shadow-md font-bold",children:r})]}),t.jsx("button",{onClick:i,className:"absolute top-3 right-3 w-9 h-9 bg-white/10 rounded-full flex items-center justify-center text-blue-200 hover:bg-white/20 hover:text-white transition-all duration-200 z-20",title:"Sao chp VIN",children:t.jsx("i",{className:`fas transition-all ${l?"fa-check-circle text-green-400":"fa-copy"}`})})]})},ao=({order:r,onClose:l,orderList:o,onNavigate:i,onCancel:u,onRequestInvoice:h,onSupplement:f,onRequestVC:x,onConfirmVC:g,onEdit:b})=>{const c=ct(),[y,j]=m.useState(null),w=new Date>=new Date("2026-01-05T00:00:00"),S={modalBg:"#FFFBE6",borderColor:"#DA251D",headerBg:"#DA251D",headerText:"#FFCD00"},[T,N]=m.useState(null),[D,M]=m.useState(null);if(!r)return null;const Y=(r["Kt qu"]||"cha ghp").toLowerCase().trim().normalize("NFC"),A=(r["Trng thi VC"]||"").toLowerCase().trim().normalize("NFC"),I=A||Y,$=["cha ghp"," ghp"].includes(Y),V=Y===" ghp",E=Y==="yu cu b sung",_=!!b&&![" xut ha n"," hy","ch k ha n"].includes(Y),L=(Y===" xut ha n"||A==="t chi ycvc")&&!["yu cu vinclub","ch duyt ycvc","ch xc thc vc (tvbh)"," c vc"].includes(A),H=I==="ch xc thc vc (tvbh)",z=!!r.LinkHoaDonDaXuat,R=async(P,C)=>{j(P);try{await C(r),l()}catch(U){console.error(U)}finally{j(null)}},Q=r["Trng thi VC"]||r["Kt qu"]||"Cha ghp",q=Q.toLowerCase().includes(" hy")||Q.toLowerCase().includes("t chi"),ee=o.findIndex(P=>P["S n hng"]===r["S n hng"]),ie=ee>0,oe=ee<o.length-1;let xe="";if(r["Thi gian ghp"]){const P=[Ye.ISO_8601,"DD/MM/YYYY HH:mm:ss","D/M/YYYY H:m:s","YYYY-MM-DD HH:mm:ss"],C=Ye(r["Thi gian ghp"],P,"vi",!0);if(C.isValid()){const U=Ye().startOf("day"),te=C.startOf("day"),de=U.diff(te,"days");xe=`${Math.max(0,de)} ngy`}}const W=50,K=P=>{M(null),N(P.targetTouches[0].clientX)},F=P=>{M(P.targetTouches[0].clientX)},v=()=>{if(!T||!D)return;const P=T-D,C=P>W,U=P<-W;C&&oe?i("next"):U&&ie&&i("prev")};return t.jsxs("div",{className:"fixed inset-0 bg-black/70 z-[60] flex items-center justify-center p-0 md:p-4 transition-opacity duration-300",onClick:l,children:[ie&&t.jsx("button",{onClick:P=>{P.stopPropagation(),i("prev")},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 text-white rounded-full flex items-center justify-center text-2xl hover:bg-white/40 transition-colors z-10 hidden md:flex",title:"Yu cu trc",children:t.jsx("i",{className:"fas fa-chevron-left"})}),t.jsxs("div",{className:"bg-surface-ground w-full md:max-w-5xl h-[100dvh] md:h-auto md:max-h-[85vh] rounded-none md:rounded-2xl shadow-2xl flex flex-col transition-all duration-300 transform scale-100 opacity-100 relative overflow-hidden",onClick:P=>P.stopPropagation(),style:{...c,backgroundColor:w?S.modalBg:void 0,border:w?`2px solid ${S.borderColor}`:void 0},onTouchStart:K,onTouchMove:F,onTouchEnd:v,children:[t.jsxs("header",{className:"flex-shrink-0 flex items-start justify-between p-3 md:p-5 border-b border-border-primary relative z-10",style:w?{backgroundColor:S.headerBg,borderBottomColor:"#FFD700"}:{},children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-text-primary",style:w?{color:S.headerText,textShadow:"1px 1px 2px rgba(0,0,0,0.3)"}:{},children:"Chi Tit Yu Cu"}),t.jsx("p",{className:"text-sm mt-1 font-mono text-text-secondary",style:w?{color:"#FFE4B5"}:{},children:r["S n hng"]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(nn,{status:Q}),t.jsx("button",{onClick:l,className:"w-9 h-9 flex-shrink-0 rounded-full flex items-center justify-center transition-colors hover:bg-white/20 text-text-primary",style:w?{color:S.headerText}:{},"aria-label":"ng",children:t.jsx("i",{className:"fas fa-times text-xl"})})]})]}),t.jsxs("main",{className:"overflow-y-auto flex-grow min-h-0 p-3 md:p-6 grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 relative z-10",children:[t.jsxs("div",{className:"md:col-span-1 bg-surface-card p-5 rounded-lg border border-border-primary shadow-sm flex flex-col gap-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 md:block md:space-y-4",children:[t.jsx(ss,{icon:"fa-user-circle",label:"Tn khch hng",value:r["Tn khch hng"],valueClassName:"uppercase text-xs md:text-base"}),t.jsx(ss,{icon:"fa-user-tie",label:"T vn bn hng",value:r["Tn t vn bn hng"],valueClassName:"text-xs md:text-base"})]}),t.jsxs("div",{className:"border-t border-border-primary pt-6",children:[t.jsx("h4",{className:"font-semibold text-text-primary mb-4",children:"Mc Thi Gian"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 md:flex md:flex-col md:gap-0",children:[t.jsx(Ns,{icon:"fa-file-invoice-dollar",label:"Ngy cc",value:aa(r["Ngy cc"])}),t.jsx(Ns,{icon:"fa-paper-plane",label:"Ngy yu cu",value:aa(r["Thi gian nhp"])}),t.jsx(Ns,{icon:"fa-link",label:"Ngy ghp VIN",value:aa(r["Thi gian ghp"])}),t.jsx(Ns,{icon:"fa-hourglass-half",label:"S ngy  ghp",value:xe,isLast:!0})]})]})]}),t.jsxs("div",{className:"md:col-span-2 space-y-6",children:[q&&r["Ghi ch hy"]&&t.jsx("div",{className:"p-4 rounded-lg bg-danger-bg border border-danger/30",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("i",{className:"fas fa-exclamation-triangle text-danger text-xl mr-4 mt-1"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-danger",children:"Yu cu  b hy"}),t.jsxs("p",{className:"text-sm text-red-800 mt-1",children:["L do: ",r["Ghi ch hy"]]})]})]})}),r.VIN&&t.jsx(so,{vin:r.VIN}),t.jsxs("div",{className:"bg-surface-card p-5 rounded-lg border border-border-primary shadow-sm",children:[t.jsx("h3",{className:"font-bold text-lg text-text-primary mb-4",children:"Thng Tin Xe"}),t.jsx("div",{className:"flex items-center justify-center h-24 md:h-48 mb-4 rounded-lg p-2",children:t.jsx(la,{model:r["Dng xe"],exteriorColor:r["Ngoi tht"],className:"h-full w-auto object-contain",alt:r["Dng xe"]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(ss,{icon:"fa-car-side",label:"Dng xe & Phin bn",value:`${r["Dng xe"]} - ${r["Phin bn"]}`,valueClassName:"text-xs md:text-base"}),t.jsx(ss,{icon:"fa-palette",label:"Ngoi tht",value:r["Ngoi tht"],valueStyle:rn(r["Ngoi tht"]),valueClassName:"text-xs md:text-base"}),t.jsx(ss,{icon:"fa-chair",label:"Ni tht",value:r["Ni tht"],valueStyle:Jl(r["Ni tht"]),valueClassName:"text-xs md:text-base"})]})]})]})]}),t.jsxs("footer",{className:"flex-shrink-0 flex items-center justify-end flex-wrap gap-2 md:gap-4 p-3 md:p-5 border-t border-red-200 bg-orange-50 rounded-b-2xl relative z-10",children:[t.jsx(Z,{onClick:l,variant:"secondary",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",style:w?{backgroundColor:"#FFD700",color:"#DA251D"}:{},children:"ng"}),z&&t.jsx(Z,{onClick:()=>window.open(r.LinkHoaDonDaXuat,"_blank"),variant:"secondary",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:t.jsx("i",{className:"fas fa-download"}),style:w?{backgroundColor:"#FFD700",color:"#DA251D"}:{},children:"Ti Ha n"}),_&&t.jsx(Z,{onClick:()=>R("edit",b),variant:"secondary",isLoading:y==="edit",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:y!=="edit"?t.jsx("i",{className:"fas fa-pencil-alt"}):void 0,style:w?{backgroundColor:"#FFD700",color:"#DA251D"}:{},children:"Chnh Sa"}),$&&t.jsx(Z,{onClick:()=>R("cancel",u),variant:"danger",isLoading:y==="cancel",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:y!=="cancel"?t.jsx("i",{className:"fas fa-trash-alt"}):void 0,style:w?{backgroundColor:"#8B0000",color:"#FFD700"}:{},children:"Hy Yu Cu"}),V&&t.jsx(Z,{onClick:()=>R("requestInvoice",h),variant:"primary",isLoading:y==="requestInvoice",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:y!=="requestInvoice"?t.jsx("i",{className:"fas fa-file-invoice-dollar"}):void 0,style:w?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"Y/C Xut Ha n"}),E&&t.jsx(Z,{onClick:()=>R("supplement",f),variant:"primary",isLoading:y==="supplement",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:y!=="supplement"?t.jsx("i",{className:"fas fa-edit"}):void 0,style:w?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"B Sung File"}),L&&t.jsx(Z,{onClick:()=>R("requestVC",x),variant:"primary",isLoading:y==="requestVC",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:y!=="requestVC"?t.jsx("i",{className:"fas fa-id-card"}):void 0,style:w?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"Y/C Cp VC"}),H&&t.jsx(Z,{onClick:()=>R("confirmVC",g),variant:"primary",isLoading:y==="confirmVC",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:y!=="confirmVC"?t.jsx("i",{className:"fas fa-check"}):void 0,style:w?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"Xc Thc UNC VC"})]})]}),oe&&t.jsx(Z,{onClick:P=>{P.stopPropagation(),i("next")},variant:"ghost",className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 text-white rounded-full flex items-center justify-center text-2xl hover:bg-white/40 transition-colors z-10 hidden md:flex !p-0",title:"Yu cu tip theo",children:t.jsx("i",{className:"fas fa-chevron-right"})})]})},no=({order:r,onClose:l,onConfirm:o})=>{const[i,u]=m.useState(""),[h,f]=m.useState(!1),x=ct(),g=()=>{if(!i.trim()){alert("Vui lng nhp l do hy.");return}f(!0),o(r,i)};return t.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("div",{className:"bg-surface-card w-full md:max-w-md h-[100dvh] md:h-auto rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:b=>b.stopPropagation(),style:x,children:[t.jsxs("header",{className:"relative flex flex-col items-center justify-center p-6 text-center bg-surface-card border-b border-border-primary",children:[t.jsx("div",{className:"animate-fade-in-down",children:t.jsx("h2",{className:"text-xl font-bold text-danger",children:"Xc Nhn Hy Yu Cu"})}),t.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 space-y-4 custom-scrollbar",children:[t.jsxs("p",{className:"text-sm text-text-secondary",children:["Bn c chc chn mun hy yu cu cho n hng ",t.jsx("strong",{className:"font-mono text-text-primary",children:r["S n hng"]})," ca khch hng ",t.jsx("strong",{className:"text-text-primary",children:r["Tn khch hng"]}),"?"]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"cancel-reason",className:"block text-sm font-medium text-text-primary mb-2",children:"L do hy (bt buc)"}),t.jsx("textarea",{id:"cancel-reason",rows:3,value:i,onChange:b=>u(b.target.value),className:"w-full bg-surface-card border-border-primary rounded-lg shadow-sm p-2 focus:border-accent-primary transition focus:shadow-glow-accent focus:outline-none",placeholder:"VD: Khch hng i , sai thng tin..."})]})]})}),t.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end items-center gap-3 bg-surface-card relative z-10",children:[t.jsx(Z,{onClick:l,disabled:h,variant:"secondary",size:"sm",leftIcon:t.jsx("i",{className:"fas fa-times"}),children:"Hy"}),t.jsx(Z,{onClick:g,disabled:h,variant:"danger",size:"sm",isLoading:h,leftIcon:t.jsx("i",{className:"fas fa-trash-alt"}),children:"Xc Nhn Hy"})]})]})})},cn="/ordermanagement/assets/pdf.worker.min-qwK7q_zL.mjs";Ul.workerSrc=cn;console.log("PDF Worker configured:",cn);const dn=(r,l={})=>new Promise((o,i)=>{if(!r.type.startsWith("image/"))return o(r);const{maxWidth:u=1920,maxHeight:h=1920,quality:f=.8}=l,x=new FileReader;x.onload=g=>{var c;const b=new Image;b.onload=()=>{let{width:y,height:j}=b;y>j?y>u&&(j=Math.round(j*u/y),y=u):j>h&&(y=Math.round(y*h/j),j=h);const w=document.createElement("canvas");w.width=y,w.height=j;const S=w.getContext("2d");if(!S)return i(new Error("Khng th ly context ca canvas."));S.drawImage(b,0,0,y,j),w.toBlob(T=>{if(!T)return i(new Error("To blob t canvas tht bi."));const N=r.name.substring(0,r.name.lastIndexOf("."))+".jpg",D=new File([T],N,{type:"image/jpeg",lastModified:Date.now()});o(D)},"image/jpeg",f)},b.onerror=y=>i(y),b.src=(c=g.target)==null?void 0:c.result},x.onerror=g=>i(g),x.readAsDataURL(r)}),ro=async(r,l)=>{if(typeof jspdf>"u")return console.error("jsPDF library not found. Skipping compression."),r;try{console.log(`Starting PDF compression for: ${r.name} (${(r.size/1024/1024).toFixed(2)} MB)`);const o=await r.arrayBuffer(),u=await Bl({data:o}).promise,h=u.numPages;console.log(`PDF has ${h} pages.`);const{jsPDF:f}=jspdf,x=new f,g=1.5,b=.5,c=16777216,y=4096;for(let S=1;S<=h;S++){if(l){const E=Math.round(S/h*100);l(E)}const T=await u.getPage(S);let N=g,D=T.getViewport({scale:N});for(;D.width*D.height>c||D.width>y||D.height>y;)N*=.8,D=T.getViewport({scale:N}),console.warn(`Page ${S} is too large for canvas. Reduced scale to ${N.toFixed(2)}`);const M=document.createElement("canvas"),Y=M.getContext("2d");if(M.height=D.height,M.width=D.width,!Y)continue;await T.render({canvasContext:Y,viewport:D,canvas:M}).promise;const A=M.toDataURL("image/jpeg",b),I=D.width*.264583,$=D.height*.264583,V=I>$?"l":"p";S===1&&x.deletePage(1),x.addPage([I,$],V),x.addImage(A,"JPEG",0,0,I,$)}const j=x.output("arraybuffer"),w=new File([j],r.name,{type:"application/pdf",lastModified:Date.now()});return console.log(`Compression complete. New size: ${(w.size/1024/1024).toFixed(2)} MB`),w.size<r.size?w:(console.log("Compressed file is larger than original. Keeping original."),r)}catch(o){return console.error("Error during PDF compression:",o),r}},io=(r,l,o,i,u,h)=>{let f=parseInt(r==null?void 0:r.trim(),10),x=-1,g=parseInt(o==null?void 0:o.trim(),10),b=parseInt((i==null?void 0:i.trim())||"00",10),c=parseInt((u==null?void 0:u.trim())||"00",10),y=parseInt((h==null?void 0:h.trim())||"00",10);if(isNaN(f)||isNaN(g)||isNaN(b)||isNaN(c)||isNaN(y))return null;const j=l==null?void 0:l.trim().toLowerCase().replace(/[.,]/g,""),w={1:1,"thng 1":1,"thg 1":1,t1:1,jan:1,january:1,2:2,"thng 2":2,"thg 2":2,t2:2,feb:2,february:2,3:3,"thng 3":3,"thg 3":3,t3:3,mar:3,march:3,4:4,"thng 4":4,"thg 4":4,t4:4,apr:4,april:4,5:5,"thng 5":5,"thg 5":5,t5:5,may:5,6:6,"thng 6":6,"thg 6":6,t6:6,jun:6,june:6,7:7,"thng 7":7,"thg 7":7,t7:7,jul:7,july:7,8:8,"thng 8":8,"thg 8":8,t8:8,aug:8,august:8,9:9,"thng 9":9,"thg 9":9,t9:9,sep:9,september:9,10:10,"thng 10":10,"thg 10":10,t10:10,oct:10,october:10,11:11,"thng 11":11,"thg 11":11,t11:11,nov:11,november:11,12:12,"thng 12":12,"thg 12":12,t12:12,dec:12,december:12},T=Object.keys(w).sort((M,Y)=>Y.length-M.length).find(M=>j.includes(M));if(T)x=w[T];else{const M=parseInt(j,10);if(!isNaN(M)&&M>=1&&M<=12)x=M;else return null}if(g<100){const M=new Date().getFullYear(),Y=Math.floor(M/100)*100;g+=Y,g>M+5&&(g-=100)}if(g<2e3||g>new Date().getFullYear()+5||x<1||x>12||f<1||f>31||b<0||b>23||c<0||c>59||y<0||y>59)return null;const N=new Date(g,x-1,f,b,c,y);if(N.getFullYear()!==g||N.getMonth()!==x-1||N.getDate()!==f)return null;const D=M=>M.toString().padStart(2,"0");return`${g}-${D(x)}-${D(f)}T${D(b)}:${D(c)}:${D(y)}`},lo=async(r,l)=>{if(typeof Tesseract>"u")throw new Error("Th vin Tesseract cha ti.");try{l("ang nhn dng... (0%)");const{data:{text:o}}=await Tesseract.recognize(r,"vie+eng",{logger:c=>{c.status==="recognizing text"&&l(`ang nhn dng... (${Math.round(c.progress*100)}%)`)}});l("ang tm ngy gi...");let i=o.replace(/\n+/g," ");i=i.replace(/(\d{1,2})\s*(gi|h|hr|g)\s*(\d{1,2})\s*(?:pht|phut|ph|p|min|m)?\s*(?:(\d{1,2})\s*(?:giy|giay|s|sec)?)?/gi,(c,y,j,w,S)=>`${y}:${w}${S?":"+S:""}`),i=i.replace(/(\d{1,2})\s*(?:gi|h|hr|g)\s*(\d{1,2})(?!\s*(?:pht|phut|ph|p|min|m))/gi,"$1:$2"),i=i.replace(/(\d{1,2})\s*(pht|phut|ph|p|min|m)\s*(\d{1,2})/gi,"$1:$2"),i=i.replace(/(\d{1,2})\s*:\s*(\d{1,2})\s*(?:pht|phut|ph|p|min|m)/gi,"$1:$2"),i=i.replace(/(\d{1,2})\s*(pht|phut|ph|p|min|m)/gi,"$1"),i=i.replace(/(\d{1,2})\s*(giy|giay|s|sec)/gi,"$1"),i=i.replace(/\s*:\s*/g,":").replace(/\s*-\s*/g,"-").replace(/\s*\/\s*/g,"/").replace(/\s*\.\s*/g,"."),i=i.replace(/(\d{1,2})([\/.-])(\d{1,2})\2(\d{2})(?!\d)/g,(c,y,j,w,S)=>{const T=new Date().getFullYear(),N=parseInt(S,10);let D;return N>T%100+15&&N<=99?D=1900+N:D=Math.floor(T/100)*100+N,`${y}/${w}/${D}`}),i=i.replace(/(\d{1,2})\.(\d{1,2})\/(\d{1,2})\/(\d{4})/g,"$2/$3/$4"),i=i.replace(/(\d{1,2})\/(\d{1,2})\.(\d{1,2})\/(\d{4})/g,"$1/$2/$4"),i=i.replace(/[\u200B-\u200D\uFEFF]/g,"");let u=null,h=-1,f={};const x="(?:thng|thg|t|Thng|Thg\\.?|T\\.)?\\s*\\d{1,2}[\\.,]{0,2}|[A-Za-z-]{3,}",g="[\\s\\/\\.-]+",b=[{regex:new RegExp("Ngy in:?\\s*(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})\\s+(\\d{1,2}):(\\d{1,2}):(\\d{1,2})","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:20,name:"BIDV Print Date (Ngy in)"},{regex:new RegExp("\\b(\\d{2})(\\d{2})(\\d{2})-(\\d{2}):(\\d{2}):(\\d{2})\\b","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:18,name:"DDMMYY-HH:MM:SS format"},{regex:new RegExp("(?:Ngy|Date(?: time)?)[:\\s]*?(\\d{1,2})-(\\d{1,2})-(\\d{4})","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:"00",minute:"00",second:"00"}),score:16,name:"BIDV/Specific DD-MM-YYYY with Keyword"},{regex:new RegExp(`(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*-\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:15.5,name:"HH:MM(:SS) - DD/MM/YYYY (MB Bank, etc.)"},{regex:new RegExp("(?:Ngy\\s*chuyn|Ngy\\s*thc hin|Transaction Date)\\s*[:\\s]*?(\\d{1,2})\\s*(?:thng|thg|/|-|\\.)\\s*(\\d{1,2})(?:,\\s*|\\s+|/|-|\\.)(\\d{4})\\s*(?:lc|\\@|at|\\s)\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:15,name:"Techcombank & similar"},{regex:new RegExp("(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})-(\\d{1,2}):(\\d{1,2})","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:"00"}),score:14.9,name:"DD/MM/YYYY-HH:MM (Cleaned Vietinbank iPay style)"},{regex:new RegExp(`\\b(\\d{1,2})${g}(\\d{1,2})${g}(\\d{4})\\s+(\\d{1,2}):(\\d{1,2}):(\\d{1,2})\\b`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:14.8,name:"DD/MM/YYYY HH:MM:SS (Common, Boosted)"},{regex:new RegExp(`(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s+(?:Th\\s*[2-7CNTtBbSsHhNn]{1,7}|Ch\\s*Nht|Mon|Tue|Wed|Thu|Fri|Sat|Sun)?\\s*,?\\s*(?:ngy\\s*|date\\s*)?(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3]||"00",day:c[4],month:c[5],year:c[6]}),score:14.5,name:"HH:MM(:SS) [DayOfWeek] DD/MM/YYYY (VCB)"},{regex:new RegExp(`Chuyn\\s*nhanh\\s*Napas\\s*247\\s*:?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s+(\\d{1,2})${g}(${x})${g}(\\d{4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:14,name:"TPBank Napas"},{regex:new RegExp(`(\\d{4})${g}(\\d{1,2})${g}(\\d{1,2})[\\sT]+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({year:c[1],month:c[2],day:c[3],hour:c[4],minute:c[5],second:c[6]}),score:13.5,name:"YYYY-MM-DD[ T]HH:MM:SS (Sacombank, ISO)"},{regex:new RegExp(`(?:Ngy\\s*thc\\s*hin|Date\\s*of\\s*transaction)\\s*:?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s+(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:13,name:"Ngy thc hin HH:MM:SS DD/MM/YYYY"},{regex:new RegExp(`(?:vo\\s*lc|lc|at)\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})\\s*,?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:12.5,name:"(vo) lc/at DD/MM/YYYY HH:MM:SS (BIDV)"},{regex:new RegExp(`(?:Thi\\s*gian|Time)\\s*:?\\s*(\\d{1,2}):(\\d{1,2}):(\\d{1,2}),\\s*(?:ngy\\s*)?(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:12,name:"SHB Thi gian/Time"},{regex:new RegExp(`(\\d{1,2})${g}(${x})${g}(\\d{2})(?!\\d)\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:11.2,name:"DD/MM/YY HH:MM:SS (2-digit year)"},{regex:new RegExp(`(?:Ngy\\s*giao dch|GD|lp lnh|to|thanh ton|chuyn tin|hch ton|lp|hiu lc|ghi nhn|transaction|payment|value)\\s*:?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})(?:\\s*,?\\s*(?:lc|at|@|thi gian|time)|\\s*-)?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:11,name:"Ngy GD/Keyword DD/MM/YYYY lc/time HH:MM(:SS)"},{regex:new RegExp(`(?:Thi\\s*gian|Time)\\s*(?:lp|to|giao dch|thanh ton|GD|thc hin|record)\\s*:?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*(?:ngy|,|on)?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:10,name:"Thi gian/Time ... HH:MM:SS ngy/on DD/MM/YYYY"},{regex:new RegExp(`(?<![:\\d\\w])(\\d{1,2})${g}(${x})${g}(\\d{4})\\s+(\\d{1,2}):(\\d{1,2})(?![:\\d])`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:"00"}),score:9.5,name:"DD/MM/YYYY HH:MM (Standalone, Vietinbank)"},{regex:new RegExp(`(?:Ngy\\s*)?(\\d{1,2})\\s*(?:thng|Thg\\.?|T)?\\s*(${x})\\s*(?:nm|nam)?\\s*(\\d{2,4})\\s*(?:vo\\s*lc|lc|Time|@)?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:9,name:"Ngy DD thng MM nm Yokohama lc HHMMSS"},{regex:new RegExp(`(${x})\\s+(\\d{1,2}),\\s*(\\d{4})\\s+(?:at|lc)\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*(AM|PM)?`,"i"),parser:c=>{let y=parseInt(c[4],10);return c[7]&&c[7].toUpperCase()==="PM"&&y<12&&(y+=12),c[7]&&c[7].toUpperCase()==="AM"&&y===12&&(y=0),{month:c[1],day:c[2],year:c[3],hour:String(y),minute:c[5],second:c[6]}},score:8.8,name:"Month DD, YYYY at HH:MM(:SS) AM/PM"},{regex:new RegExp(`(?:Ngy|Date\\s*Time)?:?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})[\\s,T]+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:8.5,name:"DD/MM/YYYY[ T]HH:MM:SS (Generic)"},{regex:new RegExp(`(?:Vo\\s*lc|Time):?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?,\\s*(?:ngy)?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:8,name:"Vo lc HH:MM, ngy DD/MM/YYYY"},{regex:new RegExp(`(?:Date:|Ngy:)?\\s*(\\d{4})${g}(${x})${g}(\\d{1,2})[\\sT,]+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({year:c[1],month:c[2],day:c[3],hour:c[4],minute:c[5],second:c[6]}),score:7.5,name:"YYYY/MM/DD[ T]HH:MM:SS (Generic)"},{regex:new RegExp(`(?:^|\\s|[^\\d\\w.,])(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?(?!=\\d{3}[,\\.])\\s+(?:ngy\\s*)?(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:7,name:"HH:MM:SS DD/MM/YYYY (Improved)"},{regex:new RegExp(`(\\d{1,2})${g}(${x})${g}(\\d{2,4})\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*(AM|PM|SA|CH)`,"i"),parser:c=>{let y=parseInt(c[4],10);const j=c[7]?c[7].toUpperCase():null;return j&&((j==="PM"||j==="CH")&&y<12&&(y+=12),(j==="AM"||j==="SA")&&y===12&&(y=0)),{day:c[1],month:c[2],year:c[3],hour:String(y),minute:c[5],second:c[6]}},score:6.5,name:"DD/MM/YYYY HH:MM(:SS) AM/PM/SA/CH"},{regex:new RegExp(`(?:Ngy\\s*giao dch|GD|lp lnh|to|thanh ton|chuyn tin|hch ton|lp|hiu lc|ghi nhn|transaction|payment|value)\\s*:?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})(?!\\s*[:\\d])(?!\\s*\\d{1,2}\\s*VND)`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:"00",minute:"00",second:"00"}),score:5,name:"Date only with keyword"},{regex:new RegExp(`(?<![\\d:\\/\\.-])(\\d{1,2})([\\/\\.-])(${x})\\2(\\d{2,4})(?![.,:\\/\\.-]?\\d)(?!\\s*VND|\\s*USD)`,"i"),parser:c=>({day:c[1],month:c[3],year:c[4],hour:"00",minute:"00",second:"00"}),score:4,name:"Date only DD/MM/YYYY (generic)"},{regex:new RegExp("(?:Ngy|Date):?\\s*(\\d{2})(\\d{2})(\\d{4})(?!\\d)","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:"00",minute:"00",second:"00"}),score:3.5,name:"Date only DDMMYYYY with keyword"},{regex:new RegExp("(?:Ngy|Date):?\\s*(\\d{4})(\\d{2})(\\d{2})(?!\\d)","i"),parser:c=>({year:c[1],month:c[2],day:c[3],hour:"00",minute:"00",second:"00"}),score:3,name:"Date only YYYYMMDD with keyword"}];for(const c of b){let y;const j=new RegExp(c.regex.source,c.regex.flags+(c.regex.flags.includes("g")?"":"g"));for(;(y=j.exec(i))!==null;){const w=c.parser(y);if(w){const S=io(w.day,w.month,w.year,w.hour,w.minute,w.second);if(S){if(c.score>h)h=c.score,u=S,f={name:c.name,score:c.score,components:w,match:y,rawText:y[0]};else if(c.score===h){const T=f.components&&(f.components.hour!=="00"||f.components.minute!=="00");w.hour&&(w.hour!=="00"||w.minute!=="00")&&!T&&(u=S,f={name:c.name,score:c.score,components:w,match:y,rawText:y[0]})}}}}if(h>=15&&u)break}return u}catch(o){throw console.error("Li OCR:",o),new Error("X l nh tht bi.")}},rs=r=>{if(!r||typeof r!="string")return null;r.includes("google.com");const l=r.match(/\/d\/([a-zA-Z0-9_-]{25,})|[?&]id=([a-zA-Z0-9_-]{25,})/);return l?l[1]||l[2]:null},Wa=(r,l)=>{if(r&&r.startsWith("data:image"))return r;const o=rs(r);if(o){const i=l?`w${l}`:"w1920";return`https://drive.google.com/thumbnail?id=${o}&sz=${i}`}return r},oo=r=>{const l=rs(r);return l?`https://drive.google.com/uc?export=view&id=${l}`:r},un=r=>{const l=rs(r);return l?`https://drive.google.com/uc?export=download&id=${l}`:r},co=(r,l)=>{if(!r||!l)return"image.jpg";const i=(h=>h.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"D").replace(//g,"d"))(r).replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""),u=l.replace(/\s+/g,"_");return`${i}_${u}.jpg`},uo=({url:r,width:l,height:o,className:i})=>{const[u,h]=m.useState(!0),[f,x]=m.useState(!1),[g,b]=m.useState(!1);!l&&!o&&(l=100);const c=m.useMemo(()=>rs(r),[r]),y=m.useMemo(()=>!!c,[c]),j=m.useMemo(()=>r&&(c?un(r):r),[r,c]),w=m.useMemo(()=>c?`https://drive.google.com/file/d/${c}/preview`:null,[c]);function S(){h(!1),x(!1)}function T(N){console.error("PDF load error:",N),y&&!g?(console.log("Switching to iframe fallback for Google Drive PDF"),b(!0),h(!1)):(x(!0),h(!1))}return f?t.jsx("div",{className:`flex items-center justify-center bg-gray-100 text-red-400 ${i}`,style:{width:l||"auto",height:o||(l?l*1.4:"auto")},children:t.jsx("i",{className:"fas fa-file-pdf text-2xl"})}):g&&w?t.jsxs("div",{className:`relative overflow-hidden ${i}`,style:{width:l||"100%",height:o||"100%"},children:[t.jsx("iframe",{src:w,className:"w-full h-full border-0 pointer-events-none scale-[2] origin-top-left",title:"PDF Preview",tabIndex:-1}),t.jsx("div",{className:"absolute inset-0 bg-transparent"})]}):t.jsxs("div",{className:`relative overflow-hidden ${i}`,children:[u&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:t.jsx("i",{className:"fas fa-spinner fa-spin text-gray-400"})}),t.jsx(Wl,{file:j,onLoadSuccess:S,onLoadError:T,loading:t.jsx("div",{className:"w-full h-full bg-gray-100"}),className:"flex items-center justify-center",children:t.jsx(Gl,{pageNumber:1,width:l,height:o,renderTextLayer:!1,renderAnnotationLayer:!1})})]})},ho=_e.memo(uo),lt=({id:r,label:l,onFileSelect:o,required:i=!1,accept:u,disableCompression:h=!1})=>{const[f,x]=m.useState(null),[g,b]=m.useState(null),c=m.useRef(null),[y,j]=m.useState(!1),[w,S]=m.useState(!1),[T,N]=m.useState("");m.useEffect(()=>{if(f){const _=URL.createObjectURL(f);return b(_),()=>URL.revokeObjectURL(_)}else b(null)},[f]);const D=m.useCallback(_=>{if(u){const L=_.type;if(!u.split(",").map(R=>R.trim()).some(R=>R.endsWith("/*")?L.startsWith(R.slice(0,-1)):R.startsWith(".")?_.name.toLowerCase().endsWith(R):L===R))return alert(`Loi tp khng hp l. Vui lng chn tp c nh dng: ${u}`),!1}return!0},[u]),M=m.useCallback(async _=>{if(_){if(!D(_)){x(null),o(null),c.current&&(c.current.value="");return}S(!0);try{let L;_.type.startsWith("image/")?h?L=_:(N("ang nn nh..."),L=await dn(_)):_.type==="application/pdf"?h?L=_:(N("ang ti u file..."),L=await ro(_,H=>{N("ang ti u file...")})):L=_,x(L),o(L)}catch(L){console.error("File processing failed:",L),alert("Li x l file. Vui lng th li."),x(null),o(null)}finally{S(!1)}}else x(null),o(null)},[o,D]),Y=_=>{var L;M(((L=_.target.files)==null?void 0:L[0])||null)},A=_=>{_.stopPropagation(),M(null),c.current&&(c.current.value="")},I=_=>{_.stopPropagation(),_.preventDefault(),S(!1),x(null),o(null),c.current&&(c.current.value="")},$=_=>{_.preventDefault(),_.stopPropagation(),_.type==="dragenter"||_.type==="dragover"?j(!0):_.type==="dragleave"&&j(!1)},V=_=>{_.preventDefault(),_.stopPropagation(),j(!1),_.dataTransfer.files&&_.dataTransfer.files[0]&&M(_.dataTransfer.files[0])},E=()=>u?u.includes(".pdf")?"Ch chp nhn file PDF":u.includes("image/*")?"Ch chp nhn file nh (PNG, JPG)":`Chp nhn: ${u}`:"PDF, PNG, JPG, DOCX, etc.";return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:"block text-sm font-medium text-text-primary mb-2",children:[l,i&&t.jsx("span",{className:"text-danger ml-1",children:"*"})]}),f?t.jsxs("div",{className:"relative group overflow-hidden rounded-lg border border-accent-primary/20 bg-surface-accent transition-all duration-300 hover:shadow-md",children:[t.jsxs("div",{className:"w-full h-48 bg-surface-ground flex items-start justify-center overflow-hidden relative border-b border-accent-primary/10",children:[f.type==="application/pdf"&&g?t.jsx(ho,{url:g,width:500,className:"w-full h-full flex justify-center"}):t.jsx("i",{className:"fas fa-file-alt text-accent-primary text-6xl opacity-50 self-center"}),t.jsx("div",{className:"absolute top-2 right-2 z-10",children:t.jsx(Z,{type:"button",onClick:A,disabled:w,variant:"ghost",className:"w-8 h-8 bg-black/50 text-white rounded-full flex items-center justify-center hover:bg-danger hover:text-white transition-colors backdrop-blur-sm !p-0 shadow-sm",children:t.jsx("i",{className:"fas fa-times"})})})]}),t.jsxs("div",{className:"p-3 bg-surface-card flex items-center justify-between gap-2",children:[t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-sm font-bold text-text-primary truncate",title:f.name,children:f.name}),t.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:[(f.size/1024).toFixed(1)," KB"]})]}),t.jsxs(Z,{type:"button",onClick:A,disabled:w,variant:"ghost",className:"text-white hover:text-white bg-danger hover:bg-danger-hover text-xs py-1.5 px-3 rounded shadow-sm flex-shrink-0",children:[t.jsx("i",{className:"fas fa-trash-alt mr-1"}),"Xa"]})]})]}):t.jsx("div",{onClick:()=>{var _;return(_=c.current)==null?void 0:_.click()},onDragEnter:$,onDragLeave:$,onDragOver:$,onDrop:V,className:`mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${y?"border-accent-primary bg-surface-accent":"border-border-primary hover:border-accent-primary"}`,children:t.jsxs("div",{className:"space-y-1 text-center",children:[t.jsx("i",{className:"fas fa-folder-open text-text-placeholder text-3xl"}),t.jsxs("div",{className:"flex text-sm text-text-secondary",children:[t.jsxs("span",{className:"relative rounded-md font-semibold text-accent-primary hover:text-accent-primary-hover",children:[t.jsx("span",{children:"Ti ln mt file"}),t.jsx("input",{ref:c,id:r,name:r,type:"file",className:"sr-only",onChange:Y,accept:u})]}),t.jsx("p",{className:"pl-1",children:"hoc ko v th"})]}),t.jsx("p",{className:"text-xs text-text-placeholder",children:E()})]})}),w&&t.jsxs("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center rounded-lg z-20",children:[t.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-accent-primary"}),t.jsx("p",{className:"text-sm font-semibold text-accent-primary mt-2 mb-3",children:T||"ang x l..."}),t.jsx(Z,{type:"button",onClick:I,variant:"ghost",className:"text-xs text-danger hover:bg-danger-bg px-3 py-1 rounded-full border border-danger/30",children:"Hy b"})]})]})},is="https://script.google.com/macros/s/AKfycbx3wQsvkIz4fsxyez1B7Qr8RpEt6MFAlfw6qGWMP1PZ378Fi0hjEva0iQlHnFPa4A6gJQ/exec",Ze="PHM THNH NHN",hn=["January","February","March","April","May","June","July","August","September","October","November","December"],as={"VF 3":["Base","Base Tiu chun 2","Plus"],"VF 5":["Plus"],"VF 6":["Eco Tiu chun","Eco Nng cp","Plus Tiu chun","Plus Nng cp","Plus_US","Plus Tiu chun 1","Plus Tiu chun 2"],"VF 7":["Eco","Eco_HUD","Plus_Metal Nng cp","Plus_Metal Tiu chun","Plus Tiu chun","Plus Nng cp","Eco Tiu chun 1","Eco Tiu chun 2","Eco_HUD Tiu chun 1","Eco_HUD Tiu chun 2","Plus_Metal Tiu chun 1","Plus_Metal Tiu chun 2","Plus Tiu chun 2","Plus Tiu chun 1","Plus_Metal Tiu chun 1 (FWD)","Plus_Metal Tiu chun 1 (AWD)"],"VF 8":["Eco Tiu chun","Eco Nng cp","Plus"],"VF 9":["Plus_CAP_Metal_3ZONES","Plus_Metal_3ZONES","Eco_3ZONES","Plus_Metal","Plus_CAP_Metal"],HERIO:["HERIO"],NERIO:["NERIO"],LIMO:["LIMO"],MINIO:["MINIO"],"EC Van":["Base","Plus","Plus_Ca trt"]},mn=["Base","Plus","Plus Tiu chun","Plus Nng cp","Eco","Eco_HUD","Eco Tiu chun","Eco Nng cp","Plus_Metal Tiu chun","Plus_Metal Nng cp","Plus_CAP_Metal","Plus_Metal_3ZONES","Eco_3ZONES","Plus_CAP_Metal_3ZONES","HERIO","NERIO","LIMO","MINIO","Plus_US","Plus Tiu chun 1","Plus Tiu chun 2","Eco Tiu chun 1","Eco Tiu chun 2","Eco_HUD Tiu chun 1","Eco_HUD Tiu chun 2","Plus_Metal Tiu chun 1","Plus_Metal Tiu chun 2","Base Tiu chun 2","Plus_Metal Tiu chun 1 (FWD)","Plus_Metal Tiu chun 1 (AWD)","EC Van","Plus_Ca trt"],ot=["Brahminy White (CE18)","Yellow (CE1U)","Sunset ORB (CE1A)","Crimson Red (CE1M)","Vinfast Blue (CE1N)","Neptune Grey (CE14)","Jet Black (CE11)","Electric Blue (CE1J)","Zenith Grey (CE1V)","Jet Black Roof- Summer Yellow Body (111U)","Brahminy White Roof- Aquatic Azure Body (181Y)","Brahminy White Roof- Rose Pink Body (1821)","Brahminy White Roof - Iris Berry Body (181X)","Urbant Mint (CE1W)","Vinbus Green (CE2B)","Deep Ocean (CE1H)","Brahminy White Roof- Summer Yellow Body (181U)","Iris Berry (CE1X)","Zenith Grey-desat Silver Roof (171V)","Urbant Mint Green - Desat Silv (171W)","Ivy Green-desat Silver Roof (1722)","Atlantic Blue-Aquatic Azure Ro (1Y26)","Jet Black-Champagne Creme Roof (2311)","Infinity Blanc _ Silky White R (2418)","Champagne Creme - Matte Champa (2523)","Jet Black - Graphite Roof (2811)","Crimson Velvet - Mystery Bronz (2927)","Ivy_Green_GNE (CE22)","Champagne_Creme_YLG (CE23)","Crimson Red - Jet Black Roof (111M)","Infinity Blanc_Zenith Grey Roof (1v18)","Deep Ocean_Jet Black Roof (111H)","Alantic Blue_Denim Blue Roof (2A26)","Jet Black_Mystery Bronze Roof (2911)","Champagne Creme_Infinity Blanc Roof (1823)","Silver (CE17)","Pink Gold (CE2K)"],na=["Black","Brown","Beige"],fn=[{models:["vf 3","vf 5"],colors:["Black"]},{models:["vf 6","vf 7","vf 8","vf 9"],versions:["plus tiu chun","plus nng cp","plus","plus_metal nng cp","plus_metal tiu chun","plus_cap_metal_3zones","plus_metal_3zones","plus_cap_metal","plus_metal","plus_us","plus tiu chun 1","plus tiu chun 2","plus_metal tiu chun 1","plus_metal tiu chun 2","plus_metal tiu chun 1 (fwd)","plus_metal tiu chun 1 (awd)"],colors:["Black","Brown","Beige"]},{models:["vf 6","vf 7","vf 8","vf 9"],versions:["eco tiu chun","eco nng cp","eco","eco_hud","eco_3zones","eco tiu chun 1","eco tiu chun 2","eco_hud tiu chun 1","eco_hud tiu chun 2"],colors:["Black"]},{models:["herio","nerio","limo","minio","ec van"],colors:["Black","Grey"]}],Ga={vf3:["181u","181y","1821","ce18","ce1j","ce1m","ce1v","ce1w","ce1x"],vf5:["111u","181y","ce11","ce14","ce18","ce1m","ce1v","ce1w","ce1x"],vf6:["ce11","ce14","ce18","ce1h","ce1m","ce1n","ce1v","ce1w"],vf7:["ce11","ce14","ce17","ce18","ce1h","ce1m","ce1n","ce1v","ce1w"],vf8:["ce11","ce14","ce18","ce1h","ce1m","ce1n","ce1v","ce1w","ce22"],vf9:["ce11","ce14","ce17","ce18","ce1h","ce1m","ce1n","ce1w","ce22"],ecvan:["ce18","ce1m","ce1u","ce1w"],herio:["ce11","ce17","ce1m","ce1u"],limo:["ce11","ce17","ce18","ce1m","ce1u"],nerio:["ce11","ce17","ce1m","ce1u"]},ns=r=>new Promise((l,o)=>{const i=new FileReader;i.readAsDataURL(r),i.onload=()=>l(i.result),i.onerror=u=>o(u)}),mo="https://script.google.com/macros/s/AKfycbzElHHCjX_RnObRE3VX42qlz_PnKiF8SvMKieuOwtsV1VlByJXNeZkZ2MvP9fa4ACIgIQ/exec",He=async(r,l=is)=>{var o,i;try{const u=new URLSearchParams;for(const x in r)r[x]!==null&&r[x]!==void 0&&u.append(x,String(r[x]));const h=await axios.post(l,u),f=typeof h.data=="string"?JSON.parse(h.data):h.data;if(f.status!=="SUCCESS")throw new Error(f.message||"API returned an unspecified error.");return f}catch(u){const h=((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.message)||u.message||"An unknown API error occurred.";throw console.error("API service error (POST):",u),new Error(h)}},qe=async(r,l=is)=>{var o,i;try{const u=new URL(l);Object.keys(r).forEach(x=>{r[x]!==void 0&&r[x]!==null&&u.searchParams.append(x,String(r[x]))});const h=await axios.get(u.toString()),f=typeof h.data=="string"?JSON.parse(h.data):h.data;if(f.status!=="SUCCESS")throw new Error(f.message||"API returned an unspecified error.");return f}catch(u){const h=((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.message)||u.message||"An unknown API error occurred.";throw console.error("API service error (GET):",u),new Error(h)}},qa=async()=>{try{const r=sessionStorage.getItem("userEmail");r&&He({action:"recordUserPresence",userEmail:r})}catch(r){console.warn("Failed to record user presence:",r)}},fo=async r=>{const o={action:"getPaginatedData",page:"1",pageSize:"9999",sortBy:"Thi gian nhp",sortOrder:"desc",filters:JSON.stringify({}),isAdmin:"true"};return qe(o)},xo=async()=>qe({action:"getXuathoadonData"}),go=async()=>qe({action:"getChinhSachData"}),vd=async()=>qe({action:"getYeuCauVcData"}),xn=async()=>{const r=sessionStorage.getItem("currentConsultant")||Ze,o={action:"getKhoXeData",currentUser:r,isAdmin:String(r===Ze)};return qe(o)},po=async r=>{const l={action:"holdCar",vin:r,updatedBy:sessionStorage.getItem("currentConsultant")||Ze};return He(l)},yo=async r=>{const l={action:"releaseCar",vin:r,updatedBy:sessionStorage.getItem("currentConsultant")||Ze};return He(l)},bo=async(r,l)=>{const o=await ns(l),i={...r};i.vin&&(i.vin_giu_yeu_cau=i.vin,delete i.vin);const u={...i,thoi_gian_nhap:new Date().toISOString(),action:"addRequest",chic_file_base64:o,chic_file_name:l.name,chic_file_type:l.type};return He(u)},vo=async(r,l)=>{const o={action:"cancelRequest",orderNumber:r,reason:l,cancelledBy:sessionStorage.getItem("currentConsultant")||"Unknown",fromUI:"true"};return He(o)},wo=async(r,l,o,i,u,h)=>{const[f,x]=await Promise.all([ns(l),ns(o)]),g={action:"requestInvoice",orderNumber:r,requestedBy:sessionStorage.getItem("currentConsultant")||"Unknown User",hop_dong_file_base64:f,hop_dong_file_name:l.name,hop_dong_file_type:l.type,denghi_xhd_file_base64:x,denghi_xhd_file_name:o.name,denghi_xhd_file_type:o.type,policy:i,commission:u,vpoint:h};return He(g)},jo=async(r,l,o)=>{const i={action:"updateInvoiceFiles",orderNumber:r,updatedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"};return l&&(i.hop_dong_file_base64=await ns(l),i.hop_dong_file_name=l.name,i.hop_dong_file_type=l.type),o&&(i.denghi_xhd_file_base64=await ns(o),i.denghi_xhd_file_name=o.name,i.denghi_xhd_file_type=o.type),He(i)},No=async(r,l)=>{const o={action:"updateOrderDetails",updatedBy:sessionStorage.getItem("currentConsultant")||"Unknown User",orderNumber:r,...l};return He(o)},ko=async()=>{const r=sessionStorage.getItem("currentConsultant")||"Unknown User",l={action:"getAllArchivedDataForUser",currentUser:r,isAdmin:String(r===Ze)};return qe(l)},_o=async()=>{const r=sessionStorage.getItem("currentConsultant")||Ze,l={action:"getNotifications",currentUser:r,isAdmin:String(r===Ze)};return qe(l)},So=async()=>{const r={action:"markAllNotificationsAsRead",currentUser:sessionStorage.getItem("currentConsultant")||Ze,timestamp:new Date().toISOString()};return He(r)},Co=async r=>{const l={action:"markNotificationAsRead",notificationId:r,currentUser:sessionStorage.getItem("currentConsultant")||Ze,timestamp:new Date().toISOString()};return He(l)},gn=async(r,l)=>{const o=`${r} ${l}`,i=`${mo}?sheet=${o}`;try{const u=await axios.get(i),h=typeof u.data=="string"?JSON.parse(u.data):u.data;return h&&h[o]&&Array.isArray(h[o])||h&&h[o]?h[o]:Array.isArray(h)?h:[]}catch(u){return console.warn(`Error fetching sold data for ${o}:`,u),[]}},pn=(r,l,o,i)=>{let u=new Date().toISOString();if(o){const h=hn.indexOf(o);if(h>-1){const f=i||new Date().getFullYear();u=new Date(f,h,15).toISOString()}}return{"Tn khch hng":String(r[0]||""),"S n hng":String(r[2]||`SOLD-${o}-${i}-${l}`),"Dng xe":String(r[3]||""),"Phin bn":String(r[4]||""),"Ngoi tht":String(r[5]||""),"Ni tht":String(r[6]||""),"Tn t vn bn hng":String(r[7]||""),VIN:String(r[8]||""),"CHNH SCH":String(r[9]||""),"Ngy cc":u,"Thi gian nhp":u,"Thi gian ghp":u,"Kt qu":" xut ha n"}},Do=async(r,l)=>{try{const i=(await gn(r,l)).filter(u=>Array.isArray(u)&&u.length>2&&u[2]).map((u,h)=>pn(u,h,r,l));return{status:"SUCCESS",message:`Successfully fetched data for ${r} ${l}.`,data:i}}catch(o){return{status:"ERROR",message:o instanceof Error?o.message:`An unknown error occurred while fetching data for ${r} ${l}.`}}},Mo=async r=>{try{const l=hn.map(h=>gn(h,r).then(f=>({month:h,data:f}))),u=(await Promise.all(l)).flatMap(({month:h,data:f})=>f.filter(x=>Array.isArray(x)&&x.length>8&&x[8]).map(x=>({row:x,month:h}))).map(({row:h,month:f},x)=>pn(h,x,f,r));return{status:"SUCCESS",message:`Successfully fetched all sold car data for ${r}.`,data:u}}catch(l){return{status:"ERROR",message:l instanceof Error?l.message:"An unknown error occurred while fetching sold cars data."}}},To=async r=>{const l={action:"requestVinClub",...r,requestedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"};return He(l)},Po=async r=>{try{const l=new URLSearchParams;for(const f in r)r[f]!==null&&r[f]!==void 0&&l.append(f,String(r[f]));const o=await axios.post(is,l),i=typeof o.data=="string"?JSON.parse(o.data):o.data;if(!i.success)throw new Error(i.message||"User API returned an unspecified error.");const{success:u,...h}=i;return{status:"SUCCESS",...h}}catch(l){const o=l instanceof Error?l.message:"An unknown user API error occurred.";throw new Error(o)}},Eo=async()=>qe({action:"getTeamData"}),Yo=async()=>qe({action:"getUsers"}),Io=async(r,l)=>{const o=sessionStorage.getItem("currentUser")||"Unknown Admin";return["addUser","updateTeams"].includes(r)?Po({action:r,...l,adminUser:o}):He({action:r,...l,adminUser:o})},wd=async r=>qe({action:"getOrderHistory",orderNumber:r}),jd=async r=>{const l={action:"handleBulkUploadIssuedInvoices",filesData:JSON.stringify(r),uploadedBy:sessionStorage.getItem("currentConsultant")||"Admin"};return He(l)},oa=async r=>{var l,o;try{const i=new URLSearchParams;for(const b in r)r[b]!==void 0&&r[b]!==null&&i.append(b,String(r[b]));const u=await axios.post(is,i),h=typeof u.data=="string"?JSON.parse(u.data):u.data;if(!(h.success===!0||h.status==="SUCCESS"))throw new Error(h.message||"API returned a failure response.");const{success:x,...g}=h;return{status:"SUCCESS",...g}}catch(i){const u=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.message)||i.message||"An unknown API error occurred.";throw console.error("Legacy API service error (POST):",i),new Error(u)}},Fo=async()=>qe({action:"getTestDriveSchedule"}),Nd=async r=>oa({action:"saveTestDriveBooking",...r}),kd=async r=>{const l={action:"submitTestDriveCheckin",soPhieu:r.soPhieu,updatedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"};return r.odoBefore&&(l.odoBefore=r.odoBefore),r.imagesBefore&&(l.imagesBefore=JSON.stringify(r.imagesBefore)),r.odoAfter&&(l.odoAfter=r.odoAfter),r.imagesAfter&&(l.imagesAfter=JSON.stringify(r.imagesAfter)),oa(l)},_d=async r=>oa({action:"deleteTestDriveBooking",soPhieu:r,deletedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"}),Oo=({currentStep:r})=>{const l=["Thng tin BH","Ti chng t","Xc nhn"];return t.jsx("div",{className:"flex items-center justify-center mb-6",children:l.map((o,i)=>{const u=i+1,h=u===r,f=u<r;return t.jsxs(_e.Fragment,{children:[t.jsxs("div",{className:"flex flex-col items-center text-center w-24",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold ${f?"bg-success text-white":h?"bg-accent-primary text-white":"bg-surface-ground border-2 border-border-primary text-text-secondary"}`,children:f?t.jsx("i",{className:"fas fa-check"}):u}),t.jsx("p",{className:`mt-2 text-xs font-semibold transition-colors ${h||f?"text-text-primary":"text-text-secondary"}`,children:o})]}),i<l.length-1&&t.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-colors duration-300 ${f?"bg-success":"bg-border-primary"}`})]},u)})})},Ao=({order:r,onClose:l,onConfirm:o})=>{const[i,u]=m.useState(1),[h,f]=m.useState(null),[x,g]=m.useState(null),[b,c]=m.useState(!1),[y,j]=m.useState(!1),[w,S]=m.useState([]),[T,N]=m.useState(""),[D,M]=m.useState(""),[Y,A]=m.useState([]),[I,$]=m.useState(!0),V=ct();m.useEffect(()=>{(async()=>{try{$(!0);const v=await go();v.status==="SUCCESS"&&Array.isArray(v.data)?A(v.data):(console.error("Failed to fetch sales policies:",v.message),A([]))}catch(v){console.error("Error fetching sales policies:",v),A([])}finally{$(!1)}})()},[]);const E=m.useMemo(()=>{if(!r||!r["Dng xe"]||Y.length===0)return Y.sort();const F=Object.keys(as).map(te=>te.replace(/\s+/g,"").toLowerCase()),v=r["Dng xe"].replace(/\s+/g,"").toLowerCase(),P=Y.filter(te=>te.toLowerCase().replace(/\s+/g,"").includes(v)),C=Y.filter(te=>{const de=te.toLowerCase().replace(/\s+/g,"");return!F.some(Me=>de.includes(Me))}),U=[...new Set([...P,...C])];return U.length>0?U.sort():Y.sort()},[r,Y]);m.useEffect(()=>{E.length>0&&S(F=>F.filter(v=>E.includes(v)))},[E]);const[_,L]=m.useState(0),H=F=>F.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."),z=F=>v=>{const P=v.target.value;F(H(P))},R=F=>F.replace(/\./g,""),Q=w.length>0&&T&&parseFloat(R(T))>=0&&D&&parseFloat(R(D))>=0,q=h&&x,ie=Q&&q&&b,oe=()=>u(F=>Math.min(F+1,3)),xe=()=>u(F=>Math.max(F-1,1)),W=async()=>{if(!ie||!h||!x){alert("Vui lng hon thnh tt c cc bc.");return}j(!0);try{L(1),await new Promise(F=>setTimeout(F,800)),L(2),await new Promise(F=>setTimeout(F,800)),L(3),await o(r,h,x,w,R(T),R(D)),L(4),await new Promise(F=>setTimeout(F,2e3)),l()}catch(F){console.error("Submission failed",F),j(!1),L(0)}},K=({label:F,status:v})=>{let P="fa-circle text-border-secondary",C="text-text-secondary",U="bg-surface-ground";return v==="active"?(P="fa-spinner fa-spin text-accent-primary",C="text-accent-primary font-semibold",U="bg-accent-primary/5 border-accent-primary/20"):v==="completed"&&(P="fa-check-circle text-success",C="text-text-primary font-medium",U="bg-success/5 border-success/20"),t.jsxs("div",{className:`flex items-center p-3 rounded-lg border ${v==="pending"?"border-transparent":"border-border-secondary"} ${U} transition-all duration-300`,children:[t.jsx("div",{className:"w-8 flex justify-center mr-3",children:t.jsx("i",{className:`fas ${P} text-lg transition-all duration-300`})}),t.jsx("span",{className:`${C} transition-all duration-300`,children:F})]})};return y?t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-surface-card w-full max-w-md rounded-2xl shadow-xl p-6 flex flex-col items-center animate-fade-in-scale-up",style:V,children:[t.jsxs("div",{className:"w-16 h-16 mb-4 relative",children:[t.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-border-primary"}),t.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${_===4?"border-success":"border-accent-primary border-t-transparent animate-spin"}`}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("i",{className:`fas ${_===4?"fa-check text-success":"fa-paper-plane text-accent-primary"} text-xl`})})]}),t.jsx("h3",{className:"text-lg font-bold text-text-primary mb-1",children:_===4?"Hon tt!":"ang x l h s"}),t.jsx("p",{className:"text-sm text-text-secondary mb-6",children:_===4?"Yu cu  c gi thnh cng.":"Vui lng khng tt trnh duyt..."}),t.jsxs("div",{className:"w-full space-y-3",children:[t.jsx(K,{label:"X l Hp ng mua bn",status:_>1?"completed":_===1?"active":"pending"}),t.jsx(K,{label:"X l  ngh xut ha n",status:_>2?"completed":_===2?"active":"pending"}),t.jsx(K,{label:"ang gi d liu...",status:_>3?"completed":_===3?"active":"pending"})]})]})}):t.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("div",{className:"bg-surface-card w-full md:max-w-4xl h-[100dvh] md:h-[700px] md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:F=>F.stopPropagation(),style:V,children:[t.jsxs("header",{className:"relative flex-shrink-0 flex flex-col items-center justify-center p-4 text-center border-b border-border-primary",children:[t.jsxs("div",{className:"animate-fade-in-down",children:[t.jsx("h2",{className:"text-lg font-bold text-gradient uppercase",children:"YU CU XUT HA N"}),t.jsx("p",{className:"text-xs text-text-secondary mt-0.5",children:"Cung cp chng t  tin hnh xut ha n."})]}),t.jsx("button",{onClick:l,className:"absolute top-3 right-3 w-8 h-8 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 custom-scrollbar",children:[t.jsx(Oo,{currentStep:i}),t.jsxs("div",{className:"bg-surface-accent/50 rounded-xl border border-accent-primary/20 p-2.5 mb-4 relative overflow-hidden group",children:[t.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity",children:t.jsx("i",{className:"fas fa-file-invoice-dollar text-5xl text-accent-primary transform rotate-12"})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 relative z-10",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-wider text-text-secondary font-semibold mb-0.5",children:"S n hng"}),t.jsxs("div",{className:"flex items-center gap-1.5 text-accent-primary",children:[t.jsx("i",{className:"fas fa-barcode text-base opacity-70"}),t.jsx("span",{className:"text-base font-bold font-mono tracking-tight",children:r["S n hng"]})]})]}),t.jsxs("div",{className:"flex flex-col md:border-l md:border-accent-primary/20 md:pl-3",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-wider text-text-secondary font-semibold mb-0.5",children:"Khch hng"}),t.jsxs("div",{className:"flex items-center gap-1.5 text-text-primary",children:[t.jsx("i",{className:"fas fa-user text-base text-accent-secondary opacity-70"}),t.jsx("span",{className:"text-base font-bold truncate",title:r["Tn khch hng"],children:r["Tn khch hng"]})]})]}),t.jsxs("div",{className:"flex flex-col md:border-l md:border-accent-primary/20 md:pl-3",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-wider text-text-secondary font-semibold mb-0.5",children:"S VIN"}),t.jsxs("div",{className:"flex items-center gap-1.5 text-text-primary",children:[t.jsx("i",{className:"fas fa-car text-base text-accent-secondary opacity-70"}),t.jsx("span",{className:"text-base font-bold font-mono tracking-tight",children:r.VIN||"---"})]})]})]})]}),t.jsxs("div",{style:{display:i===1?"block":"none"},children:[t.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"1. Thng tin Bn hng"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-text-primary mb-2",children:["Chnh sch bn hng ",t.jsx("span",{className:"text-danger",children:"*"})]}),I?t.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary p-2 bg-surface-ground rounded-lg",children:[t.jsx("i",{className:"fas fa-spinner fa-spin"}),t.jsx("span",{children:"ang ti danh sch chnh sch..."})]}):t.jsx("div",{className:"flex flex-wrap gap-2 p-2 bg-surface-ground rounded-lg border border-border-primary",children:E.length>0?E.map(F=>{const v=w.includes(F);return t.jsxs("button",{type:"button",onClick:()=>{const P=v?w.filter(C=>C!==F):[...w,F];S(P)},className:`group inline-flex items-center gap-2 px-3 py-1.5 text-xs font-semibold rounded-full border cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-primary
                                                            ${v?"bg-accent-primary border-accent-primary text-white shadow-sm hover:bg-accent-primary-hover":"bg-white border-border-secondary text-text-secondary hover:border-accent-primary hover:text-accent-primary"}
                                                        `,children:[t.jsx("i",{className:`fas ${v?"fa-check-circle":"fa-plus-circle"} transition-transform duration-200 ${v?"":"group-hover:rotate-90"}`}),F]},F)}):t.jsx("p",{className:"text-xs text-text-secondary",children:"Khng tm thy chnh sch no ph hp."})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"commission-amount",className:"block text-sm font-medium text-text-primary mb-2",children:["Hoa hng ng trc (VND) ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{id:"commission-amount",type:"text",value:T,onChange:z(N),className:"w-full bg-surface-ground border border-border-primary rounded-lg p-2.5 futuristic-input",placeholder:"Nhp s tin",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"vpoint-amount",className:"block text-sm font-medium text-text-primary mb-2",children:["S im Vpoint s dng (im) ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{id:"vpoint-amount",type:"text",value:D,onChange:z(M),className:"w-full bg-surface-ground border border-border-primary rounded-lg p-2.5 futuristic-input",placeholder:"Nhp s im",required:!0})]})]})]})]}),t.jsxs("div",{style:{display:i===2?"block":"none"},children:[t.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"2. Ti ln chng t"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(lt,{id:"hop_dong_file_input",label:"Hp ng mua bn",onFileSelect:f,required:!0,accept:".pdf"}),t.jsx(lt,{id:"denghi_xhd_file_input",label:" ngh xut ha n",onFileSelect:g,required:!0,accept:".pdf"})]})]}),t.jsxs("div",{style:{display:i===3?"block":"none"},children:[t.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"3. Xc nhn cui cng"}),t.jsx("div",{className:"p-4 bg-surface-ground rounded-lg border border-border-primary mb-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsx("p",{className:"text-xs text-text-secondary mb-1.5 font-semibold uppercase",children:"Chnh sch bn hng"}),w.length>0?t.jsx("div",{className:"bg-surface-card rounded-md border border-border-secondary divide-y divide-border-secondary/50 flex-grow overflow-y-auto custom-scrollbar shadow-sm min-h-[120px]",children:w.map((F,v)=>t.jsxs("div",{className:"p-2.5 text-sm font-medium text-text-primary flex items-start hover:bg-surface-hover transition-colors",children:[t.jsx("i",{className:"fas fa-check-circle text-success mt-0.5 mr-2.5 flex-shrink-0"}),t.jsx("span",{className:"leading-tight",children:F})]},v))}):t.jsx("div",{className:"bg-surface-card rounded-md border border-border-secondary flex items-center justify-center flex-grow min-h-[120px]",children:t.jsx("p",{className:"font-semibold text-text-placeholder italic",children:"Cha chn chnh sch no"})})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-surface-card p-3 rounded-md border border-border-secondary shadow-sm",children:[t.jsx("p",{className:"text-xs text-text-secondary mb-2 font-semibold uppercase border-b border-border-secondary pb-1",children:"Thng tin thanh ton"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-text-secondary",children:"Hoa hng ng:"}),t.jsx("span",{className:"font-bold text-text-primary",children:T?`${parseInt(R(T)).toLocaleString("vi-VN")} VND`:"Cha nhp"})]}),D&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-text-secondary",children:"Vpoint s dng:"}),t.jsx("span",{className:"font-bold text-purple-600",children:`${parseInt(R(D)).toLocaleString("vi-VN")} im`})]})]})]}),t.jsxs("div",{className:"bg-surface-card p-3 rounded-md border border-border-secondary shadow-sm flex-grow",children:[t.jsx("p",{className:"text-xs text-text-secondary mb-2 font-semibold uppercase border-b border-border-secondary pb-1",children:"Tp nh km"}),t.jsxs("ul",{className:"list-none text-sm text-text-primary space-y-2",children:[t.jsxs("li",{className:`flex items-center ${h?"text-text-primary":"text-danger"}`,children:[t.jsx("i",{className:`fas ${h?"fa-file-contract text-success":"fa-times-circle"} mr-2 w-4 text-center`}),t.jsx("span",{className:"truncate flex-1",title:h==null?void 0:h.name,children:(h==null?void 0:h.name)||"Thiu Hp ng"})]}),t.jsxs("li",{className:`flex items-center ${x?"text-text-primary":"text-danger"}`,children:[t.jsx("i",{className:`fas ${x?"fa-file-invoice text-success":"fa-times-circle"} mr-2 w-4 text-center`}),t.jsx("span",{className:"truncate flex-1",title:x==null?void 0:x.name,children:(x==null?void 0:x.name)||"Thiu  ngh XHD"})]})]})]})]})]})}),t.jsx("div",{className:"relative p-4 rounded-lg border border-accent-primary/20 bg-surface-accent",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex items-center h-6",children:t.jsx("input",{id:"vinclub-confirm",type:"checkbox",checked:b,onChange:F=>c(F.target.checked),className:"focus:ring-accent-primary h-5 w-5 text-accent-primary border-border-secondary rounded-md cursor-pointer"})}),t.jsxs("div",{className:"ml-3 text-sm",children:[t.jsx("label",{htmlFor:"vinclub-confirm",className:"font-medium text-text-primary cursor-pointer",children:"Ti xc nhn khch hng  to ti khon Vinclub."}),t.jsx("p",{className:"text-accent-primary/80",children:"y l iu kin bt buc  tip tc."})]})]})})]})]})}),t.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-between items-center bg-surface-card relative z-10",children:[i>1?t.jsx(Z,{onClick:xe,disabled:y,variant:"secondary",size:"sm",leftIcon:t.jsx("i",{className:"fas fa-arrow-left"}),children:"Quay li"}):t.jsx(Z,{onClick:l,disabled:y,variant:"secondary",size:"sm",children:"Hy"}),i<3?t.jsx(Z,{onClick:oe,disabled:y||i===1&&!Q||i===2&&!q,variant:"primary",size:"sm",rightIcon:t.jsx("i",{className:"fas fa-arrow-right"}),children:"Tip theo"}):t.jsx(Z,{onClick:W,disabled:y||!ie,variant:"success",size:"sm",isLoading:y,leftIcon:y?void 0:t.jsx("i",{className:"fas fa-paper-plane"}),children:"Gi Yu Cu"})]})]})})},Xa=({label:r,value:l,icon:o,isMono:i=!1})=>t.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.jsx("i",{className:`fas ${o} fa-fw w-4 text-center text-accent-secondary`}),t.jsxs("span",{className:"text-text-secondary",children:[r,":"]}),t.jsx("span",{className:`font-semibold text-text-primary ${i?"font-mono":""}`,children:l})]}),Ro=({order:r,onClose:l,onConfirm:o})=>{const[i,u]=m.useState(null),[h,f]=m.useState(null),[x,g]=m.useState(!1),b=ct(),c=()=>{if(!i&&!h){alert("Vui lng chn t nht mt file  b sung.");return}g(!0),o(r,i,h)},y=i||h;return t.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("div",{className:"bg-surface-card w-full md:max-w-2xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:j=>j.stopPropagation(),style:b,children:[t.jsxs("header",{className:"relative flex flex-col items-center justify-center p-6 text-center bg-surface-card border-b border-border-primary",children:[t.jsxs("div",{className:"animate-fade-in-down",children:[t.jsx("h2",{className:"text-xl font-bold text-gradient",children:"B Sung Chng T"}),t.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Ti ln cc tp mi  cp nht hoc thay th."})]}),t.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex-shrink-0 flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 custom-scrollbar",children:[t.jsxs("div",{className:"p-4 bg-surface-ground rounded-lg border border-border-primary space-y-2",children:[t.jsx("h3",{className:"font-semibold text-text-primary text-base mb-2",children:"Tm tt yu cu"}),t.jsx(Xa,{label:"S n hng",value:r["S n hng"],icon:"fa-barcode",isMono:!0}),t.jsx(Xa,{label:"Khch hng",value:r["Tn khch hng"],icon:"fa-user"})]}),t.jsxs("div",{className:"flex items-start gap-3 p-3 text-sm bg-warning-bg rounded-lg border border-warning/30 text-yellow-800 my-4",children:[t.jsx("i",{className:"fas fa-info-circle mt-0.5"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Lu :"})," Ch cn ti ln tp bn mun thay th. Cc tp khng c ti ln s c gi nguyn."]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"Ti ln tp mi"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[t.jsx(lt,{id:"supp_hop_dong_file_input",label:"Hp ng mua bn (Mi)",onFileSelect:u,accept:".pdf"}),t.jsx(lt,{id:"supp_denghi_xhd_file_input",label:" ngh XHD (Mi)",onFileSelect:f,accept:".pdf"})]})]})]})}),t.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end items-center gap-3 bg-surface-card relative z-10",children:[t.jsx(Z,{onClick:l,disabled:x,variant:"secondary",size:"sm",leftIcon:t.jsx("i",{className:"fas fa-times"}),children:"Hy"}),t.jsx(Z,{onClick:c,disabled:x||!y,variant:"primary",size:"sm",isLoading:x,leftIcon:t.jsx("i",{className:"fas fa-save"}),children:"Cp nht & Gi"})]})]})})},$o=({onFileSelect:r,isProcessing:l,ocrStatus:o,showToast:i})=>{const[u,h]=m.useState(!1),[f,x]=m.useState(null),[g,b]=m.useState(null),c=m.useRef(null),[y,j]=m.useState(!1),w=m.useCallback(async A=>{if(r(null),x(null),b(null),A){if(!A.type.startsWith("image/")){i("Tp khng hp l","Vui lng ch chn tp hnh nh.","warning");return}j(!0);try{const I=await dn(A);x(I),r(I);const $=new FileReader;$.onloadend=()=>{b($.result)},$.readAsDataURL(I)}catch(I){console.error("Image compression failed:",I),i("Li Nn nh","Khng th x l nh ca bn. Vui lng th nh khc.","error")}finally{j(!1)}}},[r,i]),S=A=>{A.preventDefault(),A.stopPropagation(),A.type==="dragenter"||A.type==="dragover"?h(!0):A.type==="dragleave"&&h(!1)},T=A=>{A.preventDefault(),A.stopPropagation(),h(!1),A.dataTransfer.files&&A.dataTransfer.files[0]&&w(A.dataTransfer.files[0])},N=A=>{A.preventDefault(),A.target.files&&A.target.files[0]&&w(A.target.files[0])},D=()=>{var A;(A=c.current)==null||A.click()},M=A=>{A.stopPropagation(),w(null)},Y=()=>o.includes("Li")||o.includes("Khng tm thy")?"text-danger":o.includes(" in")?"text-success font-medium":"text-accent-secondary";return t.jsxs("div",{onDragEnter:S,className:"w-full",children:[t.jsx("input",{ref:c,type:"file",className:"hidden",accept:"image/*",onChange:N}),t.jsxs("div",{className:`relative w-full h-24 border-2 border-dashed rounded-lg flex items-center justify-center transition-all duration-300 group cursor-pointer overflow-hidden bg-surface-ground
                    ${u?"border-accent-primary bg-surface-accent":"border-border-primary"}
                    ${f?"border-solid border-accent-primary/50":""}`,onClick:D,onDragLeave:S,onDragOver:S,onDrop:T,children:[!f&&t.jsxs("div",{className:"text-center text-text-placeholder group-hover:text-text-primary transition-colors",children:[t.jsx("i",{className:"fas fa-cloud-upload-alt fa-lg mb-1 group-hover:text-accent-primary"}),t.jsx("p",{className:"font-semibold text-text-primary text-xs",children:"Nhn  ti nh"}),t.jsx("p",{className:"text-[10px] hidden md:block opacity-70",children:"Ti a 10MB"})]}),f&&g&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute inset-0 p-2 z-0",children:t.jsx("img",{src:g,alt:"Preview",className:"w-full h-full object-contain rounded-md"})}),t.jsxs("div",{className:"absolute inset-0 bg-black/40 hover:bg-black/60 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300 rounded-lg cursor-pointer z-10",children:[t.jsx("span",{className:"text-white font-bold",children:"Thay i nh"}),t.jsx(Z,{type:"button",onClick:M,disabled:l,variant:"ghost",className:"flex-shrink-0 w-8 h-8 bg-surface-hover text-text-secondary rounded-full flex items-center justify-center hover:bg-danger-bg hover:text-danger-hover transition-colors disabled:opacity-50 !p-0",children:t.jsx("i",{className:"fas fa-times"})})]})]})]}),(y||l||o)&&t.jsx("p",{className:`mt-2 text-sm text-center italic ${Y()} `,children:y?t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"ang nn nh..."]}):l?t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),o]}):o})]})},Ka=r=>r?r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"d").replace(//g,"d").trim():"",Ge=(r,l)=>{if(!l)return!0;if(!r)return!1;const o=Ka(l),i=l.toLowerCase();return i!==o?r.normalize("NFC").toLowerCase().includes(i.normalize("NFC")):Ka(r).includes(o)},Ut=({label:r,options:l,selectedOptions:o,onChange:i,icon:u,displayMode:h="count",size:f="default",variant:x="default",mode:g="dropdown",selectionMode:b="multiple",placeholder:c,disabled:y=!1,searchable:j=!0})=>{const[w,S]=m.useState(!1),[T,N]=m.useState(""),D=m.useRef(null);m.useEffect(()=>{const H=z=>{D.current&&!D.current.contains(z.target)&&S(!1)};return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[]);const M=l.filter(H=>Ge(H,T)),Y=H=>{if(b==="single")i([H]),S(!1);else{const z=o.includes(H)?o.filter(R=>R!==H):[...o,H];i(z)}},A=()=>{i(Array.from(new Set([...o,...M])))},I=()=>{i([])},$=()=>{i(o.filter(H=>!M.includes(H)))},V=m.useMemo(()=>o.length===0?c||r:b==="single"?o[0]:h==="selection"?o.length<=2?o.join(", "):`${o.length} la chn`:`${r} (${o.length})`,[o,r,h,b,c]),E=f==="compact",_=b==="multiple"&&M.length>0&&M.every(H=>o.includes(H)),L=m.useMemo(()=>{const H="flex items-center justify-between transition-all duration-200 outline-none focus:ring-2 focus:ring-accent-primary/20",z="rounded-xl",R=y?"opacity-60 cursor-not-allowed bg-gray-50":"cursor-pointer";if(x==="modern"){const ee=E?"px-2 h-7 text-[10px]":"px-4 h-10 text-sm",ie=!y&&(w||o.length>0&&b==="multiple")?"bg-accent-primary/5 border border-accent-primary text-accent-primary shadow-sm":"bg-white border border-gray-200 text-gray-600 hover:border-accent-primary/50 hover:text-gray-900 hover:shadow-sm";return`${H} ${z} ${ee} ${ie} ${R} w-full`}const Q=E?"px-2 h-7 text-[10px]":"px-4 h-11 text-sm lg:h-14 lg:text-lg lg:px-6",q=!y&&(w||o.length>0&&b==="multiple")?"bg-white text-[#6d5dfc] shadow-[inset_2px_2px_5px_#e5e7eb,inset_-2px_-2px_5px_#ffffff] font-bold":"bg-white text-gray-700 shadow-[-2px_-2px_5px_#ffffff,2px_2px_5px_#e5e7eb] hover:text-[#6d5dfc] font-medium";return`${H} ${z} ${Q} ${q} ${R} w-full`},[E,w,o.length,x,b,y]);return g==="chips"?t.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(H=>{const z=o.includes(H);return t.jsxs("button",{type:"button",onClick:()=>!y&&Y(H),disabled:y,className:`
                px-3 py-1.5 text-xs font-medium rounded-full border transition-all duration-200 ease-out flex items-center gap-1.5
                ${z?"bg-accent-primary text-white border-accent-primary shadow-md shadow-accent-primary/20 transform scale-105":"bg-white text-gray-600 border-gray-200 hover:border-accent-primary/50 hover:text-accent-primary hover:bg-accent-primary/5"}
                ${y?"opacity-50 cursor-not-allowed":""}
              `,children:[z&&t.jsx("i",{className:"fas fa-check text-[10px]"}),H]},H)})}):g==="inline"?t.jsxs("div",{className:`w-full bg-gray-50/50 rounded-xl border border-gray-100 p-2 ${y?"opacity-60 pointer-events-none":""}`,children:[j&&l.length>5&&t.jsxs("div",{className:"relative mb-2",children:[t.jsx("i",{className:"fas fa-search absolute top-1/2 left-3 -translate-y-1/2 text-gray-400 text-xs"}),t.jsx("input",{type:"text",placeholder:"Tm kim...",value:T,onChange:H=>N(H.target.value),disabled:y,className:"w-full pl-9 pr-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/20 transition-all text-sm placeholder:text-gray-400"})]}),t.jsxs("ul",{className:"max-h-60 overflow-y-auto space-y-0.5 custom-scrollbar pr-1",children:[b==="multiple"&&M.length>0&&t.jsx("li",{children:t.jsxs("label",{className:"flex items-center gap-3 w-full px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-white hover:shadow-sm transition-all cursor-pointer group",children:[t.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${_?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:_&&t.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),t.jsx("input",{type:"checkbox",checked:_,onChange:()=>_?$():A(),className:"hidden"}),t.jsx("span",{className:"font-semibold italic text-xs text-gray-500 group-hover:text-accent-primary transition-colors",children:_?"B chn tt c":"Chn tt c"})]})}),M.length>0?M.map(H=>{const z=o.includes(H);return t.jsx("li",{children:t.jsxs("label",{className:`flex items-center gap-3 w-full px-3 py-2 text-sm rounded-lg transition-all cursor-pointer group ${z?"bg-accent-primary/5 text-accent-primary font-medium":"text-gray-700 hover:bg-white hover:shadow-sm"}`,children:[b==="multiple"&&t.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${z?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:z&&t.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),t.jsx("input",{type:b==="single"?"radio":"checkbox",checked:z,onChange:()=>Y(H),className:"hidden"}),t.jsx("span",{children:H}),b==="single"&&z&&t.jsx("i",{className:"fas fa-check text-accent-primary ml-auto text-xs"})]})},H)}):t.jsx("li",{className:"px-3 py-4 text-sm text-gray-400 text-center italic",children:"Khng tm thy kt qu."})]})]}):t.jsxs("div",{className:"relative w-full",ref:D,children:[t.jsxs("button",{type:"button",onClick:()=>!y&&S(!w),disabled:y,className:L,children:[t.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[t.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${w||o.length>0&&b==="multiple"?"bg-accent-primary/10 text-accent-primary":"bg-gray-100 text-gray-400"}`,children:t.jsx("i",{className:`fas ${u} text-xs`})}),t.jsx("span",{className:`truncate ${o.length>0?"font-semibold text-gray-900":""}`,children:V})]}),t.jsx("i",{className:`fas fa-chevron-down text-xs transition-transform duration-300 ${w?"rotate-180 text-accent-primary":"text-gray-400"}`})]}),w&&t.jsxs("div",{className:"absolute top-full mt-2 w-full min-w-[200px] bg-white border border-gray-100 rounded-xl shadow-xl shadow-gray-200/50 z-50 animate-in fade-in zoom-in-95 duration-200 flex flex-col overflow-hidden ring-1 ring-black/5",children:[j&&l.length>5&&t.jsx("div",{className:"p-3 border-b border-gray-50 bg-gray-50/30",children:t.jsxs("div",{className:"relative",children:[t.jsx("i",{className:"fas fa-search absolute top-1/2 left-3 -translate-y-1/2 text-gray-400 text-xs"}),t.jsx("input",{type:"text",placeholder:"Tm kim...",autoFocus:!0,value:T,onChange:H=>N(H.target.value),className:"w-full pl-9 pr-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/20 transition-all text-sm placeholder:text-gray-400"})]})}),t.jsxs("ul",{className:"flex-grow max-h-64 overflow-y-auto p-2 space-y-0.5 custom-scrollbar",children:[b==="multiple"&&M.length>0&&t.jsx("li",{children:t.jsxs("label",{className:`flex items-center gap-3 w-full ${E?"px-2 py-1.5 text-xs":"px-3 py-2 text-sm lg:text-base"} text-gray-700 rounded-lg hover:bg-gray-50 transition-all cursor-pointer group`,children:[t.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${_?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:_&&t.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),t.jsx("input",{type:"checkbox",checked:_,onChange:()=>_?$():A(),className:"hidden"}),t.jsx("span",{className:"font-semibold italic text-xs text-gray-500 group-hover:text-accent-primary transition-colors",children:_?"B chn tt c":"Chn tt c"})]})}),M.length>0?M.map(H=>{const z=o.includes(H);return t.jsx("li",{children:t.jsxs("label",{className:`flex items-center gap-3 w-full ${E?"px-2 py-1.5 text-xs":"px-3 py-2 text-sm lg:text-base"} rounded-lg transition-all cursor-pointer group ${z?"bg-accent-primary/5 text-accent-primary font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[b==="multiple"&&t.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${z?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:z&&t.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),t.jsx("input",{type:b==="single"?"radio":"checkbox",checked:z,onChange:()=>Y(H),className:"hidden"}),t.jsx("span",{children:H}),b==="single"&&z&&t.jsx("i",{className:"fas fa-check text-accent-primary ml-auto text-xs"})]})},H)}):t.jsxs("li",{className:`px-3 ${E?"py-4 text-xs":"py-8 text-sm"} text-gray-400 text-center flex flex-col items-center gap-2`,children:[t.jsx("i",{className:"fas fa-search text-2xl opacity-20"}),t.jsx("span",{children:"Khng tm thy kt qu"})]})]}),b==="multiple"&&t.jsxs("div",{className:"p-3 border-t border-gray-50 bg-gray-50/50 flex justify-between items-center",children:[t.jsxs(Z,{onClick:I,variant:"ghost",size:"sm",className:"text-xs font-semibold text-red-500 hover:text-red-600 hover:bg-red-50 !px-2 h-8",children:["Xa chn (",o.length,")"]}),t.jsx(Z,{onClick:()=>S(!1),variant:"primary",size:"sm",className:"px-4 py-1.5 text-xs font-bold rounded-lg shadow-sm shadow-accent-primary/30",children:"p dng"})]})]})]})},Lo="/ordermanagement/assets/than_tai_anim-D47ZTG_Q.gif",St=({icon:r,children:l,label:o,htmlFor:i})=>t.jsxs("div",{children:[t.jsx("label",{htmlFor:i,className:"hidden md:block text-sm font-medium text-text-secondary mb-1 md:mb-1.5",children:o}),t.jsxs("div",{className:"relative",children:[r&&t.jsx("i",{className:`fas ${r} absolute top-1/2 left-3 md:left-4 -translate-y-1/2 text-slate-500 peer-focus:text-accent-primary transition-colors text-base z-10`}),l]})]}),ra=({icon:r,title:l})=>t.jsxs("div",{className:"flex items-center gap-2 md:gap-3 p-3 md:p-4 border-b border-white/20 bg-accent-primary/5",children:[t.jsx("i",{className:`fas ${r} text-accent-secondary text-base md:text-lg`}),t.jsx("h3",{className:"text-sm md:text-base font-bold text-text-primary",children:l})]}),Ho=({onSuccess:r,showToast:l,hideToast:o,existingOrderNumbers:i,initialVehicle:u,currentUser:h,vehicleAnalyticsData:f,onOpenImagePreview:x})=>{const[g,b]=m.useState({ten_ban_hang:h,ten_khach_hang:"",so_don_hang:"",dong_xe:"",phien_ban:"",ngoai_that:"",noi_that:"",ngay_coc:"",vin:""}),[c,y]=m.useState(null),j=new Date>=new Date("2026-01-05T00:00:00"),[w,S]=m.useState(!1),[T,N]=m.useState(""),[D,M]=m.useState(""),[Y,A]=m.useState(null),[I,$]=m.useState(!1),[V,E]=m.useState(ot),[_,L]=m.useState(na),H="peer w-full pl-10 md:pl-11 pr-3 md:pr-4 py-2 md:py-2.5 text-sm md:text-base rounded-lg focus:outline-none transition-all placeholder:text-text-placeholder futuristic-input",z=!!u;m.useEffect(()=>{if(u){b(K=>({...K,dong_xe:u["Dng xe"]||"",phien_ban:u["Phin bn"]||"",ngoai_that:u["Ngoi tht"]||"",noi_that:u["Ni tht"]||"",vin:u.VIN||""}));const W=u["Dng xe"];if(W){const K=W.toLowerCase().replace(/\s+/g,""),F=Ga[K];if(F){const v=ot.filter(P=>{const C=P.match(/\(([^)]+)\)/);return C&&C[1]&&F.includes(C[1].toLowerCase())});E(v)}else E(ot)}}},[u]);const R=W=>{const{name:K,value:F}=W.target;b(v=>{const P={...v,[K]:F};if(K==="dong_xe"){P.phien_ban="",P.ngoai_that="",P.noi_that="",F==="VF 5"&&(P.phien_ban="Plus");const C=F.toLowerCase().replace(/\s+/g,""),U=Ga[C];if(U){const te=ot.filter(de=>{const Me=de.match(/\(([^)]+)\)/);return Me&&Me[1]&&U.includes(Me[1].toLowerCase())});E(te)}else E(ot)}return K==="phien_ban"&&(P.ngoai_that="",P.noi_that=""),P})};m.useEffect(()=>{const{dong_xe:W,phien_ban:K}=g;if(!W){L(na);return}const F=W.toLowerCase(),v=K.toLowerCase();let P=na;for(const C of fn)if(C.models.includes(F)&&(!C.versions||C.versions.includes(v))){P=C.colors;break}L(P),P.length===1&&b(C=>({...C,noi_that:P[0]}))},[g.dong_xe,g.phien_ban]);const Q=m.useCallback(async W=>{if(y(W),b(K=>({...K,ngay_coc:""})),N(""),W){S(!0),N("ang chun b x l...");try{const K=await lo(W,F=>N(F));K?(b(F=>({...F,ngay_coc:K})),N("  in Ngy Cc thnh cng!")):N("Li: Khng tm thy ngy gi hp l trong nh.")}catch(K){const F=K instanceof Error?K.message:"X l nh tht bi.";F.includes("Tesseract")&&l("Li Ti Th Vin","Th vin nhn dng nh cha sn sng. Vui lng lm mi trang (F5).","error",5e3),N(`Li: ${F}`)}finally{S(!1)}}},[l]),q=()=>{b({ten_ban_hang:h,ten_khach_hang:"",so_don_hang:"",dong_xe:"",phien_ban:"",ngoai_that:"",noi_that:"",ngay_coc:"",vin:""}),Q(null)};m.useEffect(()=>{var U,te;if(!f||z)return;const{dong_xe:W,phien_ban:K,ngoai_that:F}=g;if(!W||!K||!F){M(""),A(null);return}const v=`${W}|${K}|${F}`.trim().toLowerCase(),P=((U=f.pendingRequestCount)==null?void 0:U[v])||0,C=((te=f.stockStatus)==null?void 0:te[v])||{count:0,isSlowMoving:!1};P>0?(M(`Lu : ang c <strong>${P}</strong> yu cu khc ang ch ghp cho Mu xe ny.`),A("hot")):C.isSlowMoving&&C.count>0?(M("Gi : Xe ny ang c sn trong kho, c th giao ngay."),A("slow")):(M(""),A(null))},[g.dong_xe,g.phien_ban,g.ngoai_that,f,z]);const ee=async W=>{if(W.preventDefault(),["ten_khach_hang","so_don_hang","dong_xe","phien_ban","ngoai_that","noi_that"].some(v=>!g[v])){l("Thiu Thng Tin","Vui lng in y  thng tin xe v khch hng.","warning",3e3);return}if(!new RegExp("^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$").test(g.so_don_hang)){l("Sai nh Dng","S n hng khng ng nh dng. VD: N31913-VSO-25-04-0028","warning",4e3);return}if(i.includes(g.so_don_hang)){l("n Hng Trng Lp",`S n hng "${g.so_don_hang}"  tn ti.`,"error",4e3);return}if(!c){l("Thiu Chng T","Vui lng ti ln nh y nhim chi.","warning",3e3);return}if(!g.ngay_coc){l("Ch X L nh","Vui lng ch x l Ngy cc t nh.","warning",3e3);return}$(!0),l("ang Gi Yu Cu","Vui lng ch trong giy lt...","loading");try{const v=await bo(g,c);if(o(),v.status==="SUCCESS"&&v.newRecord)r(v.newRecord),q();else throw new Error(v.message||"Gi yu cu tht bi.")}catch(v){o();const P=v instanceof Error?v.message:"Li khng xc nh.";l("Gi Yu Cu Tht Bi",P,"error",5e3)}finally{$(!1)}},ie=W=>{W.preventDefault(),x([{src:"pictures/uynhiemchi.webp",originalUrl:"pictures/uynhiemchi.webp",label:"Mu y nhim chi hp l"}],0,"nh Mu")},oe=g.dong_xe?as[g.dong_xe]||mn:[],xe={hot:"bg-warning-bg border-warning/50 text-warning",slow:"bg-success-bg border-success/50 text-success"};return t.jsxs("form",{onSubmit:ee,className:"flex flex-col h-full relative",children:[t.jsxs("div",{className:"flex-grow overflow-hidden p-4 md:p-6 relative z-10",children:[z&&t.jsxs("div",{className:"p-3 mb-4 rounded-lg border border-accent-primary/50 bg-surface-accent flex items-start gap-3 shadow-sm relative z-10",children:[t.jsx("i",{className:"fas fa-lock text-accent-primary text-xl mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-text-primary text-sm",children:"Yu cu cho xe  gi"}),t.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:["ang to yu cu cho VIN: ",t.jsx("strong",{className:"font-mono text-accent-primary",children:g.vin}),"."]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-x-6 xl:gap-x-8 gap-y-4 md:gap-y-8 relative z-10 h-full",children:[t.jsxs("section",{className:"bg-white/60 backdrop-blur-md rounded-2xl p-0 border border-white/40 shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full overflow-hidden",children:[t.jsx(ra,{icon:"fa-cogs",title:"1. Cu hnh Xe"}),t.jsxs("div",{className:"p-3 md:p-4 space-y-2 md:space-y-3 flex-grow overflow-y-auto custom-scrollbar",children:[t.jsx(St,{label:"Dng xe",htmlFor:"dong_xe",children:t.jsx(Ut,{id:"dong_xe",label:"Dng xe",placeholder:"Chn dng xe",options:Object.keys(as),selectedOptions:g.dong_xe?[g.dong_xe]:[],onChange:W=>R({target:{name:"dong_xe",value:W[0]||""}}),icon:"fa-car",selectionMode:"single",variant:"modern",disabled:z,searchable:!1})}),t.jsx(St,{label:"Phin bn",htmlFor:"phien_ban",children:t.jsx(Ut,{id:"phien_ban",label:"Phin bn",placeholder:"Chn phin bn",options:oe,selectedOptions:g.phien_ban?[g.phien_ban]:[],onChange:W=>R({target:{name:"phien_ban",value:W[0]||""}}),icon:"fa-code-branch",selectionMode:"single",variant:"modern",disabled:!g.dong_xe||z,searchable:!1})}),t.jsx(St,{label:"Ngoi tht",htmlFor:"ngoai_that",children:t.jsx(Ut,{id:"ngoai_that",label:"Ngoi tht",placeholder:"Chn mu ngoi tht",options:V,selectedOptions:g.ngoai_that?[g.ngoai_that]:[],onChange:W=>R({target:{name:"ngoai_that",value:W[0]||""}}),icon:"fa-fill-drip",selectionMode:"single",variant:"modern",disabled:!g.phien_ban||z,searchable:!1})}),t.jsx(St,{label:"Ni tht",htmlFor:"noi_that",children:t.jsx(Ut,{id:"noi_that",label:"Ni tht",placeholder:"Chn ni tht",options:_,selectedOptions:g.noi_that?[g.noi_that]:[],onChange:W=>R({target:{name:"noi_that",value:W[0]||""}}),icon:"fa-couch",selectionMode:"single",variant:"modern",disabled:!g.phien_ban||z,searchable:!1})}),D&&Y&&t.jsxs("div",{className:`p-3 mt-2 rounded-lg border text-sm flex items-start ${xe[Y]}`,children:[t.jsx("i",{className:`fas ${Y==="hot"?"fa-exclamation-triangle":"fa-check-circle"} mr-3 mt-1`}),t.jsx("p",{dangerouslySetInnerHTML:{__html:D}})]})]})]}),t.jsxs("section",{className:"bg-white/60 backdrop-blur-md rounded-2xl p-0 border border-white/40 shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full overflow-hidden",children:[t.jsx(ra,{icon:"fa-user-circle",title:"2. Thng tin & Chng t"}),t.jsxs("div",{className:"p-3 md:p-4 space-y-2 md:space-y-3 flex-grow overflow-y-auto custom-scrollbar",children:[t.jsx(St,{icon:"fa-user-tie",label:"Tn khch hng",htmlFor:"ten_khach_hang",children:t.jsx("input",{id:"ten_khach_hang",type:"text",name:"ten_khach_hang",value:g.ten_khach_hang,onChange:R,onInput:W=>W.currentTarget.value=W.currentTarget.value.toUpperCase(),required:!0,className:H,placeholder:"VD: NGUYEN VAN A"})}),t.jsx(St,{icon:"fa-barcode",label:"S n hng",htmlFor:"so_don_hang",children:t.jsx("input",{id:"so_don_hang",type:"text",name:"so_don_hang",value:g.so_don_hang,onChange:R,required:!0,pattern:"^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$",title:"nh dng: Nxxxxx-XXX-yy-mm-zzzz",onInvalid:W=>W.target.setCustomValidity("S n hng khng ng nh dng. Yu cu nh dng: Nxxxxx-XXX-yy-mm-zzzz"),onInput:W=>W.target.setCustomValidity(""),className:H,placeholder:"VD: N12345-VSO-24-01-0001"})}),t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[t.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"y nhim chi"}),t.jsxs(Z,{type:"button",onClick:ie,variant:"ghost",size:"sm",className:"text-xs text-accent-secondary hover:underline hover:text-accent-primary-hover !p-0 !h-auto",children:[t.jsx("i",{className:"fas fa-info-circle mr-1"}),"Xem mu"]})]}),t.jsx($o,{onFileSelect:Q,isProcessing:w,ocrStatus:T,showToast:l})]}),t.jsx("div",{className:"mt-2",children:t.jsx(St,{icon:"fa-calendar-alt",label:"Ngy Cc (T ng in t nh)",htmlFor:"ngay_coc",children:t.jsx("input",{id:"ngay_coc",name:"ngay_coc",type:"datetime-local",value:g.ngay_coc?g.ngay_coc.slice(0,16):"",required:!0,readOnly:!0,className:`${H} !bg-surface-input cursor-not-allowed`})})})]})]}),t.jsxs("section",{className:"bg-white/60 backdrop-blur-md rounded-2xl p-0 border border-white/40 shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full relative overflow-hidden group",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-accent-primary/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),t.jsx(ra,{icon:"fa-eye",title:"3. Xem trc & Xc thc"}),t.jsxs("div",{className:"p-3 md:p-4 flex flex-col h-full",children:[t.jsxs("div",{className:"relative h-52 bg-surface-ground rounded-xl flex items-center justify-center p-4 border border-border-primary text-center shadow-inner-sm z-10",children:[g.dong_xe&&g.ngoai_that?t.jsx(la,{model:g.dong_xe,exteriorColor:g.ngoai_that,className:"max-w-full max-h-full object-contain drop-shadow-lg",alt:"Cu hnh xe"}):t.jsxs("div",{className:"text-text-placeholder transition-all duration-300",children:[t.jsx("i",{className:"fas fa-car text-5xl text-slate-400 mb-3 opacity-50"}),t.jsx("p",{className:"font-semibold text-sm text-slate-500",children:"Xem trc xe ca bn"}),t.jsx("p",{className:"text-xs mt-1",children:"Chn cu hnh xe  xem trc"})]}),(I||w)&&t.jsx("div",{className:"absolute inset-0 bg-white/50 backdrop-blur-sm flex items-center justify-center rounded-xl",children:t.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-accent-primary"})})]}),j&&t.jsx("div",{className:"flex-grow relative mt-2 flex justify-center items-end min-h-[60px]",children:t.jsx("img",{src:Lo,alt:"Thn Ti",className:"w-24 md:w-32 object-contain animate-bounce-slow drop-shadow-xl"})})]})]})]})]}),t.jsxs("div",{className:"flex-shrink-0 flex flex-row justify-end items-center gap-3 p-4 md:p-6 border-t border-white/20 relative z-10 bg-white/60 backdrop-blur-md",children:[t.jsx(Z,{type:"button",onClick:q,disabled:I||z,variant:"secondary",size:"sm",className:"w-auto",leftIcon:t.jsx("i",{className:"fas fa-eraser"}),children:"Xa Nhp"}),t.jsx(Z,{type:"submit",disabled:I,isLoading:I,variant:"primary",size:"sm",className:"w-auto",leftIcon:I?void 0:t.jsx("i",{className:"fas fa-paper-plane"}),children:"Xc nhn & Gi"})]})]})},Vo=_e.memo(Ho),Za="/ordermanagement/assets/lantern_anim_new-DHaWNgRc.gif",zo=({isOpen:r,onClose:l,onSuccess:o,showToast:i,hideToast:u,existingOrderNumbers:h,initialVehicle:f,currentUser:x,vehicleAnalyticsData:g,onOpenImagePreview:b})=>{const c=new Date>=new Date("2026-01-05T00:00:00");return r?t.jsx("div",{className:"fixed inset-0 bg-slate-900/80 z-[60] flex items-center justify-center p-0 md:p-4 animate-fade-in",onClick:l,children:t.jsxs("div",{className:`relative bg-white w-full h-[100dvh] md:h-[90vh] md:max-w-7xl flex flex-col md:rounded-2xl shadow-2xl animate-fade-in-scale-up border-[3px] overflow-hidden ${c?"border-[#D32F2F]":"border-gray-200"}`,onClick:y=>y.stopPropagation(),children:[t.jsxs("header",{className:`relative flex items-center justify-center p-5 border-b-2 flex-shrink-0 z-10 bg-white ${c?"border-[#D32F2F]/20":"border-gray-100"}`,children:[t.jsxs("div",{className:"relative text-center animate-fade-in-down",children:[c&&t.jsxs(t.Fragment,{children:[t.jsx("img",{src:Za,className:"absolute -top-4 -left-12 md:-left-32 w-16 md:w-24 h-auto z-[60] drop-shadow-md pointer-events-none select-none",alt:"",draggable:"false"}),t.jsx("img",{src:Za,className:"absolute -top-4 -right-12 md:-right-32 w-16 md:w-24 h-auto z-[60] drop-shadow-md pointer-events-none select-none",alt:"",draggable:"false"})]}),t.jsx("h2",{className:`text-2xl sm:text-3xl font-bold uppercase tracking-wide drop-shadow-sm ${c?"text-[#D32F2F] font-serif":"text-gray-800 font-sans"}`,children:"Yu Cu Ghp Xe"}),c?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-24 h-1 bg-[#FFD700] mx-auto my-1.5 rounded-full shadow-sm"}),t.jsx("p",{className:"text-sm text-[#8B5E3C] font-medium",children:"Khai xun c lc - Vn dm bnh an"})]}):t.jsx("div",{className:"w-16 h-1 bg-blue-500 mx-auto my-2 rounded-full"})]}),t.jsx(Z,{onClick:l,variant:"ghost",className:`absolute top-3 right-3 md:top-4 md:right-4 w-9 h-9 rounded-full flex items-center justify-center transition-colors !p-0 z-50 ${c?"text-[#D32F2F] hover:bg-[#FFE0B2] hover:text-[#B71C1C] border border-[#D32F2F]/30":"text-gray-500 hover:bg-gray-100"}`,children:t.jsx("i",{className:"fas fa-times text-lg"})})]}),t.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden relative z-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]",children:t.jsx(Vo,{onSuccess:o,showToast:i,hideToast:u,existingOrderNumbers:h,initialVehicle:f,currentUser:x,vehicleAnalyticsData:g,onOpenImagePreview:b})}),c&&t.jsx("div",{className:"absolute bottom-0 left-0 w-full h-2 bg-gradient-to-r from-[#D32F2F] via-[#FFD700] to-[#D32F2F]"})]})}):null},Uo=_e.memo(zo),Ct=({icon:r,children:l})=>t.jsx("div",{children:t.jsxs("div",{className:"relative",children:[t.jsx("i",{className:`fas ${r} absolute top-1/2 left-4 -translate-y-1/2 text-slate-500 peer-focus:text-accent-primary transition-colors text-base z-10`}),l]})}),Bo=({isOpen:r,onClose:l,onSuccess:o,showToast:i,order:u,existingOrderNumbers:h})=>{var M;const[f,x]=m.useState({}),[g,b]=m.useState(!1),[c,y]=m.useState(ot),j=ct();m.useEffect(()=>{u&&x({"Tn khch hng":u["Tn khch hng"],"S n hng":u["S n hng"],"Dng xe":u["Dng xe"],"Phin bn":u["Phin bn"],"Ngoi tht":u["Ngoi tht"],"Ni tht":u["Ni tht"],"Ngy cc":u["Ngy cc"]?Ye(u["Ngy cc"]).format("YYYY-MM-DDTHH:mm"):""})},[u]);const w=Y=>{const{name:A,value:I}=Y.target;x($=>{const V={...$,[A]:I};return A==="Dng xe"&&(V["Phin bn"]="",V["Ngoi tht"]="",V["Ni tht"]="",I==="VF 5"&&(V["Phin bn"]="Plus")),A==="Phin bn"&&(V["Ngoi tht"]="",V["Ni tht"]=""),V})};if(m.useEffect(()=>{const{"Dng xe":Y,"Phin bn":A}=f;if(!Y){y(ot);return}const I=Y.toLowerCase(),$=A.toLowerCase();let V=ot;for(const E of fn)if(E.models.includes(I)&&(!E.versions||E.versions.includes($))){V=E.colors;break}y(V),V.length===1&&f["Ni tht"]!==V[0]&&x(E=>({...E,"Ni tht":V[0]}))},[f["Dng xe"],f["Phin bn"]]),!r||!u)return null;const S=(M=u["Kt qu"])==null?void 0:M.toLowerCase().includes(" ghp"),T="peer w-full pl-11 pr-4 py-2.5 rounded-lg focus:outline-none transition-all placeholder:text-text-placeholder futuristic-input",N=async Y=>{if(Y.preventDefault(),["Tn khch hng","S n hng","Dng xe","Phin bn","Ngoi tht","Ni tht","Ngy cc"].some($=>!f[$])){i("Thiu Thng Tin","Vui lng in y  thng tin.","warning");return}if(!new RegExp("^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$").test(f["S n hng"])){i("Sai nh Dng","S n hng khng ng nh dng. VD: N31913-VSO-25-04-0028","warning");return}if(h.includes(f["S n hng"])){i("n Hng Trng Lp",`S n hng "${f["S n hng"]}"  tn ti.`,"error");return}b(!0),i("ang cp nht...","Vui lng ch trong giy lt.","loading");try{const $={};if(Object.keys(f).forEach(E=>{const _=E,L=u[_],H=f[_];if(_==="Ngy cc"){const z=L?Ye(L).format("YYYY-MM-DDTHH:mm"):"",R=H?Ye(H).format("YYYY-MM-DDTHH:mm"):"";z!==R&&($[_]=new Date(H).toISOString())}else String(H||"")!==String(L||"")&&($[_]=H)}),Object.keys($).length===0){i("Thng Bo","Khng c thay i no  lu.","info"),l();return}const V=await No(u["S n hng"],$);o(V.message)}catch($){const V=$ instanceof Error?$.message:"Li khng xc nh.";i("Cp Nht Tht Bi",V,"error",5e3)}finally{b(!1)}},D=f["Dng xe"]?as[f["Dng xe"]]||mn:[];return t.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("form",{onSubmit:N,className:"bg-surface-card w-full md:max-w-2xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:Y=>Y.stopPropagation(),style:j,children:[t.jsxs("header",{className:"flex items-center justify-between p-5 border-b border-border-primary",children:[t.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Chnh Sa n Hng"}),t.jsx("button",{type:"button",onClick:l,className:"w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 space-y-4 custom-scrollbar",children:[S&&t.jsxs("div",{className:"p-3 mb-4 rounded-lg border border-amber-500/50 bg-amber-500/10 flex items-start gap-3 shadow-sm",children:[t.jsx("i",{className:"fas fa-info-circle text-amber-500 text-lg mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-amber-700 text-sm",children:"n hng  ghp xe"}),t.jsx("p",{className:"text-xs text-amber-600 mt-1",children:'Thng tin xe (Dng xe, Phin bn, Mu sc) khng th thay i. Vui lng "Hy ghp" nu mun thay i.'})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(Ct,{icon:"fa-user-tie",label:"Tn khch hng",htmlFor:"Tn khch hng",children:t.jsx("input",{id:"Tn khch hng",type:"text",name:"Tn khch hng",value:f["Tn khch hng"]||"",onChange:w,onInput:Y=>Y.currentTarget.value=Y.currentTarget.value.toUpperCase(),required:!0,className:T,placeholder:"VD: NGUYEN VAN A"})}),t.jsx(Ct,{icon:"fa-barcode",label:"S n hng",htmlFor:"S n hng",children:t.jsx("input",{id:"S n hng",type:"text",name:"S n hng",value:f["S n hng"]||"",onChange:w,required:!0,pattern:"^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$",title:"nh dng: Nxxxxx-XXX-yy-mm-zzzz",onInvalid:Y=>Y.target.setCustomValidity("S n hng khng ng nh dng."),onInput:Y=>Y.target.setCustomValidity(""),className:T,placeholder:"VD: N12345-VSO-24-01-0001"})}),t.jsx(Ct,{icon:"fa-car",label:"Dng xe",htmlFor:"Dng xe",children:t.jsxs("select",{id:"Dng xe",name:"Dng xe",value:f["Dng xe"]||"",onChange:w,required:!0,className:`${T} futuristic-select disabled:opacity-50`,disabled:S,children:[t.jsx("option",{value:"",disabled:!0,children:"Chn dng xe"}),Object.keys(as).map(Y=>t.jsx("option",{value:Y,children:Y},Y))]})}),t.jsx(Ct,{icon:"fa-sitemap",label:"Phin bn",htmlFor:"Phin bn",children:t.jsxs("select",{id:"Phin bn",name:"Phin bn",value:f["Phin bn"]||"",onChange:w,required:!0,disabled:!f["Dng xe"]||S,className:`${T} futuristic-select disabled:opacity-50`,children:[t.jsx("option",{value:"",disabled:!0,children:"Chn phin bn"}),D.map(Y=>t.jsx("option",{value:Y,children:Y},Y))]})}),t.jsx(Ct,{icon:"fa-palette",label:"Ngoi tht",htmlFor:"Ngoi tht",children:t.jsxs("select",{id:"Ngoi tht",name:"Ngoi tht",value:f["Ngoi tht"]||"",onChange:w,required:!0,disabled:!f["Phin bn"]||S,className:`${T} futuristic-select disabled:opacity-50`,children:[t.jsx("option",{value:"",disabled:!0,children:"Chn mu ngoi tht"}),ot.map(Y=>t.jsx("option",{value:Y,children:Y},Y))]})}),t.jsx(Ct,{icon:"fa-chair",label:"Ni tht",htmlFor:"Ni tht",children:t.jsxs("select",{id:"Ni tht",name:"Ni tht",value:f["Ni tht"]||"",onChange:w,required:!0,disabled:!f["Phin bn"]||S,className:`${T} futuristic-select disabled:opacity-50`,children:[t.jsx("option",{value:"",disabled:!0,children:"Chn ni tht"}),c.map(Y=>t.jsx("option",{value:Y,children:Y},Y))]})}),t.jsx("div",{className:"md:col-span-2",children:t.jsx(Ct,{icon:"fa-calendar-alt",label:"Ngy cc",htmlFor:"Ngy cc",children:t.jsx("input",{id:"Ngy cc",name:"Ngy cc",type:"datetime-local",value:f["Ngy cc"]||"",onChange:w,required:!0,className:`${T} disabled:opacity-50 disabled:cursor-not-allowed`,disabled:!0})})})]})]})}),t.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end items-center gap-3 bg-surface-card relative z-10",children:[t.jsx(Z,{onClick:l,variant:"secondary",size:"sm",disabled:g,leftIcon:t.jsx("i",{className:"fas fa-times"}),children:"Hy"}),t.jsx(Z,{onClick:N,variant:"primary",size:"sm",isLoading:g,leftIcon:t.jsx("i",{className:"fas fa-save"}),children:"Lu Thay i"})]})]})})},Dt=r=>typeof r!="string"?"":r.trim().replace(/\s+/g," ").normalize("NFC"),Ds=async r=>{const l=new URLSearchParams(r);return(await axios.post(is,l)).data},Wo=async(r,l)=>{try{const o=await Ds({action:"login",username:r.toLowerCase(),password:l});if(o.success&&o.username&&o.consultantName){const i=o.consultantName||o.username,u=o.role||"T vn bn hng",h=o.email;return sessionStorage.setItem("isLoggedIn","true"),sessionStorage.setItem("currentUser",o.username),sessionStorage.setItem("currentConsultant",i),sessionStorage.setItem("userRole",u),h&&sessionStorage.setItem("userEmail",h),{success:!0,username:o.username,consultantName:i,role:u,email:h}}else return{success:!1,message:o.message||"Tn ng nhp hoc mt khu khng ng."}}catch(o){return console.error("Login API error:",o),{success:!1,message:"Khng th kt ni n my ch. Vui lng th li."}}},Go=async(r,l,o)=>{try{const i=await Ds({action:"changePassword",username:r.toLowerCase(),oldPassword:l,newPassword:o});return i.success?{success:!0,message:i.message}:{success:!1,message:i.message||"i mt khu tht bi."}}catch(i){return console.error("Change Password API error:",i),{success:!1,message:"Khng th kt ni n my ch. Vui lng th li."}}},qo=async r=>{try{const l=await Ds({action:"forgotPassword",email:r});return l.success?{success:!0,message:l.message}:{success:!1,message:l.message||"Yu cu m OTP tht bi."}}catch(l){return console.error("Forgot Password API error:",l),{success:!1,message:l instanceof Error?l.message:"Khng th kt ni n my ch."}}},Xo=async(r,l,o)=>{try{const i=await Ds({action:"resetPassword",email:r,otp:l,newPassword:o});return i.success?{success:!0,message:i.message}:{success:!1,message:i.message||"t li mt khu tht bi."}}catch(i){return console.error("Reset Password API error:",i),{success:!1,message:i instanceof Error?i.message:"Khng th kt ni n my ch."}}},Ko=({isOpen:r,onClose:l,showToast:o,username:i})=>{const[u,h]=m.useState(""),[f,x]=m.useState(""),[g,b]=m.useState(""),[c,y]=m.useState(!1),j=ct(),w=async N=>{if(N.preventDefault(),!u||!f||!g){o("Thiu Thng Tin","Vui lng in y  cc trng.","warning");return}if(f.length<6){o("Mt Khu Yu","Mt khu mi phi c t nht 6 k t.","warning");return}if(f!==g){o("Li","Mt khu xc nhn khng khp.","error");return}if(u===f){o("Lu ","Mt khu mi phi khc mt khu c.","info");return}y(!0);const D=await Go(i,u,f);y(!1),D.success?(o("Thnh Cng",D.message||"Mt khu  c thay i thnh cng!","success"),l()):o("Tht Bi",D.message||"i mt khu khng thnh cng.","error")},S=()=>{h(""),x(""),b(""),y(!1),l()};if(!r)return null;const T="peer w-full pl-12 pr-4 py-3 bg-surface-ground text-text-primary border border-border-primary rounded-lg focus:outline-none focus:border-accent-primary transition-all placeholder:text-text-placeholder focus:shadow-glow-accent";return t.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-0 md:p-4",onClick:S,children:t.jsx("div",{className:"bg-surface-card w-full md:max-w-md h-[100dvh] md:h-auto rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:N=>N.stopPropagation(),style:j,children:t.jsxs("form",{onSubmit:w,children:[t.jsxs("header",{className:"relative flex flex-col items-center justify-center p-6 text-center bg-surface-card border-b border-border-primary",children:[t.jsxs("div",{className:"animate-fade-in-down",children:[t.jsx("h2",{className:"text-xl font-bold text-gradient",children:"i Mt Khu"}),t.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Bo mt ti khon ca bn."})]}),t.jsx("button",{type:"button",onClick:S,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex-shrink-0 flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsxs("main",{className:"p-4 md:p-6 space-y-4 overflow-y-auto flex-grow min-h-0",children:[t.jsxs("div",{className:"relative",children:[t.jsx("i",{className:"fas fa-shield-alt absolute top-1/2 left-4 -translate-y-1/2 text-text-secondary peer-focus:text-accent-primary"}),t.jsx("input",{type:"password",value:u,onChange:N=>h(N.target.value),placeholder:"Mt khu c",required:!0,className:T})]}),t.jsxs("div",{className:"relative",children:[t.jsx("i",{className:"fas fa-lock absolute top-1/2 left-4 -translate-y-1/2 text-text-secondary peer-focus:text-accent-primary"}),t.jsx("input",{type:"password",value:f,onChange:N=>x(N.target.value),placeholder:"Mt khu mi (t nht 6 k t)",required:!0,className:T})]}),t.jsxs("div",{className:"relative",children:[t.jsx("i",{className:"fas fa-check-circle absolute top-1/2 left-4 -translate-y-1/2 text-text-secondary peer-focus:text-accent-primary"}),t.jsx("input",{type:"password",value:g,onChange:N=>b(N.target.value),placeholder:"Xc nhn mt khu mi",required:!0,className:T})]})]}),t.jsxs("footer",{className:"p-4 border-t border-border-primary flex justify-end gap-4 bg-surface-ground rounded-b-2xl",children:[t.jsx("button",{type:"button",onClick:S,disabled:c,className:"btn-secondary",children:"Hy"}),t.jsx("button",{type:"submit",disabled:c,className:"btn-primary",children:c?t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-spinner fa-spin mr-2"})," ang x l..."]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-save mr-2"})," Xc Nhn"]})})]})]})})})},Zo=({isOpen:r,onClose:l,images:o=[],startIndex:i=0,customerName:u})=>{const[h,f]=m.useState(i),[x,g]=m.useState(!0),[b,c]=m.useState(null),[y,j]=m.useState(null),[w,S]=m.useState(0),[T,N]=m.useState(!1),[D,M]=m.useState({scale:1,x:0,y:0,rotate:0}),[Y,A]=m.useState(!1),[I,$]=m.useState({x:0,y:0}),[V,E]=m.useState(!0),_=m.useRef(null),L=m.useRef(null),H=()=>M({scale:1,x:0,y:0,rotate:0}),z=m.useCallback(v=>{if(o.length===0)return;const P=(v+o.length)%o.length;P!==h&&(f(P),H())},[o,h]);m.useEffect(()=>{if(r){const v=o.length>0&&i>=0&&i<o.length?i:0;f(v),E(!0)}},[r,i,o]),m.useEffect(()=>{if(!r||o.length===0)return;g(!0),c(null),j(null),S(0),N(!1);const v=o[h];if(!v)return;const P=Wa(v.src,1920);j(P)},[r,o,h]);const R=m.useCallback(v=>{v.key==="Escape"&&l(),v.key==="ArrowRight"&&z(h+1),v.key==="ArrowLeft"&&z(h-1),v.key===" "&&(v.preventDefault(),E(P=>!P))},[l,z,h]);m.useEffect(()=>{if(r)return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[r,R]);const Q=v=>{if(!_.current)return;v.preventDefault();const P=.1,{deltaY:C}=v,U=D.scale-(C>0?P:-P),te=Math.max(.2,Math.min(U,10));te<=1?M(de=>({...de,scale:te,x:0,y:0})):M(de=>({...de,scale:te}))},q=v=>{D.scale<=1||(v.preventDefault(),A(!0),$({x:v.clientX-D.x,y:v.clientY-D.y}))},ee=v=>{!Y||D.scale<=1||(v.preventDefault(),M(P=>({...P,x:v.clientX-I.x,y:v.clientY-I.y})))},ie=v=>{Y&&(v.preventDefault(),A(!1))},oe=v=>{const P=D.scale+(v==="in"?.2:-.2),C=Math.max(.2,Math.min(P,10));C<=1?M(U=>({...U,scale:C,x:0,y:0})):M(U=>({...U,scale:C}))},xe=v=>{M(P=>({...P,rotate:P.rotate+(v==="right"?90:-90)}))},W=()=>{var v;document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():(v=L.current)==null||v.requestFullscreen().catch(P=>{console.error(`Error attempting to enable full-screen mode: ${P.message} (${P.name})`)})},K=()=>{const v=o[h];if(!v)return;const P=un(v.originalUrl||v.src),C=co(u,v.label),U=document.createElement("a");U.href=P,U.setAttribute("download",C),document.body.appendChild(U),U.click(),document.body.removeChild(U)};if(!r)return null;const F=o.length>0?o[h]:null;return t.jsxs("div",{ref:L,className:"fixed inset-0 bg-black/95 z-[100] flex flex-col animate-fade-in overflow-hidden select-none",onClick:()=>E(v=>!v),onWheel:Q,children:[t.jsxs("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",onMouseMove:ee,onMouseUp:ie,onMouseLeave:ie,children:[x&&t.jsxs("div",{className:"flex flex-col items-center gap-3 text-white/70",children:[t.jsx("i",{className:"fas fa-circle-notch fa-spin text-4xl"}),t.jsx("span",{className:"text-sm font-medium",children:"ang ti nh..."})]}),b&&!x&&t.jsxs("div",{className:"text-center p-6 bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 max-w-sm mx-4 text-white",onClick:v=>v.stopPropagation(),children:[t.jsx("i",{className:"fas fa-exclamation-triangle text-4xl text-amber-400 mb-4"}),t.jsx("h3",{className:"font-bold text-lg mb-2",children:"Khng th ti nh"}),t.jsx("p",{className:"text-sm text-white/70 mb-4",children:b==="IMAGE_LOAD_FAILED"?"C li xy ra khi ti nh t ngun.":b}),(F==null?void 0:F.originalUrl)&&t.jsxs("a",{href:F.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-white text-black rounded-full font-bold hover:bg-gray-200 transition-colors text-sm",children:["M trong tab mi ",t.jsx("i",{className:"fas fa-external-link-alt text-xs"})]})]}),y&&!b&&!T&&t.jsx("img",{ref:_,src:y,alt:F==null?void 0:F.label,className:`max-w-full max-h-full object-contain transition-opacity duration-300 ${x?"opacity-0":"opacity-100"}`,style:{transform:`scale(${D.scale}) translate(${D.x/D.scale}px, ${D.y/D.scale}px) rotate(${D.rotate}deg)`,cursor:Y?"grabbing":D.scale>1?"grab":"default",transition:Y?"none":"transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)",willChange:"transform"},onLoad:()=>g(!1),onError:()=>{if(F){if(w===0){S(1);const P=oo(F.src);if(P!==y){j(P);return}}const v=rs(F.src);if(v&&!T){N(!0),j(`https://drive.google.com/file/d/${v}/preview`),g(!1);return}}g(!1),c("IMAGE_LOAD_FAILED")},onMouseDown:q,onClick:v=>v.stopPropagation(),onDoubleClick:v=>{v.stopPropagation(),W()}}),T&&y&&t.jsxs("div",{className:"w-full h-full md:max-w-6xl md:max-h-[85vh] relative shadow-2xl md:rounded-2xl overflow-hidden bg-[#1e1e1e] border border-white/10",children:[t.jsx("iframe",{src:y,title:"File Preview",className:"w-full h-full w-full h-full border-0",allow:"autoplay",onLoad:()=>g(!1)}),t.jsx("div",{className:"absolute top-0 right-0 w-14 h-14 bg-[#1e1e1e] z-20 pointer-events-none"})]})]}),t.jsxs("div",{className:`absolute top-0 left-0 right-0 h-24 bg-gradient-to-b from-black/90 via-black/50 to-transparent z-50 flex items-start pt-6 px-6 justify-between transition-all duration-500 transform ${V?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,style:{pointerEvents:V?"auto":"none"},onClick:v=>v.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center gap-4 animate-slide-in-left",children:[t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 backdrop-blur-md border border-white/10 flex items-center justify-center shadow-glow-sm",children:t.jsx("i",{className:"fas fa-image text-xl text-purple-500 drop-shadow-md"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg text-white tracking-wide drop-shadow-sm line-clamp-1 max-w-[200px] md:max-w-md",children:F==null?void 0:F.label}),t.jsxs("p",{className:"text-xs text-white/60 font-medium tracking-wider uppercase",children:[u,"  ",h+1,"/",o.length]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 animate-slide-in-right",children:[t.jsxs("button",{onClick:K,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-white/20 backdrop-blur-md border border-white/10 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-cyan-500/20 hover:scale-110 active:scale-95",title:"Ti v",children:[t.jsx("i",{className:"fas fa-download text-lg group-hover:text-cyan-400 transition-colors"}),t.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/80 text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Ti v"})]}),t.jsx("button",{onClick:l,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-red-500/20 backdrop-blur-md border border-white/10 hover:border-red-500/50 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-red-500/20 hover:scale-110 active:scale-95",title:"ng (Esc)",children:t.jsx("i",{className:"fas fa-times text-lg group-hover:text-red-400 transition-colors"})})]})]}),o.length>1&&V&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:v=>{v.stopPropagation(),z(h-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 text-white flex items-center justify-center hover:bg-black/50 transition-all hover:scale-110 active:scale-95 z-10 hidden sm:flex",children:t.jsx("i",{className:"fas fa-chevron-left text-xl"})}),t.jsx("button",{onClick:v=>{v.stopPropagation(),z(h+1)},className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 text-white flex items-center justify-center hover:bg-black/50 transition-all hover:scale-110 active:scale-95 z-10 hidden sm:flex",children:t.jsx("i",{className:"fas fa-chevron-right text-xl"})})]}),t.jsxs("div",{className:`absolute bottom-0 left-0 right-0 p-6 transition-all duration-300 transform ${V?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,onClick:v=>v.stopPropagation(),children:[t.jsxs("div",{className:"max-w-3xl mx-auto flex flex-col gap-4",children:[o.length>1&&t.jsx("div",{className:"flex justify-center overflow-x-auto py-2 px-4 gap-2 no-scrollbar mask-gradient",children:o.map((v,P)=>t.jsx("button",{onClick:()=>z(P),className:`relative w-12 h-12 sm:w-16 sm:h-16 flex-shrink-0 rounded-lg overflow-hidden transition-all duration-300 border-2 ${h===P?"border-white scale-110 shadow-lg ring-2 ring-black/20":"border-transparent opacity-50 hover:opacity-100 hover:scale-105"}`,children:t.jsx("img",{src:Wa(v.src,320),alt:v.label,className:"w-full h-full object-cover"})},P))}),t.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-4 bg-black/60 backdrop-blur-xl border border-white/10 px-6 py-3 rounded-full shadow-2xl mx-auto",children:[t.jsx("button",{onClick:()=>oe("out"),disabled:D.scale<=.2,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors disabled:opacity-30",children:t.jsx("i",{className:"fas fa-minus"})}),t.jsxs("span",{className:"text-sm font-mono text-white/90 w-12 text-center select-none",children:[Math.round(D.scale*100),"%"]}),t.jsx("button",{onClick:()=>oe("in"),disabled:D.scale>=10,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors disabled:opacity-30",children:t.jsx("i",{className:"fas fa-plus"})}),t.jsx("div",{className:"w-px h-6 bg-white/20"}),t.jsx("button",{onClick:()=>xe("left"),className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"Xoay tri",children:t.jsx("i",{className:"fas fa-undo"})}),t.jsx("button",{onClick:()=>xe("right"),className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"Xoay phi",children:t.jsx("i",{className:"fas fa-redo"})}),t.jsx("div",{className:"w-px h-6 bg-white/20"}),t.jsx("button",{onClick:H,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"t li",children:t.jsx("i",{className:"fas fa-compress"})}),t.jsx("button",{onClick:W,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"Ton mn hnh",children:t.jsx("i",{className:"fas fa-expand"})})]})]}),t.jsx("div",{className:"mt-4 text-center",children:t.jsx("span",{className:"px-4 py-2 rounded-full bg-black/60 backdrop-blur-md border border-white/5 text-white/50 text-xs inline-block",children:"Nhn vo mn hnh  n/hin cng c"})})]})]})},Jo="/ordermanagement/assets/yes-DSvs6nbc.json",Qo="/ordermanagement/assets/no-animation-DB21lGdK.json",ec=({isOpen:r,onClose:l,onSubmit:o,title:i,description:u,inputs:h=[],submitText:f,submitColor:x,icon:g,targetId:b,showToast:c})=>{const[y,j]=m.useState({}),[w,S]=m.useState(!1),T=ct();if(m.useEffect(()=>{r?(j(I=>Object.keys(I).length>0&&h.length>0?I:h.reduce(($,V)=>($[V.id]="",$),{})),S(!1)):(j({}),S(!1))},[r]),!r)return null;const N=I=>{let $=I.target.value;const V=h.find(E=>E.id===I.target.name);V!=null&&V.isVIN&&($=$.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,17)),j(E=>({...E,[I.target.name]:$}))},D=()=>{var I;for(const $ of h){const V=(I=y[$.id])==null?void 0:I.trim();if(!V||$.isVIN&&V.length!==17)return!1}return!0},M=async()=>{if(h.length>0&&!D()){c?c("Thng tin khng hp l","Vui lng in y  v chnh xc thng tin.","warning"):alert("Vui lng in y  v chnh xc thng tin.");return}S(!0),await o(y)||S(!1)},Y={primary:{bg:"bg-accent-primary",iconBg:"bg-blue-100",iconText:"text-accent-primary"},danger:{bg:"bg-danger",iconBg:"bg-danger-bg",iconText:"text-danger"},success:{bg:"bg-success",iconBg:"bg-success-bg",iconText:"text-success"}},A=Y[x]||Y.primary;return t.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("div",{className:"bg-surface-card w-full md:max-w-md h-full md:h-auto rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:I=>I.stopPropagation(),style:T,children:[t.jsx("div",{className:`h-1.5 rounded-t-none md:rounded-t-2xl ${A.bg} flex-shrink-0`}),t.jsxs("header",{className:"p-3 flex items-start gap-2",children:[t.jsx("div",{className:`flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-lg ${A.iconBg}`,children:t.jsx("i",{className:`fas ${g} text-2xl ${A.iconText}`})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold leading-6 text-text-primary",children:i}),t.jsx("p",{className:"text-sm text-text-secondary mt-1",children:u})]})]}),t.jsxs("main",{className:"p-4 md:p-6 space-y-4 overflow-y-auto flex-grow min-h-0",children:[b&&t.jsxs("div",{className:"bg-surface-ground border border-border-primary rounded-md p-1.5 text-center",children:[t.jsx("p",{className:"text-xs text-text-secondary",children:"Thc hin cho:"}),t.jsx("p",{className:"text-sm font-semibold text-text-primary font-mono",children:b})]}),h.length>0&&t.jsx("div",{className:"space-y-2",children:h.map(I=>{var $;return t.jsxs("div",{children:[t.jsx("label",{htmlFor:I.id,className:"block text-sm font-medium text-text-secondary mb-1",children:I.label}),I.type==="textarea"?t.jsx("textarea",{id:I.id,name:I.id,value:y[I.id]||"",onChange:N,placeholder:I.placeholder,rows:3,className:"w-full bg-surface-ground border border-border-primary rounded-lg shadow-inner-sm p-2 focus:ring-accent-primary focus:border-accent-primary transition futuristic-input"}):I.type==="select"?t.jsxs("select",{id:I.id,name:I.id,value:y[I.id]||"",onChange:N,className:"w-full bg-surface-ground border border-border-primary rounded-lg shadow-inner-sm p-2 focus:ring-accent-primary focus:border-accent-primary transition futuristic-input",children:[t.jsx("option",{value:"",disabled:!0,children:I.placeholder||"Chn mt ty chn"}),($=I.options)==null?void 0:$.map(V=>t.jsx("option",{value:V,children:V},V))]}):t.jsx("input",{id:I.id,name:I.id,type:I.type||"text",value:y[I.id]||"",onChange:N,placeholder:I.placeholder,maxLength:I.isVIN?17:void 0,className:"w-full bg-surface-ground border border-border-primary rounded-lg shadow-inner-sm p-2 focus:ring-accent-primary focus:border-accent-primary transition futuristic-input"})]},I.id)})})]}),t.jsxs("footer",{className:"px-3 py-2 flex justify-end items-center gap-1.5 bg-surface-ground rounded-none md:rounded-b-2xl border-t border-border-primary flex-shrink-0",children:[t.jsx("div",{onClick:w?void 0:l,title:"Hy",className:`cursor-pointer ${w?"opacity-50 cursor-not-allowed":"hover:scale-110 transition-transform"}`,children:t.jsx("lottie-player",{src:Qo,background:"transparent",speed:"1",style:{width:"52px",height:"52px"},loop:!0,autoplay:!0})}),t.jsx("div",{onClick:w?void 0:M,title:f,className:`cursor-pointer flex items-center justify-center w-[52px] h-[52px] ${w||h.length>0&&!D()?"opacity-50 cursor-not-allowed":"hover:scale-110 transition-transform"}`,children:w?t.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-accent-primary"}):t.jsx("lottie-player",{src:Jo,background:"transparent",speed:"1",style:{width:"52px",height:"52px"},loop:!0,autoplay:!0})})]})]})})},tc=({order:r,onClose:l,onSubmit:o})=>{const[i,u]=m.useState("personal"),[h,f]=m.useState(""),[x,g]=m.useState(null),[b,c]=m.useState(null),[y,j]=m.useState(null),[w,S]=m.useState(null),[T,N]=m.useState(null),[D,M]=m.useState(!1),Y=ct();if(m.useEffect(()=>{r||(u("personal"),f(""),g(null),c(null),j(null),S(null),N(null),M(!1))},[r]),!r)return null;const A=()=>!w||!T?!1:i==="personal"?x&&b:i==="company"?y&&h.trim()!=="":!1,I=async()=>{if(!A()){alert("Vui lng in y  thng tin v ti ln tt c cc tp cn thit.");return}M(!0);const $={orderNumber:r["S n hng"],customerType:i,files:{idCardFront:x,idCardBack:b,businessLicense:y,regFront:w,regBack:T}};i==="company"&&($.dmsCode=h),await o($,r.VIN)||M(!1)};return t.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("div",{className:"bg-surface-card w-full md:max-w-xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:$=>$.stopPropagation(),style:Y,children:[t.jsxs("header",{className:"flex-shrink-0 relative flex flex-col items-center justify-center p-6 text-center border-b border-border-primary",children:[t.jsx("h2",{className:"text-xl font-bold text-gradient",children:"Yu Cu Cp VinClub"}),t.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Cung cp chng t  to ti khon VinClub cho khch hng."}),t.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 custom-scrollbar",children:[t.jsxs("div",{className:"p-4 bg-surface-ground rounded-lg border border-border-primary text-sm mb-4",children:["ang yu cu cho SH: ",t.jsx("strong",{className:"font-mono",children:r["S n hng"]})," - KH: ",t.jsx("strong",{children:r["Tn khch hng"]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Loi khch hng"}),t.jsxs("div",{className:"flex gap-4 p-1 bg-surface-ground rounded-lg border border-border-primary w-fit",children:[t.jsxs("button",{onClick:()=>u("personal"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-all ${i==="personal"?"bg-white shadow-sm text-accent-primary":"text-text-secondary hover:text-text-primary"}`,children:[t.jsx("i",{className:"fas fa-user mr-2"}),"C Nhn"]}),t.jsxs("button",{onClick:()=>u("company"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-all ${i==="company"?"bg-white shadow-sm text-accent-primary":"text-text-secondary hover:text-text-primary"}`,children:[t.jsx("i",{className:"fas fa-building mr-2"}),"Cng Ty"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[i==="personal"?t.jsxs(t.Fragment,{children:[t.jsx(lt,{id:"cccd-front",label:"CCCD Mt Trc",onFileSelect:g,required:!0,accept:"image/*"}),t.jsx(lt,{id:"cccd-back",label:"CCCD Mt Sau",onFileSelect:c,required:!0,accept:"image/*"})]}):t.jsxs(t.Fragment,{children:[t.jsx(lt,{id:"biz-license",label:"Giy Php Kinh Doanh",onFileSelect:j,required:!0,accept:"image/*"}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"dms-code",className:"block text-sm font-medium text-text-primary mb-2",children:["M KH DMS ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{id:"dms-code",type:"text",value:h,onChange:$=>f($.target.value),className:"w-full bg-surface-ground border border-border-primary rounded-lg p-2.5 futuristic-input",placeholder:"Nhp m khch hng DMS",required:!0})]})]}),t.jsx(lt,{id:"reg-front",label:"Cavet Xe Mt Trc",onFileSelect:S,required:!0,accept:"image/*"}),t.jsx(lt,{id:"reg-back",label:"Cavet Xe Mt Sau",onFileSelect:N,required:!0,accept:"image/*"})]})]})}),t.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end gap-3 bg-surface-card relative z-10",children:[t.jsx(Z,{onClick:l,disabled:D,variant:"secondary",size:"sm",leftIcon:t.jsx("i",{className:"fas fa-times"}),children:"Hy"}),t.jsx(Z,{onClick:I,disabled:!A()||D,variant:"primary",size:"sm",isLoading:D,leftIcon:D?void 0:t.jsx("i",{className:"fas fa-paper-plane"}),children:"Gi Yu Cu"})]})]})})},sc=r=>{if(!r||!r.includes("drive.google.com"))return r;const l=r.match(/\/d\/([a-zA-Z0-9_-]{25,})|id=([a-zA-Z0-9_-]{25,})/);if(l){const o=l[1]||l[2];if(o)return`https://drive.google.com/file/d/${o}/preview`}return r.replace("/open?","/preview?")},ac=r=>{if(!r||!r.includes("drive.google.com"))return r;const l=r.match(/\/d\/([a-zA-Z0-9_-]{25,})|id=([a-zA-Z0-9_-]{25,})/);if(l){const o=l[1]||l[2];if(o)return`https://drive.google.com/uc?export=download&id=${o}`}return r},nc=r=>{if(!r||!r.includes("drive.google.com"))return r;const l=r.match(/\/d\/([a-zA-Z0-9_-]{25,})|id=([a-zA-Z0-9_-]{25,})/);if(l){const o=l[1]||l[2];if(o)return`https://drive.google.com/file/d/${o}/view`}return r},rc=r=>(o=>o.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"D").replace(//g,"d"))(r).replace(/[^a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_"),ic=({isOpen:r,onClose:l,fileUrl:o,fileLabel:i})=>{const[u,h]=_e.useState(!1),f=m.useCallback(()=>{const j=nc(o);window.open(j,"_blank"),h(!0),setTimeout(()=>h(!1),4e3)},[o]),x=m.useCallback(j=>{j.key==="Escape"?l():(j.ctrlKey||j.metaKey)&&j.key==="p"&&(j.preventDefault(),f())},[l,f]);if(m.useEffect(()=>{if(r)return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[r,x]),!r)return null;const g=sc(o),b=j=>{j.stopPropagation();const w=ac(o),S=rc(i),T=document.createElement("a");T.href=w,T.setAttribute("download",S),document.body.appendChild(T),T.click(),document.body.removeChild(T)},[c,y]=_e.useState(!0);return t.jsxs("div",{className:"fixed inset-0 bg-black/95 z-[100] flex flex-col animate-fade-in overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden p-0 md:p-8",onClick:()=>y(j=>!j),children:t.jsxs("div",{className:"relative w-full h-full md:max-w-6xl md:max-h-[85vh] shadow-2xl md:rounded-2xl overflow-hidden bg-[#1e1e1e] border border-white/10 transition-all duration-300",children:[t.jsx("iframe",{src:g,className:"w-full h-full w-full h-full border-0",title:i}),t.jsx("div",{className:"absolute top-0 right-0 w-14 h-14 bg-[#1e1e1e] z-20 pointer-events-none"})]})}),t.jsxs("div",{className:`absolute top-0 left-0 right-0 h-24 bg-gradient-to-b from-black/90 via-black/50 to-transparent z-50 flex items-start pt-6 px-6 justify-between transition-all duration-500 transform ${c?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,style:{pointerEvents:c?"auto":"none"},children:[t.jsxs("div",{className:"flex items-center gap-4 animate-slide-in-left",children:[t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 backdrop-blur-md border border-white/10 flex items-center justify-center shadow-glow-sm",children:t.jsx("i",{className:"fas fa-file-pdf text-xl text-red-500 drop-shadow-md"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg text-white tracking-wide drop-shadow-sm line-clamp-1 max-w-[200px] md:max-w-md",children:i}),t.jsx("p",{className:"text-xs text-white/60 font-medium tracking-wider uppercase",children:"Xem trc ti liu"})]})]}),t.jsxs("div",{className:"flex items-center gap-3 animate-slide-in-right",children:[t.jsxs("button",{onClick:b,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-white/20 backdrop-blur-md border border-white/10 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-cyan-500/20 hover:scale-110 active:scale-95",title:"Ti v",children:[t.jsx("i",{className:"fas fa-download text-lg group-hover:text-cyan-400 transition-colors"}),t.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/80 text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Ti v"})]}),t.jsxs("button",{onClick:f,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-white/20 backdrop-blur-md border border-white/10 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-green-500/20 hover:scale-110 active:scale-95",title:"In (Ctrl+P)",children:[t.jsx("i",{className:"fas fa-print text-lg group-hover:text-green-400 transition-colors"}),t.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/80 text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"In (Ctrl+P)"})]}),t.jsx("button",{onClick:l,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-red-500/20 backdrop-blur-md border border-white/10 hover:border-red-500/50 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-red-500/20 hover:scale-110 active:scale-95",title:"ng (Esc)",children:t.jsx("i",{className:"fas fa-times text-lg group-hover:text-red-400 transition-colors"})})]})]}),u&&t.jsx("div",{className:"absolute top-24 left-1/2 -translate-x-1/2 z-50 animate-slide-in-down",children:t.jsx("div",{className:"px-6 py-3 rounded-xl bg-green-500/90 backdrop-blur-md border border-green-400/50 text-white shadow-lg shadow-green-500/20",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("i",{className:"fas fa-check-circle text-xl"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-sm",children:"ang m hp thoi in..."}),t.jsx("div",{className:"text-xs opacity-90",children:"Vui lng ch trong giy lt"})]})]})})}),t.jsx("div",{className:`absolute bottom-8 left-1/2 -translate-x-1/2 transition-opacity duration-500 ${c?"opacity-100":"opacity-0"}`,children:t.jsx("div",{className:"px-4 py-2 rounded-full bg-black/60 backdrop-blur-md border border-white/5 text-white/50 text-xs",children:"Nhn vo mn hnh  n/hin cng c"})})]})},lc=({rank:r})=>r===1?t.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-amber-400/20 text-amber-500",title:"Hng 1",children:t.jsx("i",{className:"fas fa-crown"})}):r===2?t.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-400/20 font-bold text-slate-500",title:"Hng 2",children:"2"}):r===3?t.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-yellow-600/20 font-bold text-yellow-700",title:"Hng 3",children:"3"}):t.jsx("div",{className:"flex items-center justify-center w-8 h-8 font-semibold text-text-secondary",children:r}),oc=({isOpen:r,onClose:l,stats:o})=>{const i=ct(),u=m.useMemo(()=>o.flatMap(h=>h.variants.map(f=>{const[x,g]=f.variant.split(" / "),b=x.split(" - "),c=b.length>1?b.slice(0,-1).join(" - "):"N/A",y=b.length>1?b[b.length-1]:x;return{model:h.model,version:c,exterior:y,interior:g,count:f.count}})).sort((h,f)=>f.count-h.count),[o]);return r?t.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("div",{className:"bg-surface-card w-full md:max-w-4xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:h=>h.stopPropagation(),style:i,children:[t.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-5 border-b border-border-primary",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-amber-500/10",children:t.jsx("i",{className:"fas fa-chart-pie text-lg text-amber-500"})}),t.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Thng K Xe Ch Ghp"})]}),t.jsx("button",{onClick:l,className:"w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsx("main",{className:"p-4 md:p-6 overflow-y-auto flex-grow min-h-0 bg-surface-ground",children:u.length>0?t.jsxs("div",{className:"bg-surface-card border border-border-primary rounded-lg shadow-sm",children:[t.jsxs("header",{className:"grid grid-cols-[3.5rem_1fr_4rem] items-center gap-4 px-4 py-2 border-b border-border-primary text-xs font-bold text-text-secondary uppercase",children:[t.jsx("span",{className:"text-center",children:"Hng"}),t.jsx("span",{children:"Cu hnh xe"}),t.jsx("span",{className:"text-right",children:"S Lng"})]}),t.jsx("div",{className:"divide-y divide-border-primary/70",children:u.map((h,f)=>t.jsxs("div",{className:"grid grid-cols-[3.5rem_1fr_4rem] items-center gap-4 px-4 py-3 hover:bg-surface-hover transition-colors",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx(lc,{rank:f+1})}),t.jsxs("div",{className:"min-w-0",children:[t.jsxs("p",{className:"font-semibold text-sm text-text-primary truncate",title:`${h.model} - ${h.version}`,children:[h.model," - ",h.version]}),t.jsxs("p",{className:"text-xs text-text-secondary truncate",title:`${h.exterior} / ${h.interior}`,children:[h.exterior," / ",h.interior]})]}),t.jsx("div",{className:"font-bold text-lg text-accent-primary text-right font-mono",children:h.count})]},f))})]}):t.jsxs("div",{className:"text-center text-text-secondary py-12 flex flex-col items-center justify-center h-full",children:[t.jsx("i",{className:"fas fa-box-open fa-3x mb-4"}),t.jsx("p",{children:"Khng c yu cu no ang ch."})]})}),t.jsx("footer",{className:"p-4 border-t flex justify-end gap-4 bg-surface-card rounded-b-2xl",children:t.jsx("button",{onClick:l,className:"btn-secondary",children:"ng"})})]})}):null},ks=({label:r,value:l,onChange:o})=>t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:r}),t.jsx("input",{type:"date",value:l,onChange:i=>o(i.target.value),className:"w-full bg-surface-input border border-border-primary rounded-md p-2 text-sm focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary futuristic-input"})]}),cc=({filters:r,onFilterChange:l,onReset:o,dropdowns:i,searchPlaceholder:u,totalCount:h,onRefresh:f,isLoading:x,hideSearch:g=!1,size:b="default",plain:c=!1,dateRangeEnabled:y=!1,dateFilterEnabled:j=!1,viewSwitcherEnabled:w=!1,activeView:S="table",onViewChange:T,extraActionButton:N,variant:D="default",dropdownClassName:M="w-28 md:w-36 lg:w-64",searchable:Y=!0})=>{const[A,I]=m.useState(r.keyword||""),[$,V]=m.useState(!1),[E,_]=m.useState(!1),[L,H]=m.useState([]),z=m.useRef(null),R=r.dateRange||{start:"",end:""},Q=(v,P)=>{l({dateRange:{...R,[v]:P}})},q=v=>{H(P=>P.includes(v)?P.filter(C=>C!==v):[...P,v])};m.useEffect(()=>{const v=P=>{z.current&&!z.current.contains(P.target)&&_(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),m.useEffect(()=>{r.keyword!==A&&I(r.keyword||"")},[r.keyword]),m.useEffect(()=>{const v=setTimeout(()=>{A!==r.keyword&&l({keyword:A})},300);return()=>clearTimeout(v)},[A,r.keyword,l]);const ee=i.flatMap(v=>{const P=r[v.key]||[];return P.map(C=>({key:`${v.key}-${C}`,label:v.label,value:C,onRemove:()=>{l({[v.key]:P.filter(U=>U!==C)})}}))}),ie=R.start&&R.end?{key:`date-range-${R.start}-${R.end}`,label:"Date Range",value:`${new Date(R.start).toLocaleDateString("vi-VN")} - ${new Date(R.end).toLocaleDateString("vi-VN")}`,onRemove:()=>l({dateRange:{start:"",end:""}})}:null,oe=[...ee];ie&&oe.push(ie);const xe=r.keyword&&r.keyword.length>0||oe.length>0,W=i.map(v=>t.jsx("div",{className:M,children:t.jsx(Ut,{id:v.id,label:v.label,options:v.options,selectedOptions:r[v.key]||[],onChange:P=>l({[v.key]:P}),icon:v.icon,displayMode:v.displayMode||"count",size:b,variant:D,searchable:Y})},v.id)),K=t.jsxs("div",{className:`${D==="modern"?"flex items-center gap-2":`flex items-center gap-2 ${c?"!shadow-none !bg-transparent !p-0 !border-none":""}`}`,children:[!g&&t.jsxs("div",{className:`relative flex items-center transition-all duration-300 ${D==="modern"?"w-32 focus-within:w-48 flex-shrink":"flex-grow min-w-[200px] lg:min-w-[300px]"}`,children:[t.jsx("i",{className:`fas fa-search absolute left-2 z-10 ${D==="modern"?"text-accent-primary text-[10px] top-1.5":"left-4 text-gray-400"}`}),t.jsx("input",{type:"text",id:"search-input-desktop",placeholder:u,value:A,onChange:v=>I(v.target.value),className:`w-full ${b==="compact"?"h-9 text-xs py-1.5":"h-10 text-sm py-1.5"} pl-7 pr-8 focus:outline-none text-text-primary placeholder:text-text-placeholder transition-all duration-300 ${D==="modern"?"bg-white border border-border-secondary rounded-full shadow-sm focus:border-accent-primary focus:ring-2 focus:ring-accent-primary/20":"relative"}`}),A&&t.jsx("button",{onClick:()=>{I(""),l({keyword:""})},className:"absolute right-2 text-gray-400 hover:text-danger transition-colors",title:"Xa tm kim",children:t.jsx("i",{className:"fas fa-times-circle text-xs"})})]}),W,t.jsx("div",{className:`w-8 h-8 flex items-center justify-center transition-all duration-200 ${D==="modern"?"":"ml-2"}`,children:t.jsx(Z,{onClick:o,variant:"danger",className:`!p-0 w-8 h-8 rounded-full transition-all duration-200 ${xe?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none"}`,title:"Xa tt c b lc",tabIndex:xe?0:-1,children:t.jsx("i",{className:"fas fa-times"})})}),y&&t.jsxs("div",{className:"relative",ref:z,children:[t.jsx(Z,{onClick:()=>_(!E),variant:"ghost",className:`h-9 px-3 text-xs ${R.start&&R.end||E?"bg-surface-hover text-accent-primary":""}`,leftIcon:t.jsx("i",{className:"fas fa-calendar-alt text-text-placeholder text-xs"}),children:t.jsx("span",{className:`${R.start&&R.end?"font-semibold":""}`,children:R.start&&R.end?`${Ye(R.start).format("DD/MM")} - ${Ye(R.end).format("DD/MM")}`:"Chn ngy"})}),E&&t.jsx("div",{className:"absolute top-full mt-2 right-0 z-20 bg-surface-card p-4 rounded-lg shadow-lg border border-border-primary date-range-picker-popover",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(ks,{label:"T ngy",value:R.start,onChange:v=>Q("start",v)}),t.jsx(ks,{label:"n ngy",value:R.end,onChange:v=>Q("end",v)})]})})]}),t.jsxs("span",{className:"text-sm font-medium text-text-secondary px-3 whitespace-nowrap border-l border-border-primary/50 ml-auto",children:[h," kt qu"]}),w&&t.jsxs("div",{className:"view-switcher-group flex gap-1",children:[t.jsx(Z,{onClick:()=>T==null?void 0:T("table"),variant:S==="table"?"primary":"ghost",size:"sm",className:"!p-2",title:"Xem dng danh sch",children:t.jsx("i",{className:"fas fa-list"})}),t.jsx(Z,{onClick:()=>T==null?void 0:T("grid"),variant:S==="grid"?"primary":"ghost",size:"sm",className:"!p-2",title:"Xem dng li",children:t.jsx("i",{className:"fas fa-th-large"})})]}),N,t.jsx(Z,{onClick:f,disabled:x,variant:"ghost",className:`w-9 h-9 flex-shrink-0 ${D==="modern"?"!rounded-full !bg-gray-50 hover:!bg-gray-100 !border-transparent":""}`,"aria-label":"Lm mi",title:"Lm mi",children:t.jsx("i",{className:`fas fa-sync-alt text-base ${x?"animate-spin":""}`})})]}),F=t.jsx("div",{className:`hidden md:block flex-shrink-0 ${!c&&D!=="modern"&&"p-2"}`,children:K});return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"md:hidden flex w-full items-center gap-2 ",children:[!g&&t.jsxs("div",{className:"relative flex-grow flex items-center min-w-0",children:[t.jsx("i",{className:"fas fa-search absolute left-4 text-gray-400 z-10"}),t.jsx("input",{type:"text",id:"search-input-mobile",placeholder:u,value:A,onChange:v=>I(v.target.value),className:"w-full h-9 pl-11 pr-9 py-1.5 relative focus:outline-none text-text-primary placeholder:text-text-placeholder text-sm bg-surface-ground rounded-lg border border-transparent focus:bg-white focus:border-accent-primary transition-all duration-300"}),A&&t.jsx("button",{onClick:()=>{I(""),l({keyword:""})},className:"absolute right-3 text-gray-400 hover:text-danger transition-colors",children:t.jsx("i",{className:"fas fa-times-circle"})})]}),t.jsxs(Z,{onClick:()=>V(!0),variant:"ghost",className:"flex-shrink-0 w-9 h-9 relative !p-0",children:[t.jsx("i",{className:"fas fa-filter text-accent-primary"}),oe.length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-danger text-white text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center border-2 border-surface-ground",children:oe.length})]}),t.jsx(Z,{onClick:f,disabled:x,variant:"ghost",className:"flex-shrink-0 w-9 h-9 !p-0","aria-label":"Lm mi",title:"Lm mi",children:t.jsx("i",{className:`fas fa-sync-alt text-base ${x?"animate-spin":""}`})})]}),$&&tn.createPortal(t.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex flex-col justify-end md:hidden",onClick:()=>V(!1),children:t.jsxs("div",{className:"bg-surface-card rounded-t-2xl p-4 animate-fade-in-up flex flex-col max-h-[85vh]",style:{animationDuration:"300ms"},onClick:v=>v.stopPropagation(),children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-border-primary flex-shrink-0",children:[t.jsx("h3",{className:"font-bold text-lg text-text-primary",children:"B Lc"}),t.jsx(Z,{onClick:()=>V(!1),variant:"ghost",className:"w-8 h-8 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover !p-0",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsxs("div",{className:"space-y-3 overflow-y-auto pr-2 -mr-2 custom-scrollbar py-2 flex-grow",children:[(y||j)&&t.jsxs("div",{className:"bg-gray-50/50 rounded-xl p-3 border border-gray-100",children:[t.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 block",children:y?"Thi gian":"Ngy"}),t.jsxs("div",{className:`grid ${y?"grid-cols-2 gap-3":"grid-cols-1"}`,children:[t.jsx(ks,{label:y?"T ngy":"Chn ngy",value:R.start,onChange:v=>Q("start",v)}),y&&t.jsx(ks,{label:"n ngy",value:R.end,onChange:v=>Q("end",v)})]})]}),i.map(v=>{var U;const P=L.includes(v.id),C=((U=r[v.key])==null?void 0:U.length)>0;return t.jsxs("div",{className:`border rounded-xl transition-all duration-300 overflow-hidden ${P?"bg-white border-accent-primary/30 shadow-sm":"bg-white border-gray-100"}`,children:[t.jsxs("button",{type:"button",onClick:()=>q(v.id),className:"flex items-center justify-between w-full p-3 text-left group",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${C?"bg-accent-primary text-white shadow-sm shadow-accent-primary/30":"bg-gray-100 text-gray-400 group-hover:bg-accent-primary/10 group-hover:text-accent-primary"}`,children:t.jsx("i",{className:`fas ${v.icon} text-xs`})}),t.jsxs("div",{children:[t.jsx("span",{className:`text-sm font-semibold transition-colors ${C?"text-accent-primary":"text-gray-700 group-hover:text-gray-900"}`,children:v.label}),C&&t.jsxs("div",{className:"text-[10px] text-gray-500 font-medium",children:[" chn ",r[v.key].length]})]})]}),t.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center transition-transform duration-300 ${P?"rotate-180 bg-gray-100 text-gray-600":"text-gray-300"}`,children:t.jsx("i",{className:"fas fa-chevron-down text-xs"})})]}),t.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${P?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:t.jsx("div",{className:"overflow-hidden",children:t.jsx("div",{className:"p-3 pt-0 border-t border-gray-50",children:t.jsx("div",{className:"mt-3",children:t.jsx(Ut,{id:"mobile-"+v.id,label:v.label,options:v.options,selectedOptions:r[v.key]||[],onChange:te=>l({[v.key]:te}),icon:v.icon,displayMode:v.displayMode,size:"default",mode:v.mode||(v.options.length>6?"inline":"chips"),searchable:!1})})})})})]},"mobile-"+v.id)})]}),t.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3 pt-3 border-t border-border-primary flex-shrink-0",children:[t.jsx(Z,{onClick:()=>{o()},disabled:!xe,variant:"secondary",fullWidth:!0,className:"rounded-xl",children:"Xa Lc"}),t.jsxs(Z,{onClick:()=>V(!1),variant:"primary",fullWidth:!0,className:"rounded-xl shadow-lg shadow-accent-primary/20",children:["Xem ",h," kt qu"]})]})]})}),document.body),F]})},dc="/ordermanagement/assets/hoa_dao_branch_bloom-yVxm6oGr.gif",uc="/ordermanagement/assets/hoa_dao_static-BRbspx5L.png",hc="/ordermanagement/assets/hoa_mai_bloom-B4Zuhbv-.gif",mc="/ordermanagement/assets/hoa_mai_static-BwGnp57_.png",fc="/ordermanagement/assets/petal_1-BI1qgdVS.webp",yn="/ordermanagement/assets/petal_2-BMhGF0Jm.webp",bn="/ordermanagement/assets/petal_3-Bvyh7_MT.webp",xc="/ordermanagement/assets/petal_4-Dsz0xQbq.webp",vn="/ordermanagement/assets/petal_5-CCrXKZhb.webp",gc="/ordermanagement/assets/petal_6-xsqu7hkg.webp",pc="/ordermanagement/assets/petal_7-DsiQX_VS.webp",yc="/ordermanagement/assets/petal_8-BzjmCj-W.webp",bc="/ordermanagement/assets/petal_9-BJSNNJsy.webp",vc="/ordermanagement/assets/petal_10-Bo4wKqSo.webp",wn=[fc,yn,bn,xc,vn],jn=[gc,pc,yc,bc,vc],wc=[...wn,...jn],Nn=({flowerType:r="mixed",delay:l=0,sizeMode:o="normal"})=>{const i=m.useMemo(()=>{let x=wc;r==="dao"&&(x=wn),r==="mai"&&(x=jn);const g=o==="large"?30:15;return Array.from({length:g}).map((b,c)=>({id:c,img:x[Math.floor(Math.random()*x.length)],left:`${Math.random()*100}%`,duration:`${25+Math.random()*20}s`,delay:`-${Math.random()*25}s`,animationName:`fall-wind-${1+Math.floor(Math.random()*4)}`}))},[r,o]),[u,h]=m.useState(l===0);if(m.useEffect(()=>{if(l>0){const x=setTimeout(()=>h(!0),l);return()=>clearTimeout(x)}else h(!0)},[l]),!u)return null;const f=o==="large"?"w-3 h-3 md:w-4 md:h-4":"w-1.5 h-1.5 md:w-2 md:h-2";return t.jsxs("div",{className:"absolute inset-0 z-[6] pointer-events-none overflow-hidden select-none",children:[i.map(x=>t.jsx("img",{src:x.img,className:`absolute ${f} object-contain drop-shadow-sm will-change-transform`,draggable:"false",style:{left:x.left,top:"-10%",animationName:x.animationName,animationDuration:x.duration,animationDelay:x.delay,animationTimingFunction:"linear",animationIterationCount:"infinite"},alt:""},x.id)),t.jsx("style",{dangerouslySetInnerHTML:{__html:`
                /* Wind-blown animations: Start Right -> Drift Left + Fall Down */
                
                /* Gentle Breeze (Stays mostly right/center) */
                @keyframes fall-wind-1 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    50% { transform: translate3d(-50px, 50vh, 0) rotate(90deg); }
                    100% { transform: translate3d(-80px, 120vh, 0) rotate(180deg); opacity: 0; }
                }
                
                /* Moderate Wind (Reaches center/left) */
                @keyframes fall-wind-2 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    40% { transform: translate3d(-100px, 40vh, 0) rotate(-45deg); }
                    100% { transform: translate3d(-200px, 120vh, 0) rotate(-180deg); opacity: 0; }
                }

                /* Strong Gust (Drifts across to far left) */
                @keyframes fall-wind-3 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    35% { transform: translate3d(-150px, 35vh, 0) rotate(30deg); }
                    100% { transform: translate3d(-350px, 120vh, 0) rotate(120deg); opacity: 0; }
                }

                /* Fast & Flat (Blows almost horizontally) */
                @keyframes fall-wind-4 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    30% { transform: translate3d(-100px, 20vh, 0) rotate(60deg); }
                    100% { transform: translate3d(-400px, 120vh, 0) rotate(360deg); opacity: 0; }
                }
            `}})]})},jc=({order:r,onViewDetails:l,processingOrder:o})=>{const i=r["Trng thi VC"]||r["Kt qu"]||"Cha ghp",u=o===r["S n hng"],h=new Date>=new Date("2026-01-05T00:00:00"),[f,x]=m.useState(""),[g,b]=m.useState("dao"),[c,y]=m.useState(0);return m.useEffect(()=>{if(!h)return;const j=Math.random()>.5?"mai":"dao";b(j),x(j==="dao"?uc:mc);const w=Math.random()*1e4;y(w);const S=setTimeout(()=>{x(`${j==="dao"?dc:hc}?v=${r["S n hng"]}-${Date.now()}`)},w);return()=>{clearTimeout(S)}},[r,h]),t.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-white p-3 shadow-md border border-light-border hover:shadow-lg transition-all duration-200 ease-out active:scale-[0.98] cursor-pointer flex flex-col group",onClick:()=>l(r),children:[t.jsx("div",{className:"absolute -right-10 -bottom-6 w-48 z-0 transition-all duration-700 ease-out group-hover:scale-125 group-hover:-translate-x-4 group-hover:-translate-y-2 group-hover:opacity-100 group-hover:rotate-0 opacity-60 transform -rotate-12 animate-drive-in-right origin-bottom-right",children:t.jsx(la,{model:r["Dng xe"],exteriorColor:r["Ngoi tht"],className:"w-full h-auto object-contain drop-shadow-xl",alt:""})}),h&&t.jsx("div",{className:"absolute -top-2 -right-2 w-24 h-auto z-[8] pointer-events-none",children:t.jsx("img",{src:f,className:"w-full h-auto object-contain select-none",alt:"",draggable:"false"})}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white via-white/80 to-transparent z-5"}),h&&t.jsx(Nn,{flowerType:g,delay:c}),t.jsxs("div",{className:"relative z-10 flex flex-col flex-grow gap-1.5 min-w-0",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("p",{className:"text-light-text-primary text-sm font-bold leading-tight pr-2 truncate",title:r["Tn khch hng"],children:r["Tn khch hng"]}),t.jsx("div",{className:"flex-shrink-0",onClick:j=>j.stopPropagation(),children:u&&t.jsx("div",{className:"flex items-center justify-center w-8 h-8",children:t.jsx("i",{className:"fas fa-spinner fa-spin text-accent-primary text-lg"})})})]}),t.jsx("p",{className:"text-light-text-secondary text-xs font-mono truncate",title:r["S n hng"],children:r["S n hng"]}),t.jsxs("div",{className:"text-xs text-light-text-secondary space-y-1 my-1 py-1 border-y border-dashed",children:[t.jsxs("p",{className:"truncate",title:`${r["Dng xe"]} - ${r["Phin bn"]}`,children:[t.jsx("i",{className:"fas fa-car fa-fw mr-1.5 text-slate-400"})," ",r["Dng xe"]," - ",r["Phin bn"]]}),t.jsxs("p",{className:"truncate font-medium",title:`${r["Ngoi tht"]} / ${r["Ni tht"]}`,children:[t.jsx("i",{className:"fas fa-palette fa-fw mr-1.5 text-slate-400"}),t.jsx("span",{style:rn(r["Ngoi tht"]),children:r["Ngoi tht"]}),t.jsxs("span",{children:[" / ",r["Ni tht"]]})]})]}),t.jsx("div",{className:"flex items-center justify-between text-xs text-light-text-secondary",children:t.jsxs("div",{className:"flex items-center gap-1.5 truncate",title:`TVBH: ${r["Tn t vn bn hng"]}`,children:[t.jsx("i",{className:"fas fa-user-tie fa-fw text-slate-400"}),t.jsx("span",{className:"truncate",children:r["Tn t vn bn hng"]})]})}),t.jsx("div",{className:"mt-auto pt-2",children:t.jsx(nn,{status:i})})]})]})},Nc=r=>r.orders.length===0?t.jsxs("div",{className:"text-center py-16 text-text-secondary",children:[t.jsx("i",{className:"fas fa-folder-open fa-3x mb-4 text-text-placeholder"}),t.jsx("p",{className:"font-semibold text-text-primary",children:"Khng tm thy yu cu no."}),t.jsx("p",{className:"text-sm",children:"Hy th thay i b lc hoc to yu cu mi."})]}):t.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4 p-1",children:r.orders.map(l=>t.jsx(jc,{order:l,...r},l["S n hng"]))}),kc=()=>{const r=typeof window<"u"&&window.electronAPI,[l,o]=m.useState(!0);m.useEffect(()=>{if(!r)return;let f;const x=()=>{o(!0),f&&clearTimeout(f),f=setTimeout(()=>{o(!1)},3e3)},g=setTimeout(()=>{o(!1)},3e3),b=y=>{y.key==="Escape"&&x()},c=y=>{y.clientY<50&&x()};return window.addEventListener("keydown",b),window.addEventListener("mousemove",c),()=>{window.removeEventListener("keydown",b),window.removeEventListener("mousemove",c),f&&clearTimeout(f),clearTimeout(g),f&&clearTimeout(f),clearTimeout(g)}},[r]);const i=()=>{var f;return(f=window.electronAPI)==null?void 0:f.minimizeWindow()},u=()=>{var f;return(f=window.electronAPI)==null?void 0:f.maximizeWindow()},h=()=>{var f;return(f=window.electronAPI)==null?void 0:f.closeWindow()};return!r||!l?null:t.jsxs("div",{className:"fixed top-0 left-0 w-full h-8 bg-slate-900 border-b border-slate-700 flex items-center justify-between px-3 z-[99999] animate-slide-down select-none text-white shadow-lg",style:{WebkitAppRegion:"drag"},children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-slate-300",children:[t.jsx("i",{className:"fas fa-car-side"}),t.jsx("span",{children:"Order Management"})]}),t.jsxs("div",{className:"flex items-center h-full",style:{WebkitAppRegion:"no-drag"},children:[t.jsx("button",{onClick:i,className:"h-8 w-10 flex items-center justify-center hover:bg-slate-700/50 transition-colors",children:t.jsx("i",{className:"fas fa-minus text-[10px]"})}),t.jsx("button",{onClick:u,className:"h-8 w-10 flex items-center justify-center hover:bg-slate-700/50 transition-colors",children:t.jsx("i",{className:"far fa-square text-[10px]"})}),t.jsx("button",{onClick:h,className:"h-8 w-10 flex items-center justify-center hover:bg-red-600 transition-colors",children:t.jsx("i",{className:"fas fa-times text-[10px]"})})]})]})},_c=()=>{const[r,l]=m.useState(!1),[o,i]=m.useState(!1),[u,h]=m.useState("orders"),[f,x]=m.useState(null);m.useEffect(()=>{const j=localStorage.getItem("sidebarState");l(j==="collapsed")},[]);const g=m.useCallback(()=>{l(j=>{const w=!j;return localStorage.setItem("sidebarState",w?"collapsed":"expanded"),w})},[]),b=m.useCallback((j,w)=>{h("admin"),x({orderToShow:j,targetTab:w})},[]),c=m.useCallback(j=>{h("admin"),x({targetTab:j})},[]),y=m.useCallback(()=>{x(null)},[]);return{isSidebarCollapsed:r,isMobileMenuOpen:o,setIsMobileMenuOpen:i,activeView:u,setActiveView:h,initialAdminState:f,toggleSidebar:g,showOrderInAdmin:b,showAdminTab:c,clearInitialState:y}},Sc=r=>{const[l,o]=m.useState([]),[i,u]=m.useState(0),[h,f]=m.useState(!1),x=m.useRef(null),g=m.useCallback(async()=>{try{const{notifications:j=[],unreadCount:w=0}=await _o();o(j),u(S=>{if(w>S){const T=document.getElementById("notification-badge");T==null||T.classList.add("animate-pop"),setTimeout(()=>T==null?void 0:T.classList.remove("animate-pop"),300)}return w})}catch(j){console.error("Failed to fetch notifications:",j)}},[]);return m.useEffect(()=>{g();const j=setInterval(g,3e4);return()=>clearInterval(j)},[g]),m.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&f(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),{notifications:l,unreadCount:i,isNotificationPanelOpen:h,notificationContainerRef:x,toggleNotificationPanel:()=>{f(j=>!j)},handleMarkAllAsRead:async j=>{if(j.stopPropagation(),i===0)return;const w=[...l],S=i;u(0),o(T=>T.map(N=>({...N,isRead:!0})));try{await So()}catch(T){console.error("Failed to mark all notifications as read",T),o(w),u(S),r("Thao Tc Tht Bi","Khng th nh du  c tt c thng bo.","error",3e3)}},handleNotificationClick:async(j,w,S,T)=>{if(w.stopPropagation(),!j.isRead){o(N=>N.map(D=>D.id===j.id?{...D,isRead:!0}:D)),u(N=>Math.max(0,N-1));try{await Co(j.id)}catch(N){console.error("Failed to mark notification as read",N),o(D=>D.map(M=>M.id===j.id?{...M,isRead:!1}:M)),u(D=>D+1)}}if(j.link){const N=j.link.match(/orderNumber=([^&]+)/);if(N&&N[1]){const D=S.find(M=>M["S n hng"]===decodeURIComponent(N[1]));D?T(D):window.location.href=j.link}else window.location.href=j.link}f(!1)},setIsNotificationPanelOpen:f}},Ja="archivedOrdersData",Cc=()=>{const[r,l]=m.useState([]),[o,i]=m.useState(!0),[u,h]=m.useState(null),[f,x]=m.useState(!1),g=m.useCallback(async(b=!1)=>{b||i(!0),h(null);try{let y=(await fo()).data||[];const j=sessionStorage.getItem(Ja);if(j)try{const w=JSON.parse(j);y=[...y,...w],x(!0)}catch(w){console.error("Failed to parse cached archives:",w),sessionStorage.removeItem(Ja),x(!1)}else x(!1);l(y)}catch(c){const y=c instanceof Error?c.message:"An unknown error occurred";h(y)}finally{b||i(!1)}},[]);return m.useEffect(()=>{g()},[g]),{historyData:r,setHistoryData:l,isLoading:o,error:u,refetch:g,archivesLoadedFromCache:f}},Dc=()=>{const[r,l]=m.useState([]),[o,i]=m.useState(!0),[u,h]=m.useState(null),f=m.useCallback(async(x=!1)=>{x||i(!0),h(null);try{const g=await xn();l(g.khoxe||[])}catch(g){const b=g instanceof Error?g.message:"An unknown error occurred";h(b)}finally{x||i(!1)}},[]);return m.useEffect(()=>{f()},[f]),{stockData:r,setStockData:l,isLoading:o,error:u,refetch:f}},Mc=(r,l)=>{const[o,i]=m.useState([]),[u,h]=m.useState(!0),[f,x]=m.useState(null),g=m.useCallback(async()=>{h(!0),x(null);try{let b;if(r!==null?b=await Do(["January","February","March","April","May","June","July","August","September","October","November","December"][r],l):b=await Mo(l),b.status==="SUCCESS")i(b.data||[]);else throw new Error(b.message||"Failed to fetch sold cars data.")}catch(b){const c=b instanceof Error?b.message:"An unknown error occurred";x(c)}finally{h(!1)}},[r,l]);return m.useEffect(()=>{g()},[g]),{soldData:o,isLoading:u,error:f,refetch:g}},Qa=r=>{if(!r)return 0;if(r.includes("T")||r.includes(" ")){const o=Ye(r);if(o.isValid())return o.hour()*60+o.minute()}const l=r.split(":");if(l.length>=2){const o=parseInt(l[0],10),i=parseInt(l[1],10);if(!isNaN(o)&&!isNaN(i))return o*60+i}return 0},Tc=()=>{const[r,l]=m.useState([]),[o,i]=m.useState(!0),[u,h]=m.useState(null),f=m.useCallback(async(x=!1)=>{x||i(!0),h(null);try{const g=await Fo();if(g.status==="SUCCESS"&&g.data){const c=g.data.sort((y,j)=>{const w=j.ngayThuXe.localeCompare(y.ngayThuXe);return w!==0?w:Qa(j.thoiGianKhoiHanh)-Qa(y.thoiGianKhoiHanh)});l(c)}else throw new Error(g.message||"Khng th ti d liu lch li th.")}catch(g){const b=g instanceof Error?g.message:"An unknown error occurred";h(b)}finally{x||i(!1)}},[]);return m.useEffect(()=>{f()},[f]),{testDriveData:r,setTestDriveData:l,isLoading:o,error:u,refetch:f}},Pc=({currentUser:r,userRole:l,isCurrentUserAdmin:o,showToast:i})=>{const{historyData:u,setHistoryData:h,isLoading:f,error:x,refetch:g,archivesLoadedFromCache:b}=Cc(),{stockData:c,setStockData:y,isLoading:j,error:w,refetch:S}=Dc(),{soldData:T,isLoading:N,error:D,refetch:M}=Mc(null,new Date().getFullYear()),{testDriveData:Y,setTestDriveData:A,isLoading:I,refetch:$}=Tc(),[V,E]=m.useState([]),[_,L]=m.useState(!0),[H,z]=m.useState(null),[R,Q]=m.useState({}),[q,ee]=m.useState([]),[ie,oe]=m.useState(new Set),xe=m.useRef([]),W=m.useCallback(async(C=!1)=>{C||L(!0),z(null);try{const U=await xo();E(U.data||[])}catch(U){const te=U instanceof Error?U.message:"An unknown error occurred";z(te)}finally{C||L(!1)}},[]),K=m.useCallback(async(C=!1)=>{if(!(!o&&l!=="Trng Phng Kinh Doanh"))try{const[U,te]=await Promise.all([Eo(),Yo()]);U.status==="SUCCESS"&&U.teamData?Q(U.teamData):console.error("Failed to fetch team data:",U.message),te.status==="SUCCESS"&&te.users?ee(te.users):console.error("Failed to fetch user list:",te.message)}catch(U){console.error("Failed to fetch admin data:",U),C||i("Li Ti D Liu","Khng th ti d liu qun tr phng ban.","error")}},[o,l,i]);m.useEffect(()=>{K(),W()},[K,W]);const F=m.useMemo(()=>{if(l!=="Trng Phng Kinh Doanh")return;const C=Dt(r),U=Object.keys(R).find(te=>Dt(te)===C);if(U&&R[U]){const te=R[U];return[U,...te].map(de=>Dt(de))}return[C]},[r,l,R]),v=m.useMemo(()=>{if(o)return u;if(l==="Trng Phng Kinh Doanh"&&F){const U=new Set(F.map(te=>Dt(te)));return u.filter(te=>U.has(Dt(te["Tn t vn bn hng"])))}const C=Dt(r);return u.filter(U=>Dt(U["Tn t vn bn hng"])===C)},[u,o,l,F,r]);m.useEffect(()=>{xe.current=c},[c]);const P=m.useCallback(async()=>{if(!document.hidden)try{const U=(await xn()).khoxe||[],te=xe.current;if(te.length===0){y(U);return}const de=X=>`${X["Trng thi"]}|${X["Ngi Gi Xe"]||""}`,Me=new Map(te.map(X=>[X.VIN,de(X)])),Xe=new Set;U.forEach(X=>{if(!X.VIN)return;const ue=Me.get(X.VIN),ge=de(X);ue!==void 0&&ue!==ge&&Xe.add(X.VIN)}),y(U),Xe.size>0&&(i("Cp Nht Kho Xe",`C ${Xe.size} xe va thay i trng thi.`,"info",4e3),oe(Xe),setTimeout(()=>oe(new Set),3e3))}catch(C){console.warn("Real-time stock update failed:",C)}},[i,y]);return m.useEffect(()=>{let U;const te=()=>{de(),P(),W(!0),U=window.setInterval(()=>{P(),W(!0)},15e3)},de=()=>{U&&clearInterval(U),U=void 0},Me=()=>{document.hidden?de():te()};return!j&&!w&&(te(),document.addEventListener("visibilitychange",Me)),()=>{de(),document.removeEventListener("visibilitychange",Me)}},[j,w,P,W]),{allHistoryData:u,setAllHistoryData:h,historyData:v,isLoadingHistory:f,errorHistory:x,refetchHistory:g,archivesLoadedFromCache:b,stockData:c,setStockData:y,isLoadingStock:j,errorStock:w,refetchStock:S,highlightedVins:ie,soldData:T,isLoadingSold:N,errorSold:D,refetchSold:M,testDriveData:Y,setTestDriveData:A,isLoadingTestDrive:I,refetchTestDrive:$,xuathoadonData:V,isLoadingXuathoadon:_,errorXuathoadon:H,refetchXuathoadon:W,teamData:R,allUsers:q,fetchAdminData:K,usersToView:F}},Ec=({showToast:r,hideToast:l,refetchHistory:o,refetchStock:i,setAllHistoryData:u})=>{const[h,f]=m.useState(null),[x,g]=m.useState(null),[b,c]=m.useState(null),[y,j]=m.useState(null),[w,S]=m.useState(null),[T,N]=m.useState(null),[D,M]=m.useState(null),[Y,A]=m.useState({isOpen:!1}),[I,$]=m.useState(!1),[V,E]=m.useState(null),[_,L]=m.useState(null),[H,z]=m.useState(!1),[R,Q]=m.useState(null),[q,ee]=m.useState(null),ie=async X=>{ee(X);try{await po(X),l(),r("Gi Xe Thnh Cng",` gi xe ${X}.`,"success",3e3),i(!0)}catch(ue){l();const ge=ue instanceof Error?ue.message:"Khng th gi xe.";r("Gi Xe Tht Bi",ge,"error",5e3)}finally{ee(null)}},oe=async X=>{ee(X);try{await yo(X),l(),r("Hy Gi Thnh Cng",` hy gi xe ${X}.`,"info",3e3),i(!0)}catch(ue){l();const ge=ue instanceof Error?ue.message:"Khng th hy gi xe.";r("Hy Gi Tht Bi",ge,"error",5e3)}finally{ee(null)}},xe=X=>f(X),W=async(X,ue)=>{Q(X["S n hng"]);try{await vo(X["S n hng"],ue),await o(),l(),r("Hy Thnh Cng"," hy yu cu thnh cng.","success",3e3)}catch(ge){l();const ye=ge instanceof Error?ge.message:"Li khng xc nh";r("Hy Tht Bi",ye,"error",5e3)}finally{g(null),Q(null)}},K=async(X,ue,ge,ye,Oe,Ae)=>{Q(X["S n hng"]);try{return await wo(X["S n hng"],ue,ge,ye.join(", "),Oe,Ae),await o(),l(),r("Gi Thnh Cng"," gi yu cu xut ha n.","success",3e3),!0}catch(Ce){l();const Te=Ce instanceof Error?Ce.message:"Li khng xc nh";r("Gi Tht Bi",Te,"error",5e3)}finally{Q(null)}},F=async(X,ue,ge)=>{Q(X["S n hng"]);try{await jo(X["S n hng"],ue,ge),await o(),l(),r("B Sung Thnh Cng"," b sung h s thnh cng.","success",3e3)}catch(ye){l();const Oe=ye instanceof Error?ye.message:"Li khng xc nh";r("B Sung Tht Bi",Oe,"error",5e3)}finally{j(null),Q(null)}},v=()=>{S(null),r("Cp nht thnh cng!","Thng tin n hng  c cp nht.","success"),o(!0),i(!0)},P=async(X,ue)=>{if(!T)return!1;Q(T["S n hng"]);const ge=ye=>new Promise((Oe,Ae)=>{const Ce=new FileReader;Ce.readAsDataURL(ye),Ce.onload=()=>Oe(Ce.result.split(",")[1]),Ce.onerror=Te=>Ae(Te)});try{const ye=[];for(const Ce in X.files)if(X.files[Ce]){const Te=X.files[Ce],Mt=await ge(Te);ye.push({key:Ce,name:Te.name,type:Te.type,data:Mt})}const Oe={orderNumber:X.orderNumber,customerType:X.customerType,dmsCode:X.dmsCode,filesData:JSON.stringify(ye),vin:ue},Ae=await To(Oe);return l(),r("Thnh Cng",Ae.message||"Yu cu VinClub  c gi.","success"),Ae.updatedOrder?u(Ce=>Ce.map(Te=>Te["S n hng"]===Ae.updatedOrder["S n hng"]?{...Te,...Ae.updatedOrder}:Te)):o(!0),N(null),!0}catch(ye){l();const Oe=ye instanceof Error?ye.message:"Li khng xc nh.";return r("Yu Cu Tht Bi",Oe,"error"),!1}finally{Q(null)}},C=async()=>{if(!D)return!1;Q(D["S n hng"]);try{return await Io("confirmVcUnc",{orderNumber:D["S n hng"]}),await o(),l(),r("Thnh Cng"," xc thc UNC cho VinClub.","success"),M(null),!0}catch(X){l();const ue=String(X instanceof Error?X.message:"Li khng xc nh");return r("Xc Thc VC Tht Bi",ue,"error"),!1}finally{Q(null)}},U=X=>{A({isOpen:!0,initialVehicle:X})},te=m.useCallback(()=>{A({isOpen:!1})},[]),de=m.useCallback(X=>{A({isOpen:!1}),u(ue=>[X,...ue].sort((ge,ye)=>new Date(ye["Thi gian nhp"]).getTime()-new Date(ge["Thi gian nhp"]).getTime())),r("Yu Cu  Gi","Yu cu ghp xe ca bn  c ghi nhn thnh cng.","success",4e3),i(!0),setTimeout(()=>{f(X)},500)},[u,r,i]),Me=m.useCallback((X,ue=0,ge)=>{E({images:X,startIndex:ue,customerName:ge})},[]),Xe=m.useCallback((X,ue)=>{L({url:X,label:ue})},[]);return{selectedOrder:h,setSelectedOrder:f,orderToCancel:x,setOrderToCancel:g,orderToRequestInvoice:b,setOrderToRequestInvoice:c,orderToSupplement:y,setOrderToSupplement:j,orderToEdit:w,setOrderToEdit:S,orderToRequestVC:T,setOrderToRequestVC:N,orderToConfirmVC:D,setOrderToConfirmVC:M,createRequestData:Y,setCreateRequestData:A,isChangePasswordModalOpen:I,setIsChangePasswordModalOpen:$,imagePreview:V,setImagePreview:E,filePreview:_,setFilePreview:L,isPendingStatsModalOpen:H,setIsPendingStatsModalOpen:z,processingOrder:R,processingVin:q,handleHoldCar:ie,handleReleaseCar:oe,handleViewDetails:xe,handleCancelOrder:W,handleRequestInvoice:K,handleSupplementFiles:F,handleEditSuccess:v,handleConfirmRequestVC:P,handleConfirmVC:C,handleCreateRequestForVehicle:U,handleCreateRequestClose:te,handleFormSuccess:de,openImagePreviewModal:Me,openFilePreviewModal:Xe}},Yc=({allHistoryData:r,isSidebarCollapsed:l,activeView:o,orderView:i})=>{const[u,h]=m.useState({keyword:"",carModel:[],version:[],status:[],exterior:[]}),[f,x]=m.useState({key:"Thi gian nhp",direction:"desc"}),[g,b]=m.useState(1),[c,y]=m.useState(20),[j,w]=m.useState(20),[S,T]=m.useState(()=>o==="orders"&&i==="grid"?l?15:12:l?14:12),N=m.useRef(null),D=m.useCallback(()=>{if(N.current)if(o==="orders"&&i==="grid"){const E=N.current.querySelector(".flex-grow.overflow-y-auto"),_=E==null?void 0:E.querySelector(".grid");if(!E||!_){w(20);return}const L=N.current.clientWidth,H=N.current.clientHeight;if(H===0||L===0){w(20);return}const z=190,R=8;let Q=230,q=Math.floor((L-8+R)/(z+R));if(_){const F=window.getComputedStyle(_).gridTemplateColumns;F&&F!=="none"&&(q=F.split(" ").length);const v=_.querySelector(".bg-white.rounded-xl");if(v){const P=v.getBoundingClientRect().height;P>0&&(Q=P)}}const ee=H-50,ie=ee>=Q?Math.ceil((ee-Q/2)/(Q+R)):0,oe=Math.max(2,ie),xe=Math.max(1,q),W=Math.max(12,oe*xe*2);w(W),y(K=>Math.max(K,W))}else T(l?14:12)},[o,i,l]);m.useEffect(()=>{const E=N.current;if(!E)return;const _=new ResizeObserver(()=>{D()});return _.observe(E),D(),()=>_.disconnect()},[D]);const M=m.useCallback(E=>{b(1),y(j),h(_=>({..._,...E}))},[j]),Y=m.useCallback(()=>{b(1),y(j),h({keyword:"",carModel:[],version:[],status:[],exterior:[]})},[j]),A=E=>{b(1),y(j);let _="asc";f&&f.key===E&&f.direction==="asc"&&(_="desc"),x({key:E,direction:_})},I=m.useMemo(()=>{let E=[...r];if(u.keyword){const _=u.keyword.toLowerCase();E=E.filter(L=>Ge(L["Tn khch hng"],_)||Ge(L["S n hng"],_)||Ge(L.VIN,_)||Ge(L["Dng xe"],_)||Ge(L["Phin bn"],_)||Ge(L["Ngoi tht"],_)||Ge(L["Ni tht"],_)||Ge(L["Tn t vn bn hng"],_)||Ge(L["CHNH SCH"],_)||Ge(L["S ng c"],_))}return u.carModel.length>0&&(E=E.filter(_=>u.carModel.includes(_["Dng xe"]))),u.version.length>0&&(E=E.filter(_=>u.version.includes(_["Phin bn"]))),u.status.length>0&&(E=E.filter(_=>u.status.includes(_["Trng thi VC"]||_["Kt qu"]||"Cha ghp"))),u.exterior.length>0&&(E=E.filter(_=>u.exterior.includes(_["Ngoi tht"]))),f!==null&&E.sort((_,L)=>{const H=_[f.key],z=L[f.key];return H==null||H===""?1:z==null||z===""?-1:H<z?f.direction==="asc"?-1:1:H>z?f.direction==="asc"?1:-1:0}),E},[r,u,f]),$=Math.ceil(I.length/S);m.useEffect(()=>{g>$&&$>0&&b($)},[$,g,S]);const V=m.useMemo(()=>I.slice(0,c),[I,g,S,i,c]);return m.useEffect(()=>{const E=setTimeout(()=>{D()},200);return()=>clearTimeout(E)},[V.length,D]),{filters:u,sortConfig:f,currentPage:g,setCurrentPage:b,handleFilterChange:M,handleResetFilters:Y,handleSort:A,processedData:I,paginatedData:V,totalPages:$,pageSize:S,containerRef:N,visibleCount:c,setVisibleCount:y,batchSize:j}},Ic="/ordermanagement/assets/yeucau-CU2pKZso.json",en="/ordermanagement/assets/logo1-Be-jI06Y.png",Ss="/ordermanagement/assets/lixi_animation-CGpl0Wp_.gif",Fc="/ordermanagement/assets/bell_fixed-mq3DHU6t.gif",kn="/ordermanagement/assets/hoa_dao_icon_bloom-HCG0szw1.gif",Oc="/ordermanagement/assets/hello_2026_loop-MyhPFczx.webp",Ac=({setCreateRequestData:r,toggleNotificationPanel:l,unreadCount:o,isNotificationPanelOpen:i,notifications:u,handleMarkAllAsRead:h,handleNotificationClick:f,onLogout:x,notificationContainerRef:g,activeView:b,setActiveView:c,isCurrentUserAdmin:y})=>{const[j,w]=_e.useState(Ss),[S,T]=_e.useState(en),N=new Date>=new Date("2026-01-05T00:00:00");_e.useEffect(()=>{T(N?Oc:en)},[b,N]),_e.useEffect(()=>{N&&w(Math.random()>.5?Ss:kn)},[b,N]);const D=[{id:"orders",label:"Qun l",icon:"fa-car-side"},{id:"stock",label:"Kho Xe",icon:"fa-warehouse"},{id:"laithu",label:"Li Th",icon:"fa-gauge-high"},{id:"sold",label:"Lch S",icon:"fa-receipt"}];return y&&D.push({id:"admin",label:"Admin",icon:"fa-user-shield"}),t.jsxs("header",{className:"relative sticky top-0 w-full z-20 h-14 bg-surface-card/95 backdrop-blur-md border-b border-border-primary/50 flex items-center justify-between px-4 sm:px-6 shadow-sm",children:[t.jsx("div",{className:"flex items-center gap-4",children:t.jsx("div",{className:"flex flex-col",children:t.jsx("img",{src:S,alt:"OrderMgmt",className:"h-[4.5rem] w-auto -ml-2 object-contain"})})}),t.jsx("nav",{className:"hidden lg:flex items-center absolute left-1/2 transform -translate-x-1/2 bg-white/40 backdrop-blur-xl p-1.5 rounded-full border border-white/60 shadow-[0_4px_20px_rgba(0,0,0,0.03)] hover:shadow-[0_4px_25px_rgba(0,0,0,0.06)] transition-all duration-300",children:D.map(M=>{const Y=b===M.id;return t.jsxs("button",{onClick:()=>c(M.id),className:`
                                relative px-6 py-2 rounded-full text-xs font-bold uppercase tracking-widest transition-all duration-300 flex items-center gap-2.5 outline-none group
                                ${Y?"bg-white text-accent-primary shadow-[0_2px_10px_rgba(0,0,0,0.1)] ring-1 ring-black/5 scale-100":"text-gray-500 hover:text-gray-900 hover:bg-white/50"}
                            `,children:[Y&&N&&t.jsx("div",{className:"absolute -top-3 -right-1 z-20",children:t.jsx("img",{src:j,alt:"Festive Icon",className:"w-8 h-auto drop-shadow-sm"})}),Y&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white via-transparent to-white/50 opacity-50 rounded-full"}),t.jsx("span",{className:"relative z-10",children:M.label})]},M.id)})}),t.jsxs("div",{className:"flex items-center justify-end space-x-2 sm:space-x-4",children:[t.jsx("div",{onClick:()=>r({isOpen:!0}),title:"To Yu Cu Mi",className:"cursor-pointer transition-transform hover:scale-105 active:scale-95",children:t.jsx("lottie-player",{src:Ic,background:"transparent",speed:"1",style:{width:"250px",height:"120px",marginTop:"-10px",marginBottom:"-10px"},loop:!0,autoplay:!0})}),t.jsxs("div",{ref:g,className:"relative notification-bell-container",children:[t.jsxs(Z,{onClick:l,variant:"ghost",className:"w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center !p-0 action-btn",title:"Thng bo",children:[t.jsx("img",{src:Fc,alt:"Notifications",className:"w-8 h-8 object-contain"}),o>0&&t.jsx("span",{id:"notification-badge",className:"notification-badge",children:o>9?"9+":o})]}),t.jsxs("div",{className:`notification-panel ${i?"visible":""}`,children:[t.jsxs("div",{className:"notification-panel-header flex justify-between items-center",children:[t.jsx("span",{children:"Thng Bo"}),o>0&&t.jsx(Z,{onClick:h,variant:"ghost",size:"sm",className:"text-xs font-medium text-accent-secondary hover:text-accent-primary-hover transition-colors !h-auto !p-0",children:"nh du  c tt c"})]}),t.jsx("div",{className:"notification-list",children:u.length>0?u.map(M=>{const Y={success:"fa-check",danger:"fa-times-circle",warning:"fa-exclamation-triangle",info:"fa-info-circle",error:"fa-times-circle"},A=M.type==="error"?"danger":M.type;return t.jsxs("div",{className:`notification-item ${M.isRead?"":"unread"}`,onClick:I=>f(M,I),children:[t.jsx("div",{className:`notification-icon type-${A}`,children:t.jsx("i",{className:`fa-solid ${Y[A]||"fa-bell"}`})}),t.jsxs("div",{className:"notification-content",children:[t.jsx("p",{className:"notification-message",dangerouslySetInnerHTML:{__html:M.message}}),t.jsx("p",{className:"notification-time",children:Ye(M.timestamp).fromNow()})]})]},M.id)}):t.jsxs("div",{className:"no-notifications",children:[t.jsx("i",{className:"fa-solid fa-bell-slash"}),t.jsx("p",{children:"Khng c thng bo no."})]})})]})]}),t.jsx(Z,{onClick:x,variant:"ghost",className:"w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center text-text-secondary hover:text-danger !p-0",title:"ng xut",children:t.jsx("i",{className:"fa-solid fa-sign-out-alt"})})]})]})},Rc=r=>{if(!r)return"?";const l=r.trim().split(" ").filter(Boolean);if(l.length===0)return"?";if(l.length===1)return l[0].charAt(0).toUpperCase();const o=l[0].charAt(0),i=l[l.length-1].charAt(0);return`${o}${i}`.toUpperCase()},$c=({name:r,size:l="md",className:o=""})=>{const i=Rc(r),u=to(r),h={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-lg",lg:"w-12 h-12 text-xl"};return t.jsx("div",{className:`rounded-full flex items-center justify-center text-white font-bold flex-shrink-0 ${h[l]} ${o}`,style:{backgroundColor:u},title:r,children:i})},Lc=({activeView:r,setActiveView:l,isCurrentUserAdmin:o,currentUser:i,userRole:u,onLogout:h,setIsChangePasswordModalOpen:f})=>{const[x,g]=m.useState(!1),b=m.useRef(null),[c,y]=m.useState(Ss),j=new Date>=new Date("2026-01-05T00:00:00");m.useEffect(()=>{j&&y(Math.random()>.3?Ss:kn)},[r,j]);const w=[{id:"orders",label:"Ghp Xe",icon:"fa-car-side"},{id:"stock",label:"Kho Xe",icon:"fa-warehouse"},{id:"laithu",label:"Li Th",icon:"fa-gauge-high"},{id:"sold",label:"Lch S",icon:"fa-receipt"}];return o&&w.push({id:"admin",label:"Admin",icon:"fa-user-shield"}),m.useEffect(()=>{const S=T=>{b.current&&!b.current.contains(T.target)&&g(!1)};return x&&document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[x]),t.jsxs(t.Fragment,{children:[x&&t.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col justify-end lg:hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>g(!1)}),t.jsxs("div",{ref:b,className:"relative bg-surface-card rounded-t-2xl shadow-2xl border-t border-border-primary p-4 animate-slide-up-fade",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-border-primary/50",children:[t.jsx($c,{name:i,size:"lg"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg text-text-primary",children:i}),t.jsx("p",{className:"text-sm text-text-secondary capitalize",children:u})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(Z,{onClick:()=>{f(!0),g(!1)},variant:"secondary",fullWidth:!0,className:"justify-start gap-3 py-3 text-base",children:[t.jsx("i",{className:"fas fa-key text-text-secondary w-6 text-center"}),t.jsx("span",{children:"i mt khu"})]}),t.jsxs(Z,{onClick:()=>{h(),g(!1)},variant:"ghost",fullWidth:!0,className:"justify-start gap-3 py-3 text-base text-danger hover:bg-danger-bg hover:text-danger",children:[t.jsx("i",{className:"fas fa-sign-out-alt w-6 text-center"}),t.jsx("span",{children:"ng xut"})]})]}),t.jsx("div",{className:"mt-6 pt-2 text-center",children:t.jsx("button",{onClick:()=>g(!1),className:"w-12 h-1 bg-gray-300 rounded-full mx-auto"})})]})]}),t.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-40 lg:hidden pb-safe",children:t.jsxs("div",{className:"flex justify-around items-center h-16",children:[w.map(S=>{const T=r===S.id;return t.jsxs("button",{onClick:()=>{l(S.id),g(!1)},className:`flex flex-col items-center justify-center w-full h-full space-y-1 relative group ${T?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:[T&&j&&t.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 z-20 animate-bounce-small",children:t.jsx("img",{src:c,alt:"Festive Icon",className:"w-8 h-8 object-contain drop-shadow-sm pointer-events-none select-none",draggable:"false"})}),t.jsx("i",{className:`fas ${S.icon} text-lg ${T?"opacity-0 scale-50":"opacity-100 scale-100"} transition-all duration-300`}),t.jsx("span",{className:"text-[10px] font-medium transition-all duration-300 transform translate-y-0",children:S.label})]},S.id)}),t.jsxs("button",{onClick:()=>g(!0),className:`flex flex-col items-center justify-center w-full h-full space-y-1 ${x?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:[t.jsx("i",{className:`fas fa-user-circle text-lg ${x?"animate-bounce-short":""}`}),t.jsx("span",{className:"text-[10px] font-medium",children:"C nhn"})]})]})})]})},Hc="/ordermanagement/assets/footer-DG9Dww7K.png",Vc=_e.lazy(()=>Cs(()=>import("./StockView-aZdCQt3V.js"),__vite__mapDeps([0,1,2,3]))),zc=_e.lazy(()=>Cs(()=>import("./SoldCarsView-BhcVaYEa.js"),__vite__mapDeps([4,1,2,3]))),Uc=_e.lazy(()=>Cs(()=>import("./AdminView-DFfuYisn.js"),__vite__mapDeps([5,1,2,3]))),Bc=_e.lazy(()=>Cs(()=>import("./TestDriveForm-C035qOZh.js"),__vite__mapDeps([6,1,2,3])));Ye.locale("vi");const _s=()=>t.jsxs("div",{className:"flex items-center justify-center h-full",children:[t.jsx("div",{style:{border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",width:"30px",height:"30px",animation:"spin 1s linear infinite"}}),t.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]}),Wc=({onLogout:r,showToast:l,hideToast:o})=>{const i=sessionStorage.getItem("currentConsultant")||Ze,u=sessionStorage.getItem("currentUser")||"User",h=sessionStorage.getItem("userRole")||(u.toLowerCase()==="admin"?"Qun tr vin":"T vn bn hng"),f=u.toLowerCase()==="admin",{isSidebarCollapsed:x,isMobileMenuOpen:g,setIsMobileMenuOpen:b,activeView:c,setActiveView:y,initialAdminState:j,showOrderInAdmin:w,showAdminTab:S,clearInitialState:T}=_c(),[N,D]=m.useState(new Set(["orders"]));m.useEffect(()=>{D(se=>{const me=new Set(se);return me.add(c),me})},[c]);const{allHistoryData:M,setAllHistoryData:Y,historyData:A,isLoadingHistory:I,errorHistory:$,refetchHistory:V,archivesLoadedFromCache:E,stockData:_,isLoadingStock:L,errorStock:H,refetchStock:z,highlightedVins:R,soldData:Q,testDriveData:q,setTestDriveData:ee,isLoadingTestDrive:ie,refetchTestDrive:oe,xuathoadonData:xe,isLoadingXuathoadon:W,errorXuathoadon:K,refetchXuathoadon:F,teamData:v,allUsers:P,fetchAdminData:C}=Pc({currentUser:i,currentUserName:u,userRole:h,isCurrentUserAdmin:f,showToast:l}),{notifications:U,unreadCount:te,isNotificationPanelOpen:de,notificationContainerRef:Me,toggleNotificationPanel:Xe,handleMarkAllAsRead:X,handleNotificationClick:ue}=Sc(l),{selectedOrder:ge,setSelectedOrder:ye,orderToCancel:Oe,setOrderToCancel:Ae,orderToRequestInvoice:Ce,setOrderToRequestInvoice:Te,orderToSupplement:Mt,setOrderToSupplement:Tt,orderToEdit:De,setOrderToEdit:yt,orderToRequestVC:Ms,setOrderToRequestVC:Bt,orderToConfirmVC:Pt,setOrderToConfirmVC:Pe,createRequestData:Wt,setCreateRequestData:Gt,isChangePasswordModalOpen:Et,setIsChangePasswordModalOpen:he,imagePreview:$e,setImagePreview:ls,filePreview:Je,setFilePreview:qt,isPendingStatsModalOpen:Yt,setIsPendingStatsModalOpen:Qe,processingOrder:It,processingVin:Ts,handleHoldCar:Ft,handleReleaseCar:Ps,handleViewDetails:bt,handleCancelOrder:dt,handleRequestInvoice:Xt,handleSupplementFiles:Ot,handleEditSuccess:B,handleConfirmRequestVC:Es,handleConfirmVC:Ys,handleCreateRequestForVehicle:ze,handleCreateRequestClose:Re,handleFormSuccess:ae,openImagePreviewModal:vt,openFilePreviewModal:ce}=Ec({showToast:l,hideToast:o,refetchHistory:V,refetchStock:z,setAllHistoryData:Y}),[ut,os]=m.useState(!1),[At,Se]=m.useState(E);_e.useEffect(()=>{Se(E)},[E]),_e.useEffect(()=>{const me={orders:"Qun L n Hng",stock:"Kho Xe",sold:"Lch S",admin:"Qun Tr",laithu:"Li Th"}[c]||"Order Management";document.title=me},[c]),_e.useEffect(()=>{f&&y("admin")},[f,y]);const{filters:Ue,handleFilterChange:Ve,handleResetFilters:je,processedData:Ne,paginatedData:Be,containerRef:et,visibleCount:Rt,setVisibleCount:cs,batchSize:ht}=Yc({allHistoryData:A,isSidebarCollapsed:x,activeView:c,orderView:"grid"}),mt=_e.useRef(null);_e.useEffect(()=>{const se=new IntersectionObserver(me=>{me[0].isIntersecting&&Rt<Ne.length&&cs(ke=>Math.min(ke+ht,Ne.length))},{threshold:.1,rootMargin:"100px"});return mt.current&&se.observe(mt.current),()=>{mt.current&&se.unobserve(mt.current)}},[Rt,Ne.length,ht,cs]);const Is=async()=>{os(!0);try{const se=await ko();o(),se.data&&se.data.length>0?(sessionStorage.setItem("archivedOrdersData",JSON.stringify(se.data)),Y(me=>[...me,...se.data]),l("Ti Thnh Cng",` ti thm ${se.data.length} mc t kho lu tr.`,"success",3e3)):l("Hon Tt","Khng tm thy thm d liu no trong kho lu tr.","info",3e3),Se(!0)}catch(se){o();const me=se instanceof Error?se.message:"Li khng xc nh";l("Ti Tht Bi",me,"error",5e3)}finally{os(!1)}},ft=se=>{if(!ge)return;const me=Ne,ke=me.findIndex(ve=>ve["S n hng"]===ge["S n hng"]);if(ke===-1)return;const Ee=se==="prev"?ke-1:ke+1;Ee>=0&&Ee<me.length&&ye(me[Ee])},wt=m.useMemo(()=>{const se=M.filter(Ee=>{var ve;return(ve=Ee["Kt qu"])==null?void 0:ve.toLowerCase().includes("cha")}),me={};se.forEach(Ee=>{const{"Dng xe":ve,"Phin bn":we,"Ngoi tht":Ke}=Ee;if(ve&&we&&Ke){const Le=`${ve}|${we}|${Ke}`.trim().toLowerCase();me[Le]=(me[Le]||0)+1}});const ke={};return _.forEach(Ee=>{const{"Dng xe":ve,"Phin bn":we,"Ngoi tht":Ke}=Ee;if(ve&&we&&Ke){const Le=`${ve}|${we}|${Ke}`.trim().toLowerCase(),jt=ke[Le]||{count:0,isSlowMoving:!1};jt.count+=1;const Ie=Ee["Thi gian nhp"]?Ye(Ee["Thi gian nhp"]):null;Ie&&Ye().diff(Ie,"days")>30&&(jt.isSlowMoving=!0),ke[Le]=jt}}),{pendingRequestCount:me,stockStatus:ke}},[M,_]),ds=m.useMemo(()=>{const me=M.filter(ve=>{var we;return(we=ve["Kt qu"])==null?void 0:we.toLowerCase().includes("cha")}),ke={};return me.forEach(ve=>{const we=ve["Dng xe"]||"Khng xc nh";ke[we]||(ke[we]=[]),ke[we].push(ve)}),Object.entries(ke).map(([ve,we])=>{const Ke=we.length,Le={};we.forEach(Ie=>{const us=`${Ie["Phin bn"]&&Ie["Phin bn"]!=="N/A"?`${Ie["Phin bn"]} - `:""}${Ie["Ngoi tht"]||"N/A"} / ${Ie["Ni tht"]||"N/A"}`;Le[us]=(Le[us]||0)+1});const jt=Object.entries(Le).map(([Ie,Nt])=>({variant:Ie,count:Nt})).sort((Ie,Nt)=>Nt.count-Ie.count);return{model:ve,total:Ke,variants:jt}}).sort((ve,we)=>we.total-ve.total)},[M]),Fs=m.useMemo(()=>[...new Set(M.map(se=>se["Dng xe"]).filter(Boolean))].sort(),[M]),Os=m.useMemo(()=>[...new Set(M.map(se=>se["Phin bn"]).filter(Boolean))].sort(),[M]),As=m.useMemo(()=>[...new Set(M.map(se=>se["Trng thi VC"]||se["Kt qu"]||"Cha ghp").filter(Boolean))].sort(),[M]),be=m.useMemo(()=>[...new Set(M.map(se=>se["Ngoi tht"]).filter(Boolean))].sort(),[M]),Kt=()=>{const se="animate-fade-in-up",me=I,ke=$,Ee=[{id:"order-filter-car-model",key:"carModel",label:"Dng Xe",options:Fs,icon:"fa-car"},{id:"order-filter-version",key:"version",label:"Phin Bn",options:Os,icon:"fa-cogs"},{id:"order-filter-status",key:"status",label:"Trng Thi",options:As,icon:"fa-tag"},{id:"order-filter-exterior",key:"exterior",label:"Ngoi Tht",options:be,icon:"fa-palette"}].filter(we=>we.options.length>0),ve=t.jsx("button",{onClick:()=>Qe(!0),className:"btn-filter w-9 h-9",title:"Xem thng k cc xe ang c yu cu ch ghp",children:t.jsx("i",{className:"fas fa-chart-pie"})});if(me&&M.length===0){const we=Array.from({length:7},(Ke,Le)=>t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"py-1 px-4 sm:px-6",children:t.jsxs("div",{className:"flex items-center space-x-4 p-4 w-full",children:[t.jsx("div",{className:"skeleton-item h-6 w-6 !rounded-full"}),t.jsxs("div",{className:"flex-1 space-y-2 py-1",children:[t.jsx("div",{className:"skeleton-item h-4 w-3/4"}),t.jsx("div",{className:"skeleton-item h-3 w-1/2"})]}),t.jsxs("div",{className:"flex-1 space-y-2 py-1 hidden md:block",children:[t.jsx("div",{className:"skeleton-item h-4 w-5/6"}),t.jsx("div",{className:"skeleton-item h-3 w-1/3"})]}),t.jsx("div",{className:"flex-1 skeleton-item h-4 w-full hidden md:block"}),t.jsx("div",{className:"flex-1 skeleton-item h-4 w-full hidden md:block"}),t.jsx("div",{className:"flex-1 skeleton-item h-8 w-24 !rounded-full hidden md:block"}),t.jsx("div",{className:"flex-1 skeleton-item h-8 w-8 !rounded-lg hidden md:block"})]})})},Le));return t.jsxs("div",{className:`flex flex-col h-full ${se}`,children:[t.jsx("div",{className:"flex-shrink-0 bg-surface-card rounded-xl shadow-md border border-border-primary p-3 mb-2",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("div",{className:"skeleton-item h-12 rounded-full",style:{flexBasis:"320px",flexGrow:1}}),t.jsx("div",{className:"skeleton-item h-12 w-32 rounded-full"}),t.jsx("div",{className:"skeleton-item h-12 w-32 rounded-full"}),t.jsx("div",{className:"skeleton-item h-12 w-12 !rounded-full ml-auto"})]})}),t.jsx("div",{className:"flex-1 bg-surface-card rounded-xl shadow-md border border-border-primary flex flex-col min-h-0",children:t.jsx("div",{className:"flex-grow overflow-auto",children:t.jsx("table",{className:"min-w-full",children:t.jsx("tbody",{className:"divide-y divide-border-primary",children:we})})})})]})}return ke?t.jsx("div",{className:`flex items-center justify-center h-96 ${se}`,children:t.jsxs("div",{className:"text-center p-8 bg-surface-card rounded-lg shadow-xl",children:[t.jsx("i",{className:"fa-solid fa-exclamation-triangle fa-3x text-danger"}),t.jsx("p",{className:"mt-4 text-lg font-semibold",children:"Khng th ti d liu"}),t.jsx("p",{className:"mt-2 text-sm text-text-secondary max-w-sm",children:ke}),t.jsx("button",{onClick:()=>V(),className:"mt-6 btn-primary",children:"Th li"})]})}):t.jsxs("div",{className:`flex flex-col h-full ${se}`,children:[t.jsx("div",{className:"flex-shrink-0 bg-surface-card rounded-xl shadow-md border border-border-primary p-3 mb-2 relative z-20",children:t.jsx(cc,{filters:Ue,onFilterChange:Ve,onReset:je,dropdowns:Ee,searchPlaceholder:"Tm kim SH, tn khch hng, s VIN...",totalCount:Ne.length,onRefresh:()=>V(),isLoading:me,size:"compact",plain:!0,extraActionButton:ve,viewSwitcherEnabled:!1,searchable:!1})}),t.jsx("div",{ref:et,className:"flex-1 flex flex-col min-h-0",children:t.jsx("div",{className:"bg-surface-card rounded-xl shadow-md border border-border-primary flex flex-col h-full",children:t.jsxs("div",{className:"flex-grow overflow-y-auto relative hidden-scrollbar p-1",children:[t.jsx(Nc,{orders:Be,onViewDetails:bt,onCancel:Ae,onRequestInvoice:Te,onSupplement:Tt,onEdit:yt,onRequestVC:Bt,onConfirmVC:Pe,processingOrder:It}),Rt<Ne.length&&t.jsx("div",{ref:mt,className:"h-10 w-full flex items-center justify-center py-4",children:t.jsx("i",{className:"fas fa-spinner fa-spin text-accent-primary text-xl"})}),Rt>=Ne.length&&!At&&t.jsx("div",{className:"p-4 flex justify-center",children:t.jsxs("button",{onClick:Is,disabled:ut,className:"btn-secondary",children:[ut?t.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}):t.jsx("i",{className:"fas fa-cloud-download-alt mr-2"}),"Ti thm d liu c"]})})]})})})]})};return t.jsxs(t.Fragment,{children:[t.jsx(kc,{}),t.jsx("div",{className:"circuit-background"}),t.jsx("div",{className:"scanline"}),t.jsx("div",{id:"sidebar-overlay",onClick:()=>b(!1),className:`fixed inset-0 bg-black/50 z-30 transition-opacity duration-300 lg:hidden ${g?"opacity-100 visible":"opacity-0 invisible"}`}),t.jsxs("div",{className:"relative h-screen flex flex-col transition-all duration-300 ease-in-out w-full pb-16 lg:pb-0",children:[t.jsx(Ac,{setCreateRequestData:Gt,toggleNotificationPanel:Xe,unreadCount:te,isNotificationPanelOpen:de,notifications:U,handleMarkAllAsRead:X,handleNotificationClick:(se,me)=>ue(se,me,M,ye),onLogout:r,notificationContainerRef:Me,activeView:c,setActiveView:y,isCurrentUserAdmin:f}),t.jsxs("main",{className:"flex-1 p-2 flex flex-col overflow-y-auto",children:[t.jsx("div",{hidden:c!=="orders",className:"h-full",children:Kt()}),N.has("stock")&&t.jsx("div",{hidden:c!=="stock",className:"h-full",children:t.jsx(m.Suspense,{fallback:t.jsx(_s,{}),children:t.jsx(Vc,{stockData:_,isLoading:L,error:H,refetchStock:z,highlightedVins:R,showToast:l,currentUser:i,isAdmin:f,onCreateRequestForVehicle:ze,onHoldCar:Ft,onReleaseCar:Ps,processingVin:Ts,isSidebarCollapsed:x,allOrders:M,showOrderInAdmin:w,showAdminTab:S})})}),N.has("sold")&&t.jsx("div",{hidden:c!=="sold",className:"h-full",children:t.jsx(m.Suspense,{fallback:t.jsx(_s,{}),children:t.jsx(zc,{showToast:l,isSidebarCollapsed:x})})}),N.has("laithu")&&t.jsx("div",{hidden:c!=="laithu",className:"h-full",children:t.jsx(m.Suspense,{fallback:t.jsx(_s,{}),children:t.jsx(Bc,{showToast:l,hideToast:o,onOpenImagePreview:vt,currentUser:i,isAdmin:f,allTestDrives:q,setAllTestDrives:ee,isLoading:ie,refetch:oe})})}),N.has("admin")&&t.jsx("div",{hidden:c!=="admin",className:"h-full",children:f&&t.jsx(m.Suspense,{fallback:t.jsx(_s,{}),children:t.jsx(Uc,{showToast:l,hideToast:o,refetchHistory:V,refetchStock:z,allOrders:M,xuathoadonData:xe,refetchXuathoadon:F,stockData:_,isLoadingXuathoadon:W,isLoadingHistory:I,errorXuathoadon:K,onOpenImagePreview:vt,onOpenFilePreview:ce,teamData:v,allUsers:P,refetchAdminData:C,soldData:Q,isSidebarCollapsed:x,initialState:j,clearInitialState:T,onNavigateTo:y,onShowOrderDetails:ye})})})]}),t.jsx("footer",{className:"hidden lg:flex flex-shrink-0 h-8 bg-surface-card/70 backdrop-blur-xl border-t border-border-primary/50 items-center justify-center px-4 sm:px-6",children:t.jsx("img",{src:Hc,alt:"Order Management 2026",className:"h-5 w-auto object-contain opacity-80"})})]}),t.jsx(Uo,{isOpen:Wt.isOpen,onClose:Re,onSuccess:ae,showToast:l,hideToast:o,existingOrderNumbers:M.map(se=>se["S n hng"]),initialVehicle:Wt.initialVehicle,currentUser:i,vehicleAnalyticsData:wt,onOpenImagePreview:vt}),t.jsx(Ko,{isOpen:Et,onClose:()=>he(!1),showToast:l,username:u}),t.jsx(ao,{order:ge,onClose:()=>ye(null),orderList:Ne,onNavigate:ft,onCancel:Ae,onRequestInvoice:Te,onSupplement:Tt,onRequestVC:Bt,onConfirmVC:Pe,onEdit:yt}),t.jsx(Bo,{isOpen:!!De,onClose:()=>yt(null),onSuccess:B,order:De,showToast:l,existingOrderNumbers:M.map(se=>se["S n hng"]).filter(se=>se!==(De==null?void 0:De["S n hng"]))}),Oe&&t.jsx(no,{order:Oe,onClose:()=>Ae(null),onConfirm:dt}),Ce&&t.jsx(Ao,{order:Ce,onClose:()=>Te(null),onConfirm:Xt}),Mt&&t.jsx(Ro,{order:Mt,onClose:()=>Tt(null),onConfirm:Ot}),t.jsx(tc,{order:Ms,onClose:()=>Bt(null),onSubmit:Es}),Pt&&t.jsx(ec,{isOpen:!!Pt,onClose:()=>Pe(null),title:"Xc Thc UNC VinClub",description:"Xc nhn bn  nhn c UNC cho yu cu VinClub ca n hng:",targetId:Pt["S n hng"],submitText:" Nhn UNC",submitColor:"success",icon:"fa-check-circle",onSubmit:Ys}),t.jsx(Zo,{isOpen:!!$e,onClose:()=>ls(null),images:($e==null?void 0:$e.images)||[],startIndex:$e==null?void 0:$e.startIndex,customerName:$e==null?void 0:$e.customerName}),Je&&t.jsx(ic,{isOpen:!!Je,onClose:()=>qt(null),fileUrl:Je.url,fileLabel:Je.label}),t.jsx(oc,{isOpen:Yt,onClose:()=>Qe(!1),stats:ds}),t.jsx(Lc,{activeView:c,setActiveView:y,isCurrentUserAdmin:f,currentUser:i,userRole:h,onLogout:r,setIsChangePasswordModalOpen:he})]})},Gc="/ordermanagement/assets/emerald_bg-B3TxPc-D.webp",qc="/ordermanagement/assets/mobile_bg_2026-CqU1E6p8.webp",Xc="/ordermanagement/assets/mobile_mask_2026-Bu3lpM05.webp",Kc="/ordermanagement/assets/lantern_body-ClxCsch6.webp",Zc="/ordermanagement/assets/lantern_tassels-BZqiB8Sc.webp",Jc="/ordermanagement/assets/lantern_string-D9biP1bm.webp",Qc="/ordermanagement/assets/xuan_mask-Cy54r02V.webp",ed="/ordermanagement/assets/tet_scroll_unroll-B9mu4sjd.gif",td="/ordermanagement/assets/tet_tassel_left-bajjkeLR.png",sd="/ordermanagement/assets/tet_tassel_right-BRdjdVvb.png",ad=()=>{const[r,l]=m.useState([]);return m.useEffect(()=>{const i=[];for(let u=0;u<50;u++)i.push({id:u,top:Math.random()*100,left:Math.random()*100,size:Math.random()*2+.5,duration:Math.random()*20+10,delay:Math.random()*10,opacityStart:Math.random()*.4+.2});l(i)},[]),t.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10 overflow-hidden",children:[r.map(o=>t.jsx("div",{className:"absolute rounded-full bg-[#FCEE21] animate-float-dust mix-blend-screen",style:{top:`${o.top}%`,left:`${o.left}%`,width:`${o.size}px`,height:`${o.size}px`,animationDuration:`${o.duration}s`,animationDelay:`${o.delay}s`,boxShadow:`0 0 ${o.size}px rgba(252, 238, 33, 0.8)`,opacity:0}},o.id)),t.jsx("style",{children:`
                @keyframes float-dust {
                    0% { transform: translateY(0) translateX(0); opacity: 0; filter: brightness(1); }
                    10% { opacity: 0.8; } 
                    50% { transform: translateY(-60px) translateX(20px); opacity: 0.6; filter: brightness(2); }
                    80% { opacity: 0.8; filter: brightness(3); } 
                    100% { transform: translateY(-120px) translateX(-20px); opacity: 0; }
                }
                .animate-float-dust {
                    animation-name: float-dust;
                    animation-timing-function: ease-in-out;
                    animation-iteration-count: infinite;
                    will-change: transform, opacity;
                }
            `})]})},nd="/ordermanagement/assets/emerald_bg_blink-BcXudJQx.webp",rd=()=>{const[r,l]=m.useState(!1);return m.useEffect(()=>{let o,i;const u=()=>{const h=Math.random()*4e3+2e3;o=setTimeout(()=>{l(!0),i=setTimeout(()=>{l(!1),u()},900)},h)};return u(),()=>{clearTimeout(o),clearTimeout(i)}},[]),t.jsx("div",{className:"absolute inset-0 transition-opacity duration-500 ease-in-out pointer-events-none z-0",style:{opacity:r?1:0},children:t.jsx("img",{src:nd,alt:"Horse Blink",className:"w-full h-full object-cover object-left"})})},id=({onLoginSuccess:r,showToast:l})=>{const[o,i]=m.useState(!1),[u,h]=m.useState("login"),[f,x]=m.useState(""),[g,b]=m.useState(""),[c,y]=m.useState(""),[j,w]=m.useState(""),[S,T]=m.useState(""),[N,D]=m.useState(""),[M,Y]=m.useState({x:0,y:0}),[A,I]=m.useState(""),$="Qun L n Hng",V=q=>{const ee=q.clientX-window.innerWidth/2,ie=q.clientY-window.innerHeight/2;Y({x:ee,y:ie})};m.useEffect(()=>{let q=0;const ee=setInterval(()=>{q<=$.length?(I($.slice(0,q)),q++):clearInterval(ee)},100);return()=>clearInterval(ee)},[]);const[E,_]=m.useState({days:0,hours:0,minutes:0,seconds:0});m.useEffect(()=>{const q=new Date("2026-02-17T00:00:00"),ee=setInterval(()=>{const ie=new Date,oe=q.getTime()-ie.getTime();oe>0&&_({days:Math.floor(oe/(1e3*60*60*24)),hours:Math.floor(oe/(1e3*60*60)%24),minutes:Math.floor(oe/1e3/60%60),seconds:Math.floor(oe/1e3%60)})},1e3);return()=>clearInterval(ee)},[]);const L=async q=>{if(q.preventDefault(),!f||!g){l("Thng bo","Vui lng nhp y  thng tin!","warning");return}i(!0),await new Promise(ie=>setTimeout(ie,800));const ee=await Wo(f,g);i(!1),ee.success?r():l("Li",ee.message||"Sai thng tin ng nhp.","error")},H=async q=>{q.preventDefault(),i(!0);const ee=await qo(c);i(!1),ee.success?(l("Thnh cng","M xc thc  gi.","success"),h("reset")):l("Li",ee.message||"Li gi yu cu.","error")},z=async q=>{q.preventDefault(),i(!0);const ee=await Xo(c,j,S);i(!1),ee.success?(l("Thnh cng","i mt khu thnh cng.","success"),R()):l("Li",ee.message||"Tht bi.","error")},R=()=>{y(""),w(""),x(""),b(""),h("login")},Q=({value:q,label:ee})=>t.jsxs("div",{className:"flex flex-col items-center mx-1.5",children:[t.jsx("div",{className:"w-9 h-9 flex items-center justify-center bg-[#043927]/60 backdrop-blur-md rounded-lg border border-[#C5A059]/30 shadow-lg",children:t.jsx("span",{className:"text-sm font-bold text-[#FCEE21] font-mono",children:String(q).padStart(2,"0")})}),t.jsx("span",{className:"text-[8px] text-[#C5A059] uppercase mt-1 tracking-wider",children:ee})]});return t.jsxs("div",{className:"relative min-h-screen w-full flex items-center justify-center overflow-hidden font-sans selection:bg-[#043927] selection:text-[#FCEE21]",onMouseMove:V,children:[t.jsxs("div",{className:"absolute inset-0 z-0",children:[t.jsx("img",{src:Gc,alt:"Emerald Background",className:"hidden lg:block w-full h-full object-cover object-left pointer-events-none select-none",draggable:"false"}),t.jsx("img",{src:qc,alt:"Mobile Background",className:"block lg:hidden w-full h-full object-cover object-center pointer-events-none select-none",draggable:"false"}),t.jsx("img",{src:Xc,alt:"Mobile Glow",className:"block lg:hidden absolute inset-0 w-full h-full object-cover object-center pointer-events-none select-none mix-blend-screen animate-pulse-fast opacity-100",draggable:"false"}),t.jsx("div",{className:"hidden lg:block",children:t.jsx(rd,{})}),t.jsx("img",{src:Qc,alt:"Xuan Effect",className:"hidden lg:block absolute inset-0 w-full h-full object-cover object-left z-0 pointer-events-none mix-blend-screen animate-pulse-fast opacity-50 select-none",draggable:"false"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 via-transparent to-black/40 mix-blend-multiply"}),t.jsx(ad,{}),t.jsx(Nn,{flowerType:"mixed",delay:0,sizeMode:"large"})]}),t.jsxs("div",{className:"absolute top-[10%] left-[4%] z-30 w-48 hidden lg:flex flex-col items-center origin-top animate-swing pointer-events-none transition-transform duration-100 ease-out",style:{animationDuration:"5s",transform:`translate(${M.x*-.02}px, ${M.y*-.02}px)`},children:[t.jsx("div",{className:"h-40 w-full flex justify-center -mb-2 overflow-visible relative z-10",children:t.jsx("img",{src:Jc,alt:"Lantern String",className:"h-full w-auto object-contain filter brightness-110 drop-shadow-md",draggable:"false"})}),t.jsxs("div",{className:"-mt-2 relative w-full flex flex-col items-center",children:[t.jsx("img",{src:Kc,alt:"Lantern Body",className:"w-full relative z-20 animate-candle-glow",draggable:"false"}),t.jsx("div",{className:"absolute top-[92%] w-full flex justify-center z-10 animate-sway origin-top",children:t.jsx("img",{src:Zc,alt:"Lantern Tassels",className:"w-full filter brightness-110",draggable:"false"})})]}),t.jsx("img",{src:bn,className:"absolute top-[35%] right-[20%] w-5 h-5 rotate-45 opacity-90 z-30 animate-sway",style:{animationDuration:"5s"},draggable:"false"})]}),t.jsxs("div",{className:"relative z-10 w-full max-w-7xl h-full flex flex-col lg:flex-row items-center justify-center p-4 lg:p-12 gap-12 lg:gap-24",children:[t.jsx("div",{className:"hidden lg:flex flex-col items-center absolute right-[-12%] top-[8%] z-20 animate-swing-slow origin-top select-none",children:t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:ed,alt:"Tet Scroll",className:"w-[140px] lg:w-[150px] opacity-70 filter brightness-90 animate-unroll",draggable:"false"}),t.jsxs("div",{className:"absolute bottom-3 left-0 w-full flex justify-between px-6 z-[-1] opacity-0 animate-fade-in",style:{animationDelay:"4s",animationFillMode:"forwards"},children:[t.jsx("img",{src:td,className:"h-14 w-auto animate-sway origin-top",style:{animationDelay:"5.5s"},draggable:"false"}),t.jsx("img",{src:sd,className:"h-14 w-auto animate-sway origin-top",style:{animationDelay:"6s"},draggable:"false"})]})]})}),t.jsx("style",{children:`
                @keyframes text-glow {
                    0%, 100% { opacity: 0.5; filter: brightness(1.2) blur(1px); }
                    50% { opacity: 1; filter: brightness(2) blur(2px) drop-shadow(0 0 5px #00ff00); }
                }
                .animate-text-glow { animation: text-glow 2s ease-in-out infinite; }
                @keyframes swing-slow {
                    0% { transform: rotate(1deg); }
                    100% { transform: rotate(-1deg); }
                }
                .animate-swing-slow { animation: swing-slow 6s ease-in-out infinite alternate; }
                
                /* Unroll Animation */
                @keyframes unroll {
                    0% { 
                        clip-path: inset(0 0 100% 0);
                        opacity: 0;
                    }
                    100% { 
                        clip-path: inset(0 0 0 0);
                        opacity: 1;
                    }
                }
                .animate-unroll {
                    animation: unroll 3s ease-out forwards;
                }
                @keyframes fade-in {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                .animate-fade-in { animation: fade-in 1s ease-out forwards; }
            `}),t.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 flex lg:hidden z-50 w-max",children:t.jsxs("div",{className:"flex items-center gap-3 bg-black/60 px-4 py-2 rounded-full border border-[#C5A059]/40 backdrop-blur-xl shadow-[0_0_15px_rgba(0,0,0,0.5)] overflow-hidden",children:[t.jsxs("div",{className:"flex flex-col items-end mr-1 animate-part-fly-in-top",style:{animationDelay:"0.2s"},children:[t.jsx("span",{className:"text-[8px] text-[#C5A059] uppercase tracking-wider font-bold",children:"Sp n"}),t.jsx("span",{className:"text-[10px] text-white font-bold leading-3",children:"Tt 2026"})]}),t.jsx("div",{className:"h-6 w-[1px] bg-[#C5A059]/30 animate-part-fly-in-bottom",style:{animationDelay:"0.6s"}}),t.jsxs("div",{className:"flex gap-3 text-center",children:[t.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-left",style:{animationDelay:"1.0s"},children:[t.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(E.days).padStart(2,"0")}),t.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Ngy"})]}),t.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-top",style:{animationDelay:"1.4s"},children:[t.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(E.hours).padStart(2,"0")}),t.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Gi"})]}),t.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-bottom",style:{animationDelay:"1.8s"},children:[t.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(E.minutes).padStart(2,"0")}),t.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Pht"})]}),t.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-right",style:{animationDelay:"2.2s"},children:[t.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(E.seconds).padStart(2,"0")}),t.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Giy"})]})]})]})}),t.jsx("div",{className:"fixed bottom-0 right-0 hidden lg:block z-50 m-2",children:t.jsxs("div",{className:"flex items-center bg-black/40 p-3 rounded-xl border border-[#C5A059]/30 backdrop-blur-md scale-90 origin-bottom-right overflow-hidden",children:[t.jsxs("div",{className:"mr-3 text-right animate-part-fly-in-top",style:{animationDelay:"0.2s"},children:[t.jsx("p",{className:"text-[#C5A059] text-[10px] uppercase tracking-[0.2em] font-bold",children:"Countdown to"}),t.jsx("p",{className:"text-white text-base font-bold",children:"Tt 2026"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"animate-part-fly-in-left",style:{animationDelay:"1.0s"},children:t.jsx(Q,{value:E.days,label:"Ngy"})}),t.jsx("div",{className:"animate-part-fly-in-top",style:{animationDelay:"1.4s"},children:t.jsx(Q,{value:E.hours,label:"Gi"})}),t.jsx("div",{className:"animate-part-fly-in-bottom",style:{animationDelay:"1.8s"},children:t.jsx(Q,{value:E.minutes,label:"Pht"})}),t.jsx("div",{className:"animate-part-fly-in-right",style:{animationDelay:"2.2s"},children:t.jsx(Q,{value:E.seconds,label:"Giy"})})]})]})}),t.jsx("div",{className:"w-full flex items-center justify-center animate-fade-in-right relative z-10 px-4 lg:px-0",children:t.jsxs("div",{className:"relative w-full max-w-[400px] p-8 rounded-2xl bg-[#043927]/20 backdrop-blur-xl border border-[#C5A059]/30 shadow-[0_8px_32px_0_rgba(0,0,0,0.36)] flex flex-col items-center justify-center overflow-hidden group",children:[t.jsx("div",{className:"absolute top-0 -left-[100%] w-full h-full bg-gradient-to-r from-transparent via-white/5 to-transparent group-hover:transition-all group-hover:duration-1000 group-hover:left-[100%]"}),t.jsx("div",{className:"absolute inset-0 rounded-2xl shadow-[inset_0_0_20px_rgba(197,160,89,0.1)] pointer-events-none"}),t.jsx("img",{src:yn,className:"absolute top-[-10px] left-8 w-6 h-6 rotate-12 opacity-90 z-20 pointer-events-none drop-shadow-sm select-none",draggable:"false"}),t.jsx("img",{src:vn,className:"absolute top-[-5px] right-12 w-5 h-5 -rotate-45 opacity-80 z-20 pointer-events-none drop-shadow-sm select-none",draggable:"false"}),t.jsxs("div",{className:"text-center mb-6 w-full relative z-10",children:[t.jsx("h2",{className:"text-2xl font-bold text-[#FCEE21] mb-2 uppercase tracking-widest",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:u==="login"?"ng Nhp":u==="forgot"?"Khi Phc":"Mt Khu Mi"}),t.jsxs("p",{className:"text-[#C5A059] text-[10px] tracking-widest uppercase font-bold min-h-[15px]",children:[A,t.jsx("span",{className:"animate-blink",children:"|"})]})]}),u==="login"&&t.jsxs("form",{onSubmit:L,className:"space-y-3 w-full relative z-10",children:[t.jsx("div",{className:"space-y-1",children:t.jsxs("div",{className:"relative group/input",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("i",{className:"fas fa-user text-[#FCEE21]/70 text-xs transition-colors group-focus-within/input:text-[#FCEE21]"})}),t.jsx("input",{value:f,onChange:q=>x(q.target.value),type:"text",className:"w-full pl-10 pr-4 py-3 bg-black/30 border border-[#C5A059]/40 rounded-xl text-[#FCEE21] placeholder-[#FCEE21]/50 focus:outline-none focus:border-[#FCEE21] focus:bg-black/50 transition-all text-base shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)] backdrop-blur-sm",placeholder:"Tn ng nhp"})]})}),t.jsx("div",{className:"space-y-1",children:t.jsxs("div",{className:"relative group/input",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:t.jsx("i",{className:"fas fa-lock text-[#FCEE21]/70 text-sm transition-colors group-focus-within/input:text-[#FCEE21]"})}),t.jsx("input",{value:g,onChange:q=>b(q.target.value),type:"password",className:"w-full pl-10 pr-4 py-3 bg-black/30 border border-[#C5A059]/40 rounded-xl text-[#FCEE21] placeholder-[#FCEE21]/50 focus:outline-none focus:border-[#FCEE21] focus:bg-black/50 transition-all text-base shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)] backdrop-blur-sm",placeholder:"Mt khu"})]})}),t.jsxs("button",{type:"submit",disabled:o,className:`w-full py-3.5 mt-6 bg-gradient-to-r from-[#C5A059] to-[#997B3C] hover:from-[#D4B36A] hover:to-[#AA8A4B] text-[#043927] font-bold rounded-xl shadow-[0_4px_15px_rgba(197,160,89,0.3)] transform transition-all active:scale-[0.98] uppercase tracking-wider text-sm flex items-center justify-center gap-2 border border-[#FCEE21]/30 relative overflow-hidden ${o?"animate-pulse-gold":""}`,children:[o&&t.jsx("div",{className:"absolute top-0 left-0 h-[2px] w-full bg-gradient-to-r from-transparent via-[#FFF] to-transparent animate-fuse-burn"}),o?t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-spinner fa-spin text-lg"}),t.jsx("span",{children:"ang Xc Thc..."})]}):"ng Nhp"]}),t.jsx("div",{className:"text-center flex justify-center mt-2",children:t.jsx("button",{type:"button",onClick:()=>h("forgot"),className:"text-[#C5A059]/80 hover:text-[#FCEE21] text-xs hover:underline transition-all font-medium",children:"Qun mt khu?"})})]}),u==="forgot"&&t.jsxs("form",{onSubmit:H,className:"space-y-3 w-full relative z-10 px-4",children:[t.jsx("div",{className:"space-y-1",children:t.jsxs("div",{className:"relative group/input",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("i",{className:"fas fa-envelope text-[#FCEE21]/70 text-xs transition-colors group-focus-within/input:text-[#FCEE21]"})}),t.jsx("input",{value:c,onChange:q=>y(q.target.value),type:"email",className:"w-full pl-8 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"Email ng k"})]})}),t.jsx("button",{type:"submit",disabled:o,className:"w-full py-2.5 mt-4 bg-gradient-to-r from-[#C5A059] to-[#997B3C] hover:from-[#D4B36A] hover:to-[#AA8A4B] text-[#043927] font-bold rounded-lg shadow-[0_4px_10px_rgba(0,0,0,0.5)] transform transition-all active:scale-[0.98] uppercase tracking-wider text-xs flex items-center justify-center gap-2 border border-[#FCEE21]/30",children:o?t.jsx("i",{className:"fas fa-spinner fa-spin"}):"Gi M Xc Nhn"}),t.jsx("div",{className:"text-center flex justify-center mt-2",children:t.jsx("button",{type:"button",onClick:R,className:"text-[#C5A059]/80 hover:text-[#FCEE21] text-xs hover:underline transition-all font-medium",children:"Quay li ng nhp"})})]}),u==="reset"&&t.jsxs("form",{onSubmit:z,className:"space-y-3 w-full relative z-10 px-4",children:[t.jsx("div",{className:"space-y-1",children:t.jsx("input",{value:j,onChange:q=>w(q.target.value),type:"text",className:"w-full pl-3 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner text-center tracking-widest focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"M OTP"})}),t.jsx("div",{className:"space-y-1",children:t.jsx("input",{value:S,onChange:q=>T(q.target.value),type:"password",className:"w-full pl-3 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"Mt khu mi"})}),t.jsx("div",{className:"space-y-1",children:t.jsx("input",{value:N,onChange:q=>D(q.target.value),type:"password",className:"w-full pl-3 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"Nhp li mt khu"})}),t.jsx("button",{type:"submit",disabled:o,className:"w-full py-2.5 mt-4 bg-gradient-to-r from-[#C5A059] to-[#997B3C] hover:from-[#D4B36A] hover:to-[#AA8A4B] text-[#043927] font-bold rounded-lg shadow-[0_4px_10px_rgba(0,0,0,0.5)] transform transition-all active:scale-[0.98] uppercase tracking-wider text-xs flex items-center justify-center gap-2 border border-[#FCEE21]/30",children:o?t.jsx("i",{className:"fas fa-spinner fa-spin"}):"i Mt Khu"}),t.jsx("div",{className:"text-center flex justify-center mt-2",children:t.jsx("button",{type:"button",onClick:R,className:"text-[#C5A059]/80 hover:text-[#FCEE21] text-xs hover:underline transition-all font-medium",children:"Hy b"})})]})]})})]}),t.jsx("style",{children:`
                @keyframes fade-in-up {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes fade-in-right {
                    from { opacity: 0; transform: translateX(20px); }
                    to { opacity: 1; transform: translateX(0); }
                }
                @keyframes shimmer {
                    from { transform: translateX(-100%) skewX(12deg); }
                    to { transform: translateX(200%) skewX(12deg); }
                }
                @keyframes swing {
                    0% { transform: rotate(3deg); }
                    100% { transform: rotate(-3deg); }
                }
                @keyframes sway {
                    0% { transform: rotate(-5deg); }
                    100% { transform: rotate(5deg); }
                }
                .animate-fade-in-up { animation: fade-in-up 0.8s ease-out forwards; }
                .animate-fade-in-right { animation: fade-in-right 0.8s ease-out forwards; }
                .animate-shimmer { animation: shimmer 2s infinite; }
                .animate-swing { animation: swing 5s ease-in-out infinite alternate; transform-origin: top center; }
                .animate-sway { animation: sway 3s ease-in-out infinite alternate; transform-origin: top center; }
                @keyframes candle-glow {
                    0%, 100% { filter: brightness(1.1) drop-shadow(0 0 25px rgba(252, 238, 33, 0.4)); }
                    50% { filter: brightness(1.3) drop-shadow(0 0 50px rgba(252, 238, 33, 0.8)); }
                    25% { filter: brightness(1.15) drop-shadow(0 0 30px rgba(252, 238, 33, 0.5)); }
                    75% { filter: brightness(1.25) drop-shadow(0 0 40px rgba(252, 238, 33, 0.6)); }
                }
                .animate-candle-glow { animation: candle-glow 2.5s ease-in-out infinite; }
                @keyframes pulse-fast {
                    0%, 100% { opacity: 0.6; filter: brightness(1.2) drop-shadow(0 0 5px rgba(255, 200, 0, 0.5)); }
                    50% { opacity: 1; filter: brightness(1.6) drop-shadow(0 0 20px rgba(255, 100, 0, 0.9)); }
                }
                .animate-pulse-fast { animation: pulse-fast 0.1s ease-in-out infinite; }
                @keyframes blink {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0; }
                }
                .animate-blink { animation: blink 1s step-end infinite; }
                
                @keyframes fuse-burn {
                    0% { transform: translateX(-100%); }
                    100% { transform: translateX(100%); }
                }
                .animate-fuse-burn { animation: fuse-burn 1s linear infinite; }

                @keyframes pulse-gold {
                    0%, 100% { box-shadow: 0 0 0 0 rgba(252, 238, 33, 0.4); }
                    70% { box-shadow: 0 0 0 10px rgba(252, 238, 33, 0); }
                }
                .animate-pulse-gold { animation: pulse-gold 1.5s infinite; }

                /* Transformer / Mechanical Assembly Effects - Multi-directional */
                @keyframes part-fly-in-left {
                    0% { opacity: 0; transform: translateX(-200px) translateY(-50px) rotate(-45deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateX(0) translateY(0) rotate(0) scale(1); filter: blur(0); }
                }
                @keyframes part-fly-in-right {
                    0% { opacity: 0; transform: translateX(200px) translateY(50px) rotate(45deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateX(0) translateY(0) rotate(0) scale(1); filter: blur(0); }
                }
                @keyframes part-fly-in-top {
                    0% { opacity: 0; transform: translateY(-200px) translateX(50px) rotate(180deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateY(0) translateX(0) rotate(0) scale(1); filter: blur(0); }
                }
                 @keyframes part-fly-in-bottom {
                    0% { opacity: 0; transform: translateY(200px) translateX(-50px) rotate(-90deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateY(0) translateX(0) rotate(0) scale(1); filter: blur(0); }
                }

                .animate-part-fly-in-left { animation: part-fly-in-left 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
                .animate-part-fly-in-right { animation: part-fly-in-right 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
                .animate-part-fly-in-top { animation: part-fly-in-top 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
                .animate-part-fly-in-bottom { animation: part-fly-in-bottom 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
            `})]})},ld=({title:r,message:l,type:o,onClose:i,duration:u})=>{const[h,f]=m.useState(!1),x=m.useRef(null),g=m.useCallback(()=>{x.current&&clearTimeout(x.current),f(!0),setTimeout(()=>{i()},400)},[i]);m.useEffect(()=>(o!=="loading"&&u&&u>0&&(x.current=window.setTimeout(g,u)),()=>{x.current&&clearTimeout(x.current)}),[r,l,o,u,g]);const c={success:{icon:"fa-check",gradient:"from-emerald-400 to-green-600",shadow:"shadow-emerald-500/30",textColor:"text-emerald-700"},error:{icon:"fa-times",gradient:"from-rose-400 to-red-600",shadow:"shadow-rose-500/30",textColor:"text-rose-700"},loading:{icon:"fa-spinner fa-spin",gradient:"from-blue-400 to-indigo-600",shadow:"shadow-blue-500/30",textColor:"text-blue-700"},warning:{icon:"fa-exclamation",gradient:"from-amber-400 to-orange-600",shadow:"shadow-amber-500/30",textColor:"text-amber-700"},info:{icon:"fa-info",gradient:"from-sky-400 to-blue-600",shadow:"shadow-sky-500/30",textColor:"text-sky-700"}}[o],y=h?"animate-fade-out":"animate-fade-in-up";return t.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] pointer-events-none flex justify-end",children:t.jsxs("div",{className:`
                    pointer-events-auto 
                    relative overflow-hidden
                    bg-white/95 backdrop-blur-xl 
                    border border-white/60 
                    shadow-xl shadow-black/5 
                    rounded-full
                    py-2 pl-2 pr-4
                    flex items-center gap-3
                    w-auto max-w-sm
                    ${y}
                    transition-all duration-300
                `,role:"alert",children:[t.jsx("div",{className:`absolute -top-6 -left-6 w-16 h-16 bg-gradient-to-br ${c.gradient} opacity-20 blur-xl rounded-full pointer-events-none`}),t.jsx("div",{className:`
                    relative flex-shrink-0 
                    w-8 h-8 
                    rounded-full 
                    bg-gradient-to-br ${c.gradient} 
                    flex items-center justify-center 
                    text-white text-sm
                    ${c.shadow} shadow-md
                `,children:t.jsx("i",{className:`fas ${c.icon}`})}),t.jsxs("div",{className:"flex-grow min-w-0 flex flex-col justify-center",children:[t.jsx("h4",{className:`font-bold text-xs ${c.textColor} leading-tight`,children:r}),l&&t.jsx("p",{className:"text-slate-600 text-[10px] leading-tight truncate max-w-[200px]",children:l})]}),o!=="loading"&&t.jsx("button",{onClick:g,className:"flex-shrink-0 w-5 h-5 rounded-full hover:bg-slate-100 text-slate-400 hover:text-slate-600 flex items-center justify-center transition-colors ml-1",children:t.jsx("i",{className:"fas fa-times text-[10px]"})})]})})},od="/ordermanagement/assets/message_sent-DyIxiuZB.json",cd=({title:r,message:l,onClose:o,duration:i=3e3})=>{const[u,h]=m.useState(!1),f=m.useRef(null),x=m.useRef(null),g=m.useCallback(()=>{f.current&&clearTimeout(f.current),h(!0),setTimeout(()=>{o()},300)},[o]);m.useEffect(()=>{const c=x.current;return c&&typeof c.stop=="function"&&(c.stop(),c.play()),f.current=window.setTimeout(()=>{g()},i),()=>{f.current&&clearTimeout(f.current)}},[i,g]);const b=u?"toast-hidden":"toast-visible";return t.jsx("div",{className:`toast-container ${b}`,role:"alert","aria-live":"assertive","aria-atomic":"true",children:t.jsxs("div",{className:"toast-content",children:[t.jsx("div",{className:"flex-shrink-0 w-12 h-12 flex items-center justify-center",children:t.jsx("lottie-player",{ref:x,src:od,background:"transparent",speed:"1",style:{width:"60px",height:"60px",margin:"-5px"},autoplay:!0,loop:!1})}),t.jsxs("div",{className:"toast-body flex-grow",children:[t.jsx("p",{className:"toast-title",children:r}),l&&t.jsx("p",{className:"toast-message",children:l})]}),t.jsx("div",{className:"toast-close",children:t.jsx(Z,{onClick:g,variant:"ghost",className:"text-white/80 hover:text-white !p-0 w-8 h-8 rounded-full flex items-center justify-center",children:t.jsx("i",{className:"fas fa-times text-xl"})})})]})})},dd=()=>t.jsxs("div",{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-[#051a14] overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-[#043927]/30 via-black to-black"}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[t.jsxs("div",{className:"relative mb-8",children:[t.jsx("div",{className:"absolute inset-0 bg-[#FCEE21] blur-[40px] opacity-20 animate-pulse"}),t.jsx("h1",{className:"text-6xl md:text-8xl font-bold text-[#FCEE21] tracking-wider animate-bounce-slow",style:{textShadow:"0 0 20px rgba(252, 238, 33, 0.5)"},children:"2026"})]}),t.jsx("div",{className:"w-64 h-1 bg-[#043927] rounded-full overflow-hidden border border-[#C5A059]/30",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-[#C5A059] via-[#FCEE21] to-[#C5A059] animate-loading-bar w-full origin-left"})}),t.jsx("p",{className:"mt-4 text-[#C5A059] text-xs uppercase tracking-[0.3em] animate-pulse",children:"ang ti d liu..."})]}),t.jsx("style",{children:`
                @keyframes bounce-slow {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-10px); }
                }
                .animate-bounce-slow { animation: bounce-slow 3s infinite ease-in-out; }
                
                @keyframes loading-bar {
                    0% { transform: scaleX(0); }
                    50% { transform: scaleX(0.7); }
                    100% { transform: scaleX(1); }
                }
                .animate-loading-bar { animation: loading-bar 2s infinite ease-in-out; }
            `})]}),ud=()=>{const[r,l]=m.useState(!1),[o,i]=m.useState("idle"),[u,h]=m.useState(null),[f,x]=m.useState(0);m.useEffect(()=>{if(!window.electronAPI)return;const j=N=>{h(N),i("available"),l(!0)},w=N=>{i("downloading"),x(N.percent)},S=N=>{i("ready"),h(N),l(!0)},T=N=>{console.error("Update error:",N),i("error"),l(!0)};return window.electronAPI.onUpdateAvailable(j),window.electronAPI.onDownloadProgress(w),window.electronAPI.onUpdateDownloaded(S),window.electronAPI.onUpdateError(T),()=>{window.electronAPI.removeAllListeners("update-available"),window.electronAPI.removeAllListeners("download-progress"),window.electronAPI.removeAllListeners("update-downloaded"),window.electronAPI.removeAllListeners("update-error")}},[]);const g=()=>window.electronAPI.startDownload(),b=()=>window.electronAPI.quitAndInstall(),c=()=>l(!1),y=()=>l(!1);return r?t.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] animate-slide-in-up",children:t.jsxs("div",{className:"bg-black/90 backdrop-blur text-white rounded-full border border-white/10 shadow-xl px-4 py-2 flex items-center gap-3 text-xs font-medium ring-1 ring-white/5 transition-all hover:scale-[1.02] cursor-default select-none",children:[t.jsxs("div",{className:"shrink-0",children:[o==="available"&&t.jsx("i",{className:"fas fa-gift text-blue-400 animate-pulse"}),o==="downloading"&&t.jsxs("div",{className:"relative w-4 h-4 flex items-center justify-center",children:[t.jsx("i",{className:"fas fa-arrow-down text-[10px] text-white/50"}),t.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[t.jsx("path",{className:"text-white/10",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"text-blue-500 transition-all duration-300",strokeDasharray:`${f}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"})]})]}),o==="ready"&&t.jsx("i",{className:"fas fa-check text-emerald-400"}),o==="error"&&t.jsx("i",{className:"fas fa-exclamation text-red-400"})]}),t.jsx("div",{className:"flex flex-col min-w-[80px] max-w-[120px]",children:t.jsxs("span",{className:"truncate font-semibold tracking-wide",children:[o==="available"&&"Update v"+(u==null?void 0:u.version),o==="downloading"&&`${Math.round(f)}% Downloaded`,o==="ready"&&"Ready to Install",o==="error"&&"Update Failed"]})}),t.jsx("div",{className:"h-4 w-[1px] bg-white/10 mx-1"}),o==="available"&&t.jsx("button",{onClick:g,className:"text-blue-400 hover:text-white transition-colors uppercase text-[10px] font-bold tracking-wider",children:"Get"}),o==="downloading"&&t.jsx("button",{onClick:y,className:"text-white/50 hover:text-white transition-colors",children:t.jsx("i",{className:"fas fa-minus"})}),o==="ready"&&t.jsx("button",{onClick:b,className:"text-emerald-400 hover:text-emerald-300 transition-colors uppercase text-[10px] font-bold tracking-wider",children:"Restart"}),(o==="available"||o==="ready"||o==="error")&&t.jsx("button",{onClick:c,className:"text-white/30 hover:text-white transition-colors ml-1",children:t.jsx("i",{className:"fas fa-times"})})]})}):null},hd="1.0.10",_n={version:hd},Sn="app_version",md=()=>{console.log("New version detected. Clearing cache..."),"caches"in window&&caches.keys().then(r=>{r.forEach(l=>{caches.delete(l)})}),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(r=>{r.forEach(l=>{l.unregister()})}),localStorage.setItem(Sn,_n.version),window.location.reload()},fd=()=>{const r=localStorage.getItem(Sn),l=_n.version;r!==l&&md()};fd();const xd=()=>{const[r,l]=m.useState(!1),[o,i]=m.useState(!0),[u,h]=m.useState(null),[f,x]=m.useState(null);m.useEffect(()=>{const w=sessionStorage.getItem("isLoggedIn")==="true";if(l(w),i(!1),w){qa();const S=setInterval(qa,2*60*1e3);return()=>clearInterval(S)}},[r]);const g=m.useCallback(()=>{l(!0)},[]),b=m.useCallback((w,S,T,N)=>{h({show:!0,title:w,message:S,type:T,duration:T==="loading"?N??0:N??5e3})},[]),c=m.useCallback(()=>h(null),[]),y=m.useCallback(()=>x(null),[]),j=m.useCallback(()=>{sessionStorage.clear(),l(!1)},[b]);return o?new Date>=new Date("2026-01-05T00:00:00")?t.jsx(dd,{}):t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f0f2f5"},children:[t.jsx("div",{style:{border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",width:"40px",height:"40px",animation:"spin 1s linear infinite"}}),t.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]}):t.jsxs(t.Fragment,{children:[r?t.jsx(Wc,{onLogout:j,showToast:b,hideToast:c}):t.jsx(id,{onLoginSuccess:g,showToast:b}),u&&t.jsx(ld,{...u,onClose:c}),f&&t.jsx(cd,{show:!0,title:f.title,message:f.message,onClose:y,duration:3e3}),t.jsx(ud,{})]})},Cn=document.getElementById("root");if(!Cn)throw new Error("Could not find root element to mount to");const gd=ia.createRoot(Cn);gd.render(t.jsx(_e.StrictMode,{children:t.jsx(xd,{})}));export{ec as A,Z as B,la as C,Bo as E,Nn as F,hn as M,ho as P,nn as S,Jl as a,cc as b,rs as c,un as d,Dt as e,ct as f,rn as g,lt as h,Ge as i,wd as j,jd as k,vd as l,Ut as m,Qo as n,oo as o,Io as p,dn as q,qa as r,Nd as s,Wa as t,Mc as u,as as v,kd as w,_d as x,Jo as y};
