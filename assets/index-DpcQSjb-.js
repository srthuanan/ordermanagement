const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HistoryTable-Cf8FlYhi.js","assets/vendor-pdf-DusBkRB3.js","assets/vendor-react-DJ1oPbzn.js","assets/vendor-utils-C5S46NFB.js","assets/StockView-D41YbmXf.js","assets/SoldCarsView-BjpHghC9.js","assets/AdminView-CEQyUEyD.js","assets/TestDriveForm-ZLtw6M2y.js"])))=>i.map(i=>d[i]);
import{j as t,G as Hl,g as zl,D as Ul,P as Bl}from"./vendor-pdf-DusBkRB3.js";import{a as ln,c as on,r as u,R as _e}from"./vendor-react-DJ1oPbzn.js";import{h as Ee}from"./vendor-utils-C5S46NFB.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))i(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const f of m.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function o(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function i(h){if(h.ep)return;h.ep=!0;const m=o(h);fetch(h.href,m)}})();var fa={},qa=ln;fa.createRoot=qa.createRoot,fa.hydrateRoot=qa.hydrateRoot;const Wl="modulepreload",Gl=function(n){return"/ordermanagement/"+n},Xa={},rs=function(l,o,i){let h=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),x=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));h=Promise.allSettled(o.map(g=>{if(g=Gl(g),g in Xa)return;Xa[g]=!0;const y=g.endsWith(".css"),c=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${c}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Wl,y||(b.as="script"),b.crossOrigin="",b.href=g,x&&b.setAttribute("nonce",x),document.head.appendChild(b),y)return new Promise((j,w)=>{b.addEventListener("load",j),b.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${g}`)))})}))}function m(f){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=f,window.dispatchEvent(x),!x.defaultPrevented)throw f}return h.then(f=>{for(const x of f||[])x.status==="rejected"&&m(x.reason);return l().catch(m)})};function cn(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oa={exports:{}},Ka;function ql(){return Ka||(Ka=1,function(n,l){(function(o,i){n.exports=i()})(on,function(){var o;function i(){return o.apply(null,arguments)}function h(e){o=e}function m(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function f(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function x(e,s){return Object.prototype.hasOwnProperty.call(e,s)}function g(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var s;for(s in e)if(x(e,s))return!1;return!0}function y(e){return e===void 0}function c(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function b(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function j(e,s){var a=[],r,d=e.length;for(r=0;r<d;++r)a.push(s(e[r],r));return a}function w(e,s){for(var a in s)x(s,a)&&(e[a]=s[a]);return x(s,"toString")&&(e.toString=s.toString),x(s,"valueOf")&&(e.valueOf=s.valueOf),e}function _(e,s,a,r){return _a(e,s,a,r,!0).utc()}function C(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function N(e){return e._pf==null&&(e._pf=C()),e._pf}var M;Array.prototype.some?M=Array.prototype.some:M=function(e){var s=Object(this),a=s.length>>>0,r;for(r=0;r<a;r++)if(r in s&&e.call(this,s[r],r,s))return!0;return!1};function T(e){var s=null,a=!1,r=e._d&&!isNaN(e._d.getTime());if(r&&(s=N(e),a=M.call(s.parsedDateParts,function(d){return d!=null}),r=s.overflow<0&&!s.empty&&!s.invalidEra&&!s.invalidMonth&&!s.invalidWeekday&&!s.weekdayMismatch&&!s.nullInput&&!s.invalidFormat&&!s.userInvalidated&&(!s.meridiem||s.meridiem&&a),e._strict&&(r=r&&s.charsLeftOver===0&&s.unusedTokens.length===0&&s.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=r;else return r;return e._isValid}function P(e){var s=_(NaN);return e!=null?w(N(s),e):N(s).userInvalidated=!0,s}var A=i.momentProperties=[],I=!1;function R(e,s){var a,r,d,p=A.length;if(y(s._isAMomentObject)||(e._isAMomentObject=s._isAMomentObject),y(s._i)||(e._i=s._i),y(s._f)||(e._f=s._f),y(s._l)||(e._l=s._l),y(s._strict)||(e._strict=s._strict),y(s._tzm)||(e._tzm=s._tzm),y(s._isUTC)||(e._isUTC=s._isUTC),y(s._offset)||(e._offset=s._offset),y(s._pf)||(e._pf=N(s)),y(s._locale)||(e._locale=s._locale),p>0)for(a=0;a<p;a++)r=A[a],d=s[r],y(d)||(e[r]=d);return e}function H(e){R(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),I===!1&&(I=!0,i.updateOffset(this),I=!1)}function E(e){return e instanceof H||e!=null&&e._isAMomentObject!=null}function S(e){i.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function $(e,s){var a=!0;return w(function(){if(i.deprecationHandler!=null&&i.deprecationHandler(null,e),a){var r=[],d,p,k,G=arguments.length;for(p=0;p<G;p++){if(d="",typeof arguments[p]=="object"){d+=`
[`+p+"] ";for(k in arguments[0])x(arguments[0],k)&&(d+=k+": "+arguments[0][k]+", ");d=d.slice(0,-2)}else d=arguments[p];r.push(d)}S(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),a=!1}return s.apply(this,arguments)},s)}var V={};function z(e,s){i.deprecationHandler!=null&&i.deprecationHandler(e,s),V[e]||(S(s),V[e]=!0)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;function L(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function J(e){var s,a;for(a in e)x(e,a)&&(s=e[a],L(s)?this[a]=s:this["_"+a]=s);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function q(e,s){var a=w({},e),r;for(r in s)x(s,r)&&(f(e[r])&&f(s[r])?(a[r]={},w(a[r],e[r]),w(a[r],s[r])):s[r]!=null?a[r]=s[r]:delete a[r]);for(r in e)x(e,r)&&!x(s,r)&&f(e[r])&&(a[r]=w({},a[r]));return a}function ee(e){e!=null&&this.set(e)}var ie;Object.keys?ie=Object.keys:ie=function(e){var s,a=[];for(s in e)x(e,s)&&a.push(s);return a};var oe={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function pe(e,s,a){var r=this._calendar[e]||this._calendar.sameElse;return L(r)?r.call(s,a):r}function W(e,s,a){var r=""+Math.abs(e),d=s-r.length,p=e>=0;return(p?a?"+":"":"-")+Math.pow(10,Math.max(0,d)).toString().substr(1)+r}var Z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,v={},Y={};function D(e,s,a,r){var d=r;typeof r=="string"&&(d=function(){return this[r]()}),e&&(Y[e]=d),s&&(Y[s[0]]=function(){return W(d.apply(this,arguments),s[1],s[2])}),a&&(Y[a]=function(){return this.localeData().ordinal(d.apply(this,arguments),e)})}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function te(e){var s=e.match(Z),a,r;for(a=0,r=s.length;a<r;a++)Y[s[a]]?s[a]=Y[s[a]]:s[a]=U(s[a]);return function(d){var p="",k;for(k=0;k<r;k++)p+=L(s[k])?s[k].call(d,e):s[k];return p}}function de(e,s){return e.isValid()?(s=Me(s,e.localeData()),v[s]=v[s]||te(s),v[s](e)):e.localeData().invalidDate()}function Me(e,s){var a=5;function r(d){return s.longDateFormat(d)||d}for(F.lastIndex=0;a>=0&&F.test(e);)e=e.replace(F,r),F.lastIndex=0,a-=1;return e}var Qe={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function K(e){var s=this._longDateFormat[e],a=this._longDateFormat[e.toUpperCase()];return s||!a?s:(this._longDateFormat[e]=a.match(Z).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[e])}var ue="Invalid date";function ve(){return this._invalidDate}var Se="%d",He=/\d{1,2}/;function Oe(e){return this._ordinal.replace("%d",e)}var Ce={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Ye(e,s,a,r){var d=this._relativeTime[a];return L(d)?d(e,s,a,r):d.replace(/%d/i,e)}function ut(e,s){var a=this._relativeTime[e>0?"future":"past"];return L(a)?a(s):a.replace(/%s/i,s)}var Wt={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Te(e){return typeof e=="string"?Wt[e]||Wt[e.toLowerCase()]:void 0}function Pt(e){var s={},a,r;for(r in e)x(e,r)&&(a=Te(r),a&&(s[a]=e[r]));return s}var It={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function bt(e){var s=[],a;for(a in e)x(e,a)&&s.push({unit:a,priority:It[a]});return s.sort(function(r,d){return r.priority-d.priority}),s}var yt=/\d/,Pe=/\d\d/,vt=/\d{3}/,wt=/\d{4}/,tt=/[+-]?\d{6}/,he=/\d\d?/,os=/\d\d\d\d?/,cs=/\d\d\d\d\d\d?/,jt=/\d{1,3}/,Ae=/\d{1,4}/,Ft=/[+-]?\d{1,6}/,We=/\d+/,Ot=/[+-]?\d+/,Es=/Z|[+-]\d\d:?\d\d/gi,Nt=/Z|[+-]\d\d(?::?\d\d)?/gi,ds=/[+-]?\d+(\.\d{1,3})?/,kt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ht=/^[1-9]\d?/,Gt=/^([1-9]\d|\d)/,_t;_t={};function B(e,s,a){_t[e]=L(s)?s:function(r,d){return r&&a?a:s}}function Ps(e,s){return x(_t,e)?_t[e](s._strict,s._locale):new RegExp(Is(e))}function Is(e){return Ge(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(s,a,r,d,p){return a||r||d||p}))}function Ge(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Le(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ae(e){var s=+e,a=0;return s!==0&&isFinite(s)&&(a=Le(s)),a}var qt={};function ce(e,s){var a,r=s,d;for(typeof e=="string"&&(e=[e]),c(s)&&(r=function(p,k){k[s]=ae(p)}),d=e.length,a=0;a<d;a++)qt[e[a]]=r}function St(e,s){ce(e,function(a,r,d,p){d._w=d._w||{},s(a,d._w,d,p)})}function Xt(e,s,a){s!=null&&x(qt,e)&&qt[e](s,a._a,a,e)}function At(e){return e%4===0&&e%100!==0||e%400===0}var we=0,qe=1,Re=2,je=3,Ie=4,Be=5,st=6,Fs=7,us=8;D("Y",0,0,function(){var e=this.year();return e<=9999?W(e,4):"+"+e}),D(0,["YY",2],0,function(){return this.year()%100}),D(0,["YYYY",4],0,"year"),D(0,["YYYYY",5],0,"year"),D(0,["YYYYYY",6,!0],0,"year"),B("Y",Ot),B("YY",he,Pe),B("YYYY",Ae,wt),B("YYYYY",Ft,tt),B("YYYYYY",Ft,tt),ce(["YYYYY","YYYYYY"],we),ce("YYYY",function(e,s){s[we]=e.length===2?i.parseTwoDigitYear(e):ae(e)}),ce("YY",function(e,s){s[we]=i.parseTwoDigitYear(e)}),ce("Y",function(e,s){s[we]=parseInt(e,10)});function Ct(e){return At(e)?366:365}i.parseTwoDigitYear=function(e){return ae(e)+(ae(e)>68?1900:2e3)};var hs=mt("FullYear",!0);function Os(){return At(this.year())}function mt(e,s){return function(a){return a!=null?(Kt(this,e,a),i.updateOffset(this,s),this):$e(this,e)}}function $e(e,s){if(!e.isValid())return NaN;var a=e._d,r=e._isUTC;switch(s){case"Milliseconds":return r?a.getUTCMilliseconds():a.getMilliseconds();case"Seconds":return r?a.getUTCSeconds():a.getSeconds();case"Minutes":return r?a.getUTCMinutes():a.getMinutes();case"Hours":return r?a.getUTCHours():a.getHours();case"Date":return r?a.getUTCDate():a.getDate();case"Day":return r?a.getUTCDay():a.getDay();case"Month":return r?a.getUTCMonth():a.getMonth();case"FullYear":return r?a.getUTCFullYear():a.getFullYear();default:return NaN}}function Kt(e,s,a){var r,d,p,k,G;if(!(!e.isValid()||isNaN(a))){switch(r=e._d,d=e._isUTC,s){case"Milliseconds":return void(d?r.setUTCMilliseconds(a):r.setMilliseconds(a));case"Seconds":return void(d?r.setUTCSeconds(a):r.setSeconds(a));case"Minutes":return void(d?r.setUTCMinutes(a):r.setMinutes(a));case"Hours":return void(d?r.setUTCHours(a):r.setHours(a));case"Date":return void(d?r.setUTCDate(a):r.setDate(a));case"FullYear":break;default:return}p=a,k=e.month(),G=e.date(),G=G===29&&k===1&&!At(p)?28:G,d?r.setUTCFullYear(p,k,G):r.setFullYear(p,k,G)}}function ms(e){return e=Te(e),L(this[e])?this[e]():this}function As(e,s){if(typeof e=="object"){e=Pt(e);var a=bt(e),r,d=a.length;for(r=0;r<d;r++)this[a[r].unit](e[a[r].unit])}else if(e=Te(e),L(this[e]))return this[e](s);return this}function Ls(e,s){return(e%s+s)%s}var xe;Array.prototype.indexOf?xe=Array.prototype.indexOf:xe=function(e){var s;for(s=0;s<this.length;++s)if(this[s]===e)return s;return-1};function Lt(e,s){if(isNaN(e)||isNaN(s))return NaN;var a=Ls(s,12);return e+=(s-a)/12,a===1?At(e)?29:28:31-a%7%2}D("M",["MM",2],"Mo",function(){return this.month()+1}),D("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),D("MMMM",0,0,function(e){return this.localeData().months(this,e)}),B("M",he,ht),B("MM",he,Pe),B("MMM",function(e,s){return s.monthsShortRegex(e)}),B("MMMM",function(e,s){return s.monthsRegex(e)}),ce(["M","MM"],function(e,s){s[qe]=ae(e)-1}),ce(["MMM","MMMM"],function(e,s,a,r){var d=a._locale.monthsParse(e,r,a._strict);d!=null?s[qe]=d:N(a).invalidMonth=e});var fs="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ft="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Zt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Rs=kt,$s=kt;function Vs(e,s){return e?m(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Zt).test(s)?"format":"standalone"][e.month()]:m(this._months)?this._months:this._months.standalone}function Hs(e,s){return e?m(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Zt.test(s)?"format":"standalone"][e.month()]:m(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function zs(e,s,a){var r,d,p,k=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)p=_([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(p,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(p,"").toLocaleLowerCase();return a?s==="MMM"?(d=xe.call(this._shortMonthsParse,k),d!==-1?d:null):(d=xe.call(this._longMonthsParse,k),d!==-1?d:null):s==="MMM"?(d=xe.call(this._shortMonthsParse,k),d!==-1?d:(d=xe.call(this._longMonthsParse,k),d!==-1?d:null)):(d=xe.call(this._longMonthsParse,k),d!==-1?d:(d=xe.call(this._shortMonthsParse,k),d!==-1?d:null))}function Us(e,s,a){var r,d,p;if(this._monthsParseExact)return zs.call(this,e,s,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(d=_([2e3,r]),a&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(d,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(d,"").replace(".","")+"$","i")),!a&&!this._monthsParse[r]&&(p="^"+this.months(d,"")+"|^"+this.monthsShort(d,""),this._monthsParse[r]=new RegExp(p.replace(".",""),"i")),a&&s==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(a&&s==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!a&&this._monthsParse[r].test(e))return r}}function xs(e,s){if(!e.isValid())return e;if(typeof s=="string"){if(/^\d+$/.test(s))s=ae(s);else if(s=e.localeData().monthsParse(s),!c(s))return e}var a=s,r=e.date();return r=r<29?r:Math.min(r,Lt(e.year(),a)),e._isUTC?e._d.setUTCMonth(a,r):e._d.setMonth(a,r),e}function gs(e){return e!=null?(xs(this,e),i.updateOffset(this,!0),this):$e(this,"Month")}function se(){return Lt(this.year(),this.month())}function me(e){return this._monthsParseExact?(x(this,"_monthsRegex")||De.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(x(this,"_monthsShortRegex")||(this._monthsShortRegex=Rs),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Ne(e){return this._monthsParseExact?(x(this,"_monthsRegex")||De.call(this),e?this._monthsStrictRegex:this._monthsRegex):(x(this,"_monthsRegex")||(this._monthsRegex=$s),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function De(){function e(Q,ne){return ne.length-Q.length}var s=[],a=[],r=[],d,p,k,G;for(d=0;d<12;d++)p=_([2e3,d]),k=Ge(this.monthsShort(p,"")),G=Ge(this.months(p,"")),s.push(k),a.push(G),r.push(G),r.push(k);s.sort(e),a.sort(e),r.sort(e),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function ye(e,s,a,r,d,p,k){var G;return e<100&&e>=0?(G=new Date(e+400,s,a,r,d,p,k),isFinite(G.getFullYear())&&G.setFullYear(e)):G=new Date(e,s,a,r,d,p,k),G}function fe(e){var s,a;return e<100&&e>=0?(a=Array.prototype.slice.call(arguments),a[0]=e+400,s=new Date(Date.UTC.apply(null,a)),isFinite(s.getUTCFullYear())&&s.setUTCFullYear(e)):s=new Date(Date.UTC.apply(null,arguments)),s}function ze(e,s,a){var r=7+s-a,d=(7+fe(e,0,r).getUTCDay()-s)%7;return-d+r-1}function Ve(e,s,a,r,d){var p=(7+a-r)%7,k=ze(e,r,d),G=1+7*(s-1)+p+k,Q,ne;return G<=0?(Q=e-1,ne=Ct(Q)+G):G>Ct(e)?(Q=e+1,ne=G-Ct(e)):(Q=e,ne=G),{year:Q,dayOfYear:ne}}function Xe(e,s,a){var r=ze(e.year(),s,a),d=Math.floor((e.dayOfYear()-r-1)/7)+1,p,k;return d<1?(k=e.year()-1,p=d+ke(k,s,a)):d>ke(e.year(),s,a)?(p=d-ke(e.year(),s,a),k=e.year()+1):(k=e.year(),p=d),{week:p,year:k}}function ke(e,s,a){var r=ze(e,s,a),d=ze(e+1,s,a);return(Ct(e)-r+d)/7}D("w",["ww",2],"wo","week"),D("W",["WW",2],"Wo","isoWeek"),B("w",he,ht),B("ww",he,Pe),B("W",he,ht),B("WW",he,Pe),St(["w","ww","W","WW"],function(e,s,a,r){s[r.substr(0,1)]=ae(e)});function Rt(e){return Xe(e,this._week.dow,this._week.doy).week}var ps={dow:0,doy:6};function Yn(){return this._week.dow}function En(){return this._week.doy}function Pn(e){var s=this.localeData().week(this);return e==null?s:this.add((e-s)*7,"d")}function In(e){var s=Xe(this,1,4).week;return e==null?s:this.add((e-s)*7,"d")}D("d",0,"do","day"),D("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),D("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),D("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),D("e",0,0,"weekday"),D("E",0,0,"isoWeekday"),B("d",he),B("e",he),B("E",he),B("dd",function(e,s){return s.weekdaysMinRegex(e)}),B("ddd",function(e,s){return s.weekdaysShortRegex(e)}),B("dddd",function(e,s){return s.weekdaysRegex(e)}),St(["dd","ddd","dddd"],function(e,s,a,r){var d=a._locale.weekdaysParse(e,r,a._strict);d!=null?s.d=d:N(a).invalidWeekday=e}),St(["d","e","E"],function(e,s,a,r){s[r]=ae(e)});function Fn(e,s){return typeof e!="string"?e:isNaN(e)?(e=s.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function On(e,s){return typeof e=="string"?s.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Bs(e,s){return e.slice(s,7).concat(e.slice(0,s))}var An="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),pa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ln="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Rn=kt,$n=kt,Vn=kt;function Hn(e,s){var a=m(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(s)?"format":"standalone"];return e===!0?Bs(a,this._week.dow):e?a[e.day()]:a}function zn(e){return e===!0?Bs(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Un(e){return e===!0?Bs(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Bn(e,s,a){var r,d,p,k=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)p=_([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(p,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(p,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(p,"").toLocaleLowerCase();return a?s==="dddd"?(d=xe.call(this._weekdaysParse,k),d!==-1?d:null):s==="ddd"?(d=xe.call(this._shortWeekdaysParse,k),d!==-1?d:null):(d=xe.call(this._minWeekdaysParse,k),d!==-1?d:null):s==="dddd"?(d=xe.call(this._weekdaysParse,k),d!==-1||(d=xe.call(this._shortWeekdaysParse,k),d!==-1)?d:(d=xe.call(this._minWeekdaysParse,k),d!==-1?d:null)):s==="ddd"?(d=xe.call(this._shortWeekdaysParse,k),d!==-1||(d=xe.call(this._weekdaysParse,k),d!==-1)?d:(d=xe.call(this._minWeekdaysParse,k),d!==-1?d:null)):(d=xe.call(this._minWeekdaysParse,k),d!==-1||(d=xe.call(this._weekdaysParse,k),d!==-1)?d:(d=xe.call(this._shortWeekdaysParse,k),d!==-1?d:null))}function Wn(e,s,a){var r,d,p;if(this._weekdaysParseExact)return Bn.call(this,e,s,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(d=_([2e3,1]).day(r),a&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(d,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(d,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(d,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(p="^"+this.weekdays(d,"")+"|^"+this.weekdaysShort(d,"")+"|^"+this.weekdaysMin(d,""),this._weekdaysParse[r]=new RegExp(p.replace(".",""),"i")),a&&s==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(a&&s==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(a&&s==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!a&&this._weekdaysParse[r].test(e))return r}}function Gn(e){if(!this.isValid())return e!=null?this:NaN;var s=$e(this,"Day");return e!=null?(e=Fn(e,this.localeData()),this.add(e-s,"d")):s}function qn(e){if(!this.isValid())return e!=null?this:NaN;var s=(this.day()+7-this.localeData()._week.dow)%7;return e==null?s:this.add(e-s,"d")}function Xn(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var s=On(e,this.localeData());return this.day(this.day()%7?s:s-7)}else return this.day()||7}function Kn(e){return this._weekdaysParseExact?(x(this,"_weekdaysRegex")||Ws.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(x(this,"_weekdaysRegex")||(this._weekdaysRegex=Rn),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Zn(e){return this._weekdaysParseExact?(x(this,"_weekdaysRegex")||Ws.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(x(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=$n),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Jn(e){return this._weekdaysParseExact?(x(this,"_weekdaysRegex")||Ws.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(x(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Vn),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ws(){function e(Fe,lt){return lt.length-Fe.length}var s=[],a=[],r=[],d=[],p,k,G,Q,ne;for(p=0;p<7;p++)k=_([2e3,1]).day(p),G=Ge(this.weekdaysMin(k,"")),Q=Ge(this.weekdaysShort(k,"")),ne=Ge(this.weekdays(k,"")),s.push(G),a.push(Q),r.push(ne),d.push(G),d.push(Q),d.push(ne);s.sort(e),a.sort(e),r.sort(e),d.sort(e),this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Gs(){return this.hours()%12||12}function Qn(){return this.hours()||24}D("H",["HH",2],0,"hour"),D("h",["hh",2],0,Gs),D("k",["kk",2],0,Qn),D("hmm",0,0,function(){return""+Gs.apply(this)+W(this.minutes(),2)}),D("hmmss",0,0,function(){return""+Gs.apply(this)+W(this.minutes(),2)+W(this.seconds(),2)}),D("Hmm",0,0,function(){return""+this.hours()+W(this.minutes(),2)}),D("Hmmss",0,0,function(){return""+this.hours()+W(this.minutes(),2)+W(this.seconds(),2)});function ba(e,s){D(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),s)})}ba("a",!0),ba("A",!1);function ya(e,s){return s._meridiemParse}B("a",ya),B("A",ya),B("H",he,Gt),B("h",he,ht),B("k",he,ht),B("HH",he,Pe),B("hh",he,Pe),B("kk",he,Pe),B("hmm",os),B("hmmss",cs),B("Hmm",os),B("Hmmss",cs),ce(["H","HH"],je),ce(["k","kk"],function(e,s,a){var r=ae(e);s[je]=r===24?0:r}),ce(["a","A"],function(e,s,a){a._isPm=a._locale.isPM(e),a._meridiem=e}),ce(["h","hh"],function(e,s,a){s[je]=ae(e),N(a).bigHour=!0}),ce("hmm",function(e,s,a){var r=e.length-2;s[je]=ae(e.substr(0,r)),s[Ie]=ae(e.substr(r)),N(a).bigHour=!0}),ce("hmmss",function(e,s,a){var r=e.length-4,d=e.length-2;s[je]=ae(e.substr(0,r)),s[Ie]=ae(e.substr(r,2)),s[Be]=ae(e.substr(d)),N(a).bigHour=!0}),ce("Hmm",function(e,s,a){var r=e.length-2;s[je]=ae(e.substr(0,r)),s[Ie]=ae(e.substr(r))}),ce("Hmmss",function(e,s,a){var r=e.length-4,d=e.length-2;s[je]=ae(e.substr(0,r)),s[Ie]=ae(e.substr(r,2)),s[Be]=ae(e.substr(d))});function er(e){return(e+"").toLowerCase().charAt(0)==="p"}var tr=/[ap]\.?m?\.?/i,sr=mt("Hours",!0);function ar(e,s,a){return e>11?a?"pm":"PM":a?"am":"AM"}var va={calendar:oe,longDateFormat:Qe,invalidDate:ue,ordinal:Se,dayOfMonthOrdinalParse:He,relativeTime:Ce,months:fs,monthsShort:ft,week:ps,weekdays:An,weekdaysMin:Ln,weekdaysShort:pa,meridiemParse:tr},be={},Jt={},Qt;function nr(e,s){var a,r=Math.min(e.length,s.length);for(a=0;a<r;a+=1)if(e[a]!==s[a])return a;return r}function wa(e){return e&&e.toLowerCase().replace("_","-")}function rr(e){for(var s=0,a,r,d,p;s<e.length;){for(p=wa(e[s]).split("-"),a=p.length,r=wa(e[s+1]),r=r?r.split("-"):null;a>0;){if(d=bs(p.slice(0,a).join("-")),d)return d;if(r&&r.length>=a&&nr(p,r)>=a-1)break;a--}s++}return Qt}function ir(e){return!!(e&&e.match("^[^/\\\\]*$"))}function bs(e){var s=null,a;if(be[e]===void 0&&n&&n.exports&&ir(e))try{s=Qt._abbr,a=cn,a("./locale/"+e),xt(s)}catch{be[e]=null}return be[e]}function xt(e,s){var a;return e&&(y(s)?a=at(e):a=qs(e,s),a?Qt=a:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Qt._abbr}function qs(e,s){if(s!==null){var a,r=va;if(s.abbr=e,be[e]!=null)z("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=be[e]._config;else if(s.parentLocale!=null)if(be[s.parentLocale]!=null)r=be[s.parentLocale]._config;else if(a=bs(s.parentLocale),a!=null)r=a._config;else return Jt[s.parentLocale]||(Jt[s.parentLocale]=[]),Jt[s.parentLocale].push({name:e,config:s}),null;return be[e]=new ee(q(r,s)),Jt[e]&&Jt[e].forEach(function(d){qs(d.name,d.config)}),xt(e),be[e]}else return delete be[e],null}function lr(e,s){if(s!=null){var a,r,d=va;be[e]!=null&&be[e].parentLocale!=null?be[e].set(q(be[e]._config,s)):(r=bs(e),r!=null&&(d=r._config),s=q(d,s),r==null&&(s.abbr=e),a=new ee(s),a.parentLocale=be[e],be[e]=a),xt(e)}else be[e]!=null&&(be[e].parentLocale!=null?(be[e]=be[e].parentLocale,e===xt()&&xt(e)):be[e]!=null&&delete be[e]);return be[e]}function at(e){var s;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Qt;if(!m(e)){if(s=bs(e),s)return s;e=[e]}return rr(e)}function or(){return ie(be)}function Xs(e){var s,a=e._a;return a&&N(e).overflow===-2&&(s=a[qe]<0||a[qe]>11?qe:a[Re]<1||a[Re]>Lt(a[we],a[qe])?Re:a[je]<0||a[je]>24||a[je]===24&&(a[Ie]!==0||a[Be]!==0||a[st]!==0)?je:a[Ie]<0||a[Ie]>59?Ie:a[Be]<0||a[Be]>59?Be:a[st]<0||a[st]>999?st:-1,N(e)._overflowDayOfYear&&(s<we||s>Re)&&(s=Re),N(e)._overflowWeeks&&s===-1&&(s=Fs),N(e)._overflowWeekday&&s===-1&&(s=us),N(e).overflow=s),e}var cr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,dr=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ur=/Z|[+-]\d\d(?::?\d\d)?/,ys=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ks=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],hr=/^\/?Date\((-?\d+)/i,mr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,fr={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ja(e){var s,a,r=e._i,d=cr.exec(r)||dr.exec(r),p,k,G,Q,ne=ys.length,Fe=Ks.length;if(d){for(N(e).iso=!0,s=0,a=ne;s<a;s++)if(ys[s][1].exec(d[1])){k=ys[s][0],p=ys[s][2]!==!1;break}if(k==null){e._isValid=!1;return}if(d[3]){for(s=0,a=Fe;s<a;s++)if(Ks[s][1].exec(d[3])){G=(d[2]||" ")+Ks[s][0];break}if(G==null){e._isValid=!1;return}}if(!p&&G!=null){e._isValid=!1;return}if(d[4])if(ur.exec(d[4]))Q="Z";else{e._isValid=!1;return}e._f=k+(G||"")+(Q||""),Js(e)}else e._isValid=!1}function xr(e,s,a,r,d,p){var k=[gr(e),ft.indexOf(s),parseInt(a,10),parseInt(r,10),parseInt(d,10)];return p&&k.push(parseInt(p,10)),k}function gr(e){var s=parseInt(e,10);return s<=49?2e3+s:s<=999?1900+s:s}function pr(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function br(e,s,a){if(e){var r=pa.indexOf(e),d=new Date(s[0],s[1],s[2]).getDay();if(r!==d)return N(a).weekdayMismatch=!0,a._isValid=!1,!1}return!0}function yr(e,s,a){if(e)return fr[e];if(s)return 0;var r=parseInt(a,10),d=r%100,p=(r-d)/100;return p*60+d}function Na(e){var s=mr.exec(pr(e._i)),a;if(s){if(a=xr(s[4],s[3],s[2],s[5],s[6],s[7]),!br(s[1],a,e))return;e._a=a,e._tzm=yr(s[8],s[9],s[10]),e._d=fe.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),N(e).rfc2822=!0}else e._isValid=!1}function vr(e){var s=hr.exec(e._i);if(s!==null){e._d=new Date(+s[1]);return}if(ja(e),e._isValid===!1)delete e._isValid;else return;if(Na(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:i.createFromInputFallback(e)}i.createFromInputFallback=$("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function $t(e,s,a){return e??s??a}function wr(e){var s=new Date(i.now());return e._useUTC?[s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()]:[s.getFullYear(),s.getMonth(),s.getDate()]}function Zs(e){var s,a,r=[],d,p,k;if(!e._d){for(d=wr(e),e._w&&e._a[Re]==null&&e._a[qe]==null&&jr(e),e._dayOfYear!=null&&(k=$t(e._a[we],d[we]),(e._dayOfYear>Ct(k)||e._dayOfYear===0)&&(N(e)._overflowDayOfYear=!0),a=fe(k,0,e._dayOfYear),e._a[qe]=a.getUTCMonth(),e._a[Re]=a.getUTCDate()),s=0;s<3&&e._a[s]==null;++s)e._a[s]=r[s]=d[s];for(;s<7;s++)e._a[s]=r[s]=e._a[s]==null?s===2?1:0:e._a[s];e._a[je]===24&&e._a[Ie]===0&&e._a[Be]===0&&e._a[st]===0&&(e._nextDay=!0,e._a[je]=0),e._d=(e._useUTC?fe:ye).apply(null,r),p=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[je]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==p&&(N(e).weekdayMismatch=!0)}}function jr(e){var s,a,r,d,p,k,G,Q,ne;s=e._w,s.GG!=null||s.W!=null||s.E!=null?(p=1,k=4,a=$t(s.GG,e._a[we],Xe(ge(),1,4).year),r=$t(s.W,1),d=$t(s.E,1),(d<1||d>7)&&(Q=!0)):(p=e._locale._week.dow,k=e._locale._week.doy,ne=Xe(ge(),p,k),a=$t(s.gg,e._a[we],ne.year),r=$t(s.w,ne.week),s.d!=null?(d=s.d,(d<0||d>6)&&(Q=!0)):s.e!=null?(d=s.e+p,(s.e<0||s.e>6)&&(Q=!0)):d=p),r<1||r>ke(a,p,k)?N(e)._overflowWeeks=!0:Q!=null?N(e)._overflowWeekday=!0:(G=Ve(a,r,d,p,k),e._a[we]=G.year,e._dayOfYear=G.dayOfYear)}i.ISO_8601=function(){},i.RFC_2822=function(){};function Js(e){if(e._f===i.ISO_8601){ja(e);return}if(e._f===i.RFC_2822){Na(e);return}e._a=[],N(e).empty=!0;var s=""+e._i,a,r,d,p,k,G=s.length,Q=0,ne,Fe;for(d=Me(e._f,e._locale).match(Z)||[],Fe=d.length,a=0;a<Fe;a++)p=d[a],r=(s.match(Ps(p,e))||[])[0],r&&(k=s.substr(0,s.indexOf(r)),k.length>0&&N(e).unusedInput.push(k),s=s.slice(s.indexOf(r)+r.length),Q+=r.length),Y[p]?(r?N(e).empty=!1:N(e).unusedTokens.push(p),Xt(p,r,e)):e._strict&&!r&&N(e).unusedTokens.push(p);N(e).charsLeftOver=G-Q,s.length>0&&N(e).unusedInput.push(s),e._a[je]<=12&&N(e).bigHour===!0&&e._a[je]>0&&(N(e).bigHour=void 0),N(e).parsedDateParts=e._a.slice(0),N(e).meridiem=e._meridiem,e._a[je]=Nr(e._locale,e._a[je],e._meridiem),ne=N(e).era,ne!==null&&(e._a[we]=e._locale.erasConvertYear(ne,e._a[we])),Zs(e),Xs(e)}function Nr(e,s,a){var r;return a==null?s:e.meridiemHour!=null?e.meridiemHour(s,a):(e.isPM!=null&&(r=e.isPM(a),r&&s<12&&(s+=12),!r&&s===12&&(s=0)),s)}function kr(e){var s,a,r,d,p,k,G=!1,Q=e._f.length;if(Q===0){N(e).invalidFormat=!0,e._d=new Date(NaN);return}for(d=0;d<Q;d++)p=0,k=!1,s=R({},e),e._useUTC!=null&&(s._useUTC=e._useUTC),s._f=e._f[d],Js(s),T(s)&&(k=!0),p+=N(s).charsLeftOver,p+=N(s).unusedTokens.length*10,N(s).score=p,G?p<r&&(r=p,a=s):(r==null||p<r||k)&&(r=p,a=s,k&&(G=!0));w(e,a||s)}function _r(e){if(!e._d){var s=Pt(e._i),a=s.day===void 0?s.date:s.day;e._a=j([s.year,s.month,a,s.hour,s.minute,s.second,s.millisecond],function(r){return r&&parseInt(r,10)}),Zs(e)}}function Sr(e){var s=new H(Xs(ka(e)));return s._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function ka(e){var s=e._i,a=e._f;return e._locale=e._locale||at(e._l),s===null||a===void 0&&s===""?P({nullInput:!0}):(typeof s=="string"&&(e._i=s=e._locale.preparse(s)),E(s)?new H(Xs(s)):(b(s)?e._d=s:m(a)?kr(e):a?Js(e):Cr(e),T(e)||(e._d=null),e))}function Cr(e){var s=e._i;y(s)?e._d=new Date(i.now()):b(s)?e._d=new Date(s.valueOf()):typeof s=="string"?vr(e):m(s)?(e._a=j(s.slice(0),function(a){return parseInt(a,10)}),Zs(e)):f(s)?_r(e):c(s)?e._d=new Date(s):i.createFromInputFallback(e)}function _a(e,s,a,r,d){var p={};return(s===!0||s===!1)&&(r=s,s=void 0),(a===!0||a===!1)&&(r=a,a=void 0),(f(e)&&g(e)||m(e)&&e.length===0)&&(e=void 0),p._isAMomentObject=!0,p._useUTC=p._isUTC=d,p._l=a,p._i=e,p._f=s,p._strict=r,Sr(p)}function ge(e,s,a,r){return _a(e,s,a,r,!1)}var Dr=$("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ge.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:P()}),Mr=$("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ge.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:P()});function Sa(e,s){var a,r;if(s.length===1&&m(s[0])&&(s=s[0]),!s.length)return ge();for(a=s[0],r=1;r<s.length;++r)(!s[r].isValid()||s[r][e](a))&&(a=s[r]);return a}function Tr(){var e=[].slice.call(arguments,0);return Sa("isBefore",e)}function Yr(){var e=[].slice.call(arguments,0);return Sa("isAfter",e)}var Er=function(){return Date.now?Date.now():+new Date},es=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Pr(e){var s,a=!1,r,d=es.length;for(s in e)if(x(e,s)&&!(xe.call(es,s)!==-1&&(e[s]==null||!isNaN(e[s]))))return!1;for(r=0;r<d;++r)if(e[es[r]]){if(a)return!1;parseFloat(e[es[r]])!==ae(e[es[r]])&&(a=!0)}return!0}function Ir(){return this._isValid}function Fr(){return Ke(NaN)}function vs(e){var s=Pt(e),a=s.year||0,r=s.quarter||0,d=s.month||0,p=s.week||s.isoWeek||0,k=s.day||0,G=s.hour||0,Q=s.minute||0,ne=s.second||0,Fe=s.millisecond||0;this._isValid=Pr(s),this._milliseconds=+Fe+ne*1e3+Q*6e4+G*1e3*60*60,this._days=+k+p*7,this._months=+d+r*3+a*12,this._data={},this._locale=at(),this._bubble()}function ws(e){return e instanceof vs}function Qs(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Or(e,s,a){var r=Math.min(e.length,s.length),d=Math.abs(e.length-s.length),p=0,k;for(k=0;k<r;k++)ae(e[k])!==ae(s[k])&&p++;return p+d}function Ca(e,s){D(e,0,0,function(){var a=this.utcOffset(),r="+";return a<0&&(a=-a,r="-"),r+W(~~(a/60),2)+s+W(~~a%60,2)})}Ca("Z",":"),Ca("ZZ",""),B("Z",Nt),B("ZZ",Nt),ce(["Z","ZZ"],function(e,s,a){a._useUTC=!0,a._tzm=ea(Nt,e)});var Ar=/([\+\-]|\d\d)/gi;function ea(e,s){var a=(s||"").match(e),r,d,p;return a===null?null:(r=a[a.length-1]||[],d=(r+"").match(Ar)||["-",0,0],p=+(d[1]*60)+ae(d[2]),p===0?0:d[0]==="+"?p:-p)}function ta(e,s){var a,r;return s._isUTC?(a=s.clone(),r=(E(e)||b(e)?e.valueOf():ge(e).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+r),i.updateOffset(a,!1),a):ge(e).local()}function sa(e){return-Math.round(e._d.getTimezoneOffset())}i.updateOffset=function(){};function Lr(e,s,a){var r=this._offset||0,d;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=ea(Nt,e),e===null)return this}else Math.abs(e)<16&&!a&&(e=e*60);return!this._isUTC&&s&&(d=sa(this)),this._offset=e,this._isUTC=!0,d!=null&&this.add(d,"m"),r!==e&&(!s||this._changeInProgress?Ya(this,Ke(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:sa(this)}function Rr(e,s){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,s),this):-this.utcOffset()}function $r(e){return this.utcOffset(0,e)}function Vr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(sa(this),"m")),this}function Hr(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=ea(Es,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function zr(e){return this.isValid()?(e=e?ge(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Ur(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Br(){if(!y(this._isDSTShifted))return this._isDSTShifted;var e={},s;return R(e,this),e=ka(e),e._a?(s=e._isUTC?_(e._a):ge(e._a),this._isDSTShifted=this.isValid()&&Or(e._a,s.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Wr(){return this.isValid()?!this._isUTC:!1}function Gr(){return this.isValid()?this._isUTC:!1}function Da(){return this.isValid()?this._isUTC&&this._offset===0:!1}var qr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Xr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ke(e,s){var a=e,r=null,d,p,k;return ws(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(a={},s?a[s]=+e:a.milliseconds=+e):(r=qr.exec(e))?(d=r[1]==="-"?-1:1,a={y:0,d:ae(r[Re])*d,h:ae(r[je])*d,m:ae(r[Ie])*d,s:ae(r[Be])*d,ms:ae(Qs(r[st]*1e3))*d}):(r=Xr.exec(e))?(d=r[1]==="-"?-1:1,a={y:Dt(r[2],d),M:Dt(r[3],d),w:Dt(r[4],d),d:Dt(r[5],d),h:Dt(r[6],d),m:Dt(r[7],d),s:Dt(r[8],d)}):a==null?a={}:typeof a=="object"&&("from"in a||"to"in a)&&(k=Kr(ge(a.from),ge(a.to)),a={},a.ms=k.milliseconds,a.M=k.months),p=new vs(a),ws(e)&&x(e,"_locale")&&(p._locale=e._locale),ws(e)&&x(e,"_isValid")&&(p._isValid=e._isValid),p}Ke.fn=vs.prototype,Ke.invalid=Fr;function Dt(e,s){var a=e&&parseFloat(e.replace(",","."));return(isNaN(a)?0:a)*s}function Ma(e,s){var a={};return a.months=s.month()-e.month()+(s.year()-e.year())*12,e.clone().add(a.months,"M").isAfter(s)&&--a.months,a.milliseconds=+s-+e.clone().add(a.months,"M"),a}function Kr(e,s){var a;return e.isValid()&&s.isValid()?(s=ta(s,e),e.isBefore(s)?a=Ma(e,s):(a=Ma(s,e),a.milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}function Ta(e,s){return function(a,r){var d,p;return r!==null&&!isNaN(+r)&&(z(s,"moment()."+s+"(period, number) is deprecated. Please use moment()."+s+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),p=a,a=r,r=p),d=Ke(a,r),Ya(this,d,e),this}}function Ya(e,s,a,r){var d=s._milliseconds,p=Qs(s._days),k=Qs(s._months);e.isValid()&&(r=r??!0,k&&xs(e,$e(e,"Month")+k*a),p&&Kt(e,"Date",$e(e,"Date")+p*a),d&&e._d.setTime(e._d.valueOf()+d*a),r&&i.updateOffset(e,p||k))}var Zr=Ta(1,"add"),Jr=Ta(-1,"subtract");function Ea(e){return typeof e=="string"||e instanceof String}function Qr(e){return E(e)||b(e)||Ea(e)||c(e)||ti(e)||ei(e)||e===null||e===void 0}function ei(e){var s=f(e)&&!g(e),a=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],d,p,k=r.length;for(d=0;d<k;d+=1)p=r[d],a=a||x(e,p);return s&&a}function ti(e){var s=m(e),a=!1;return s&&(a=e.filter(function(r){return!c(r)&&Ea(e)}).length===0),s&&a}function si(e){var s=f(e)&&!g(e),a=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],d,p;for(d=0;d<r.length;d+=1)p=r[d],a=a||x(e,p);return s&&a}function ai(e,s){var a=e.diff(s,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function ni(e,s){arguments.length===1&&(arguments[0]?Qr(arguments[0])?(e=arguments[0],s=void 0):si(arguments[0])&&(s=arguments[0],e=void 0):(e=void 0,s=void 0));var a=e||ge(),r=ta(a,this).startOf("day"),d=i.calendarFormat(this,r)||"sameElse",p=s&&(L(s[d])?s[d].call(this,a):s[d]);return this.format(p||this.localeData().calendar(d,this,ge(a)))}function ri(){return new H(this)}function ii(e,s){var a=E(e)?e:ge(e);return this.isValid()&&a.isValid()?(s=Te(s)||"millisecond",s==="millisecond"?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(s).valueOf()):!1}function li(e,s){var a=E(e)?e:ge(e);return this.isValid()&&a.isValid()?(s=Te(s)||"millisecond",s==="millisecond"?this.valueOf()<a.valueOf():this.clone().endOf(s).valueOf()<a.valueOf()):!1}function oi(e,s,a,r){var d=E(e)?e:ge(e),p=E(s)?s:ge(s);return this.isValid()&&d.isValid()&&p.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(d,a):!this.isBefore(d,a))&&(r[1]===")"?this.isBefore(p,a):!this.isAfter(p,a))):!1}function ci(e,s){var a=E(e)?e:ge(e),r;return this.isValid()&&a.isValid()?(s=Te(s)||"millisecond",s==="millisecond"?this.valueOf()===a.valueOf():(r=a.valueOf(),this.clone().startOf(s).valueOf()<=r&&r<=this.clone().endOf(s).valueOf())):!1}function di(e,s){return this.isSame(e,s)||this.isAfter(e,s)}function ui(e,s){return this.isSame(e,s)||this.isBefore(e,s)}function hi(e,s,a){var r,d,p;if(!this.isValid())return NaN;if(r=ta(e,this),!r.isValid())return NaN;switch(d=(r.utcOffset()-this.utcOffset())*6e4,s=Te(s),s){case"year":p=js(this,r)/12;break;case"month":p=js(this,r);break;case"quarter":p=js(this,r)/3;break;case"second":p=(this-r)/1e3;break;case"minute":p=(this-r)/6e4;break;case"hour":p=(this-r)/36e5;break;case"day":p=(this-r-d)/864e5;break;case"week":p=(this-r-d)/6048e5;break;default:p=this-r}return a?p:Le(p)}function js(e,s){if(e.date()<s.date())return-js(s,e);var a=(s.year()-e.year())*12+(s.month()-e.month()),r=e.clone().add(a,"months"),d,p;return s-r<0?(d=e.clone().add(a-1,"months"),p=(s-r)/(r-d)):(d=e.clone().add(a+1,"months"),p=(s-r)/(d-r)),-(a+p)||0}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function mi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fi(e){if(!this.isValid())return null;var s=e!==!0,a=s?this.clone().utc():this;return a.year()<0||a.year()>9999?de(a,s?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):L(Date.prototype.toISOString)?s?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",de(a,"Z")):de(a,s?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function xi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",s="",a,r,d,p;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",s="Z"),a="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",d="-MM-DD[T]HH:mm:ss.SSS",p=s+'[")]',this.format(a+r+d+p)}function gi(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var s=de(this,e);return this.localeData().postformat(s)}function pi(e,s){return this.isValid()&&(E(e)&&e.isValid()||ge(e).isValid())?Ke({to:this,from:e}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function bi(e){return this.from(ge(),e)}function yi(e,s){return this.isValid()&&(E(e)&&e.isValid()||ge(e).isValid())?Ke({from:this,to:e}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function vi(e){return this.to(ge(),e)}function Pa(e){var s;return e===void 0?this._locale._abbr:(s=at(e),s!=null&&(this._locale=s),this)}var Ia=$("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Fa(){return this._locale}var Ns=1e3,Vt=60*Ns,ks=60*Vt,Oa=(365*400+97)*24*ks;function Ht(e,s){return(e%s+s)%s}function Aa(e,s,a){return e<100&&e>=0?new Date(e+400,s,a)-Oa:new Date(e,s,a).valueOf()}function La(e,s,a){return e<100&&e>=0?Date.UTC(e+400,s,a)-Oa:Date.UTC(e,s,a)}function wi(e){var s,a;if(e=Te(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?La:Aa,e){case"year":s=a(this.year(),0,1);break;case"quarter":s=a(this.year(),this.month()-this.month()%3,1);break;case"month":s=a(this.year(),this.month(),1);break;case"week":s=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":s=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":s=a(this.year(),this.month(),this.date());break;case"hour":s=this._d.valueOf(),s-=Ht(s+(this._isUTC?0:this.utcOffset()*Vt),ks);break;case"minute":s=this._d.valueOf(),s-=Ht(s,Vt);break;case"second":s=this._d.valueOf(),s-=Ht(s,Ns);break}return this._d.setTime(s),i.updateOffset(this,!0),this}function ji(e){var s,a;if(e=Te(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?La:Aa,e){case"year":s=a(this.year()+1,0,1)-1;break;case"quarter":s=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":s=a(this.year(),this.month()+1,1)-1;break;case"week":s=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":s=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":s=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":s=this._d.valueOf(),s+=ks-Ht(s+(this._isUTC?0:this.utcOffset()*Vt),ks)-1;break;case"minute":s=this._d.valueOf(),s+=Vt-Ht(s,Vt)-1;break;case"second":s=this._d.valueOf(),s+=Ns-Ht(s,Ns)-1;break}return this._d.setTime(s),i.updateOffset(this,!0),this}function Ni(){return this._d.valueOf()-(this._offset||0)*6e4}function ki(){return Math.floor(this.valueOf()/1e3)}function _i(){return new Date(this.valueOf())}function Si(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ci(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Di(){return this.isValid()?this.toISOString():null}function Mi(){return T(this)}function Ti(){return w({},N(this))}function Yi(){return N(this).overflow}function Ei(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}D("N",0,0,"eraAbbr"),D("NN",0,0,"eraAbbr"),D("NNN",0,0,"eraAbbr"),D("NNNN",0,0,"eraName"),D("NNNNN",0,0,"eraNarrow"),D("y",["y",1],"yo","eraYear"),D("y",["yy",2],0,"eraYear"),D("y",["yyy",3],0,"eraYear"),D("y",["yyyy",4],0,"eraYear"),B("N",aa),B("NN",aa),B("NNN",aa),B("NNNN",zi),B("NNNNN",Ui),ce(["N","NN","NNN","NNNN","NNNNN"],function(e,s,a,r){var d=a._locale.erasParse(e,r,a._strict);d?N(a).era=d:N(a).invalidEra=e}),B("y",We),B("yy",We),B("yyy",We),B("yyyy",We),B("yo",Bi),ce(["y","yy","yyy","yyyy"],we),ce(["yo"],function(e,s,a,r){var d;a._locale._eraYearOrdinalRegex&&(d=e.match(a._locale._eraYearOrdinalRegex)),a._locale.eraYearOrdinalParse?s[we]=a._locale.eraYearOrdinalParse(e,d):s[we]=parseInt(e,10)});function Pi(e,s){var a,r,d,p=this._eras||at("en")._eras;for(a=0,r=p.length;a<r;++a){switch(typeof p[a].since){case"string":d=i(p[a].since).startOf("day"),p[a].since=d.valueOf();break}switch(typeof p[a].until){case"undefined":p[a].until=1/0;break;case"string":d=i(p[a].until).startOf("day").valueOf(),p[a].until=d.valueOf();break}}return p}function Ii(e,s,a){var r,d,p=this.eras(),k,G,Q;for(e=e.toUpperCase(),r=0,d=p.length;r<d;++r)if(k=p[r].name.toUpperCase(),G=p[r].abbr.toUpperCase(),Q=p[r].narrow.toUpperCase(),a)switch(s){case"N":case"NN":case"NNN":if(G===e)return p[r];break;case"NNNN":if(k===e)return p[r];break;case"NNNNN":if(Q===e)return p[r];break}else if([k,G,Q].indexOf(e)>=0)return p[r]}function Fi(e,s){var a=e.since<=e.until?1:-1;return s===void 0?i(e.since).year():i(e.since).year()+(s-e.offset)*a}function Oi(){var e,s,a,r=this.localeData().eras();for(e=0,s=r.length;e<s;++e)if(a=this.clone().startOf("day").valueOf(),r[e].since<=a&&a<=r[e].until||r[e].until<=a&&a<=r[e].since)return r[e].name;return""}function Ai(){var e,s,a,r=this.localeData().eras();for(e=0,s=r.length;e<s;++e)if(a=this.clone().startOf("day").valueOf(),r[e].since<=a&&a<=r[e].until||r[e].until<=a&&a<=r[e].since)return r[e].narrow;return""}function Li(){var e,s,a,r=this.localeData().eras();for(e=0,s=r.length;e<s;++e)if(a=this.clone().startOf("day").valueOf(),r[e].since<=a&&a<=r[e].until||r[e].until<=a&&a<=r[e].since)return r[e].abbr;return""}function Ri(){var e,s,a,r,d=this.localeData().eras();for(e=0,s=d.length;e<s;++e)if(a=d[e].since<=d[e].until?1:-1,r=this.clone().startOf("day").valueOf(),d[e].since<=r&&r<=d[e].until||d[e].until<=r&&r<=d[e].since)return(this.year()-i(d[e].since).year())*a+d[e].offset;return this.year()}function $i(e){return x(this,"_erasNameRegex")||na.call(this),e?this._erasNameRegex:this._erasRegex}function Vi(e){return x(this,"_erasAbbrRegex")||na.call(this),e?this._erasAbbrRegex:this._erasRegex}function Hi(e){return x(this,"_erasNarrowRegex")||na.call(this),e?this._erasNarrowRegex:this._erasRegex}function aa(e,s){return s.erasAbbrRegex(e)}function zi(e,s){return s.erasNameRegex(e)}function Ui(e,s){return s.erasNarrowRegex(e)}function Bi(e,s){return s._eraYearOrdinalRegex||We}function na(){var e=[],s=[],a=[],r=[],d,p,k,G,Q,ne=this.eras();for(d=0,p=ne.length;d<p;++d)k=Ge(ne[d].name),G=Ge(ne[d].abbr),Q=Ge(ne[d].narrow),s.push(k),e.push(G),a.push(Q),r.push(k),r.push(G),r.push(Q);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}D(0,["gg",2],0,function(){return this.weekYear()%100}),D(0,["GG",2],0,function(){return this.isoWeekYear()%100});function _s(e,s){D(0,[e,e.length],0,s)}_s("gggg","weekYear"),_s("ggggg","weekYear"),_s("GGGG","isoWeekYear"),_s("GGGGG","isoWeekYear"),B("G",Ot),B("g",Ot),B("GG",he,Pe),B("gg",he,Pe),B("GGGG",Ae,wt),B("gggg",Ae,wt),B("GGGGG",Ft,tt),B("ggggg",Ft,tt),St(["gggg","ggggg","GGGG","GGGGG"],function(e,s,a,r){s[r.substr(0,2)]=ae(e)}),St(["gg","GG"],function(e,s,a,r){s[r]=i.parseTwoDigitYear(e)});function Wi(e){return Ra.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Gi(e){return Ra.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function qi(){return ke(this.year(),1,4)}function Xi(){return ke(this.isoWeekYear(),1,4)}function Ki(){var e=this.localeData()._week;return ke(this.year(),e.dow,e.doy)}function Zi(){var e=this.localeData()._week;return ke(this.weekYear(),e.dow,e.doy)}function Ra(e,s,a,r,d){var p;return e==null?Xe(this,r,d).year:(p=ke(e,r,d),s>p&&(s=p),Ji.call(this,e,s,a,r,d))}function Ji(e,s,a,r,d){var p=Ve(e,s,a,r,d),k=fe(p.year,0,p.dayOfYear);return this.year(k.getUTCFullYear()),this.month(k.getUTCMonth()),this.date(k.getUTCDate()),this}D("Q",0,"Qo","quarter"),B("Q",yt),ce("Q",function(e,s){s[qe]=(ae(e)-1)*3});function Qi(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}D("D",["DD",2],"Do","date"),B("D",he,ht),B("DD",he,Pe),B("Do",function(e,s){return e?s._dayOfMonthOrdinalParse||s._ordinalParse:s._dayOfMonthOrdinalParseLenient}),ce(["D","DD"],Re),ce("Do",function(e,s){s[Re]=ae(e.match(he)[0])});var $a=mt("Date",!0);D("DDD",["DDDD",3],"DDDo","dayOfYear"),B("DDD",jt),B("DDDD",vt),ce(["DDD","DDDD"],function(e,s,a){a._dayOfYear=ae(e)});function el(e){var s=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?s:this.add(e-s,"d")}D("m",["mm",2],0,"minute"),B("m",he,Gt),B("mm",he,Pe),ce(["m","mm"],Ie);var tl=mt("Minutes",!1);D("s",["ss",2],0,"second"),B("s",he,Gt),B("ss",he,Pe),ce(["s","ss"],Be);var sl=mt("Seconds",!1);D("S",0,0,function(){return~~(this.millisecond()/100)}),D(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),D(0,["SSS",3],0,"millisecond"),D(0,["SSSS",4],0,function(){return this.millisecond()*10}),D(0,["SSSSS",5],0,function(){return this.millisecond()*100}),D(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),D(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),D(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),D(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),B("S",jt,yt),B("SS",jt,Pe),B("SSS",jt,vt);var gt,Va;for(gt="SSSS";gt.length<=9;gt+="S")B(gt,We);function al(e,s){s[st]=ae(("0."+e)*1e3)}for(gt="S";gt.length<=9;gt+="S")ce(gt,al);Va=mt("Milliseconds",!1),D("z",0,0,"zoneAbbr"),D("zz",0,0,"zoneName");function nl(){return this._isUTC?"UTC":""}function rl(){return this._isUTC?"Coordinated Universal Time":""}var O=H.prototype;O.add=Zr,O.calendar=ni,O.clone=ri,O.diff=hi,O.endOf=ji,O.format=gi,O.from=pi,O.fromNow=bi,O.to=yi,O.toNow=vi,O.get=ms,O.invalidAt=Yi,O.isAfter=ii,O.isBefore=li,O.isBetween=oi,O.isSame=ci,O.isSameOrAfter=di,O.isSameOrBefore=ui,O.isValid=Mi,O.lang=Ia,O.locale=Pa,O.localeData=Fa,O.max=Mr,O.min=Dr,O.parsingFlags=Ti,O.set=As,O.startOf=wi,O.subtract=Jr,O.toArray=Si,O.toObject=Ci,O.toDate=_i,O.toISOString=fi,O.inspect=xi,typeof Symbol<"u"&&Symbol.for!=null&&(O[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),O.toJSON=Di,O.toString=mi,O.unix=ki,O.valueOf=Ni,O.creationData=Ei,O.eraName=Oi,O.eraNarrow=Ai,O.eraAbbr=Li,O.eraYear=Ri,O.year=hs,O.isLeapYear=Os,O.weekYear=Wi,O.isoWeekYear=Gi,O.quarter=O.quarters=Qi,O.month=gs,O.daysInMonth=se,O.week=O.weeks=Pn,O.isoWeek=O.isoWeeks=In,O.weeksInYear=Ki,O.weeksInWeekYear=Zi,O.isoWeeksInYear=qi,O.isoWeeksInISOWeekYear=Xi,O.date=$a,O.day=O.days=Gn,O.weekday=qn,O.isoWeekday=Xn,O.dayOfYear=el,O.hour=O.hours=sr,O.minute=O.minutes=tl,O.second=O.seconds=sl,O.millisecond=O.milliseconds=Va,O.utcOffset=Lr,O.utc=$r,O.local=Vr,O.parseZone=Hr,O.hasAlignedHourOffset=zr,O.isDST=Ur,O.isLocal=Wr,O.isUtcOffset=Gr,O.isUtc=Da,O.isUTC=Da,O.zoneAbbr=nl,O.zoneName=rl,O.dates=$("dates accessor is deprecated. Use date instead.",$a),O.months=$("months accessor is deprecated. Use month instead",gs),O.years=$("years accessor is deprecated. Use year instead",hs),O.zone=$("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Rr),O.isDSTShifted=$("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Br);function il(e){return ge(e*1e3)}function ll(){return ge.apply(null,arguments).parseZone()}function Ha(e){return e}var le=ee.prototype;le.calendar=pe,le.longDateFormat=K,le.invalidDate=ve,le.ordinal=Oe,le.preparse=Ha,le.postformat=Ha,le.relativeTime=Ye,le.pastFuture=ut,le.set=J,le.eras=Pi,le.erasParse=Ii,le.erasConvertYear=Fi,le.erasAbbrRegex=Vi,le.erasNameRegex=$i,le.erasNarrowRegex=Hi,le.months=Vs,le.monthsShort=Hs,le.monthsParse=Us,le.monthsRegex=Ne,le.monthsShortRegex=me,le.week=Rt,le.firstDayOfYear=En,le.firstDayOfWeek=Yn,le.weekdays=Hn,le.weekdaysMin=Un,le.weekdaysShort=zn,le.weekdaysParse=Wn,le.weekdaysRegex=Kn,le.weekdaysShortRegex=Zn,le.weekdaysMinRegex=Jn,le.isPM=er,le.meridiem=ar;function Ss(e,s,a,r){var d=at(),p=_().set(r,s);return d[a](p,e)}function za(e,s,a){if(c(e)&&(s=e,e=void 0),e=e||"",s!=null)return Ss(e,s,a,"month");var r,d=[];for(r=0;r<12;r++)d[r]=Ss(e,r,a,"month");return d}function ra(e,s,a,r){typeof e=="boolean"?(c(s)&&(a=s,s=void 0),s=s||""):(s=e,a=s,e=!1,c(s)&&(a=s,s=void 0),s=s||"");var d=at(),p=e?d._week.dow:0,k,G=[];if(a!=null)return Ss(s,(a+p)%7,r,"day");for(k=0;k<7;k++)G[k]=Ss(s,(k+p)%7,r,"day");return G}function ol(e,s){return za(e,s,"months")}function cl(e,s){return za(e,s,"monthsShort")}function dl(e,s,a){return ra(e,s,a,"weekdays")}function ul(e,s,a){return ra(e,s,a,"weekdaysShort")}function hl(e,s,a){return ra(e,s,a,"weekdaysMin")}xt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var s=e%10,a=ae(e%100/10)===1?"th":s===1?"st":s===2?"nd":s===3?"rd":"th";return e+a}}),i.lang=$("moment.lang is deprecated. Use moment.locale instead.",xt),i.langData=$("moment.langData is deprecated. Use moment.localeData instead.",at);var nt=Math.abs;function ml(){var e=this._data;return this._milliseconds=nt(this._milliseconds),this._days=nt(this._days),this._months=nt(this._months),e.milliseconds=nt(e.milliseconds),e.seconds=nt(e.seconds),e.minutes=nt(e.minutes),e.hours=nt(e.hours),e.months=nt(e.months),e.years=nt(e.years),this}function Ua(e,s,a,r){var d=Ke(s,a);return e._milliseconds+=r*d._milliseconds,e._days+=r*d._days,e._months+=r*d._months,e._bubble()}function fl(e,s){return Ua(this,e,s,1)}function xl(e,s){return Ua(this,e,s,-1)}function Ba(e){return e<0?Math.floor(e):Math.ceil(e)}function gl(){var e=this._milliseconds,s=this._days,a=this._months,r=this._data,d,p,k,G,Q;return e>=0&&s>=0&&a>=0||e<=0&&s<=0&&a<=0||(e+=Ba(ia(a)+s)*864e5,s=0,a=0),r.milliseconds=e%1e3,d=Le(e/1e3),r.seconds=d%60,p=Le(d/60),r.minutes=p%60,k=Le(p/60),r.hours=k%24,s+=Le(k/24),Q=Le(Wa(s)),a+=Q,s-=Ba(ia(Q)),G=Le(a/12),a%=12,r.days=s,r.months=a,r.years=G,this}function Wa(e){return e*4800/146097}function ia(e){return e*146097/4800}function pl(e){if(!this.isValid())return NaN;var s,a,r=this._milliseconds;if(e=Te(e),e==="month"||e==="quarter"||e==="year")switch(s=this._days+r/864e5,a=this._months+Wa(s),e){case"month":return a;case"quarter":return a/3;case"year":return a/12}else switch(s=this._days+Math.round(ia(this._months)),e){case"week":return s/7+r/6048e5;case"day":return s+r/864e5;case"hour":return s*24+r/36e5;case"minute":return s*1440+r/6e4;case"second":return s*86400+r/1e3;case"millisecond":return Math.floor(s*864e5)+r;default:throw new Error("Unknown unit "+e)}}function rt(e){return function(){return this.as(e)}}var Ga=rt("ms"),bl=rt("s"),yl=rt("m"),vl=rt("h"),wl=rt("d"),jl=rt("w"),Nl=rt("M"),kl=rt("Q"),_l=rt("y"),Sl=Ga;function Cl(){return Ke(this)}function Dl(e){return e=Te(e),this.isValid()?this[e+"s"]():NaN}function Mt(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ml=Mt("milliseconds"),Tl=Mt("seconds"),Yl=Mt("minutes"),El=Mt("hours"),Pl=Mt("days"),Il=Mt("months"),Fl=Mt("years");function Ol(){return Le(this.days()/7)}var it=Math.round,zt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Al(e,s,a,r,d){return d.relativeTime(s||1,!!a,e,r)}function Ll(e,s,a,r){var d=Ke(e).abs(),p=it(d.as("s")),k=it(d.as("m")),G=it(d.as("h")),Q=it(d.as("d")),ne=it(d.as("M")),Fe=it(d.as("w")),lt=it(d.as("y")),pt=p<=a.ss&&["s",p]||p<a.s&&["ss",p]||k<=1&&["m"]||k<a.m&&["mm",k]||G<=1&&["h"]||G<a.h&&["hh",G]||Q<=1&&["d"]||Q<a.d&&["dd",Q];return a.w!=null&&(pt=pt||Fe<=1&&["w"]||Fe<a.w&&["ww",Fe]),pt=pt||ne<=1&&["M"]||ne<a.M&&["MM",ne]||lt<=1&&["y"]||["yy",lt],pt[2]=s,pt[3]=+e>0,pt[4]=r,Al.apply(null,pt)}function Rl(e){return e===void 0?it:typeof e=="function"?(it=e,!0):!1}function $l(e,s){return zt[e]===void 0?!1:s===void 0?zt[e]:(zt[e]=s,e==="s"&&(zt.ss=s-1),!0)}function Vl(e,s){if(!this.isValid())return this.localeData().invalidDate();var a=!1,r=zt,d,p;return typeof e=="object"&&(s=e,e=!1),typeof e=="boolean"&&(a=e),typeof s=="object"&&(r=Object.assign({},zt,s),s.s!=null&&s.ss==null&&(r.ss=s.s-1)),d=this.localeData(),p=Ll(this,!a,r,d),a&&(p=d.pastFuture(+this,p)),d.postformat(p)}var la=Math.abs;function Ut(e){return(e>0)-(e<0)||+e}function Cs(){if(!this.isValid())return this.localeData().invalidDate();var e=la(this._milliseconds)/1e3,s=la(this._days),a=la(this._months),r,d,p,k,G=this.asSeconds(),Q,ne,Fe,lt;return G?(r=Le(e/60),d=Le(r/60),e%=60,r%=60,p=Le(a/12),a%=12,k=e?e.toFixed(3).replace(/\.?0+$/,""):"",Q=G<0?"-":"",ne=Ut(this._months)!==Ut(G)?"-":"",Fe=Ut(this._days)!==Ut(G)?"-":"",lt=Ut(this._milliseconds)!==Ut(G)?"-":"",Q+"P"+(p?ne+p+"Y":"")+(a?ne+a+"M":"")+(s?Fe+s+"D":"")+(d||r||e?"T":"")+(d?lt+d+"H":"")+(r?lt+r+"M":"")+(e?lt+k+"S":"")):"P0D"}var re=vs.prototype;re.isValid=Ir,re.abs=ml,re.add=fl,re.subtract=xl,re.as=pl,re.asMilliseconds=Ga,re.asSeconds=bl,re.asMinutes=yl,re.asHours=vl,re.asDays=wl,re.asWeeks=jl,re.asMonths=Nl,re.asQuarters=kl,re.asYears=_l,re.valueOf=Sl,re._bubble=gl,re.clone=Cl,re.get=Dl,re.milliseconds=Ml,re.seconds=Tl,re.minutes=Yl,re.hours=El,re.days=Pl,re.weeks=Ol,re.months=Il,re.years=Fl,re.humanize=Vl,re.toISOString=Cs,re.toString=Cs,re.toJSON=Cs,re.locale=Pa,re.localeData=Fa,re.toIsoString=$("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Cs),re.lang=Ia,D("X",0,0,"unix"),D("x",0,0,"valueOf"),B("x",Ot),B("X",ds),ce("X",function(e,s,a){a._d=new Date(parseFloat(e)*1e3)}),ce("x",function(e,s,a){a._d=new Date(ae(e))});//! moment.js
return i.version="2.30.1",h(ge),i.fn=O,i.min=Tr,i.max=Yr,i.now=Er,i.utc=_,i.unix=il,i.months=ol,i.isDate=b,i.locale=xt,i.invalid=P,i.duration=Ke,i.isMoment=E,i.weekdays=dl,i.parseZone=ll,i.localeData=at,i.isDuration=ws,i.monthsShort=cl,i.weekdaysMin=hl,i.defineLocale=qs,i.updateLocale=lr,i.locales=or,i.weekdaysShort=ul,i.normalizeUnits=Te,i.relativeTimeRounding=Rl,i.relativeTimeThreshold=$l,i.calendarFormat=ai,i.prototype=O,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i})}(oa)),oa.exports}(function(n,l){(function(o,i){i(typeof cn=="function"?ql():o.moment)})(on,function(o){//! moment.js locale configuration
var i=o.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(h){return/^ch$/i.test(h)},meridiem:function(h,m,f){return h<12?f?"sa":"SA":f?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun trc lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",w:"mt tun",ww:"%d tun",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(h){return h},week:{dow:1,doy:4}});return i})})();const Xl=n=>{if(!n||typeof n!="string")return{className:"status-default",icon:"fa-question-circle",pulse:!1};const l=n.toLowerCase().trim().normalize("NFC");switch(l){case" hy":case" hy (ui)":return{className:"status-da-huy",icon:"fa-times-circle",pulse:!1};case"t chi ycvc":return{className:"status-tu-choi-ycvc",icon:"fa-ban",pulse:!1};case"cha ghp":case"cha tm thy vin":return{className:"status-chua-ghep",icon:"fa-check-circle",pulse:!1};case"ch ph duyt":return{className:"status-cho-phe-duyet",icon:"fa-hourglass-half",pulse:!1};case"ch k ha n":case"ch ky hoa n":return{className:"status-cho-ky-hoa-don",icon:"fa-file-signature",pulse:!1};case"ch duyt ycvc":return{className:"status-cho-duyet-ycvc",icon:"fa-user-clock",pulse:!1};case"ch check-in":return{className:"status-cho-check-in",icon:"fa-calendar-check",pulse:!1};case"yu cu b sung":return{className:"status-yeu-cau-bo-sung",icon:"fa-exclamation-circle",pulse:!0};case"ch xc thc vc (tvbh)":return{className:"status-cho-xac-thuc-vc",icon:"fa-exclamation-circle",pulse:!0};case"ang gi":return{className:"status-dang-giu",icon:"fa-lock",pulse:!1};case"ang li th":return{className:"status-dang-lai-thu",icon:"fa-car-side",pulse:!1};case" ghp":return{className:"status-da-ghep",icon:"fa-link",pulse:!1};case" b sung":return{className:"status-da-bo-sung",icon:"fa-plus-circle",pulse:!1};case" ph duyt":return{className:"status-da-phe-duyet",icon:"fa-check",pulse:!1};case" xut ha n":return{className:"status-da-xuat-hoa-don",icon:"fa-check-double",pulse:!1};case"yu cu vinclub":return{className:"status-yeu-cau-vinclub",icon:"fa-star",pulse:!1};case" c vc":return{className:"status-da-co-vc",icon:"fa-star-half-alt",pulse:!1};case" hon tt":return{className:"status-da-hoan-tat",icon:"fa-flag-checkered",pulse:!1};default:return l.startsWith("vpas")||/^[a-z0-9]{17}$/.test(l)?{className:"status-san-sang",icon:"fa-car",pulse:!1}:{className:"status-default",icon:"fa-question-circle",pulse:!1}}},dn=({status:n,size:l="md"})=>{const{className:o,icon:i,pulse:h}=Xl(n),m=l==="sm"?"text-[10px] px-1.5 py-0.5":"";return t.jsxs("div",{className:`status-badge ${o} ${h?"pulse-icon":""} ${m}`,children:[t.jsx("span",{className:"badge-icon",children:t.jsx("i",{className:`fas ${i}`})}),t.jsx("span",{className:"badge-text truncate",children:n})]})},un=n=>{const o={textShadow:"0 0 4px rgba(0,0,0,0.8)"};if(!n)return{};const i=n.toLowerCase().trim();return i==="brahminy white (ce18)"?{color:"white",...o}:i.includes("sunset orb (ce1a)")?{color:"var(--exterior-orange-text)"}:i.includes("crimson red (ce1m)")?{color:"var(--exterior-red-text)"}:i.includes("vinfast blue (ce1n)")?{color:"var(--exterior-blue-text)"}:i.includes("neptune grey (ce14)")?{color:"#778899"}:i.includes("jet black (ce11)")?{color:"black"}:i.includes("electric blue (ce1j)")?{color:"var(--exterior-blue-text)"}:i.includes("zenith grey (ce1v)")?{color:"#B0C4DE"}:i.includes("jet black roof- summer yellow body (111u)")?{color:"var(--exterior-yellow-text)"}:i.includes("brahminy white roof- aquatic azure body (181y)")?{color:"var(--exterior-blue-text)"}:i.includes("brahminy white roof- rose pink body (1821)")?{color:"var(--exterior-pink-text)"}:i.includes("brahminy white roof - iris berry body (181x)")?{color:"var(--exterior-pink-text)"}:i.includes("urbant mint (ce1w)")?{color:"#3CB371"}:i.includes("vinbus green (ce2b)")?{color:"var(--exterior-green-text)"}:i.includes("deep ocean (ce1h)")?{color:"#006400"}:i.includes("iris berry (ce1x)")?{color:"var(--exterior-pink-text)"}:i.includes("zenith grey-desat silver roof (171v)")?{color:"var(--exterior-grey-text)"}:i.includes("urbant mint green - desat silv (171w)")?{color:"var(--exterior-green-text)"}:i.includes("ivy green-desat silver roof (1722)")?{color:"var(--exterior-green-text)"}:i.includes("atlantic blue-aquatic azure ro (1y26)")?{color:"var(--exterior-blue-text)"}:i.includes("jet black-champagne creme roof (2311)")?{color:"white",...o}:i.includes("infinity blanc _ silky white r (2418)")?{color:"var(--exterior-white-text)"}:i.includes("champagne creme - matte champa (2523)")?{color:"var(--exterior-yellow-text)"}:i.includes("jet black - graphite roof (2811)")?{color:"white",...o}:i.includes("crimson velvet - mystery bronz (2927)")?{color:"var(--exterior-red-text)"}:i.includes("ivy_green_gne (ce22)")?{color:"var(--exterior-green-text)"}:i.includes("champagne_creme_ylg (ce23)")?{color:"var(--exterior-yellow-text)"}:i.includes("crimson red - jet black roof (111m)")?{color:"var(--exterior-red-text)"}:i.includes("infinity blanc_zenith grey roof (1v18)")?{color:"var(--exterior-white-text)"}:i.includes("deep ocean_jet black roof (111h)")?{color:"white",...o}:i.includes("alantic blue_denim blue roof (2a26)")?{color:"var(--exterior-blue-text)"}:i.includes("jet black_mystery bronze roof (2911)")?{color:"white",...o}:i.includes("champagne creme_infinity blanc roof (1823)")?{color:"var(--exterior-yellow-text)"}:i.includes("de sat silver ind12007 (ce17)")?{color:"var(--exterior-grey-text)"}:i.includes("crimson red")||i.includes("crimson velvet")?{color:"var(--exterior-red-text)"}:i.includes("rose pink")||i.includes("iris berry")?{color:"var(--exterior-pink-text)"}:i.includes("vinfast blue")||i.includes("electric blue")||i.includes("atlantic blue")||i.includes("aquatic azure")||i.includes("alantic blue")?{color:"var(--exterior-blue-text)"}:i.includes("deep ocean")?{color:"white",...o}:i.includes("sunset orb")?{color:"var(--exterior-orange-text)"}:i.includes("summer yellow")||i.includes("champagne creme")||i.includes("champagne_creme_ylg")?{color:"var(--exterior-yellow-text)"}:i.includes("urbant mint")||i.includes("vinbus green")||i.includes("ivy green")||i.includes("ivy_green_gne")?{color:"var(--exterior-green-text)"}:i.includes("jet black")?{color:"white",...o}:i.includes("brahminy white")||i.includes("infinity blanc")?{color:"var(--exterior-white-text)"}:i.includes("neptune grey")||i.includes("zenith grey")||i.includes("de sat silver")||i.includes("graphite")?{color:"var(--exterior-grey-text)"}:i.includes("mystery bronz")?{color:"var(--exterior-bronze-text)"}:{}},Kl=n=>{if(!n)return{};const l=n.toLowerCase().trim();return l.includes("black")?{color:"#1F2937"}:l.includes("brown")?{color:"#78350F"}:l.includes("beige")?{color:"#B45309"}:{}},hn={"VF 3":"vf3","VF 5":"vf5","VF 6":"vf6","VF 7":"vf7","VF 8":"vf8","VF 9":"vf9","EC Van":"ecvan"},Za={red:"red",white:"white",blanc:"white",grey:"grey",gray:"grey",black:"black",blue:"blue",orange:"orange",orb:"orange",green:"green",mint:"green",pink:"pink",berry:"pink",yellow:"yellow",zenith:"zenith","deep ocean":"deepocean"},Zl=(n,l)=>{const o=n?hn[n]||n.toLowerCase().replace(/\s+/g,""):"default",i=(l==null?void 0:l.toLowerCase())||"",h="/ordermanagement/",m=i.match(/\(([^)]+)\)/);if(m&&m[1]){const g=m[1].trim().toLowerCase();if(g)return`${h}pictures/${o}-${g}.webp`}let f="";const x=Object.keys(Za).sort((g,y)=>y.length-g.length);for(const g of x)if(i.includes(g)){f=Za[g];break}return f?`${h}pictures/${o}-${f}.webp`:mn(n)},mn=n=>{const l="/ordermanagement/",o=n?hn[n]||n.toLowerCase().replace(/\s+/g,""):"default";return`${l}pictures/${o}-default.webp`},Jl=()=>"/ordermanagement/pictures/default.webp",ca=["#ef4444","#f97316","#eab308","#84cc16","#22c55e","#10b981","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e"],Ql=n=>{if(!n)return ca[0];let l=0;for(let i=0;i<n.length;i++)l=n.charCodeAt(i)+((l<<5)-l),l=l&l;const o=Math.abs(l%ca.length);return ca[o]},dt=()=>({}),xa=({model:n,exteriorColor:l,className:o,alt:i})=>{const h=Zl(n,l),m=mn(n),f=Jl(),[x,g]=u.useState(h);u.useEffect(()=>{g(h)},[h]);const y=()=>{x===h?(console.warn(`[CarImage] Failed to load primary: ${h}. Trying model fallback: ${m}`),g(m)):x===m?(console.warn(`[CarImage] Failed to load model fallback: ${m}. Trying global fallback: ${f}`),g(f)):console.error(`[CarImage] All fallbacks failed. Last attempted: ${x}`)};return t.jsx("img",{src:x,onError:y,className:o,alt:i||`Image of ${n} in ${l}`,loading:"lazy",draggable:"false"})},X=({children:n,variant:l="primary",size:o="md",isLoading:i=!1,leftIcon:h,rightIcon:m,fullWidth:f=!1,className:x="",disabled:g,...y})=>{const c="inline-flex items-center justify-center rounded-xl font-semibold transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed disabled:shadow-none active:scale-[0.98]",b={primary:"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-[5px_5px_10px_rgba(59,130,246,0.3),-5px_-5px_10px_rgba(255,255,255,0.1)] hover:shadow-[7px_7px_14px_rgba(59,130,246,0.4),-7px_-7px_14px_rgba(255,255,255,0.2)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2),inset_-4px_-4px_8px_rgba(255,255,255,0.1)] border-none",secondary:"bg-[#f0f2f5] text-slate-700 shadow-[5px_5px_10px_#d1d5db,-5px_-5px_10px_#ffffff] hover:shadow-[7px_7px_14px_#d1d5db,-7px_-7px_14px_#ffffff] active:shadow-[inset_4px_4px_8px_#d1d5db,inset_-4px_-4px_8px_#ffffff] border-none",outline:"bg-transparent border-2 border-blue-500 text-blue-600 shadow-none hover:bg-blue-50 active:bg-blue-100",ghost:"bg-transparent text-slate-600 hover:bg-slate-100 hover:shadow-none active:bg-slate-200",danger:"bg-gradient-to-br from-red-500 to-red-600 text-white shadow-[5px_5px_10px_rgba(239,68,68,0.3),-5px_-5px_10px_rgba(255,255,255,0.1)] hover:shadow-[7px_7px_14px_rgba(239,68,68,0.4),-7px_-7px_14px_rgba(255,255,255,0.2)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2),inset_-4px_-4px_8px_rgba(255,255,255,0.1)] border-none",success:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-[5px_5px_10px_rgba(16,185,129,0.3),-5px_-5px_10px_rgba(255,255,255,0.1)] hover:shadow-[7px_7px_14px_rgba(16,185,129,0.4),-7px_-7px_14px_rgba(255,255,255,0.2)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2),inset_-4px_-4px_8px_rgba(255,255,255,0.1)] border-none"},j={sm:"text-xs px-3 py-1.5 h-8 gap-1.5",md:"text-sm px-4 py-2 h-10 gap-2",lg:"text-base px-6 py-2.5 h-12 gap-2.5"};return t.jsxs("button",{className:`
                ${c}
                ${b[l]}
                ${j[o]}
                ${f?"w-full":""}
                ${i?"cursor-wait opacity-80":""}
                ${x}
            `,disabled:g||i,...y,children:[i&&t.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),!i&&h&&t.jsx("span",{className:"inline-flex",children:h}),n,!i&&m&&t.jsx("span",{className:"inline-flex",children:m})]})};Ee.locale("vi");const da=n=>{if(!n)return"";const l=[Ee.ISO_8601,"DD/MM/YYYY HH:mm:ss","D/M/YYYY H:m:s","YYYY-MM-DD HH:mm:ss"],o=Ee(n,l,"vi",!0);return o.isValid()?o.format("HH:mm DD/MM/YYYY"):""},ts=({icon:n,label:l,value:o,children:i,valueClassName:h="",valueStyle:m})=>t.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[t.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-lg bg-red-100 border border-red-200",children:t.jsx("i",{className:`fas ${n} text-red-600 text-lg`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs text-text-secondary",children:l}),o&&t.jsx("p",{style:m,className:`text-text-primary font-bold break-words ${h}`,children:o}),i]})]}),Ds=({icon:n,label:l,value:o,isLast:i})=>t.jsxs("div",{className:"relative pl-0 md:pl-10 flex flex-row md:block items-center md:items-start gap-3 md:gap-0",children:[t.jsx("div",{className:"relative md:absolute top-0 left-0 flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 border border-red-200 flex items-center justify-center",children:t.jsx("i",{className:`fas ${n} text-red-600`})})}),!i&&t.jsx("div",{className:"hidden md:block absolute top-8 left-[15px] h-full w-px bg-border-secondary"}),t.jsxs("div",{className:"flex flex-col pb-0 md:pb-8",children:[t.jsx("p",{className:"text-xs text-text-secondary",children:l}),t.jsx("p",{className:"text-sm font-semibold text-text-primary break-words",children:o||""})]})]}),eo=({vin:n})=>{const[l,o]=u.useState(!1),i=h=>{h.stopPropagation();const m=document.createElement("textarea");m.value=n,document.body.appendChild(m),m.select();try{document.execCommand("copy"),o(!0),setTimeout(()=>o(!1),2e3)}catch(f){console.error("Khng th sao chp VIN:",f)}document.body.removeChild(m)};return t.jsxs("div",{className:"relative p-3 md:p-4 rounded-xl bg-gradient-to-br from-[#CBBACC] to-[#2580B3] shadow-lg group overflow-hidden cursor-pointer",onClick:i,title:"Click  sao chp VIN",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out pointer-events-none"}),t.jsxs("div",{className:"relative z-10 text-center",children:[t.jsx("p",{className:"text-xs text-blue-200 uppercase tracking-widest",children:"S Khung (VIN)"}),t.jsx("p",{className:"text-white font-mono tracking-wider text-xl md:text-2xl break-all text-shadow-md font-bold",children:n})]}),t.jsx("button",{onClick:i,className:"absolute top-3 right-3 w-9 h-9 bg-white/10 rounded-full flex items-center justify-center text-blue-200 hover:bg-white/20 hover:text-white transition-all duration-200 z-20",title:"Sao chp VIN",children:t.jsx("i",{className:`fas transition-all ${l?"fa-check-circle text-green-400":"fa-copy"}`})})]})},to=({order:n,onClose:l,orderList:o,onNavigate:i,onCancel:h,onRequestInvoice:m,onSupplement:f,onRequestVC:x,onConfirmVC:g,onEdit:y})=>{const c=dt(),[b,j]=u.useState(null),w=new Date>=new Date("2026-01-05T00:00:00"),_={modalBg:"#FFFBE6",borderColor:"#DA251D",headerBg:"#DA251D",headerText:"#FFCD00"},[C,N]=u.useState(null),[M,T]=u.useState(null);if(!n)return null;const P=(n["Kt qu"]||"cha ghp").toLowerCase().trim().normalize("NFC"),A=(n["Trng thi VC"]||"").toLowerCase().trim().normalize("NFC"),I=A||P,R=["cha ghp"," ghp"].includes(P),H=P===" ghp",E=P==="yu cu b sung",S=!!y&&![" xut ha n"," hy","ch k ha n"].includes(P),$=(P===" xut ha n"||A==="t chi ycvc")&&!["yu cu vinclub","ch duyt ycvc","ch xc thc vc (tvbh)"," c vc"].includes(A),V=I==="ch xc thc vc (tvbh)",z=!!n.LinkHoaDonDaXuat,L=async(Y,D)=>{j(Y);try{await D(n),l()}catch(U){console.error(U)}finally{j(null)}},J=n["Trng thi VC"]||n["Kt qu"]||"Cha ghp",q=J.toLowerCase().includes(" hy")||J.toLowerCase().includes("t chi"),ee=o.findIndex(Y=>Y["S n hng"]===n["S n hng"]),ie=ee>0,oe=ee<o.length-1;let pe="";if(n["Thi gian ghp"]){const Y=[Ee.ISO_8601,"DD/MM/YYYY HH:mm:ss","D/M/YYYY H:m:s","YYYY-MM-DD HH:mm:ss"],D=Ee(n["Thi gian ghp"],Y,"vi",!0);if(D.isValid()){const U=Ee().startOf("day"),te=D.startOf("day"),de=U.diff(te,"days");pe=`${Math.max(0,de)} ngy`}}const W=50,Z=Y=>{T(null),N(Y.targetTouches[0].clientX)},F=Y=>{T(Y.targetTouches[0].clientX)},v=()=>{if(!C||!M)return;const Y=C-M,D=Y>W,U=Y<-W;D&&oe?i("next"):U&&ie&&i("prev")};return t.jsxs("div",{className:"fixed inset-0 bg-black/70 z-[60] flex items-center justify-center p-0 md:p-4 transition-opacity duration-300",onClick:l,children:[ie&&t.jsx("button",{onClick:Y=>{Y.stopPropagation(),i("prev")},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 text-white rounded-full flex items-center justify-center text-2xl hover:bg-white/40 transition-colors z-10 hidden md:flex",title:"Yu cu trc",children:t.jsx("i",{className:"fas fa-chevron-left"})}),t.jsxs("div",{className:"bg-surface-ground w-full md:max-w-5xl h-[100dvh] md:h-auto md:max-h-[85vh] rounded-none md:rounded-2xl shadow-2xl flex flex-col transition-all duration-300 transform scale-100 opacity-100 relative overflow-hidden",onClick:Y=>Y.stopPropagation(),style:{...c,backgroundColor:w?_.modalBg:void 0,border:w?`2px solid ${_.borderColor}`:void 0},onTouchStart:Z,onTouchMove:F,onTouchEnd:v,children:[t.jsxs("header",{className:"flex-shrink-0 flex items-start justify-between p-3 md:p-5 border-b border-border-primary relative z-10",style:w?{backgroundColor:_.headerBg,borderBottomColor:"#FFD700"}:{},children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-text-primary",style:w?{color:_.headerText,textShadow:"1px 1px 2px rgba(0,0,0,0.3)"}:{},children:"Chi Tit Yu Cu"}),t.jsx("p",{className:"text-sm mt-1 font-mono text-text-secondary",style:w?{color:"#FFE4B5"}:{},children:n["S n hng"]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(dn,{status:J}),t.jsx("button",{onClick:l,className:"w-9 h-9 flex-shrink-0 rounded-full flex items-center justify-center transition-colors hover:bg-white/20 text-text-primary",style:w?{color:_.headerText}:{},"aria-label":"ng",children:t.jsx("i",{className:"fas fa-times text-xl"})})]})]}),t.jsxs("main",{className:"overflow-y-auto flex-grow min-h-0 p-3 md:p-6 grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 relative z-10",children:[t.jsxs("div",{className:"md:col-span-1 bg-surface-card p-5 rounded-lg border border-border-primary shadow-sm flex flex-col gap-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 md:block md:space-y-4",children:[t.jsx(ts,{icon:"fa-user-circle",label:"Tn khch hng",value:n["Tn khch hng"],valueClassName:"uppercase text-xs md:text-base"}),t.jsx(ts,{icon:"fa-user-tie",label:"T vn bn hng",value:n["Tn t vn bn hng"],valueClassName:"text-xs md:text-base"})]}),t.jsxs("div",{className:"border-t border-border-primary pt-6",children:[t.jsx("h4",{className:"font-semibold text-text-primary mb-4",children:"Mc Thi Gian"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 md:flex md:flex-col md:gap-0",children:[t.jsx(Ds,{icon:"fa-file-invoice-dollar",label:"Ngy cc",value:da(n["Ngy cc"])}),t.jsx(Ds,{icon:"fa-paper-plane",label:"Ngy yu cu",value:da(n["Thi gian nhp"])}),t.jsx(Ds,{icon:"fa-link",label:"Ngy ghp VIN",value:da(n["Thi gian ghp"])}),t.jsx(Ds,{icon:"fa-hourglass-half",label:"S ngy  ghp",value:pe,isLast:!0})]})]})]}),t.jsxs("div",{className:"md:col-span-2 space-y-6",children:[q&&n["Ghi ch hy"]&&t.jsx("div",{className:"p-4 rounded-lg bg-danger-bg border border-danger/30",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("i",{className:"fas fa-exclamation-triangle text-danger text-xl mr-4 mt-1"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-danger",children:"Yu cu  b hy"}),t.jsxs("p",{className:"text-sm text-red-800 mt-1",children:["L do: ",n["Ghi ch hy"]]})]})]})}),n.VIN&&t.jsx(eo,{vin:n.VIN}),t.jsxs("div",{className:"bg-surface-card p-5 rounded-lg border border-border-primary shadow-sm",children:[t.jsx("h3",{className:"font-bold text-lg text-text-primary mb-4",children:"Thng Tin Xe"}),t.jsx("div",{className:"flex items-center justify-center h-24 md:h-48 mb-4 rounded-lg p-2",children:t.jsx(xa,{model:n["Dng xe"],exteriorColor:n["Ngoi tht"],className:"h-full w-auto object-contain",alt:n["Dng xe"]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(ts,{icon:"fa-car-side",label:"Dng xe & Phin bn",value:`${n["Dng xe"]} - ${n["Phin bn"]}`,valueClassName:"text-xs md:text-base"}),t.jsx(ts,{icon:"fa-palette",label:"Ngoi tht",value:n["Ngoi tht"],valueStyle:un(n["Ngoi tht"]),valueClassName:"text-xs md:text-base"}),t.jsx(ts,{icon:"fa-chair",label:"Ni tht",value:n["Ni tht"],valueStyle:Kl(n["Ni tht"]),valueClassName:"text-xs md:text-base"})]})]})]})]}),t.jsxs("footer",{className:"flex-shrink-0 flex items-center justify-end flex-wrap gap-2 md:gap-4 p-3 md:p-5 border-t border-red-200 bg-orange-50 rounded-b-2xl relative z-10",children:[t.jsx(X,{onClick:l,variant:"secondary",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",style:w?{backgroundColor:"#FFD700",color:"#DA251D"}:{},children:"ng"}),z&&t.jsx(X,{onClick:()=>window.open(n.LinkHoaDonDaXuat,"_blank"),variant:"secondary",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:t.jsx("i",{className:"fas fa-download"}),style:w?{backgroundColor:"#FFD700",color:"#DA251D"}:{},children:"Ti Ha n"}),S&&t.jsx(X,{onClick:()=>L("edit",y),variant:"secondary",isLoading:b==="edit",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:b!=="edit"?t.jsx("i",{className:"fas fa-pencil-alt"}):void 0,style:w?{backgroundColor:"#FFD700",color:"#DA251D"}:{},children:"Chnh Sa"}),R&&t.jsx(X,{onClick:()=>L("cancel",h),variant:"danger",isLoading:b==="cancel",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:b!=="cancel"?t.jsx("i",{className:"fas fa-trash-alt"}):void 0,style:w?{backgroundColor:"#8B0000",color:"#FFD700"}:{},children:"Hy Yu Cu"}),H&&t.jsx(X,{onClick:()=>L("requestInvoice",m),variant:"primary",isLoading:b==="requestInvoice",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:b!=="requestInvoice"?t.jsx("i",{className:"fas fa-file-invoice-dollar"}):void 0,style:w?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"Y/C Xut Ha n"}),E&&t.jsx(X,{onClick:()=>L("supplement",f),variant:"primary",isLoading:b==="supplement",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:b!=="supplement"?t.jsx("i",{className:"fas fa-edit"}):void 0,style:w?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"B Sung File"}),$&&t.jsx(X,{onClick:()=>L("requestVC",x),variant:"primary",isLoading:b==="requestVC",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:b!=="requestVC"?t.jsx("i",{className:"fas fa-id-card"}):void 0,style:w?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"Y/C Cp VC"}),V&&t.jsx(X,{onClick:()=>L("confirmVC",g),variant:"primary",isLoading:b==="confirmVC",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:b!=="confirmVC"?t.jsx("i",{className:"fas fa-check"}):void 0,style:w?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"Xc Thc UNC VC"})]})]}),oe&&t.jsx(X,{onClick:Y=>{Y.stopPropagation(),i("next")},variant:"ghost",className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 text-white rounded-full flex items-center justify-center text-2xl hover:bg-white/40 transition-colors z-10 hidden md:flex !p-0",title:"Yu cu tip theo",children:t.jsx("i",{className:"fas fa-chevron-right"})})]})},so=({order:n,onClose:l,onConfirm:o})=>{const[i,h]=u.useState(""),[m,f]=u.useState(!1),x=dt(),g=()=>{if(!i.trim()){alert("Vui lng nhp l do hy.");return}f(!0),o(n,i)};return t.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("div",{className:"bg-surface-card w-full md:max-w-md h-[100dvh] md:h-auto rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:y=>y.stopPropagation(),style:x,children:[t.jsxs("header",{className:"relative flex flex-col items-center justify-center p-6 text-center bg-surface-card border-b border-border-primary",children:[t.jsx("div",{className:"animate-fade-in-down",children:t.jsx("h2",{className:"text-xl font-bold text-danger",children:"Xc Nhn Hy Yu Cu"})}),t.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 space-y-4 custom-scrollbar",children:[t.jsxs("p",{className:"text-sm text-text-secondary",children:["Bn c chc chn mun hy yu cu cho n hng ",t.jsx("strong",{className:"font-mono text-text-primary",children:n["S n hng"]})," ca khch hng ",t.jsx("strong",{className:"text-text-primary",children:n["Tn khch hng"]}),"?"]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"cancel-reason",className:"block text-sm font-medium text-text-primary mb-2",children:"L do hy (bt buc)"}),t.jsx("textarea",{id:"cancel-reason",rows:3,value:i,onChange:y=>h(y.target.value),className:"w-full bg-surface-card border-border-primary rounded-lg shadow-sm p-2 focus:border-accent-primary transition focus:shadow-glow-accent focus:outline-none",placeholder:"VD: Khch hng i , sai thng tin..."})]})]})}),t.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end items-center gap-3 bg-surface-card relative z-10",children:[t.jsx(X,{onClick:l,disabled:m,variant:"secondary",size:"sm",leftIcon:t.jsx("i",{className:"fas fa-times"}),children:"Hy"}),t.jsx(X,{onClick:g,disabled:m,variant:"danger",size:"sm",isLoading:m,leftIcon:t.jsx("i",{className:"fas fa-trash-alt"}),children:"Xc Nhn Hy"})]})]})})},fn="/ordermanagement/assets/pdf.worker.min-qwK7q_zL.mjs";Hl.workerSrc=fn;console.log("PDF Worker configured:",fn);const xn=(n,l={})=>new Promise((o,i)=>{if(!n.type.startsWith("image/"))return o(n);const{maxWidth:h=1920,maxHeight:m=1920,quality:f=.8}=l,x=new FileReader;x.onload=g=>{var c;const y=new Image;y.onload=()=>{let{width:b,height:j}=y;b>j?b>h&&(j=Math.round(j*h/b),b=h):j>m&&(b=Math.round(b*m/j),j=m);const w=document.createElement("canvas");w.width=b,w.height=j;const _=w.getContext("2d");if(!_)return i(new Error("Khng th ly context ca canvas."));_.drawImage(y,0,0,b,j),w.toBlob(C=>{if(!C)return i(new Error("To blob t canvas tht bi."));const N=n.name.substring(0,n.name.lastIndexOf("."))+".jpg",M=new File([C],N,{type:"image/jpeg",lastModified:Date.now()});o(M)},"image/jpeg",f)},y.onerror=b=>i(b),y.src=(c=g.target)==null?void 0:c.result},x.onerror=g=>i(g),x.readAsDataURL(n)}),ao=async(n,l)=>{if(typeof jspdf>"u")return console.error("jsPDF library not found. Skipping compression."),n;try{console.log(`Starting PDF compression for: ${n.name} (${(n.size/1024/1024).toFixed(2)} MB)`);const o=await n.arrayBuffer(),h=await zl({data:o}).promise,m=h.numPages;console.log(`PDF has ${m} pages.`);const{jsPDF:f}=jspdf,x=new f,g=1.5,y=.5,c=16777216,b=4096;for(let _=1;_<=m;_++){if(l){const E=Math.round(_/m*100);l(E)}const C=await h.getPage(_);let N=g,M=C.getViewport({scale:N});for(;M.width*M.height>c||M.width>b||M.height>b;)N*=.8,M=C.getViewport({scale:N}),console.warn(`Page ${_} is too large for canvas. Reduced scale to ${N.toFixed(2)}`);const T=document.createElement("canvas"),P=T.getContext("2d");if(T.height=M.height,T.width=M.width,!P)continue;await C.render({canvasContext:P,viewport:M,canvas:T}).promise;const A=T.toDataURL("image/jpeg",y),I=M.width*.264583,R=M.height*.264583,H=I>R?"l":"p";_===1&&x.deletePage(1),x.addPage([I,R],H),x.addImage(A,"JPEG",0,0,I,R)}const j=x.output("arraybuffer"),w=new File([j],n.name,{type:"application/pdf",lastModified:Date.now()});return console.log(`Compression complete. New size: ${(w.size/1024/1024).toFixed(2)} MB`),w.size<n.size?w:(console.log("Compressed file is larger than original. Keeping original."),n)}catch(o){return console.error("Error during PDF compression:",o),n}},no=(n,l,o,i,h,m)=>{let f=parseInt(n==null?void 0:n.trim(),10),x=-1,g=parseInt(o==null?void 0:o.trim(),10),y=parseInt((i==null?void 0:i.trim())||"00",10),c=parseInt((h==null?void 0:h.trim())||"00",10),b=parseInt((m==null?void 0:m.trim())||"00",10);if(isNaN(f)||isNaN(g)||isNaN(y)||isNaN(c)||isNaN(b))return null;const j=l==null?void 0:l.trim().toLowerCase().replace(/[.,]/g,""),w={1:1,"thng 1":1,"thg 1":1,t1:1,jan:1,january:1,2:2,"thng 2":2,"thg 2":2,t2:2,feb:2,february:2,3:3,"thng 3":3,"thg 3":3,t3:3,mar:3,march:3,4:4,"thng 4":4,"thg 4":4,t4:4,apr:4,april:4,5:5,"thng 5":5,"thg 5":5,t5:5,may:5,6:6,"thng 6":6,"thg 6":6,t6:6,jun:6,june:6,7:7,"thng 7":7,"thg 7":7,t7:7,jul:7,july:7,8:8,"thng 8":8,"thg 8":8,t8:8,aug:8,august:8,9:9,"thng 9":9,"thg 9":9,t9:9,sep:9,september:9,10:10,"thng 10":10,"thg 10":10,t10:10,oct:10,october:10,11:11,"thng 11":11,"thg 11":11,t11:11,nov:11,november:11,12:12,"thng 12":12,"thg 12":12,t12:12,dec:12,december:12},C=Object.keys(w).sort((T,P)=>P.length-T.length).find(T=>j.includes(T));if(C)x=w[C];else{const T=parseInt(j,10);if(!isNaN(T)&&T>=1&&T<=12)x=T;else return null}if(g<100){const T=new Date().getFullYear(),P=Math.floor(T/100)*100;g+=P,g>T+5&&(g-=100)}if(g<2e3||g>new Date().getFullYear()+5||x<1||x>12||f<1||f>31||y<0||y>23||c<0||c>59||b<0||b>59)return null;const N=new Date(g,x-1,f,y,c,b);if(N.getFullYear()!==g||N.getMonth()!==x-1||N.getDate()!==f)return null;const M=T=>T.toString().padStart(2,"0");return`${g}-${M(x)}-${M(f)}T${M(y)}:${M(c)}:${M(b)}`},ro=async(n,l)=>{if(typeof Tesseract>"u")throw new Error("Th vin Tesseract cha ti.");try{l("ang nhn dng... (0%)");const{data:{text:o}}=await Tesseract.recognize(n,"vie+eng",{logger:c=>{c.status==="recognizing text"&&l(`ang nhn dng... (${Math.round(c.progress*100)}%)`)}});l("ang tm ngy gi...");let i=o.replace(/\n+/g," ");i=i.replace(/(\d{1,2})\s*(gi|h|hr|g)\s*(\d{1,2})\s*(?:pht|phut|ph|p|min|m)?\s*(?:(\d{1,2})\s*(?:giy|giay|s|sec)?)?/gi,(c,b,j,w,_)=>`${b}:${w}${_?":"+_:""}`),i=i.replace(/(\d{1,2})\s*(?:gi|h|hr|g)\s*(\d{1,2})(?!\s*(?:pht|phut|ph|p|min|m))/gi,"$1:$2"),i=i.replace(/(\d{1,2})\s*(pht|phut|ph|p|min|m)\s*(\d{1,2})/gi,"$1:$2"),i=i.replace(/(\d{1,2})\s*:\s*(\d{1,2})\s*(?:pht|phut|ph|p|min|m)/gi,"$1:$2"),i=i.replace(/(\d{1,2})\s*(pht|phut|ph|p|min|m)/gi,"$1"),i=i.replace(/(\d{1,2})\s*(giy|giay|s|sec)/gi,"$1"),i=i.replace(/\s*:\s*/g,":").replace(/\s*-\s*/g,"-").replace(/\s*\/\s*/g,"/").replace(/\s*\.\s*/g,"."),i=i.replace(/(\d{1,2})([\/.-])(\d{1,2})\2(\d{2})(?!\d)/g,(c,b,j,w,_)=>{const C=new Date().getFullYear(),N=parseInt(_,10);let M;return N>C%100+15&&N<=99?M=1900+N:M=Math.floor(C/100)*100+N,`${b}/${w}/${M}`}),i=i.replace(/(\d{1,2})\.(\d{1,2})\/(\d{1,2})\/(\d{4})/g,"$2/$3/$4"),i=i.replace(/(\d{1,2})\/(\d{1,2})\.(\d{1,2})\/(\d{4})/g,"$1/$2/$4"),i=i.replace(/[\u200B-\u200D\uFEFF]/g,"");let h=null,m=-1,f={};const x="(?:thng|thg|t|Thng|Thg\\.?|T\\.)?\\s*\\d{1,2}[\\.,]{0,2}|[A-Za-z-]{3,}",g="[\\s\\/\\.-]+",y=[{regex:new RegExp("Ngy in:?\\s*(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})\\s+(\\d{1,2}):(\\d{1,2}):(\\d{1,2})","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:20,name:"BIDV Print Date (Ngy in)"},{regex:new RegExp("\\b(\\d{2})(\\d{2})(\\d{2})-(\\d{2}):(\\d{2}):(\\d{2})\\b","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:18,name:"DDMMYY-HH:MM:SS format"},{regex:new RegExp("(?:Ngy|Date(?: time)?)[:\\s]*?(\\d{1,2})-(\\d{1,2})-(\\d{4})","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:"00",minute:"00",second:"00"}),score:16,name:"BIDV/Specific DD-MM-YYYY with Keyword"},{regex:new RegExp(`(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*-\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:15.5,name:"HH:MM(:SS) - DD/MM/YYYY (MB Bank, etc.)"},{regex:new RegExp("(?:Ngy\\s*chuyn|Ngy\\s*thc hin|Transaction Date)\\s*[:\\s]*?(\\d{1,2})\\s*(?:thng|thg|/|-|\\.)\\s*(\\d{1,2})(?:,\\s*|\\s+|/|-|\\.)(\\d{4})\\s*(?:lc|\\@|at|\\s)\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:15,name:"Techcombank & similar"},{regex:new RegExp("(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})-(\\d{1,2}):(\\d{1,2})","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:"00"}),score:14.9,name:"DD/MM/YYYY-HH:MM (Cleaned Vietinbank iPay style)"},{regex:new RegExp(`\\b(\\d{1,2})${g}(\\d{1,2})${g}(\\d{4})\\s+(\\d{1,2}):(\\d{1,2}):(\\d{1,2})\\b`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:14.8,name:"DD/MM/YYYY HH:MM:SS (Common, Boosted)"},{regex:new RegExp(`(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s+(?:Th\\s*[2-7CNTtBbSsHhNn]{1,7}|Ch\\s*Nht|Mon|Tue|Wed|Thu|Fri|Sat|Sun)?\\s*,?\\s*(?:ngy\\s*|date\\s*)?(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3]||"00",day:c[4],month:c[5],year:c[6]}),score:14.5,name:"HH:MM(:SS) [DayOfWeek] DD/MM/YYYY (VCB)"},{regex:new RegExp(`Chuyn\\s*nhanh\\s*Napas\\s*247\\s*:?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s+(\\d{1,2})${g}(${x})${g}(\\d{4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:14,name:"TPBank Napas"},{regex:new RegExp(`(\\d{4})${g}(\\d{1,2})${g}(\\d{1,2})[\\sT]+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({year:c[1],month:c[2],day:c[3],hour:c[4],minute:c[5],second:c[6]}),score:13.5,name:"YYYY-MM-DD[ T]HH:MM:SS (Sacombank, ISO)"},{regex:new RegExp(`(?:Ngy\\s*thc\\s*hin|Date\\s*of\\s*transaction)\\s*:?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s+(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:13,name:"Ngy thc hin HH:MM:SS DD/MM/YYYY"},{regex:new RegExp(`(?:vo\\s*lc|lc|at)\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})\\s*,?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:12.5,name:"(vo) lc/at DD/MM/YYYY HH:MM:SS (BIDV)"},{regex:new RegExp(`(?:Thi\\s*gian|Time)\\s*:?\\s*(\\d{1,2}):(\\d{1,2}):(\\d{1,2}),\\s*(?:ngy\\s*)?(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:12,name:"SHB Thi gian/Time"},{regex:new RegExp(`(\\d{1,2})${g}(${x})${g}(\\d{2})(?!\\d)\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:11.2,name:"DD/MM/YY HH:MM:SS (2-digit year)"},{regex:new RegExp(`(?:Ngy\\s*giao dch|GD|lp lnh|to|thanh ton|chuyn tin|hch ton|lp|hiu lc|ghi nhn|transaction|payment|value)\\s*:?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})(?:\\s*,?\\s*(?:lc|at|@|thi gian|time)|\\s*-)?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:11,name:"Ngy GD/Keyword DD/MM/YYYY lc/time HH:MM(:SS)"},{regex:new RegExp(`(?:Thi\\s*gian|Time)\\s*(?:lp|to|giao dch|thanh ton|GD|thc hin|record)\\s*:?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*(?:ngy|,|on)?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:10,name:"Thi gian/Time ... HH:MM:SS ngy/on DD/MM/YYYY"},{regex:new RegExp(`(?<![:\\d\\w])(\\d{1,2})${g}(${x})${g}(\\d{4})\\s+(\\d{1,2}):(\\d{1,2})(?![:\\d])`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:"00"}),score:9.5,name:"DD/MM/YYYY HH:MM (Standalone, Vietinbank)"},{regex:new RegExp(`(?:Ngy\\s*)?(\\d{1,2})\\s*(?:thng|Thg\\.?|T)?\\s*(${x})\\s*(?:nm|nam)?\\s*(\\d{2,4})\\s*(?:vo\\s*lc|lc|Time|@)?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:9,name:"Ngy DD thng MM nm Yokohama lc HHMMSS"},{regex:new RegExp(`(${x})\\s+(\\d{1,2}),\\s*(\\d{4})\\s+(?:at|lc)\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*(AM|PM)?`,"i"),parser:c=>{let b=parseInt(c[4],10);return c[7]&&c[7].toUpperCase()==="PM"&&b<12&&(b+=12),c[7]&&c[7].toUpperCase()==="AM"&&b===12&&(b=0),{month:c[1],day:c[2],year:c[3],hour:String(b),minute:c[5],second:c[6]}},score:8.8,name:"Month DD, YYYY at HH:MM(:SS) AM/PM"},{regex:new RegExp(`(?:Ngy|Date\\s*Time)?:?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})[\\s,T]+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:8.5,name:"DD/MM/YYYY[ T]HH:MM:SS (Generic)"},{regex:new RegExp(`(?:Vo\\s*lc|Time):?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?,\\s*(?:ngy)?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:8,name:"Vo lc HH:MM, ngy DD/MM/YYYY"},{regex:new RegExp(`(?:Date:|Ngy:)?\\s*(\\d{4})${g}(${x})${g}(\\d{1,2})[\\sT,]+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({year:c[1],month:c[2],day:c[3],hour:c[4],minute:c[5],second:c[6]}),score:7.5,name:"YYYY/MM/DD[ T]HH:MM:SS (Generic)"},{regex:new RegExp(`(?:^|\\s|[^\\d\\w.,])(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?(?!=\\d{3}[,\\.])\\s+(?:ngy\\s*)?(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:7,name:"HH:MM:SS DD/MM/YYYY (Improved)"},{regex:new RegExp(`(\\d{1,2})${g}(${x})${g}(\\d{2,4})\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*(AM|PM|SA|CH)`,"i"),parser:c=>{let b=parseInt(c[4],10);const j=c[7]?c[7].toUpperCase():null;return j&&((j==="PM"||j==="CH")&&b<12&&(b+=12),(j==="AM"||j==="SA")&&b===12&&(b=0)),{day:c[1],month:c[2],year:c[3],hour:String(b),minute:c[5],second:c[6]}},score:6.5,name:"DD/MM/YYYY HH:MM(:SS) AM/PM/SA/CH"},{regex:new RegExp(`(?:Ngy\\s*giao dch|GD|lp lnh|to|thanh ton|chuyn tin|hch ton|lp|hiu lc|ghi nhn|transaction|payment|value)\\s*:?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})(?!\\s*[:\\d])(?!\\s*\\d{1,2}\\s*VND)`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:"00",minute:"00",second:"00"}),score:5,name:"Date only with keyword"},{regex:new RegExp(`(?<![\\d:\\/\\.-])(\\d{1,2})([\\/\\.-])(${x})\\2(\\d{2,4})(?![.,:\\/\\.-]?\\d)(?!\\s*VND|\\s*USD)`,"i"),parser:c=>({day:c[1],month:c[3],year:c[4],hour:"00",minute:"00",second:"00"}),score:4,name:"Date only DD/MM/YYYY (generic)"},{regex:new RegExp("(?:Ngy|Date):?\\s*(\\d{2})(\\d{2})(\\d{4})(?!\\d)","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:"00",minute:"00",second:"00"}),score:3.5,name:"Date only DDMMYYYY with keyword"},{regex:new RegExp("(?:Ngy|Date):?\\s*(\\d{4})(\\d{2})(\\d{2})(?!\\d)","i"),parser:c=>({year:c[1],month:c[2],day:c[3],hour:"00",minute:"00",second:"00"}),score:3,name:"Date only YYYYMMDD with keyword"}];for(const c of y){let b;const j=new RegExp(c.regex.source,c.regex.flags+(c.regex.flags.includes("g")?"":"g"));for(;(b=j.exec(i))!==null;){const w=c.parser(b);if(w){const _=no(w.day,w.month,w.year,w.hour,w.minute,w.second);if(_){if(c.score>m)m=c.score,h=_,f={name:c.name,score:c.score,components:w,match:b,rawText:b[0]};else if(c.score===m){const C=f.components&&(f.components.hour!=="00"||f.components.minute!=="00");w.hour&&(w.hour!=="00"||w.minute!=="00")&&!C&&(h=_,f={name:c.name,score:c.score,components:w,match:b,rawText:b[0]})}}}}if(m>=15&&h)break}return h}catch(o){throw console.error("Li OCR:",o),new Error("X l nh tht bi.")}},is=n=>{if(!n||typeof n!="string")return null;n.includes("google.com");const l=n.match(/\/d\/([a-zA-Z0-9_-]{25,})|[?&]id=([a-zA-Z0-9_-]{25,})/);return l?l[1]||l[2]:null},Ja=(n,l)=>{if(n&&n.startsWith("data:image"))return n;const o=is(n);if(o){const i=l?`w${l}`:"w1920";return`https://drive.google.com/thumbnail?id=${o}&sz=${i}`}return n},io=n=>{const l=is(n);return l?`https://drive.google.com/uc?export=view&id=${l}`:n},gn=n=>{const l=is(n);return l?`https://drive.google.com/uc?export=download&id=${l}`:n},lo=(n,l)=>{if(!n||!l)return"image.jpg";const i=(m=>m.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"D").replace(//g,"d"))(n).replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""),h=l.replace(/\s+/g,"_");return`${i}_${h}.jpg`},oo=({url:n,width:l,height:o,className:i})=>{const[h,m]=u.useState(!0),[f,x]=u.useState(!1),[g,y]=u.useState(!1);!l&&!o&&(l=100);const c=u.useMemo(()=>is(n),[n]),b=u.useMemo(()=>!!c,[c]),j=u.useMemo(()=>n&&(c?gn(n):n),[n,c]),w=u.useMemo(()=>c?`https://drive.google.com/file/d/${c}/preview`:null,[c]);function _(){m(!1),x(!1)}function C(N){console.error("PDF load error:",N),b&&!g?(console.log("Switching to iframe fallback for Google Drive PDF"),y(!0),m(!1)):(x(!0),m(!1))}return f?t.jsx("div",{className:`flex items-center justify-center bg-gray-100 text-red-400 ${i}`,style:{width:l||"auto",height:o||(l?l*1.4:"auto")},children:t.jsx("i",{className:"fas fa-file-pdf text-2xl"})}):g&&w?t.jsxs("div",{className:`relative overflow-hidden ${i}`,style:{width:l||"100%",height:o||"100%"},children:[t.jsx("iframe",{src:w,className:"w-full h-full border-0 pointer-events-none scale-[2] origin-top-left",title:"PDF Preview",tabIndex:-1}),t.jsx("div",{className:"absolute inset-0 bg-transparent"})]}):t.jsxs("div",{className:`relative overflow-hidden ${i}`,children:[h&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:t.jsx("i",{className:"fas fa-spinner fa-spin text-gray-400"})}),t.jsx(Ul,{file:j,onLoadSuccess:_,onLoadError:C,loading:t.jsx("div",{className:"w-full h-full bg-gray-100"}),className:"flex items-center justify-center",children:t.jsx(Bl,{pageNumber:1,width:l,height:o,renderTextLayer:!1,renderAnnotationLayer:!1})})]})},co=_e.memo(oo),ot=({id:n,label:l,onFileSelect:o,required:i=!1,accept:h,disableCompression:m=!1})=>{const[f,x]=u.useState(null),[g,y]=u.useState(null),c=u.useRef(null),[b,j]=u.useState(!1),[w,_]=u.useState(!1),[C,N]=u.useState("");u.useEffect(()=>{if(f){const S=URL.createObjectURL(f);return y(S),()=>URL.revokeObjectURL(S)}else y(null)},[f]);const M=u.useCallback(S=>{if(h){const $=S.type;if(!h.split(",").map(L=>L.trim()).some(L=>L.endsWith("/*")?$.startsWith(L.slice(0,-1)):L.startsWith(".")?S.name.toLowerCase().endsWith(L):$===L))return alert(`Loi tp khng hp l. Vui lng chn tp c nh dng: ${h}`),!1}return!0},[h]),T=u.useCallback(async S=>{if(S){if(!M(S)){x(null),o(null),c.current&&(c.current.value="");return}_(!0);try{let $;S.type.startsWith("image/")?m?$=S:(N("ang nn nh..."),$=await xn(S)):S.type==="application/pdf"?m?$=S:(N("ang ti u file..."),$=await ao(S,V=>{N("ang ti u file...")})):$=S,x($),o($)}catch($){console.error("File processing failed:",$),alert("Li x l file. Vui lng th li."),x(null),o(null)}finally{_(!1)}}else x(null),o(null)},[o,M]),P=S=>{var $;T((($=S.target.files)==null?void 0:$[0])||null)},A=S=>{S.stopPropagation(),T(null),c.current&&(c.current.value="")},I=S=>{S.stopPropagation(),S.preventDefault(),_(!1),x(null),o(null),c.current&&(c.current.value="")},R=S=>{S.preventDefault(),S.stopPropagation(),S.type==="dragenter"||S.type==="dragover"?j(!0):S.type==="dragleave"&&j(!1)},H=S=>{S.preventDefault(),S.stopPropagation(),j(!1),S.dataTransfer.files&&S.dataTransfer.files[0]&&T(S.dataTransfer.files[0])},E=()=>h?h.includes(".pdf")?"Ch chp nhn file PDF":h.includes("image/*")?"Ch chp nhn file nh (PNG, JPG)":`Chp nhn: ${h}`:"PDF, PNG, JPG, DOCX, etc.";return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:"block text-sm font-medium text-text-primary mb-2",children:[l,i&&t.jsx("span",{className:"text-danger ml-1",children:"*"})]}),f?t.jsxs("div",{className:"relative group overflow-hidden rounded-lg border border-accent-primary/20 bg-surface-accent transition-all duration-300 hover:shadow-md",children:[t.jsxs("div",{className:"w-full h-48 bg-surface-ground flex items-start justify-center overflow-hidden relative border-b border-accent-primary/10",children:[f.type==="application/pdf"&&g?t.jsx(co,{url:g,width:500,className:"w-full h-full flex justify-center"}):t.jsx("i",{className:"fas fa-file-alt text-accent-primary text-6xl opacity-50 self-center"}),t.jsx("div",{className:"absolute top-2 right-2 z-10",children:t.jsx(X,{type:"button",onClick:A,disabled:w,variant:"ghost",className:"w-8 h-8 bg-black/50 text-white rounded-full flex items-center justify-center hover:bg-danger hover:text-white transition-colors backdrop-blur-sm !p-0 shadow-sm",children:t.jsx("i",{className:"fas fa-times"})})})]}),t.jsxs("div",{className:"p-3 bg-surface-card flex items-center justify-between gap-2",children:[t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-sm font-bold text-text-primary truncate",title:f.name,children:f.name}),t.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:[(f.size/1024).toFixed(1)," KB"]})]}),t.jsxs(X,{type:"button",onClick:A,disabled:w,variant:"ghost",className:"text-white hover:text-white bg-danger hover:bg-danger-hover text-xs py-1.5 px-3 rounded shadow-sm flex-shrink-0",children:[t.jsx("i",{className:"fas fa-trash-alt mr-1"}),"Xa"]})]})]}):t.jsx("div",{onClick:()=>{var S;return(S=c.current)==null?void 0:S.click()},onDragEnter:R,onDragLeave:R,onDragOver:R,onDrop:H,className:`mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${b?"border-accent-primary bg-surface-accent":"border-border-primary hover:border-accent-primary"}`,children:t.jsxs("div",{className:"space-y-1 text-center",children:[t.jsx("i",{className:"fas fa-folder-open text-text-placeholder text-3xl"}),t.jsxs("div",{className:"flex text-sm text-text-secondary",children:[t.jsxs("span",{className:"relative rounded-md font-semibold text-accent-primary hover:text-accent-primary-hover",children:[t.jsx("span",{children:"Ti ln mt file"}),t.jsx("input",{ref:c,id:n,name:n,type:"file",className:"sr-only",onChange:P,accept:h})]}),t.jsx("p",{className:"pl-1",children:"hoc ko v th"})]}),t.jsx("p",{className:"text-xs text-text-placeholder",children:E()})]})}),w&&t.jsxs("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center rounded-lg z-20",children:[t.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-accent-primary"}),t.jsx("p",{className:"text-sm font-semibold text-accent-primary mt-2 mb-3",children:C||"ang x l..."}),t.jsx(X,{type:"button",onClick:I,variant:"ghost",className:"text-xs text-danger hover:bg-danger-bg px-3 py-1 rounded-full border border-danger/30",children:"Hy b"})]})]})},ls="https://script.google.com/macros/s/AKfycbx3wQsvkIz4fsxyez1B7Qr8RpEt6MFAlfw6qGWMP1PZ378Fi0hjEva0iQlHnFPa4A6gJQ/exec",et="PHM THNH NHN",pn=["January","February","March","April","May","June","July","August","September","October","November","December"],as={"VF 3":["Base","Base Tiu chun 2","Plus"],"VF 5":["Plus"],"VF 6":["Eco Tiu chun","Eco Nng cp","Plus Tiu chun","Plus Nng cp","Plus_US","Plus Tiu chun 1","Plus Tiu chun 2"],"VF 7":["Eco","Eco_HUD","Plus_Metal Nng cp","Plus_Metal Tiu chun","Plus Tiu chun","Plus Nng cp","Eco Tiu chun 1","Eco Tiu chun 2","Eco_HUD Tiu chun 1","Eco_HUD Tiu chun 2","Plus_Metal Tiu chun 1","Plus_Metal Tiu chun 2","Plus Tiu chun 2","Plus Tiu chun 1","Plus_Metal Tiu chun 1 (FWD)","Plus_Metal Tiu chun 1 (AWD)"],"VF 8":["Eco Tiu chun","Eco Nng cp","Plus"],"VF 9":["Plus_CAP_Metal_3ZONES","Plus_Metal_3ZONES","Eco_3ZONES","Plus_Metal","Plus_CAP_Metal"],HERIO:["HERIO"],NERIO:["NERIO"],LIMO:["LIMO"],MINIO:["MINIO"],"EC Van":["Base","Plus","Plus_Ca trt"]},bn=["Base","Plus","Plus Tiu chun","Plus Nng cp","Eco","Eco_HUD","Eco Tiu chun","Eco Nng cp","Plus_Metal Tiu chun","Plus_Metal Nng cp","Plus_CAP_Metal","Plus_Metal_3ZONES","Eco_3ZONES","Plus_CAP_Metal_3ZONES","HERIO","NERIO","LIMO","MINIO","Plus_US","Plus Tiu chun 1","Plus Tiu chun 2","Eco Tiu chun 1","Eco Tiu chun 2","Eco_HUD Tiu chun 1","Eco_HUD Tiu chun 2","Plus_Metal Tiu chun 1","Plus_Metal Tiu chun 2","Base Tiu chun 2","Plus_Metal Tiu chun 1 (FWD)","Plus_Metal Tiu chun 1 (AWD)","EC Van","Plus_Ca trt"],ct=["Brahminy White (CE18)","Yellow (CE1U)","Sunset ORB (CE1A)","Crimson Red (CE1M)","Vinfast Blue (CE1N)","Neptune Grey (CE14)","Jet Black (CE11)","Electric Blue (CE1J)","Zenith Grey (CE1V)","Jet Black Roof- Summer Yellow Body (111U)","Brahminy White Roof- Aquatic Azure Body (181Y)","Brahminy White Roof- Rose Pink Body (1821)","Brahminy White Roof - Iris Berry Body (181X)","Urbant Mint (CE1W)","Vinbus Green (CE2B)","Deep Ocean (CE1H)","Brahminy White Roof- Summer Yellow Body (181U)","Iris Berry (CE1X)","Zenith Grey-desat Silver Roof (171V)","Urbant Mint Green - Desat Silv (171W)","Ivy Green-desat Silver Roof (1722)","Atlantic Blue-Aquatic Azure Ro (1Y26)","Jet Black-Champagne Creme Roof (2311)","Infinity Blanc _ Silky White R (2418)","Champagne Creme - Matte Champa (2523)","Jet Black - Graphite Roof (2811)","Crimson Velvet - Mystery Bronz (2927)","Ivy_Green_GNE (CE22)","Champagne_Creme_YLG (CE23)","Crimson Red - Jet Black Roof (111M)","Infinity Blanc_Zenith Grey Roof (1v18)","Deep Ocean_Jet Black Roof (111H)","Alantic Blue_Denim Blue Roof (2A26)","Jet Black_Mystery Bronze Roof (2911)","Champagne Creme_Infinity Blanc Roof (1823)","Silver (CE17)","Pink Gold (CE2K)"],ua=["Black","Brown","Beige"],yn=[{models:["vf 3","vf 5"],colors:["Black"]},{models:["vf 6","vf 7","vf 8","vf 9"],versions:["plus tiu chun","plus nng cp","plus","plus_metal nng cp","plus_metal tiu chun","plus_cap_metal_3zones","plus_metal_3zones","plus_cap_metal","plus_metal","plus_us","plus tiu chun 1","plus tiu chun 2","plus_metal tiu chun 1","plus_metal tiu chun 2","plus_metal tiu chun 1 (fwd)","plus_metal tiu chun 1 (awd)"],colors:["Black","Brown","Beige"]},{models:["vf 6","vf 7","vf 8","vf 9"],versions:["eco tiu chun","eco nng cp","eco","eco_hud","eco_3zones","eco tiu chun 1","eco tiu chun 2","eco_hud tiu chun 1","eco_hud tiu chun 2"],colors:["Black"]},{models:["herio","nerio","limo","minio","ec van"],colors:["Black","Grey"]}],Qa={vf3:["181u","181y","1821","ce18","ce1j","ce1m","ce1v","ce1w","ce1x"],vf5:["111u","181y","ce11","ce14","ce18","ce1m","ce1v","ce1w","ce1x"],vf6:["ce11","ce14","ce18","ce1h","ce1m","ce1n","ce1v","ce1w"],vf7:["ce11","ce14","ce17","ce18","ce1h","ce1m","ce1n","ce1v","ce1w"],vf8:["ce11","ce14","ce18","ce1h","ce1m","ce1n","ce1v","ce1w","ce22"],vf9:["ce11","ce14","ce17","ce18","ce1h","ce1m","ce1n","ce1w","ce22"],ecvan:["ce18","ce1m","ce1u","ce1w"],herio:["ce11","ce17","ce1m","ce1u"],limo:["ce11","ce17","ce18","ce1m","ce1u"],nerio:["ce11","ce17","ce1m","ce1u"]},ns=n=>new Promise((l,o)=>{const i=new FileReader;i.readAsDataURL(n),i.onload=()=>l(i.result),i.onerror=h=>o(h)}),uo="https://script.google.com/macros/s/AKfycbxOA5IJ8VYSM5WfA_eTbFm0oXmmRSFrn9HL-Gtf71uLqX4BPUambHzxmwLLW7U3dWN_Pw/exec",Ue=async(n,l=ls)=>{var o,i;try{const h=new URLSearchParams;for(const x in n)n[x]!==null&&n[x]!==void 0&&h.append(x,String(n[x]));const m=await axios.post(l,h),f=typeof m.data=="string"?JSON.parse(m.data):m.data;if(f.status!=="SUCCESS")throw new Error(f.message||"API returned an unspecified error.");return f}catch(h){const m=((i=(o=h.response)==null?void 0:o.data)==null?void 0:i.message)||h.message||"An unknown API error occurred.";throw console.error("API service error (POST):",h),new Error(m)}},Je=async(n,l=ls)=>{var o,i;try{const h=new URL(l);Object.keys(n).forEach(x=>{n[x]!==void 0&&n[x]!==null&&h.searchParams.append(x,String(n[x]))});const m=await axios.get(h.toString()),f=typeof m.data=="string"?JSON.parse(m.data):m.data;if(f.status!=="SUCCESS")throw new Error(f.message||"API returned an unspecified error.");return f}catch(h){const m=((i=(o=h.response)==null?void 0:o.data)==null?void 0:i.message)||h.message||"An unknown API error occurred.";throw console.error("API service error (GET):",h),new Error(m)}},en=async()=>{try{const n=sessionStorage.getItem("userEmail");n&&Ue({action:"recordUserPresence",userEmail:n})}catch(n){console.warn("Failed to record user presence:",n)}},ho=async n=>{const o={action:"getPaginatedData",page:"1",pageSize:"9999",sortBy:"Thi gian nhp",sortOrder:"desc",filters:JSON.stringify({}),isAdmin:"true"};return Je(o)},mo=async()=>Je({action:"getXuathoadonData"}),fo=async()=>Je({action:"getChinhSachData"}),wd=async()=>Je({action:"getYeuCauVcData"}),vn=async()=>{const n=sessionStorage.getItem("currentConsultant")||et,o={action:"getKhoXeData",currentUser:n,isAdmin:String(n===et)};return Je(o)},xo=async n=>{const l={action:"holdCar",vin:n,updatedBy:sessionStorage.getItem("currentConsultant")||et};return Ue(l)},go=async n=>{const l={action:"releaseCar",vin:n,updatedBy:sessionStorage.getItem("currentConsultant")||et};return Ue(l)},po=async(n,l)=>{const o=await ns(l),i={...n};i.vin&&(i.vin_giu_yeu_cau=i.vin,delete i.vin);const h={...i,thoi_gian_nhap:new Date().toISOString(),action:"addRequest",chic_file_base64:o,chic_file_name:l.name,chic_file_type:l.type};return Ue(h)},bo=async(n,l)=>{const o={action:"cancelRequest",orderNumber:n,reason:l,cancelledBy:sessionStorage.getItem("currentConsultant")||"Unknown",fromUI:"true"};return Ue(o)},yo=async(n,l,o,i,h,m)=>{const[f,x]=await Promise.all([ns(l),ns(o)]),g={action:"requestInvoice",orderNumber:n,requestedBy:sessionStorage.getItem("currentConsultant")||"Unknown User",hop_dong_file_base64:f,hop_dong_file_name:l.name,hop_dong_file_type:l.type,denghi_xhd_file_base64:x,denghi_xhd_file_name:o.name,denghi_xhd_file_type:o.type,policy:i,commission:h,vpoint:m};return Ue(g)},vo=async(n,l,o)=>{const i={action:"updateInvoiceFiles",orderNumber:n,updatedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"};return l&&(i.hop_dong_file_base64=await ns(l),i.hop_dong_file_name=l.name,i.hop_dong_file_type=l.type),o&&(i.denghi_xhd_file_base64=await ns(o),i.denghi_xhd_file_name=o.name,i.denghi_xhd_file_type=o.type),Ue(i)},wo=async(n,l)=>{const o={action:"updateOrderDetails",updatedBy:sessionStorage.getItem("currentConsultant")||"Unknown User",orderNumber:n,...l};return Ue(o)},jo=async()=>{const n=sessionStorage.getItem("currentConsultant")||"Unknown User",l={action:"getAllArchivedDataForUser",currentUser:n,isAdmin:String(n===et)};return Je(l)},No=async()=>{const n=sessionStorage.getItem("currentConsultant")||et,l={action:"getNotifications",currentUser:n,isAdmin:String(n===et)};return Je(l)},ko=async()=>{const n={action:"markAllNotificationsAsRead",currentUser:sessionStorage.getItem("currentConsultant")||et,timestamp:new Date().toISOString()};return Ue(n)},_o=async n=>{const l={action:"markNotificationAsRead",notificationId:n,currentUser:sessionStorage.getItem("currentConsultant")||et,timestamp:new Date().toISOString()};return Ue(l)},So=async n=>{const l=`${uo}?sheet=${n}`;try{const o=await axios.get(l),i=typeof o.data=="string"?JSON.parse(o.data):o.data;return i&&i[n]&&Array.isArray(i[n])?i[n]:Array.isArray(i)?i:[]}catch(o){return console.warn(`Error fetching sold data for ${n}:`,o),[]}},Co=(n,l,o)=>{let i=new Date().toISOString();if(o){const h=pn.indexOf(o);if(h>-1){const m=new Date().getFullYear();i=new Date(m,h,15).toISOString()}}return{"Tn khch hng":String(n[0]||""),"S n hng":String(n[2]||`SOLD-${o}-${l}`),"Dng xe":String(n[3]||""),"Phin bn":String(n[4]||""),"Ngoi tht":String(n[5]||""),"Ni tht":String(n[6]||""),"Tn t vn bn hng":String(n[7]||""),VIN:String(n[8]||""),"CHNH SCH":String(n[9]||""),"Ngy cc":i,"Thi gian nhp":i,"Thi gian ghp":i,"Kt qu":" xut ha n"}},Do=async()=>{try{const n=pn.map(h=>So(h).then(m=>({month:h,data:m})));return{status:"SUCCESS",message:"Successfully fetched all sold car data.",data:(await Promise.all(n)).flatMap(({month:h,data:m})=>m.filter(f=>Array.isArray(f)&&f.length>8&&f[8]).map(f=>({row:f,month:h}))).map(({row:h,month:m},f)=>Co(h,f,m))}}catch(n){return{status:"ERROR",message:n instanceof Error?n.message:"An unknown error occurred while fetching sold cars data."}}},Mo=async n=>{const l={action:"requestVinClub",...n,requestedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"};return Ue(l)},To=async n=>{try{const l=new URLSearchParams;for(const f in n)n[f]!==null&&n[f]!==void 0&&l.append(f,String(n[f]));const o=await axios.post(ls,l),i=typeof o.data=="string"?JSON.parse(o.data):o.data;if(!i.success)throw new Error(i.message||"User API returned an unspecified error.");const{success:h,...m}=i;return{status:"SUCCESS",...m}}catch(l){const o=l instanceof Error?l.message:"An unknown user API error occurred.";throw new Error(o)}},Yo=async()=>Je({action:"getTeamData"}),Eo=async()=>Je({action:"getUsers"}),Po=async(n,l)=>{const o=sessionStorage.getItem("currentUser")||"Unknown Admin";return["addUser","updateTeams"].includes(n)?To({action:n,...l,adminUser:o}):Ue({action:n,...l,adminUser:o})},jd=async n=>Je({action:"getOrderHistory",orderNumber:n}),Nd=async n=>{const l={action:"handleBulkUploadIssuedInvoices",filesData:JSON.stringify(n),uploadedBy:sessionStorage.getItem("currentConsultant")||"Admin"};return Ue(l)},ga=async n=>{var l,o;try{const i=new URLSearchParams;for(const y in n)n[y]!==void 0&&n[y]!==null&&i.append(y,String(n[y]));const h=await axios.post(ls,i),m=typeof h.data=="string"?JSON.parse(h.data):h.data;if(!(m.success===!0||m.status==="SUCCESS"))throw new Error(m.message||"API returned a failure response.");const{success:x,...g}=m;return{status:"SUCCESS",...g}}catch(i){const h=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.message)||i.message||"An unknown API error occurred.";throw console.error("Legacy API service error (POST):",i),new Error(h)}},Io=async()=>Je({action:"getTestDriveSchedule"}),kd=async n=>ga({action:"saveTestDriveBooking",...n}),_d=async n=>{const l={action:"submitTestDriveCheckin",soPhieu:n.soPhieu,updatedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"};return n.odoBefore&&(l.odoBefore=n.odoBefore),n.imagesBefore&&(l.imagesBefore=JSON.stringify(n.imagesBefore)),n.odoAfter&&(l.odoAfter=n.odoAfter),n.imagesAfter&&(l.imagesAfter=JSON.stringify(n.imagesAfter)),ga(l)},Sd=async n=>ga({action:"deleteTestDriveBooking",soPhieu:n,deletedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"}),Fo=({currentStep:n})=>{const l=["Thng tin BH","Ti chng t","Xc nhn"];return t.jsx("div",{className:"flex items-center justify-center mb-6",children:l.map((o,i)=>{const h=i+1,m=h===n,f=h<n;return t.jsxs(_e.Fragment,{children:[t.jsxs("div",{className:"flex flex-col items-center text-center w-24",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold ${f?"bg-success text-white":m?"bg-accent-primary text-white":"bg-surface-ground border-2 border-border-primary text-text-secondary"}`,children:f?t.jsx("i",{className:"fas fa-check"}):h}),t.jsx("p",{className:`mt-2 text-xs font-semibold transition-colors ${m||f?"text-text-primary":"text-text-secondary"}`,children:o})]}),i<l.length-1&&t.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-colors duration-300 ${f?"bg-success":"bg-border-primary"}`})]},h)})})},Oo=({order:n,onClose:l,onConfirm:o})=>{const[i,h]=u.useState(1),[m,f]=u.useState(null),[x,g]=u.useState(null),[y,c]=u.useState(!1),[b,j]=u.useState(!1),[w,_]=u.useState([]),[C,N]=u.useState(""),[M,T]=u.useState(""),[P,A]=u.useState([]),[I,R]=u.useState(!0),H=dt();u.useEffect(()=>{(async()=>{try{R(!0);const v=await fo();v.status==="SUCCESS"&&Array.isArray(v.data)?A(v.data):(console.error("Failed to fetch sales policies:",v.message),A([]))}catch(v){console.error("Error fetching sales policies:",v),A([])}finally{R(!1)}})()},[]);const E=u.useMemo(()=>{if(!n||!n["Dng xe"]||P.length===0)return P.sort();const F=Object.keys(as).map(te=>te.replace(/\s+/g,"").toLowerCase()),v=n["Dng xe"].replace(/\s+/g,"").toLowerCase(),Y=P.filter(te=>te.toLowerCase().replace(/\s+/g,"").includes(v)),D=P.filter(te=>{const de=te.toLowerCase().replace(/\s+/g,"");return!F.some(Me=>de.includes(Me))}),U=[...new Set([...Y,...D])];return U.length>0?U.sort():P.sort()},[n,P]);u.useEffect(()=>{E.length>0&&_(F=>F.filter(v=>E.includes(v)))},[E]);const[S,$]=u.useState(0),V=F=>F.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."),z=F=>v=>{const Y=v.target.value;F(V(Y))},L=F=>F.replace(/\./g,""),J=w.length>0&&C&&parseFloat(L(C))>=0&&M&&parseFloat(L(M))>=0,q=m&&x,ie=J&&q&&y,oe=()=>h(F=>Math.min(F+1,3)),pe=()=>h(F=>Math.max(F-1,1)),W=async()=>{if(!ie||!m||!x){alert("Vui lng hon thnh tt c cc bc.");return}j(!0);try{$(1),await new Promise(F=>setTimeout(F,800)),$(2),await new Promise(F=>setTimeout(F,800)),$(3),await o(n,m,x,w,L(C),L(M)),$(4),await new Promise(F=>setTimeout(F,2e3)),l()}catch(F){console.error("Submission failed",F),j(!1),$(0)}},Z=({label:F,status:v})=>{let Y="fa-circle text-border-secondary",D="text-text-secondary",U="bg-surface-ground";return v==="active"?(Y="fa-spinner fa-spin text-accent-primary",D="text-accent-primary font-semibold",U="bg-accent-primary/5 border-accent-primary/20"):v==="completed"&&(Y="fa-check-circle text-success",D="text-text-primary font-medium",U="bg-success/5 border-success/20"),t.jsxs("div",{className:`flex items-center p-3 rounded-lg border ${v==="pending"?"border-transparent":"border-border-secondary"} ${U} transition-all duration-300`,children:[t.jsx("div",{className:"w-8 flex justify-center mr-3",children:t.jsx("i",{className:`fas ${Y} text-lg transition-all duration-300`})}),t.jsx("span",{className:`${D} transition-all duration-300`,children:F})]})};return b?t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-surface-card w-full max-w-md rounded-2xl shadow-xl p-6 flex flex-col items-center animate-fade-in-scale-up",style:H,children:[t.jsxs("div",{className:"w-16 h-16 mb-4 relative",children:[t.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-border-primary"}),t.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${S===4?"border-success":"border-accent-primary border-t-transparent animate-spin"}`}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("i",{className:`fas ${S===4?"fa-check text-success":"fa-paper-plane text-accent-primary"} text-xl`})})]}),t.jsx("h3",{className:"text-lg font-bold text-text-primary mb-1",children:S===4?"Hon tt!":"ang x l h s"}),t.jsx("p",{className:"text-sm text-text-secondary mb-6",children:S===4?"Yu cu  c gi thnh cng.":"Vui lng khng tt trnh duyt..."}),t.jsxs("div",{className:"w-full space-y-3",children:[t.jsx(Z,{label:"X l Hp ng mua bn",status:S>1?"completed":S===1?"active":"pending"}),t.jsx(Z,{label:"X l  ngh xut ha n",status:S>2?"completed":S===2?"active":"pending"}),t.jsx(Z,{label:"ang gi d liu...",status:S>3?"completed":S===3?"active":"pending"})]})]})}):t.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("div",{className:"bg-surface-card w-full md:max-w-4xl h-[100dvh] md:h-[700px] md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:F=>F.stopPropagation(),style:H,children:[t.jsxs("header",{className:"relative flex-shrink-0 flex flex-col items-center justify-center p-4 text-center border-b border-border-primary",children:[t.jsxs("div",{className:"animate-fade-in-down",children:[t.jsx("h2",{className:"text-lg font-bold text-gradient uppercase",children:"YU CU XUT HA N"}),t.jsx("p",{className:"text-xs text-text-secondary mt-0.5",children:"Cung cp chng t  tin hnh xut ha n."})]}),t.jsx("button",{onClick:l,className:"absolute top-3 right-3 w-8 h-8 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 custom-scrollbar",children:[t.jsx(Fo,{currentStep:i}),t.jsxs("div",{className:"bg-surface-accent/50 rounded-xl border border-accent-primary/20 p-2.5 mb-4 relative overflow-hidden group",children:[t.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity",children:t.jsx("i",{className:"fas fa-file-invoice-dollar text-5xl text-accent-primary transform rotate-12"})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 relative z-10",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-wider text-text-secondary font-semibold mb-0.5",children:"S n hng"}),t.jsxs("div",{className:"flex items-center gap-1.5 text-accent-primary",children:[t.jsx("i",{className:"fas fa-barcode text-base opacity-70"}),t.jsx("span",{className:"text-base font-bold font-mono tracking-tight",children:n["S n hng"]})]})]}),t.jsxs("div",{className:"flex flex-col md:border-l md:border-accent-primary/20 md:pl-3",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-wider text-text-secondary font-semibold mb-0.5",children:"Khch hng"}),t.jsxs("div",{className:"flex items-center gap-1.5 text-text-primary",children:[t.jsx("i",{className:"fas fa-user text-base text-accent-secondary opacity-70"}),t.jsx("span",{className:"text-base font-bold truncate",title:n["Tn khch hng"],children:n["Tn khch hng"]})]})]}),t.jsxs("div",{className:"flex flex-col md:border-l md:border-accent-primary/20 md:pl-3",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-wider text-text-secondary font-semibold mb-0.5",children:"S VIN"}),t.jsxs("div",{className:"flex items-center gap-1.5 text-text-primary",children:[t.jsx("i",{className:"fas fa-car text-base text-accent-secondary opacity-70"}),t.jsx("span",{className:"text-base font-bold font-mono tracking-tight",children:n.VIN||"---"})]})]})]})]}),t.jsxs("div",{style:{display:i===1?"block":"none"},children:[t.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"1. Thng tin Bn hng"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-text-primary mb-2",children:["Chnh sch bn hng ",t.jsx("span",{className:"text-danger",children:"*"})]}),I?t.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary p-2 bg-surface-ground rounded-lg",children:[t.jsx("i",{className:"fas fa-spinner fa-spin"}),t.jsx("span",{children:"ang ti danh sch chnh sch..."})]}):t.jsx("div",{className:"flex flex-wrap gap-2 p-2 bg-surface-ground rounded-lg border border-border-primary",children:E.length>0?E.map(F=>{const v=w.includes(F);return t.jsxs("button",{type:"button",onClick:()=>{const Y=v?w.filter(D=>D!==F):[...w,F];_(Y)},className:`group inline-flex items-center gap-2 px-3 py-1.5 text-xs font-semibold rounded-full border cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-primary
                                                            ${v?"bg-accent-primary border-accent-primary text-white shadow-sm hover:bg-accent-primary-hover":"bg-white border-border-secondary text-text-secondary hover:border-accent-primary hover:text-accent-primary"}
                                                        `,children:[t.jsx("i",{className:`fas ${v?"fa-check-circle":"fa-plus-circle"} transition-transform duration-200 ${v?"":"group-hover:rotate-90"}`}),F]},F)}):t.jsx("p",{className:"text-xs text-text-secondary",children:"Khng tm thy chnh sch no ph hp."})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"commission-amount",className:"block text-sm font-medium text-text-primary mb-2",children:["Hoa hng ng trc (VND) ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{id:"commission-amount",type:"text",value:C,onChange:z(N),className:"w-full bg-surface-ground border border-border-primary rounded-lg p-2.5 futuristic-input",placeholder:"Nhp s tin",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"vpoint-amount",className:"block text-sm font-medium text-text-primary mb-2",children:["S im Vpoint s dng (im) ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{id:"vpoint-amount",type:"text",value:M,onChange:z(T),className:"w-full bg-surface-ground border border-border-primary rounded-lg p-2.5 futuristic-input",placeholder:"Nhp s im",required:!0})]})]})]})]}),t.jsxs("div",{style:{display:i===2?"block":"none"},children:[t.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"2. Ti ln chng t"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(ot,{id:"hop_dong_file_input",label:"Hp ng mua bn",onFileSelect:f,required:!0,accept:".pdf"}),t.jsx(ot,{id:"denghi_xhd_file_input",label:" ngh xut ha n",onFileSelect:g,required:!0,accept:".pdf"})]})]}),t.jsxs("div",{style:{display:i===3?"block":"none"},children:[t.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"3. Xc nhn cui cng"}),t.jsx("div",{className:"p-4 bg-surface-ground rounded-lg border border-border-primary mb-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsx("p",{className:"text-xs text-text-secondary mb-1.5 font-semibold uppercase",children:"Chnh sch bn hng"}),w.length>0?t.jsx("div",{className:"bg-surface-card rounded-md border border-border-secondary divide-y divide-border-secondary/50 flex-grow overflow-y-auto custom-scrollbar shadow-sm min-h-[120px]",children:w.map((F,v)=>t.jsxs("div",{className:"p-2.5 text-sm font-medium text-text-primary flex items-start hover:bg-surface-hover transition-colors",children:[t.jsx("i",{className:"fas fa-check-circle text-success mt-0.5 mr-2.5 flex-shrink-0"}),t.jsx("span",{className:"leading-tight",children:F})]},v))}):t.jsx("div",{className:"bg-surface-card rounded-md border border-border-secondary flex items-center justify-center flex-grow min-h-[120px]",children:t.jsx("p",{className:"font-semibold text-text-placeholder italic",children:"Cha chn chnh sch no"})})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-surface-card p-3 rounded-md border border-border-secondary shadow-sm",children:[t.jsx("p",{className:"text-xs text-text-secondary mb-2 font-semibold uppercase border-b border-border-secondary pb-1",children:"Thng tin thanh ton"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-text-secondary",children:"Hoa hng ng:"}),t.jsx("span",{className:"font-bold text-text-primary",children:C?`${parseInt(L(C)).toLocaleString("vi-VN")} VND`:"Cha nhp"})]}),M&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-text-secondary",children:"Vpoint s dng:"}),t.jsx("span",{className:"font-bold text-purple-600",children:`${parseInt(L(M)).toLocaleString("vi-VN")} im`})]})]})]}),t.jsxs("div",{className:"bg-surface-card p-3 rounded-md border border-border-secondary shadow-sm flex-grow",children:[t.jsx("p",{className:"text-xs text-text-secondary mb-2 font-semibold uppercase border-b border-border-secondary pb-1",children:"Tp nh km"}),t.jsxs("ul",{className:"list-none text-sm text-text-primary space-y-2",children:[t.jsxs("li",{className:`flex items-center ${m?"text-text-primary":"text-danger"}`,children:[t.jsx("i",{className:`fas ${m?"fa-file-contract text-success":"fa-times-circle"} mr-2 w-4 text-center`}),t.jsx("span",{className:"truncate flex-1",title:m==null?void 0:m.name,children:(m==null?void 0:m.name)||"Thiu Hp ng"})]}),t.jsxs("li",{className:`flex items-center ${x?"text-text-primary":"text-danger"}`,children:[t.jsx("i",{className:`fas ${x?"fa-file-invoice text-success":"fa-times-circle"} mr-2 w-4 text-center`}),t.jsx("span",{className:"truncate flex-1",title:x==null?void 0:x.name,children:(x==null?void 0:x.name)||"Thiu  ngh XHD"})]})]})]})]})]})}),t.jsx("div",{className:"relative p-4 rounded-lg border border-accent-primary/20 bg-surface-accent",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex items-center h-6",children:t.jsx("input",{id:"vinclub-confirm",type:"checkbox",checked:y,onChange:F=>c(F.target.checked),className:"focus:ring-accent-primary h-5 w-5 text-accent-primary border-border-secondary rounded-md cursor-pointer"})}),t.jsxs("div",{className:"ml-3 text-sm",children:[t.jsx("label",{htmlFor:"vinclub-confirm",className:"font-medium text-text-primary cursor-pointer",children:"Ti xc nhn khch hng  to ti khon Vinclub."}),t.jsx("p",{className:"text-accent-primary/80",children:"y l iu kin bt buc  tip tc."})]})]})})]})]})}),t.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-between items-center bg-surface-card relative z-10",children:[i>1?t.jsx(X,{onClick:pe,disabled:b,variant:"secondary",size:"sm",leftIcon:t.jsx("i",{className:"fas fa-arrow-left"}),children:"Quay li"}):t.jsx(X,{onClick:l,disabled:b,variant:"secondary",size:"sm",children:"Hy"}),i<3?t.jsx(X,{onClick:oe,disabled:b||i===1&&!J||i===2&&!q,variant:"primary",size:"sm",rightIcon:t.jsx("i",{className:"fas fa-arrow-right"}),children:"Tip theo"}):t.jsx(X,{onClick:W,disabled:b||!ie,variant:"success",size:"sm",isLoading:b,leftIcon:b?void 0:t.jsx("i",{className:"fas fa-paper-plane"}),children:"Gi Yu Cu"})]})]})})},tn=({label:n,value:l,icon:o,isMono:i=!1})=>t.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.jsx("i",{className:`fas ${o} fa-fw w-4 text-center text-accent-secondary`}),t.jsxs("span",{className:"text-text-secondary",children:[n,":"]}),t.jsx("span",{className:`font-semibold text-text-primary ${i?"font-mono":""}`,children:l})]}),Ao=({order:n,onClose:l,onConfirm:o})=>{const[i,h]=u.useState(null),[m,f]=u.useState(null),[x,g]=u.useState(!1),y=dt(),c=()=>{if(!i&&!m){alert("Vui lng chn t nht mt file  b sung.");return}g(!0),o(n,i,m)},b=i||m;return t.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("div",{className:"bg-surface-card w-full md:max-w-2xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:j=>j.stopPropagation(),style:y,children:[t.jsxs("header",{className:"relative flex flex-col items-center justify-center p-6 text-center bg-surface-card border-b border-border-primary",children:[t.jsxs("div",{className:"animate-fade-in-down",children:[t.jsx("h2",{className:"text-xl font-bold text-gradient",children:"B Sung Chng T"}),t.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Ti ln cc tp mi  cp nht hoc thay th."})]}),t.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex-shrink-0 flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 custom-scrollbar",children:[t.jsxs("div",{className:"p-4 bg-surface-ground rounded-lg border border-border-primary space-y-2",children:[t.jsx("h3",{className:"font-semibold text-text-primary text-base mb-2",children:"Tm tt yu cu"}),t.jsx(tn,{label:"S n hng",value:n["S n hng"],icon:"fa-barcode",isMono:!0}),t.jsx(tn,{label:"Khch hng",value:n["Tn khch hng"],icon:"fa-user"})]}),t.jsxs("div",{className:"flex items-start gap-3 p-3 text-sm bg-warning-bg rounded-lg border border-warning/30 text-yellow-800 my-4",children:[t.jsx("i",{className:"fas fa-info-circle mt-0.5"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Lu :"})," Ch cn ti ln tp bn mun thay th. Cc tp khng c ti ln s c gi nguyn."]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"Ti ln tp mi"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[t.jsx(ot,{id:"supp_hop_dong_file_input",label:"Hp ng mua bn (Mi)",onFileSelect:h,accept:".pdf"}),t.jsx(ot,{id:"supp_denghi_xhd_file_input",label:" ngh XHD (Mi)",onFileSelect:f,accept:".pdf"})]})]})]})}),t.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end items-center gap-3 bg-surface-card relative z-10",children:[t.jsx(X,{onClick:l,disabled:x,variant:"secondary",size:"sm",leftIcon:t.jsx("i",{className:"fas fa-times"}),children:"Hy"}),t.jsx(X,{onClick:c,disabled:x||!b,variant:"primary",size:"sm",isLoading:x,leftIcon:t.jsx("i",{className:"fas fa-save"}),children:"Cp nht & Gi"})]})]})})},Lo=({onFileSelect:n,isProcessing:l,ocrStatus:o,showToast:i})=>{const[h,m]=u.useState(!1),[f,x]=u.useState(null),[g,y]=u.useState(null),c=u.useRef(null),[b,j]=u.useState(!1),w=u.useCallback(async A=>{if(n(null),x(null),y(null),A){if(!A.type.startsWith("image/")){i("Tp khng hp l","Vui lng ch chn tp hnh nh.","warning");return}j(!0);try{const I=await xn(A);x(I),n(I);const R=new FileReader;R.onloadend=()=>{y(R.result)},R.readAsDataURL(I)}catch(I){console.error("Image compression failed:",I),i("Li Nn nh","Khng th x l nh ca bn. Vui lng th nh khc.","error")}finally{j(!1)}}},[n,i]),_=A=>{A.preventDefault(),A.stopPropagation(),A.type==="dragenter"||A.type==="dragover"?m(!0):A.type==="dragleave"&&m(!1)},C=A=>{A.preventDefault(),A.stopPropagation(),m(!1),A.dataTransfer.files&&A.dataTransfer.files[0]&&w(A.dataTransfer.files[0])},N=A=>{A.preventDefault(),A.target.files&&A.target.files[0]&&w(A.target.files[0])},M=()=>{var A;(A=c.current)==null||A.click()},T=A=>{A.stopPropagation(),w(null)},P=()=>o.includes("Li")||o.includes("Khng tm thy")?"text-danger":o.includes(" in")?"text-success font-medium":"text-accent-secondary";return t.jsxs("div",{onDragEnter:_,className:"w-full",children:[t.jsx("input",{ref:c,type:"file",className:"hidden",accept:"image/*",onChange:N}),t.jsxs("div",{className:`relative w-full h-24 border-2 border-dashed rounded-lg flex items-center justify-center transition-all duration-300 group cursor-pointer overflow-hidden bg-surface-ground
                    ${h?"border-accent-primary bg-surface-accent":"border-border-primary"}
                    ${f?"border-solid border-accent-primary/50":""}`,onClick:M,onDragLeave:_,onDragOver:_,onDrop:C,children:[!f&&t.jsxs("div",{className:"text-center text-text-placeholder group-hover:text-text-primary transition-colors",children:[t.jsx("i",{className:"fas fa-cloud-upload-alt fa-lg mb-1 group-hover:text-accent-primary"}),t.jsx("p",{className:"font-semibold text-text-primary text-xs",children:"Nhn  ti nh"}),t.jsx("p",{className:"text-[10px] hidden md:block opacity-70",children:"Ti a 10MB"})]}),f&&g&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute inset-0 p-2 z-0",children:t.jsx("img",{src:g,alt:"Preview",className:"w-full h-full object-contain rounded-md"})}),t.jsxs("div",{className:"absolute inset-0 bg-black/40 hover:bg-black/60 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300 rounded-lg cursor-pointer z-10",children:[t.jsx("span",{className:"text-white font-bold",children:"Thay i nh"}),t.jsx(X,{type:"button",onClick:T,disabled:l,variant:"ghost",className:"flex-shrink-0 w-8 h-8 bg-surface-hover text-text-secondary rounded-full flex items-center justify-center hover:bg-danger-bg hover:text-danger-hover transition-colors disabled:opacity-50 !p-0",children:t.jsx("i",{className:"fas fa-times"})})]})]})]}),(b||l||o)&&t.jsx("p",{className:`mt-2 text-sm text-center italic ${P()} `,children:b?t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"ang nn nh..."]}):l?t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),o]}):o})]})},sn=n=>n?n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"d").replace(//g,"d").trim():"",Ze=(n,l)=>{if(!l)return!0;if(!n)return!1;const o=sn(l),i=l.toLowerCase();return i!==o?n.normalize("NFC").toLowerCase().includes(i.normalize("NFC")):sn(n).includes(o)},Bt=({label:n,options:l,selectedOptions:o,onChange:i,icon:h,displayMode:m="count",size:f="default",variant:x="default",mode:g="dropdown",selectionMode:y="multiple",placeholder:c,disabled:b=!1,searchable:j=!0})=>{const[w,_]=u.useState(!1),[C,N]=u.useState(""),M=u.useRef(null);u.useEffect(()=>{const V=z=>{M.current&&!M.current.contains(z.target)&&_(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]);const T=l.filter(V=>Ze(V,C)),P=V=>{if(y==="single")i([V]),_(!1);else{const z=o.includes(V)?o.filter(L=>L!==V):[...o,V];i(z)}},A=()=>{i(Array.from(new Set([...o,...T])))},I=()=>{i([])},R=()=>{i(o.filter(V=>!T.includes(V)))},H=u.useMemo(()=>o.length===0?c||n:y==="single"?o[0]:m==="selection"?o.length<=2?o.join(", "):`${o.length} la chn`:`${n} (${o.length})`,[o,n,m,y,c]),E=f==="compact",S=y==="multiple"&&T.length>0&&T.every(V=>o.includes(V)),$=u.useMemo(()=>{const V="flex items-center justify-between transition-all duration-200 outline-none focus:ring-2 focus:ring-accent-primary/20",z="rounded-xl",L=b?"opacity-60 cursor-not-allowed bg-gray-50":"cursor-pointer";if(x==="modern"){const ee=E?"px-2 h-7 text-[10px]":"px-4 h-10 text-sm",ie=!b&&(w||o.length>0&&y==="multiple")?"bg-accent-primary/5 border border-accent-primary text-accent-primary shadow-sm":"bg-white border border-gray-200 text-gray-600 hover:border-accent-primary/50 hover:text-gray-900 hover:shadow-sm";return`${V} ${z} ${ee} ${ie} ${L} w-full`}const J=E?"px-2 h-7 text-[10px]":"px-4 h-11 text-sm lg:h-14 lg:text-lg lg:px-6",q=!b&&(w||o.length>0&&y==="multiple")?"bg-white text-[#6d5dfc] shadow-[inset_2px_2px_5px_#e5e7eb,inset_-2px_-2px_5px_#ffffff] font-bold":"bg-white text-gray-700 shadow-[-2px_-2px_5px_#ffffff,2px_2px_5px_#e5e7eb] hover:text-[#6d5dfc] font-medium";return`${V} ${z} ${J} ${q} ${L} w-full`},[E,w,o.length,x,y,b]);return g==="chips"?t.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(V=>{const z=o.includes(V);return t.jsxs("button",{type:"button",onClick:()=>!b&&P(V),disabled:b,className:`
                px-3 py-1.5 text-xs font-medium rounded-full border transition-all duration-200 ease-out flex items-center gap-1.5
                ${z?"bg-accent-primary text-white border-accent-primary shadow-md shadow-accent-primary/20 transform scale-105":"bg-white text-gray-600 border-gray-200 hover:border-accent-primary/50 hover:text-accent-primary hover:bg-accent-primary/5"}
                ${b?"opacity-50 cursor-not-allowed":""}
              `,children:[z&&t.jsx("i",{className:"fas fa-check text-[10px]"}),V]},V)})}):g==="inline"?t.jsxs("div",{className:`w-full bg-gray-50/50 rounded-xl border border-gray-100 p-2 ${b?"opacity-60 pointer-events-none":""}`,children:[j&&l.length>5&&t.jsxs("div",{className:"relative mb-2",children:[t.jsx("i",{className:"fas fa-search absolute top-1/2 left-3 -translate-y-1/2 text-gray-400 text-xs"}),t.jsx("input",{type:"text",placeholder:"Tm kim...",value:C,onChange:V=>N(V.target.value),disabled:b,className:"w-full pl-9 pr-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/20 transition-all text-sm placeholder:text-gray-400"})]}),t.jsxs("ul",{className:"max-h-60 overflow-y-auto space-y-0.5 custom-scrollbar pr-1",children:[y==="multiple"&&T.length>0&&t.jsx("li",{children:t.jsxs("label",{className:"flex items-center gap-3 w-full px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-white hover:shadow-sm transition-all cursor-pointer group",children:[t.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${S?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:S&&t.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),t.jsx("input",{type:"checkbox",checked:S,onChange:()=>S?R():A(),className:"hidden"}),t.jsx("span",{className:"font-semibold italic text-xs text-gray-500 group-hover:text-accent-primary transition-colors",children:S?"B chn tt c":"Chn tt c"})]})}),T.length>0?T.map(V=>{const z=o.includes(V);return t.jsx("li",{children:t.jsxs("label",{className:`flex items-center gap-3 w-full px-3 py-2 text-sm rounded-lg transition-all cursor-pointer group ${z?"bg-accent-primary/5 text-accent-primary font-medium":"text-gray-700 hover:bg-white hover:shadow-sm"}`,children:[y==="multiple"&&t.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${z?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:z&&t.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),t.jsx("input",{type:y==="single"?"radio":"checkbox",checked:z,onChange:()=>P(V),className:"hidden"}),t.jsx("span",{children:V}),y==="single"&&z&&t.jsx("i",{className:"fas fa-check text-accent-primary ml-auto text-xs"})]})},V)}):t.jsx("li",{className:"px-3 py-4 text-sm text-gray-400 text-center italic",children:"Khng tm thy kt qu."})]})]}):t.jsxs("div",{className:"relative w-full",ref:M,children:[t.jsxs("button",{type:"button",onClick:()=>!b&&_(!w),disabled:b,className:$,children:[t.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[t.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${w||o.length>0&&y==="multiple"?"bg-accent-primary/10 text-accent-primary":"bg-gray-100 text-gray-400"}`,children:t.jsx("i",{className:`fas ${h} text-xs`})}),t.jsx("span",{className:`truncate ${o.length>0?"font-semibold text-gray-900":""}`,children:H})]}),t.jsx("i",{className:`fas fa-chevron-down text-xs transition-transform duration-300 ${w?"rotate-180 text-accent-primary":"text-gray-400"}`})]}),w&&t.jsxs("div",{className:"absolute top-full mt-2 w-full min-w-[200px] bg-white border border-gray-100 rounded-xl shadow-xl shadow-gray-200/50 z-50 animate-in fade-in zoom-in-95 duration-200 flex flex-col overflow-hidden ring-1 ring-black/5",children:[j&&l.length>5&&t.jsx("div",{className:"p-3 border-b border-gray-50 bg-gray-50/30",children:t.jsxs("div",{className:"relative",children:[t.jsx("i",{className:"fas fa-search absolute top-1/2 left-3 -translate-y-1/2 text-gray-400 text-xs"}),t.jsx("input",{type:"text",placeholder:"Tm kim...",autoFocus:!0,value:C,onChange:V=>N(V.target.value),className:"w-full pl-9 pr-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/20 transition-all text-sm placeholder:text-gray-400"})]})}),t.jsxs("ul",{className:"flex-grow max-h-64 overflow-y-auto p-2 space-y-0.5 custom-scrollbar",children:[y==="multiple"&&T.length>0&&t.jsx("li",{children:t.jsxs("label",{className:`flex items-center gap-3 w-full ${E?"px-2 py-1.5 text-xs":"px-3 py-2 text-sm lg:text-base"} text-gray-700 rounded-lg hover:bg-gray-50 transition-all cursor-pointer group`,children:[t.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${S?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:S&&t.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),t.jsx("input",{type:"checkbox",checked:S,onChange:()=>S?R():A(),className:"hidden"}),t.jsx("span",{className:"font-semibold italic text-xs text-gray-500 group-hover:text-accent-primary transition-colors",children:S?"B chn tt c":"Chn tt c"})]})}),T.length>0?T.map(V=>{const z=o.includes(V);return t.jsx("li",{children:t.jsxs("label",{className:`flex items-center gap-3 w-full ${E?"px-2 py-1.5 text-xs":"px-3 py-2 text-sm lg:text-base"} rounded-lg transition-all cursor-pointer group ${z?"bg-accent-primary/5 text-accent-primary font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[y==="multiple"&&t.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${z?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:z&&t.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),t.jsx("input",{type:y==="single"?"radio":"checkbox",checked:z,onChange:()=>P(V),className:"hidden"}),t.jsx("span",{children:V}),y==="single"&&z&&t.jsx("i",{className:"fas fa-check text-accent-primary ml-auto text-xs"})]})},V)}):t.jsxs("li",{className:`px-3 ${E?"py-4 text-xs":"py-8 text-sm"} text-gray-400 text-center flex flex-col items-center gap-2`,children:[t.jsx("i",{className:"fas fa-search text-2xl opacity-20"}),t.jsx("span",{children:"Khng tm thy kt qu"})]})]}),y==="multiple"&&t.jsxs("div",{className:"p-3 border-t border-gray-50 bg-gray-50/50 flex justify-between items-center",children:[t.jsxs(X,{onClick:I,variant:"ghost",size:"sm",className:"text-xs font-semibold text-red-500 hover:text-red-600 hover:bg-red-50 !px-2 h-8",children:["Xa chn (",o.length,")"]}),t.jsx(X,{onClick:()=>_(!1),variant:"primary",size:"sm",className:"px-4 py-1.5 text-xs font-bold rounded-lg shadow-sm shadow-accent-primary/30",children:"p dng"})]})]})]})},Ro="/ordermanagement/assets/than_tai_anim-D47ZTG_Q.gif",Tt=({icon:n,children:l,label:o,htmlFor:i})=>t.jsxs("div",{children:[t.jsx("label",{htmlFor:i,className:"hidden md:block text-sm font-medium text-text-secondary mb-1 md:mb-1.5",children:o}),t.jsxs("div",{className:"relative",children:[n&&t.jsx("i",{className:`fas ${n} absolute top-1/2 left-3 md:left-4 -translate-y-1/2 text-slate-500 peer-focus:text-accent-primary transition-colors text-base z-10`}),l]})]}),ha=({icon:n,title:l})=>t.jsxs("div",{className:"flex items-center gap-2 md:gap-3 p-3 md:p-4 border-b border-white/20 bg-accent-primary/5",children:[t.jsx("i",{className:`fas ${n} text-accent-secondary text-base md:text-lg`}),t.jsx("h3",{className:"text-sm md:text-base font-bold text-text-primary",children:l})]}),$o=({onSuccess:n,showToast:l,hideToast:o,existingOrderNumbers:i,initialVehicle:h,currentUser:m,vehicleAnalyticsData:f,onOpenImagePreview:x})=>{const[g,y]=u.useState({ten_ban_hang:m,ten_khach_hang:"",so_don_hang:"",dong_xe:"",phien_ban:"",ngoai_that:"",noi_that:"",ngay_coc:"",vin:""}),[c,b]=u.useState(null),j=new Date>=new Date("2026-01-05T00:00:00"),[w,_]=u.useState(!1),[C,N]=u.useState(""),[M,T]=u.useState(""),[P,A]=u.useState(null),[I,R]=u.useState(!1),[H,E]=u.useState(ct),[S,$]=u.useState(ua),V="peer w-full pl-10 md:pl-11 pr-3 md:pr-4 py-2 md:py-2.5 text-sm md:text-base rounded-lg focus:outline-none transition-all placeholder:text-text-placeholder futuristic-input",z=!!h;u.useEffect(()=>{if(h){y(Z=>({...Z,dong_xe:h["Dng xe"]||"",phien_ban:h["Phin bn"]||"",ngoai_that:h["Ngoi tht"]||"",noi_that:h["Ni tht"]||"",vin:h.VIN||""}));const W=h["Dng xe"];if(W){const Z=W.toLowerCase().replace(/\s+/g,""),F=Qa[Z];if(F){const v=ct.filter(Y=>{const D=Y.match(/\(([^)]+)\)/);return D&&D[1]&&F.includes(D[1].toLowerCase())});E(v)}else E(ct)}}},[h]);const L=W=>{const{name:Z,value:F}=W.target;y(v=>{const Y={...v,[Z]:F};if(Z==="dong_xe"){Y.phien_ban="",Y.ngoai_that="",Y.noi_that="",F==="VF 5"&&(Y.phien_ban="Plus");const D=F.toLowerCase().replace(/\s+/g,""),U=Qa[D];if(U){const te=ct.filter(de=>{const Me=de.match(/\(([^)]+)\)/);return Me&&Me[1]&&U.includes(Me[1].toLowerCase())});E(te)}else E(ct)}return Z==="phien_ban"&&(Y.ngoai_that="",Y.noi_that=""),Y})};u.useEffect(()=>{const{dong_xe:W,phien_ban:Z}=g;if(!W){$(ua);return}const F=W.toLowerCase(),v=Z.toLowerCase();let Y=ua;for(const D of yn)if(D.models.includes(F)&&(!D.versions||D.versions.includes(v))){Y=D.colors;break}$(Y),Y.length===1&&y(D=>({...D,noi_that:Y[0]}))},[g.dong_xe,g.phien_ban]);const J=u.useCallback(async W=>{if(b(W),y(Z=>({...Z,ngay_coc:""})),N(""),W){_(!0),N("ang chun b x l...");try{const Z=await ro(W,F=>N(F));Z?(y(F=>({...F,ngay_coc:Z})),N("  in Ngy Cc thnh cng!")):N("Li: Khng tm thy ngy gi hp l trong nh.")}catch(Z){const F=Z instanceof Error?Z.message:"X l nh tht bi.";F.includes("Tesseract")&&l("Li Ti Th Vin","Th vin nhn dng nh cha sn sng. Vui lng lm mi trang (F5).","error",5e3),N(`Li: ${F}`)}finally{_(!1)}}},[l]),q=()=>{y({ten_ban_hang:m,ten_khach_hang:"",so_don_hang:"",dong_xe:"",phien_ban:"",ngoai_that:"",noi_that:"",ngay_coc:"",vin:""}),J(null)};u.useEffect(()=>{var U,te;if(!f||z)return;const{dong_xe:W,phien_ban:Z,ngoai_that:F}=g;if(!W||!Z||!F){T(""),A(null);return}const v=`${W}|${Z}|${F}`.trim().toLowerCase(),Y=((U=f.pendingRequestCount)==null?void 0:U[v])||0,D=((te=f.stockStatus)==null?void 0:te[v])||{count:0,isSlowMoving:!1};Y>0?(T(`Lu : ang c <strong>${Y}</strong> yu cu khc ang ch ghp cho Mu xe ny.`),A("hot")):D.isSlowMoving&&D.count>0?(T("Gi : Xe ny ang c sn trong kho, c th giao ngay."),A("slow")):(T(""),A(null))},[g.dong_xe,g.phien_ban,g.ngoai_that,f,z]);const ee=async W=>{if(W.preventDefault(),["ten_khach_hang","so_don_hang","dong_xe","phien_ban","ngoai_that","noi_that"].some(v=>!g[v])){l("Thiu Thng Tin","Vui lng in y  thng tin xe v khch hng.","warning",3e3);return}if(!new RegExp("^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$").test(g.so_don_hang)){l("Sai nh Dng","S n hng khng ng nh dng. VD: N31913-VSO-25-04-0028","warning",4e3);return}if(i.includes(g.so_don_hang)){l("n Hng Trng Lp",`S n hng "${g.so_don_hang}"  tn ti.`,"error",4e3);return}if(!c){l("Thiu Chng T","Vui lng ti ln nh y nhim chi.","warning",3e3);return}if(!g.ngay_coc){l("Ch X L nh","Vui lng ch x l Ngy cc t nh.","warning",3e3);return}R(!0),l("ang Gi Yu Cu","Vui lng ch trong giy lt...","loading");try{const v=await po(g,c);if(o(),v.status==="SUCCESS"&&v.newRecord)n(v.newRecord),q();else throw new Error(v.message||"Gi yu cu tht bi.")}catch(v){o();const Y=v instanceof Error?v.message:"Li khng xc nh.";l("Gi Yu Cu Tht Bi",Y,"error",5e3)}finally{R(!1)}},ie=W=>{W.preventDefault(),x([{src:"pictures/uynhiemchi.webp",originalUrl:"pictures/uynhiemchi.webp",label:"Mu y nhim chi hp l"}],0,"nh Mu")},oe=g.dong_xe?as[g.dong_xe]||bn:[],pe={hot:"bg-warning-bg border-warning/50 text-warning",slow:"bg-success-bg border-success/50 text-success"};return t.jsxs("form",{onSubmit:ee,className:"flex flex-col h-full relative",children:[t.jsxs("div",{className:"flex-grow overflow-hidden p-4 md:p-6 relative z-10",children:[z&&t.jsxs("div",{className:"p-3 mb-4 rounded-lg border border-accent-primary/50 bg-surface-accent flex items-start gap-3 shadow-sm relative z-10",children:[t.jsx("i",{className:"fas fa-lock text-accent-primary text-xl mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-text-primary text-sm",children:"Yu cu cho xe  gi"}),t.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:["ang to yu cu cho VIN: ",t.jsx("strong",{className:"font-mono text-accent-primary",children:g.vin}),"."]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-x-6 xl:gap-x-8 gap-y-4 md:gap-y-8 relative z-10 h-full",children:[t.jsxs("section",{className:"bg-white/60 backdrop-blur-md rounded-2xl p-0 border border-white/40 shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full overflow-hidden",children:[t.jsx(ha,{icon:"fa-cogs",title:"1. Cu hnh Xe"}),t.jsxs("div",{className:"p-3 md:p-4 space-y-2 md:space-y-3 flex-grow overflow-y-auto custom-scrollbar",children:[t.jsx(Tt,{label:"Dng xe",htmlFor:"dong_xe",children:t.jsx(Bt,{id:"dong_xe",label:"Dng xe",placeholder:"Chn dng xe",options:Object.keys(as),selectedOptions:g.dong_xe?[g.dong_xe]:[],onChange:W=>L({target:{name:"dong_xe",value:W[0]||""}}),icon:"fa-car",selectionMode:"single",variant:"modern",disabled:z,searchable:!1})}),t.jsx(Tt,{label:"Phin bn",htmlFor:"phien_ban",children:t.jsx(Bt,{id:"phien_ban",label:"Phin bn",placeholder:"Chn phin bn",options:oe,selectedOptions:g.phien_ban?[g.phien_ban]:[],onChange:W=>L({target:{name:"phien_ban",value:W[0]||""}}),icon:"fa-code-branch",selectionMode:"single",variant:"modern",disabled:!g.dong_xe||z,searchable:!1})}),t.jsx(Tt,{label:"Ngoi tht",htmlFor:"ngoai_that",children:t.jsx(Bt,{id:"ngoai_that",label:"Ngoi tht",placeholder:"Chn mu ngoi tht",options:H,selectedOptions:g.ngoai_that?[g.ngoai_that]:[],onChange:W=>L({target:{name:"ngoai_that",value:W[0]||""}}),icon:"fa-fill-drip",selectionMode:"single",variant:"modern",disabled:!g.phien_ban||z,searchable:!1})}),t.jsx(Tt,{label:"Ni tht",htmlFor:"noi_that",children:t.jsx(Bt,{id:"noi_that",label:"Ni tht",placeholder:"Chn ni tht",options:S,selectedOptions:g.noi_that?[g.noi_that]:[],onChange:W=>L({target:{name:"noi_that",value:W[0]||""}}),icon:"fa-couch",selectionMode:"single",variant:"modern",disabled:!g.phien_ban||z,searchable:!1})}),M&&P&&t.jsxs("div",{className:`p-3 mt-2 rounded-lg border text-sm flex items-start ${pe[P]}`,children:[t.jsx("i",{className:`fas ${P==="hot"?"fa-exclamation-triangle":"fa-check-circle"} mr-3 mt-1`}),t.jsx("p",{dangerouslySetInnerHTML:{__html:M}})]})]})]}),t.jsxs("section",{className:"bg-white/60 backdrop-blur-md rounded-2xl p-0 border border-white/40 shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full overflow-hidden",children:[t.jsx(ha,{icon:"fa-user-circle",title:"2. Thng tin & Chng t"}),t.jsxs("div",{className:"p-3 md:p-4 space-y-2 md:space-y-3 flex-grow overflow-y-auto custom-scrollbar",children:[t.jsx(Tt,{icon:"fa-user-tie",label:"Tn khch hng",htmlFor:"ten_khach_hang",children:t.jsx("input",{id:"ten_khach_hang",type:"text",name:"ten_khach_hang",value:g.ten_khach_hang,onChange:L,onInput:W=>W.currentTarget.value=W.currentTarget.value.toUpperCase(),required:!0,className:V,placeholder:"VD: NGUYEN VAN A"})}),t.jsx(Tt,{icon:"fa-barcode",label:"S n hng",htmlFor:"so_don_hang",children:t.jsx("input",{id:"so_don_hang",type:"text",name:"so_don_hang",value:g.so_don_hang,onChange:L,required:!0,pattern:"^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$",title:"nh dng: Nxxxxx-XXX-yy-mm-zzzz",onInvalid:W=>W.target.setCustomValidity("S n hng khng ng nh dng. Yu cu nh dng: Nxxxxx-XXX-yy-mm-zzzz"),onInput:W=>W.target.setCustomValidity(""),className:V,placeholder:"VD: N12345-VSO-24-01-0001"})}),t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[t.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"y nhim chi"}),t.jsxs(X,{type:"button",onClick:ie,variant:"ghost",size:"sm",className:"text-xs text-accent-secondary hover:underline hover:text-accent-primary-hover !p-0 !h-auto",children:[t.jsx("i",{className:"fas fa-info-circle mr-1"}),"Xem mu"]})]}),t.jsx(Lo,{onFileSelect:J,isProcessing:w,ocrStatus:C,showToast:l})]}),t.jsx("div",{className:"mt-2",children:t.jsx(Tt,{icon:"fa-calendar-alt",label:"Ngy Cc (T ng in t nh)",htmlFor:"ngay_coc",children:t.jsx("input",{id:"ngay_coc",name:"ngay_coc",type:"datetime-local",value:g.ngay_coc?g.ngay_coc.slice(0,16):"",required:!0,readOnly:!0,className:`${V} !bg-surface-input cursor-not-allowed`})})})]})]}),t.jsxs("section",{className:"bg-white/60 backdrop-blur-md rounded-2xl p-0 border border-white/40 shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full relative overflow-hidden group",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-accent-primary/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),t.jsx(ha,{icon:"fa-eye",title:"3. Xem trc & Xc thc"}),t.jsxs("div",{className:"p-3 md:p-4 flex flex-col h-full",children:[t.jsxs("div",{className:"relative h-52 bg-surface-ground rounded-xl flex items-center justify-center p-4 border border-border-primary text-center shadow-inner-sm z-10",children:[g.dong_xe&&g.ngoai_that?t.jsx(xa,{model:g.dong_xe,exteriorColor:g.ngoai_that,className:"max-w-full max-h-full object-contain drop-shadow-lg",alt:"Cu hnh xe"}):t.jsxs("div",{className:"text-text-placeholder transition-all duration-300",children:[t.jsx("i",{className:"fas fa-car text-5xl text-slate-400 mb-3 opacity-50"}),t.jsx("p",{className:"font-semibold text-sm text-slate-500",children:"Xem trc xe ca bn"}),t.jsx("p",{className:"text-xs mt-1",children:"Chn cu hnh xe  xem trc"})]}),(I||w)&&t.jsx("div",{className:"absolute inset-0 bg-white/50 backdrop-blur-sm flex items-center justify-center rounded-xl",children:t.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-accent-primary"})})]}),j&&t.jsx("div",{className:"flex-grow relative mt-2 flex justify-center items-end min-h-[60px]",children:t.jsx("img",{src:Ro,alt:"Thn Ti",className:"w-24 md:w-32 object-contain animate-bounce-slow drop-shadow-xl"})})]})]})]})]}),t.jsxs("div",{className:"flex-shrink-0 flex flex-row justify-end items-center gap-3 p-4 md:p-6 border-t border-white/20 relative z-10 bg-white/60 backdrop-blur-md",children:[t.jsx(X,{type:"button",onClick:q,disabled:I||z,variant:"secondary",size:"sm",className:"w-auto",leftIcon:t.jsx("i",{className:"fas fa-eraser"}),children:"Xa Nhp"}),t.jsx(X,{type:"submit",disabled:I,isLoading:I,variant:"primary",size:"sm",className:"w-auto",leftIcon:I?void 0:t.jsx("i",{className:"fas fa-paper-plane"}),children:"Xc nhn & Gi"})]})]})},Vo=_e.memo($o),an="/ordermanagement/assets/lantern_anim_new-DHaWNgRc.gif",Ho=({isOpen:n,onClose:l,onSuccess:o,showToast:i,hideToast:h,existingOrderNumbers:m,initialVehicle:f,currentUser:x,vehicleAnalyticsData:g,onOpenImagePreview:y})=>{const c=new Date>=new Date("2026-01-05T00:00:00");return n?t.jsx("div",{className:"fixed inset-0 bg-slate-900/80 z-[60] flex items-center justify-center p-0 md:p-4 animate-fade-in",onClick:l,children:t.jsxs("div",{className:`relative bg-white w-full h-[100dvh] md:h-[90vh] md:max-w-7xl flex flex-col md:rounded-2xl shadow-2xl animate-fade-in-scale-up border-[3px] overflow-hidden ${c?"border-[#D32F2F]":"border-gray-200"}`,onClick:b=>b.stopPropagation(),children:[t.jsxs("header",{className:`relative flex items-center justify-center p-5 border-b-2 flex-shrink-0 z-10 bg-white ${c?"border-[#D32F2F]/20":"border-gray-100"}`,children:[t.jsxs("div",{className:"relative text-center animate-fade-in-down",children:[c&&t.jsxs(t.Fragment,{children:[t.jsx("img",{src:an,className:"absolute -top-4 -left-12 md:-left-32 w-16 md:w-24 h-auto z-[60] drop-shadow-md pointer-events-none select-none",alt:"",draggable:"false"}),t.jsx("img",{src:an,className:"absolute -top-4 -right-12 md:-right-32 w-16 md:w-24 h-auto z-[60] drop-shadow-md pointer-events-none select-none",alt:"",draggable:"false"})]}),t.jsx("h2",{className:`text-2xl sm:text-3xl font-bold uppercase tracking-wide drop-shadow-sm ${c?"text-[#D32F2F] font-serif":"text-gray-800 font-sans"}`,children:"Yu Cu Ghp Xe"}),c?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-24 h-1 bg-[#FFD700] mx-auto my-1.5 rounded-full shadow-sm"}),t.jsx("p",{className:"text-sm text-[#8B5E3C] font-medium",children:"Khai xun c lc - Vn dm bnh an"})]}):t.jsx("div",{className:"w-16 h-1 bg-blue-500 mx-auto my-2 rounded-full"})]}),t.jsx(X,{onClick:l,variant:"ghost",className:`absolute top-3 right-3 md:top-4 md:right-4 w-9 h-9 rounded-full flex items-center justify-center transition-colors !p-0 z-50 ${c?"text-[#D32F2F] hover:bg-[#FFE0B2] hover:text-[#B71C1C] border border-[#D32F2F]/30":"text-gray-500 hover:bg-gray-100"}`,children:t.jsx("i",{className:"fas fa-times text-lg"})})]}),t.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden relative z-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]",children:t.jsx(Vo,{onSuccess:o,showToast:i,hideToast:h,existingOrderNumbers:m,initialVehicle:f,currentUser:x,vehicleAnalyticsData:g,onOpenImagePreview:y})}),c&&t.jsx("div",{className:"absolute bottom-0 left-0 w-full h-2 bg-gradient-to-r from-[#D32F2F] via-[#FFD700] to-[#D32F2F]"})]})}):null},zo=_e.memo(Ho),Yt=({icon:n,children:l})=>t.jsx("div",{children:t.jsxs("div",{className:"relative",children:[t.jsx("i",{className:`fas ${n} absolute top-1/2 left-4 -translate-y-1/2 text-slate-500 peer-focus:text-accent-primary transition-colors text-base z-10`}),l]})}),Uo=({isOpen:n,onClose:l,onSuccess:o,showToast:i,order:h,existingOrderNumbers:m})=>{var T;const[f,x]=u.useState({}),[g,y]=u.useState(!1),[c,b]=u.useState(ct),j=dt();u.useEffect(()=>{h&&x({"Tn khch hng":h["Tn khch hng"],"S n hng":h["S n hng"],"Dng xe":h["Dng xe"],"Phin bn":h["Phin bn"],"Ngoi tht":h["Ngoi tht"],"Ni tht":h["Ni tht"],"Ngy cc":h["Ngy cc"]?Ee(h["Ngy cc"]).format("YYYY-MM-DDTHH:mm"):""})},[h]);const w=P=>{const{name:A,value:I}=P.target;x(R=>{const H={...R,[A]:I};return A==="Dng xe"&&(H["Phin bn"]="",H["Ngoi tht"]="",H["Ni tht"]="",I==="VF 5"&&(H["Phin bn"]="Plus")),A==="Phin bn"&&(H["Ngoi tht"]="",H["Ni tht"]=""),H})};if(u.useEffect(()=>{const{"Dng xe":P,"Phin bn":A}=f;if(!P){b(ct);return}const I=P.toLowerCase(),R=A.toLowerCase();let H=ct;for(const E of yn)if(E.models.includes(I)&&(!E.versions||E.versions.includes(R))){H=E.colors;break}b(H),H.length===1&&f["Ni tht"]!==H[0]&&x(E=>({...E,"Ni tht":H[0]}))},[f["Dng xe"],f["Phin bn"]]),!n||!h)return null;const _=(T=h["Kt qu"])==null?void 0:T.toLowerCase().includes(" ghp"),C="peer w-full pl-11 pr-4 py-2.5 rounded-lg focus:outline-none transition-all placeholder:text-text-placeholder futuristic-input",N=async P=>{if(P.preventDefault(),["Tn khch hng","S n hng","Dng xe","Phin bn","Ngoi tht","Ni tht","Ngy cc"].some(R=>!f[R])){i("Thiu Thng Tin","Vui lng in y  thng tin.","warning");return}if(!new RegExp("^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$").test(f["S n hng"])){i("Sai nh Dng","S n hng khng ng nh dng. VD: N31913-VSO-25-04-0028","warning");return}if(m.includes(f["S n hng"])){i("n Hng Trng Lp",`S n hng "${f["S n hng"]}"  tn ti.`,"error");return}y(!0),i("ang cp nht...","Vui lng ch trong giy lt.","loading");try{const R={};if(Object.keys(f).forEach(E=>{const S=E,$=h[S],V=f[S];if(S==="Ngy cc"){const z=$?Ee($).format("YYYY-MM-DDTHH:mm"):"",L=V?Ee(V).format("YYYY-MM-DDTHH:mm"):"";z!==L&&(R[S]=new Date(V).toISOString())}else String(V||"")!==String($||"")&&(R[S]=V)}),Object.keys(R).length===0){i("Thng Bo","Khng c thay i no  lu.","info"),l();return}const H=await wo(h["S n hng"],R);o(H.message)}catch(R){const H=R instanceof Error?R.message:"Li khng xc nh.";i("Cp Nht Tht Bi",H,"error",5e3)}finally{y(!1)}},M=f["Dng xe"]?as[f["Dng xe"]]||bn:[];return t.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("form",{onSubmit:N,className:"bg-surface-card w-full md:max-w-2xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:P=>P.stopPropagation(),style:j,children:[t.jsxs("header",{className:"flex items-center justify-between p-5 border-b border-border-primary",children:[t.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Chnh Sa n Hng"}),t.jsx("button",{type:"button",onClick:l,className:"w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 space-y-4 custom-scrollbar",children:[_&&t.jsxs("div",{className:"p-3 mb-4 rounded-lg border border-amber-500/50 bg-amber-500/10 flex items-start gap-3 shadow-sm",children:[t.jsx("i",{className:"fas fa-info-circle text-amber-500 text-lg mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-amber-700 text-sm",children:"n hng  ghp xe"}),t.jsx("p",{className:"text-xs text-amber-600 mt-1",children:'Thng tin xe (Dng xe, Phin bn, Mu sc) khng th thay i. Vui lng "Hy ghp" nu mun thay i.'})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(Yt,{icon:"fa-user-tie",label:"Tn khch hng",htmlFor:"Tn khch hng",children:t.jsx("input",{id:"Tn khch hng",type:"text",name:"Tn khch hng",value:f["Tn khch hng"]||"",onChange:w,onInput:P=>P.currentTarget.value=P.currentTarget.value.toUpperCase(),required:!0,className:C,placeholder:"VD: NGUYEN VAN A"})}),t.jsx(Yt,{icon:"fa-barcode",label:"S n hng",htmlFor:"S n hng",children:t.jsx("input",{id:"S n hng",type:"text",name:"S n hng",value:f["S n hng"]||"",onChange:w,required:!0,pattern:"^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$",title:"nh dng: Nxxxxx-XXX-yy-mm-zzzz",onInvalid:P=>P.target.setCustomValidity("S n hng khng ng nh dng."),onInput:P=>P.target.setCustomValidity(""),className:C,placeholder:"VD: N12345-VSO-24-01-0001"})}),t.jsx(Yt,{icon:"fa-car",label:"Dng xe",htmlFor:"Dng xe",children:t.jsxs("select",{id:"Dng xe",name:"Dng xe",value:f["Dng xe"]||"",onChange:w,required:!0,className:`${C} futuristic-select disabled:opacity-50`,disabled:_,children:[t.jsx("option",{value:"",disabled:!0,children:"Chn dng xe"}),Object.keys(as).map(P=>t.jsx("option",{value:P,children:P},P))]})}),t.jsx(Yt,{icon:"fa-sitemap",label:"Phin bn",htmlFor:"Phin bn",children:t.jsxs("select",{id:"Phin bn",name:"Phin bn",value:f["Phin bn"]||"",onChange:w,required:!0,disabled:!f["Dng xe"]||_,className:`${C} futuristic-select disabled:opacity-50`,children:[t.jsx("option",{value:"",disabled:!0,children:"Chn phin bn"}),M.map(P=>t.jsx("option",{value:P,children:P},P))]})}),t.jsx(Yt,{icon:"fa-palette",label:"Ngoi tht",htmlFor:"Ngoi tht",children:t.jsxs("select",{id:"Ngoi tht",name:"Ngoi tht",value:f["Ngoi tht"]||"",onChange:w,required:!0,disabled:!f["Phin bn"]||_,className:`${C} futuristic-select disabled:opacity-50`,children:[t.jsx("option",{value:"",disabled:!0,children:"Chn mu ngoi tht"}),ct.map(P=>t.jsx("option",{value:P,children:P},P))]})}),t.jsx(Yt,{icon:"fa-chair",label:"Ni tht",htmlFor:"Ni tht",children:t.jsxs("select",{id:"Ni tht",name:"Ni tht",value:f["Ni tht"]||"",onChange:w,required:!0,disabled:!f["Phin bn"]||_,className:`${C} futuristic-select disabled:opacity-50`,children:[t.jsx("option",{value:"",disabled:!0,children:"Chn ni tht"}),c.map(P=>t.jsx("option",{value:P,children:P},P))]})}),t.jsx("div",{className:"md:col-span-2",children:t.jsx(Yt,{icon:"fa-calendar-alt",label:"Ngy cc",htmlFor:"Ngy cc",children:t.jsx("input",{id:"Ngy cc",name:"Ngy cc",type:"datetime-local",value:f["Ngy cc"]||"",onChange:w,required:!0,className:`${C} disabled:opacity-50 disabled:cursor-not-allowed`,disabled:!0})})})]})]})}),t.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end items-center gap-3 bg-surface-card relative z-10",children:[t.jsx(X,{onClick:l,variant:"secondary",size:"sm",disabled:g,leftIcon:t.jsx("i",{className:"fas fa-times"}),children:"Hy"}),t.jsx(X,{onClick:N,variant:"primary",size:"sm",isLoading:g,leftIcon:t.jsx("i",{className:"fas fa-save"}),children:"Lu Thay i"})]})]})})},Et=n=>typeof n!="string"?"":n.trim().replace(/\s+/g," ").normalize("NFC"),Ys=async n=>{const l=new URLSearchParams(n);return(await axios.post(ls,l)).data},Bo=async(n,l)=>{try{const o=await Ys({action:"login",username:n.toLowerCase(),password:l});if(o.success&&o.username&&o.consultantName){const i=o.consultantName||o.username,h=o.role||"T vn bn hng",m=o.email;return sessionStorage.setItem("isLoggedIn","true"),sessionStorage.setItem("currentUser",o.username),sessionStorage.setItem("currentConsultant",i),sessionStorage.setItem("userRole",h),m&&sessionStorage.setItem("userEmail",m),{success:!0,username:o.username,consultantName:i,role:h,email:m}}else return{success:!1,message:o.message||"Tn ng nhp hoc mt khu khng ng."}}catch(o){return console.error("Login API error:",o),{success:!1,message:"Khng th kt ni n my ch. Vui lng th li."}}},Wo=async(n,l,o)=>{try{const i=await Ys({action:"changePassword",username:n.toLowerCase(),oldPassword:l,newPassword:o});return i.success?{success:!0,message:i.message}:{success:!1,message:i.message||"i mt khu tht bi."}}catch(i){return console.error("Change Password API error:",i),{success:!1,message:"Khng th kt ni n my ch. Vui lng th li."}}},Go=async n=>{try{const l=await Ys({action:"forgotPassword",email:n});return l.success?{success:!0,message:l.message}:{success:!1,message:l.message||"Yu cu m OTP tht bi."}}catch(l){return console.error("Forgot Password API error:",l),{success:!1,message:l instanceof Error?l.message:"Khng th kt ni n my ch."}}},qo=async(n,l,o)=>{try{const i=await Ys({action:"resetPassword",email:n,otp:l,newPassword:o});return i.success?{success:!0,message:i.message}:{success:!1,message:i.message||"t li mt khu tht bi."}}catch(i){return console.error("Reset Password API error:",i),{success:!1,message:i instanceof Error?i.message:"Khng th kt ni n my ch."}}},Xo=({isOpen:n,onClose:l,showToast:o,username:i})=>{const[h,m]=u.useState(""),[f,x]=u.useState(""),[g,y]=u.useState(""),[c,b]=u.useState(!1),j=dt(),w=async N=>{if(N.preventDefault(),!h||!f||!g){o("Thiu Thng Tin","Vui lng in y  cc trng.","warning");return}if(f.length<6){o("Mt Khu Yu","Mt khu mi phi c t nht 6 k t.","warning");return}if(f!==g){o("Li","Mt khu xc nhn khng khp.","error");return}if(h===f){o("Lu ","Mt khu mi phi khc mt khu c.","info");return}b(!0);const M=await Wo(i,h,f);b(!1),M.success?(o("Thnh Cng",M.message||"Mt khu  c thay i thnh cng!","success"),l()):o("Tht Bi",M.message||"i mt khu khng thnh cng.","error")},_=()=>{m(""),x(""),y(""),b(!1),l()};if(!n)return null;const C="peer w-full pl-12 pr-4 py-3 bg-surface-ground text-text-primary border border-border-primary rounded-lg focus:outline-none focus:border-accent-primary transition-all placeholder:text-text-placeholder focus:shadow-glow-accent";return t.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-0 md:p-4",onClick:_,children:t.jsx("div",{className:"bg-surface-card w-full md:max-w-md h-[100dvh] md:h-auto rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:N=>N.stopPropagation(),style:j,children:t.jsxs("form",{onSubmit:w,children:[t.jsxs("header",{className:"relative flex flex-col items-center justify-center p-6 text-center bg-surface-card border-b border-border-primary",children:[t.jsxs("div",{className:"animate-fade-in-down",children:[t.jsx("h2",{className:"text-xl font-bold text-gradient",children:"i Mt Khu"}),t.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Bo mt ti khon ca bn."})]}),t.jsx("button",{type:"button",onClick:_,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex-shrink-0 flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsxs("main",{className:"p-4 md:p-6 space-y-4 overflow-y-auto flex-grow min-h-0",children:[t.jsxs("div",{className:"relative",children:[t.jsx("i",{className:"fas fa-shield-alt absolute top-1/2 left-4 -translate-y-1/2 text-text-secondary peer-focus:text-accent-primary"}),t.jsx("input",{type:"password",value:h,onChange:N=>m(N.target.value),placeholder:"Mt khu c",required:!0,className:C})]}),t.jsxs("div",{className:"relative",children:[t.jsx("i",{className:"fas fa-lock absolute top-1/2 left-4 -translate-y-1/2 text-text-secondary peer-focus:text-accent-primary"}),t.jsx("input",{type:"password",value:f,onChange:N=>x(N.target.value),placeholder:"Mt khu mi (t nht 6 k t)",required:!0,className:C})]}),t.jsxs("div",{className:"relative",children:[t.jsx("i",{className:"fas fa-check-circle absolute top-1/2 left-4 -translate-y-1/2 text-text-secondary peer-focus:text-accent-primary"}),t.jsx("input",{type:"password",value:g,onChange:N=>y(N.target.value),placeholder:"Xc nhn mt khu mi",required:!0,className:C})]})]}),t.jsxs("footer",{className:"p-4 border-t border-border-primary flex justify-end gap-4 bg-surface-ground rounded-b-2xl",children:[t.jsx("button",{type:"button",onClick:_,disabled:c,className:"btn-secondary",children:"Hy"}),t.jsx("button",{type:"submit",disabled:c,className:"btn-primary",children:c?t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-spinner fa-spin mr-2"})," ang x l..."]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-save mr-2"})," Xc Nhn"]})})]})]})})})},Ko=({isOpen:n,onClose:l,images:o=[],startIndex:i=0,customerName:h})=>{const[m,f]=u.useState(i),[x,g]=u.useState(!0),[y,c]=u.useState(null),[b,j]=u.useState(null),[w,_]=u.useState(0),[C,N]=u.useState(!1),[M,T]=u.useState({scale:1,x:0,y:0,rotate:0}),[P,A]=u.useState(!1),[I,R]=u.useState({x:0,y:0}),[H,E]=u.useState(!0),S=u.useRef(null),$=u.useRef(null),V=()=>T({scale:1,x:0,y:0,rotate:0}),z=u.useCallback(v=>{if(o.length===0)return;const Y=(v+o.length)%o.length;Y!==m&&(f(Y),V())},[o,m]);u.useEffect(()=>{if(n){const v=o.length>0&&i>=0&&i<o.length?i:0;f(v),E(!0)}},[n,i,o]),u.useEffect(()=>{if(!n||o.length===0)return;g(!0),c(null),j(null),_(0),N(!1);const v=o[m];if(!v)return;const Y=Ja(v.src,1920);j(Y)},[n,o,m]);const L=u.useCallback(v=>{v.key==="Escape"&&l(),v.key==="ArrowRight"&&z(m+1),v.key==="ArrowLeft"&&z(m-1),v.key===" "&&(v.preventDefault(),E(Y=>!Y))},[l,z,m]);u.useEffect(()=>{if(n)return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[n,L]);const J=v=>{if(!S.current)return;v.preventDefault();const Y=.1,{deltaY:D}=v,U=M.scale-(D>0?Y:-Y),te=Math.max(.2,Math.min(U,10));te<=1?T(de=>({...de,scale:te,x:0,y:0})):T(de=>({...de,scale:te}))},q=v=>{M.scale<=1||(v.preventDefault(),A(!0),R({x:v.clientX-M.x,y:v.clientY-M.y}))},ee=v=>{!P||M.scale<=1||(v.preventDefault(),T(Y=>({...Y,x:v.clientX-I.x,y:v.clientY-I.y})))},ie=v=>{P&&(v.preventDefault(),A(!1))},oe=v=>{const Y=M.scale+(v==="in"?.2:-.2),D=Math.max(.2,Math.min(Y,10));D<=1?T(U=>({...U,scale:D,x:0,y:0})):T(U=>({...U,scale:D}))},pe=v=>{T(Y=>({...Y,rotate:Y.rotate+(v==="right"?90:-90)}))},W=()=>{var v;document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():(v=$.current)==null||v.requestFullscreen().catch(Y=>{console.error(`Error attempting to enable full-screen mode: ${Y.message} (${Y.name})`)})},Z=()=>{const v=o[m];if(!v)return;const Y=gn(v.originalUrl||v.src),D=lo(h,v.label),U=document.createElement("a");U.href=Y,U.setAttribute("download",D),document.body.appendChild(U),U.click(),document.body.removeChild(U)};if(!n)return null;const F=o.length>0?o[m]:null;return t.jsxs("div",{ref:$,className:"fixed inset-0 bg-black/95 z-[100] flex flex-col animate-fade-in overflow-hidden select-none",onClick:()=>E(v=>!v),onWheel:J,children:[t.jsxs("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",onMouseMove:ee,onMouseUp:ie,onMouseLeave:ie,children:[x&&t.jsxs("div",{className:"flex flex-col items-center gap-3 text-white/70",children:[t.jsx("i",{className:"fas fa-circle-notch fa-spin text-4xl"}),t.jsx("span",{className:"text-sm font-medium",children:"ang ti nh..."})]}),y&&!x&&t.jsxs("div",{className:"text-center p-6 bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 max-w-sm mx-4 text-white",onClick:v=>v.stopPropagation(),children:[t.jsx("i",{className:"fas fa-exclamation-triangle text-4xl text-amber-400 mb-4"}),t.jsx("h3",{className:"font-bold text-lg mb-2",children:"Khng th ti nh"}),t.jsx("p",{className:"text-sm text-white/70 mb-4",children:y==="IMAGE_LOAD_FAILED"?"C li xy ra khi ti nh t ngun.":y}),(F==null?void 0:F.originalUrl)&&t.jsxs("a",{href:F.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-white text-black rounded-full font-bold hover:bg-gray-200 transition-colors text-sm",children:["M trong tab mi ",t.jsx("i",{className:"fas fa-external-link-alt text-xs"})]})]}),b&&!y&&!C&&t.jsx("img",{ref:S,src:b,alt:F==null?void 0:F.label,className:`max-w-full max-h-full object-contain transition-opacity duration-300 ${x?"opacity-0":"opacity-100"}`,style:{transform:`scale(${M.scale}) translate(${M.x/M.scale}px, ${M.y/M.scale}px) rotate(${M.rotate}deg)`,cursor:P?"grabbing":M.scale>1?"grab":"default",transition:P?"none":"transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)",willChange:"transform"},onLoad:()=>g(!1),onError:()=>{if(F){if(w===0){_(1);const Y=io(F.src);if(Y!==b){j(Y);return}}const v=is(F.src);if(v&&!C){N(!0),j(`https://drive.google.com/file/d/${v}/preview`),g(!1);return}}g(!1),c("IMAGE_LOAD_FAILED")},onMouseDown:q,onClick:v=>v.stopPropagation(),onDoubleClick:v=>{v.stopPropagation(),W()}}),C&&b&&t.jsxs("div",{className:"w-full h-full md:max-w-6xl md:max-h-[85vh] relative shadow-2xl md:rounded-2xl overflow-hidden bg-[#1e1e1e] border border-white/10",children:[t.jsx("iframe",{src:b,title:"File Preview",className:"w-full h-full w-full h-full border-0",allow:"autoplay",onLoad:()=>g(!1)}),t.jsx("div",{className:"absolute top-0 right-0 w-14 h-14 bg-[#1e1e1e] z-20 pointer-events-none"})]})]}),t.jsxs("div",{className:`absolute top-0 left-0 right-0 h-24 bg-gradient-to-b from-black/90 via-black/50 to-transparent z-50 flex items-start pt-6 px-6 justify-between transition-all duration-500 transform ${H?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,style:{pointerEvents:H?"auto":"none"},onClick:v=>v.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center gap-4 animate-slide-in-left",children:[t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 backdrop-blur-md border border-white/10 flex items-center justify-center shadow-glow-sm",children:t.jsx("i",{className:"fas fa-image text-xl text-purple-500 drop-shadow-md"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg text-white tracking-wide drop-shadow-sm line-clamp-1 max-w-[200px] md:max-w-md",children:F==null?void 0:F.label}),t.jsxs("p",{className:"text-xs text-white/60 font-medium tracking-wider uppercase",children:[h,"  ",m+1,"/",o.length]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 animate-slide-in-right",children:[t.jsxs("button",{onClick:Z,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-white/20 backdrop-blur-md border border-white/10 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-cyan-500/20 hover:scale-110 active:scale-95",title:"Ti v",children:[t.jsx("i",{className:"fas fa-download text-lg group-hover:text-cyan-400 transition-colors"}),t.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/80 text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Ti v"})]}),t.jsx("button",{onClick:l,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-red-500/20 backdrop-blur-md border border-white/10 hover:border-red-500/50 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-red-500/20 hover:scale-110 active:scale-95",title:"ng (Esc)",children:t.jsx("i",{className:"fas fa-times text-lg group-hover:text-red-400 transition-colors"})})]})]}),o.length>1&&H&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:v=>{v.stopPropagation(),z(m-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 text-white flex items-center justify-center hover:bg-black/50 transition-all hover:scale-110 active:scale-95 z-10 hidden sm:flex",children:t.jsx("i",{className:"fas fa-chevron-left text-xl"})}),t.jsx("button",{onClick:v=>{v.stopPropagation(),z(m+1)},className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 text-white flex items-center justify-center hover:bg-black/50 transition-all hover:scale-110 active:scale-95 z-10 hidden sm:flex",children:t.jsx("i",{className:"fas fa-chevron-right text-xl"})})]}),t.jsxs("div",{className:`absolute bottom-0 left-0 right-0 p-6 transition-all duration-300 transform ${H?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,onClick:v=>v.stopPropagation(),children:[t.jsxs("div",{className:"max-w-3xl mx-auto flex flex-col gap-4",children:[o.length>1&&t.jsx("div",{className:"flex justify-center overflow-x-auto py-2 px-4 gap-2 no-scrollbar mask-gradient",children:o.map((v,Y)=>t.jsx("button",{onClick:()=>z(Y),className:`relative w-12 h-12 sm:w-16 sm:h-16 flex-shrink-0 rounded-lg overflow-hidden transition-all duration-300 border-2 ${m===Y?"border-white scale-110 shadow-lg ring-2 ring-black/20":"border-transparent opacity-50 hover:opacity-100 hover:scale-105"}`,children:t.jsx("img",{src:Ja(v.src,320),alt:v.label,className:"w-full h-full object-cover"})},Y))}),t.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-4 bg-black/60 backdrop-blur-xl border border-white/10 px-6 py-3 rounded-full shadow-2xl mx-auto",children:[t.jsx("button",{onClick:()=>oe("out"),disabled:M.scale<=.2,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors disabled:opacity-30",children:t.jsx("i",{className:"fas fa-minus"})}),t.jsxs("span",{className:"text-sm font-mono text-white/90 w-12 text-center select-none",children:[Math.round(M.scale*100),"%"]}),t.jsx("button",{onClick:()=>oe("in"),disabled:M.scale>=10,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors disabled:opacity-30",children:t.jsx("i",{className:"fas fa-plus"})}),t.jsx("div",{className:"w-px h-6 bg-white/20"}),t.jsx("button",{onClick:()=>pe("left"),className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"Xoay tri",children:t.jsx("i",{className:"fas fa-undo"})}),t.jsx("button",{onClick:()=>pe("right"),className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"Xoay phi",children:t.jsx("i",{className:"fas fa-redo"})}),t.jsx("div",{className:"w-px h-6 bg-white/20"}),t.jsx("button",{onClick:V,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"t li",children:t.jsx("i",{className:"fas fa-compress"})}),t.jsx("button",{onClick:W,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"Ton mn hnh",children:t.jsx("i",{className:"fas fa-expand"})})]})]}),t.jsx("div",{className:"mt-4 text-center",children:t.jsx("span",{className:"px-4 py-2 rounded-full bg-black/60 backdrop-blur-md border border-white/5 text-white/50 text-xs inline-block",children:"Nhn vo mn hnh  n/hin cng c"})})]})]})},Zo="/ordermanagement/assets/yes-DSvs6nbc.json",Jo="/ordermanagement/assets/no-animation-DB21lGdK.json",Qo=({isOpen:n,onClose:l,onSubmit:o,title:i,description:h,inputs:m=[],submitText:f,submitColor:x,icon:g,targetId:y,showToast:c})=>{const[b,j]=u.useState({}),[w,_]=u.useState(!1),C=dt();if(u.useEffect(()=>{n?(j(I=>Object.keys(I).length>0&&m.length>0?I:m.reduce((R,H)=>(R[H.id]="",R),{})),_(!1)):(j({}),_(!1))},[n]),!n)return null;const N=I=>{let R=I.target.value;const H=m.find(E=>E.id===I.target.name);H!=null&&H.isVIN&&(R=R.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,17)),j(E=>({...E,[I.target.name]:R}))},M=()=>{var I;for(const R of m){const H=(I=b[R.id])==null?void 0:I.trim();if(!H||R.isVIN&&H.length!==17)return!1}return!0},T=async()=>{if(m.length>0&&!M()){c?c("Thng tin khng hp l","Vui lng in y  v chnh xc thng tin.","warning"):alert("Vui lng in y  v chnh xc thng tin.");return}_(!0),await o(b)||_(!1)},P={primary:{bg:"bg-accent-primary",iconBg:"bg-blue-100",iconText:"text-accent-primary"},danger:{bg:"bg-danger",iconBg:"bg-danger-bg",iconText:"text-danger"},success:{bg:"bg-success",iconBg:"bg-success-bg",iconText:"text-success"}},A=P[x]||P.primary;return t.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("div",{className:"bg-surface-card w-full md:max-w-md h-full md:h-auto rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:I=>I.stopPropagation(),style:C,children:[t.jsx("div",{className:`h-1.5 rounded-t-none md:rounded-t-2xl ${A.bg} flex-shrink-0`}),t.jsxs("header",{className:"p-3 flex items-start gap-2",children:[t.jsx("div",{className:`flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-lg ${A.iconBg}`,children:t.jsx("i",{className:`fas ${g} text-2xl ${A.iconText}`})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold leading-6 text-text-primary",children:i}),t.jsx("p",{className:"text-sm text-text-secondary mt-1",children:h})]})]}),t.jsxs("main",{className:"p-4 md:p-6 space-y-4 overflow-y-auto flex-grow min-h-0",children:[y&&t.jsxs("div",{className:"bg-surface-ground border border-border-primary rounded-md p-1.5 text-center",children:[t.jsx("p",{className:"text-xs text-text-secondary",children:"Thc hin cho:"}),t.jsx("p",{className:"text-sm font-semibold text-text-primary font-mono",children:y})]}),m.length>0&&t.jsx("div",{className:"space-y-2",children:m.map(I=>{var R;return t.jsxs("div",{children:[t.jsx("label",{htmlFor:I.id,className:"block text-sm font-medium text-text-secondary mb-1",children:I.label}),I.type==="textarea"?t.jsx("textarea",{id:I.id,name:I.id,value:b[I.id]||"",onChange:N,placeholder:I.placeholder,rows:3,className:"w-full bg-surface-ground border border-border-primary rounded-lg shadow-inner-sm p-2 focus:ring-accent-primary focus:border-accent-primary transition futuristic-input"}):I.type==="select"?t.jsxs("select",{id:I.id,name:I.id,value:b[I.id]||"",onChange:N,className:"w-full bg-surface-ground border border-border-primary rounded-lg shadow-inner-sm p-2 focus:ring-accent-primary focus:border-accent-primary transition futuristic-input",children:[t.jsx("option",{value:"",disabled:!0,children:I.placeholder||"Chn mt ty chn"}),(R=I.options)==null?void 0:R.map(H=>t.jsx("option",{value:H,children:H},H))]}):t.jsx("input",{id:I.id,name:I.id,type:I.type||"text",value:b[I.id]||"",onChange:N,placeholder:I.placeholder,maxLength:I.isVIN?17:void 0,className:"w-full bg-surface-ground border border-border-primary rounded-lg shadow-inner-sm p-2 focus:ring-accent-primary focus:border-accent-primary transition futuristic-input"})]},I.id)})})]}),t.jsxs("footer",{className:"px-3 py-2 flex justify-end items-center gap-1.5 bg-surface-ground rounded-none md:rounded-b-2xl border-t border-border-primary flex-shrink-0",children:[t.jsx("div",{onClick:w?void 0:l,title:"Hy",className:`cursor-pointer ${w?"opacity-50 cursor-not-allowed":"hover:scale-110 transition-transform"}`,children:t.jsx("lottie-player",{src:Jo,background:"transparent",speed:"1",style:{width:"52px",height:"52px"},loop:!0,autoplay:!0})}),t.jsx("div",{onClick:w?void 0:T,title:f,className:`cursor-pointer flex items-center justify-center w-[52px] h-[52px] ${w||m.length>0&&!M()?"opacity-50 cursor-not-allowed":"hover:scale-110 transition-transform"}`,children:w?t.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-accent-primary"}):t.jsx("lottie-player",{src:Zo,background:"transparent",speed:"1",style:{width:"52px",height:"52px"},loop:!0,autoplay:!0})})]})]})})},ec=({order:n,onClose:l,onSubmit:o})=>{const[i,h]=u.useState("personal"),[m,f]=u.useState(""),[x,g]=u.useState(null),[y,c]=u.useState(null),[b,j]=u.useState(null),[w,_]=u.useState(null),[C,N]=u.useState(null),[M,T]=u.useState(!1),P=dt();if(u.useEffect(()=>{n||(h("personal"),f(""),g(null),c(null),j(null),_(null),N(null),T(!1))},[n]),!n)return null;const A=()=>!w||!C?!1:i==="personal"?x&&y:i==="company"?b&&m.trim()!=="":!1,I=async()=>{if(!A()){alert("Vui lng in y  thng tin v ti ln tt c cc tp cn thit.");return}T(!0);const R={orderNumber:n["S n hng"],customerType:i,files:{idCardFront:x,idCardBack:y,businessLicense:b,regFront:w,regBack:C}};i==="company"&&(R.dmsCode=m),await o(R,n.VIN)||T(!1)};return t.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("div",{className:"bg-surface-card w-full md:max-w-xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:R=>R.stopPropagation(),style:P,children:[t.jsxs("header",{className:"flex-shrink-0 relative flex flex-col items-center justify-center p-6 text-center border-b border-border-primary",children:[t.jsx("h2",{className:"text-xl font-bold text-gradient",children:"Yu Cu Cp VinClub"}),t.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Cung cp chng t  to ti khon VinClub cho khch hng."}),t.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 custom-scrollbar",children:[t.jsxs("div",{className:"p-4 bg-surface-ground rounded-lg border border-border-primary text-sm mb-4",children:["ang yu cu cho SH: ",t.jsx("strong",{className:"font-mono",children:n["S n hng"]})," - KH: ",t.jsx("strong",{children:n["Tn khch hng"]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Loi khch hng"}),t.jsxs("div",{className:"flex gap-4 p-1 bg-surface-ground rounded-lg border border-border-primary w-fit",children:[t.jsxs("button",{onClick:()=>h("personal"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-all ${i==="personal"?"bg-white shadow-sm text-accent-primary":"text-text-secondary hover:text-text-primary"}`,children:[t.jsx("i",{className:"fas fa-user mr-2"}),"C Nhn"]}),t.jsxs("button",{onClick:()=>h("company"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-all ${i==="company"?"bg-white shadow-sm text-accent-primary":"text-text-secondary hover:text-text-primary"}`,children:[t.jsx("i",{className:"fas fa-building mr-2"}),"Cng Ty"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[i==="personal"?t.jsxs(t.Fragment,{children:[t.jsx(ot,{id:"cccd-front",label:"CCCD Mt Trc",onFileSelect:g,required:!0,accept:"image/*"}),t.jsx(ot,{id:"cccd-back",label:"CCCD Mt Sau",onFileSelect:c,required:!0,accept:"image/*"})]}):t.jsxs(t.Fragment,{children:[t.jsx(ot,{id:"biz-license",label:"Giy Php Kinh Doanh",onFileSelect:j,required:!0,accept:"image/*"}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"dms-code",className:"block text-sm font-medium text-text-primary mb-2",children:["M KH DMS ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{id:"dms-code",type:"text",value:m,onChange:R=>f(R.target.value),className:"w-full bg-surface-ground border border-border-primary rounded-lg p-2.5 futuristic-input",placeholder:"Nhp m khch hng DMS",required:!0})]})]}),t.jsx(ot,{id:"reg-front",label:"Cavet Xe Mt Trc",onFileSelect:_,required:!0,accept:"image/*"}),t.jsx(ot,{id:"reg-back",label:"Cavet Xe Mt Sau",onFileSelect:N,required:!0,accept:"image/*"})]})]})}),t.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end gap-3 bg-surface-card relative z-10",children:[t.jsx(X,{onClick:l,disabled:M,variant:"secondary",size:"sm",leftIcon:t.jsx("i",{className:"fas fa-times"}),children:"Hy"}),t.jsx(X,{onClick:I,disabled:!A()||M,variant:"primary",size:"sm",isLoading:M,leftIcon:M?void 0:t.jsx("i",{className:"fas fa-paper-plane"}),children:"Gi Yu Cu"})]})]})})},tc=n=>{if(!n||!n.includes("drive.google.com"))return n;const l=n.match(/\/d\/([a-zA-Z0-9_-]{25,})|id=([a-zA-Z0-9_-]{25,})/);if(l){const o=l[1]||l[2];if(o)return`https://drive.google.com/file/d/${o}/preview`}return n.replace("/open?","/preview?")},sc=n=>{if(!n||!n.includes("drive.google.com"))return n;const l=n.match(/\/d\/([a-zA-Z0-9_-]{25,})|id=([a-zA-Z0-9_-]{25,})/);if(l){const o=l[1]||l[2];if(o)return`https://drive.google.com/uc?export=download&id=${o}`}return n},ac=n=>{if(!n||!n.includes("drive.google.com"))return n;const l=n.match(/\/d\/([a-zA-Z0-9_-]{25,})|id=([a-zA-Z0-9_-]{25,})/);if(l){const o=l[1]||l[2];if(o)return`https://drive.google.com/file/d/${o}/view`}return n},nc=n=>(o=>o.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"D").replace(//g,"d"))(n).replace(/[^a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_"),rc=({isOpen:n,onClose:l,fileUrl:o,fileLabel:i})=>{const[h,m]=_e.useState(!1),f=u.useCallback(()=>{const j=ac(o);window.open(j,"_blank"),m(!0),setTimeout(()=>m(!1),4e3)},[o]),x=u.useCallback(j=>{j.key==="Escape"?l():(j.ctrlKey||j.metaKey)&&j.key==="p"&&(j.preventDefault(),f())},[l,f]);if(u.useEffect(()=>{if(n)return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[n,x]),!n)return null;const g=tc(o),y=j=>{j.stopPropagation();const w=sc(o),_=nc(i),C=document.createElement("a");C.href=w,C.setAttribute("download",_),document.body.appendChild(C),C.click(),document.body.removeChild(C)},[c,b]=_e.useState(!0);return t.jsxs("div",{className:"fixed inset-0 bg-black/95 z-[100] flex flex-col animate-fade-in overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden p-0 md:p-8",onClick:()=>b(j=>!j),children:t.jsxs("div",{className:"relative w-full h-full md:max-w-6xl md:max-h-[85vh] shadow-2xl md:rounded-2xl overflow-hidden bg-[#1e1e1e] border border-white/10 transition-all duration-300",children:[t.jsx("iframe",{src:g,className:"w-full h-full w-full h-full border-0",title:i}),t.jsx("div",{className:"absolute top-0 right-0 w-14 h-14 bg-[#1e1e1e] z-20 pointer-events-none"})]})}),t.jsxs("div",{className:`absolute top-0 left-0 right-0 h-24 bg-gradient-to-b from-black/90 via-black/50 to-transparent z-50 flex items-start pt-6 px-6 justify-between transition-all duration-500 transform ${c?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,style:{pointerEvents:c?"auto":"none"},children:[t.jsxs("div",{className:"flex items-center gap-4 animate-slide-in-left",children:[t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 backdrop-blur-md border border-white/10 flex items-center justify-center shadow-glow-sm",children:t.jsx("i",{className:"fas fa-file-pdf text-xl text-red-500 drop-shadow-md"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg text-white tracking-wide drop-shadow-sm line-clamp-1 max-w-[200px] md:max-w-md",children:i}),t.jsx("p",{className:"text-xs text-white/60 font-medium tracking-wider uppercase",children:"Xem trc ti liu"})]})]}),t.jsxs("div",{className:"flex items-center gap-3 animate-slide-in-right",children:[t.jsxs("button",{onClick:y,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-white/20 backdrop-blur-md border border-white/10 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-cyan-500/20 hover:scale-110 active:scale-95",title:"Ti v",children:[t.jsx("i",{className:"fas fa-download text-lg group-hover:text-cyan-400 transition-colors"}),t.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/80 text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Ti v"})]}),t.jsxs("button",{onClick:f,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-white/20 backdrop-blur-md border border-white/10 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-green-500/20 hover:scale-110 active:scale-95",title:"In (Ctrl+P)",children:[t.jsx("i",{className:"fas fa-print text-lg group-hover:text-green-400 transition-colors"}),t.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/80 text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"In (Ctrl+P)"})]}),t.jsx("button",{onClick:l,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-red-500/20 backdrop-blur-md border border-white/10 hover:border-red-500/50 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-red-500/20 hover:scale-110 active:scale-95",title:"ng (Esc)",children:t.jsx("i",{className:"fas fa-times text-lg group-hover:text-red-400 transition-colors"})})]})]}),h&&t.jsx("div",{className:"absolute top-24 left-1/2 -translate-x-1/2 z-50 animate-slide-in-down",children:t.jsx("div",{className:"px-6 py-3 rounded-xl bg-green-500/90 backdrop-blur-md border border-green-400/50 text-white shadow-lg shadow-green-500/20",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("i",{className:"fas fa-check-circle text-xl"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-sm",children:"ang m hp thoi in..."}),t.jsx("div",{className:"text-xs opacity-90",children:"Vui lng ch trong giy lt"})]})]})})}),t.jsx("div",{className:`absolute bottom-8 left-1/2 -translate-x-1/2 transition-opacity duration-500 ${c?"opacity-100":"opacity-0"}`,children:t.jsx("div",{className:"px-4 py-2 rounded-full bg-black/60 backdrop-blur-md border border-white/5 text-white/50 text-xs",children:"Nhn vo mn hnh  n/hin cng c"})})]})},ic=({rank:n})=>n===1?t.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-amber-400/20 text-amber-500",title:"Hng 1",children:t.jsx("i",{className:"fas fa-crown"})}):n===2?t.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-400/20 font-bold text-slate-500",title:"Hng 2",children:"2"}):n===3?t.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-yellow-600/20 font-bold text-yellow-700",title:"Hng 3",children:"3"}):t.jsx("div",{className:"flex items-center justify-center w-8 h-8 font-semibold text-text-secondary",children:n}),lc=({isOpen:n,onClose:l,stats:o})=>{const i=dt(),h=u.useMemo(()=>o.flatMap(m=>m.variants.map(f=>{const[x,g]=f.variant.split(" / "),y=x.split(" - "),c=y.length>1?y.slice(0,-1).join(" - "):"N/A",b=y.length>1?y[y.length-1]:x;return{model:m.model,version:c,exterior:b,interior:g,count:f.count}})).sort((m,f)=>f.count-m.count),[o]);return n?t.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-0 md:p-4",onClick:l,children:t.jsxs("div",{className:"bg-surface-card w-full md:max-w-4xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:m=>m.stopPropagation(),style:i,children:[t.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-5 border-b border-border-primary",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-amber-500/10",children:t.jsx("i",{className:"fas fa-chart-pie text-lg text-amber-500"})}),t.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Thng K Xe Ch Ghp"})]}),t.jsx("button",{onClick:l,className:"w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsx("main",{className:"p-4 md:p-6 overflow-y-auto flex-grow min-h-0 bg-surface-ground",children:h.length>0?t.jsxs("div",{className:"bg-surface-card border border-border-primary rounded-lg shadow-sm",children:[t.jsxs("header",{className:"grid grid-cols-[3.5rem_1fr_4rem] items-center gap-4 px-4 py-2 border-b border-border-primary text-xs font-bold text-text-secondary uppercase",children:[t.jsx("span",{className:"text-center",children:"Hng"}),t.jsx("span",{children:"Cu hnh xe"}),t.jsx("span",{className:"text-right",children:"S Lng"})]}),t.jsx("div",{className:"divide-y divide-border-primary/70",children:h.map((m,f)=>t.jsxs("div",{className:"grid grid-cols-[3.5rem_1fr_4rem] items-center gap-4 px-4 py-3 hover:bg-surface-hover transition-colors",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx(ic,{rank:f+1})}),t.jsxs("div",{className:"min-w-0",children:[t.jsxs("p",{className:"font-semibold text-sm text-text-primary truncate",title:`${m.model} - ${m.version}`,children:[m.model," - ",m.version]}),t.jsxs("p",{className:"text-xs text-text-secondary truncate",title:`${m.exterior} / ${m.interior}`,children:[m.exterior," / ",m.interior]})]}),t.jsx("div",{className:"font-bold text-lg text-accent-primary text-right font-mono",children:m.count})]},f))})]}):t.jsxs("div",{className:"text-center text-text-secondary py-12 flex flex-col items-center justify-center h-full",children:[t.jsx("i",{className:"fas fa-box-open fa-3x mb-4"}),t.jsx("p",{children:"Khng c yu cu no ang ch."})]})}),t.jsx("footer",{className:"p-4 border-t flex justify-end gap-4 bg-surface-card rounded-b-2xl",children:t.jsx("button",{onClick:l,className:"btn-secondary",children:"ng"})})]})}):null},Ms=({label:n,value:l,onChange:o})=>t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:n}),t.jsx("input",{type:"date",value:l,onChange:i=>o(i.target.value),className:"w-full bg-surface-input border border-border-primary rounded-md p-2 text-sm focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary futuristic-input"})]}),oc=({filters:n,onFilterChange:l,onReset:o,dropdowns:i,searchPlaceholder:h,totalCount:m,onRefresh:f,isLoading:x,hideSearch:g=!1,size:y="default",plain:c=!1,dateRangeEnabled:b=!1,dateFilterEnabled:j=!1,viewSwitcherEnabled:w=!1,activeView:_="table",onViewChange:C,extraActionButton:N,variant:M="default",dropdownClassName:T="w-28 md:w-36 lg:w-64",searchable:P=!0})=>{const[A,I]=u.useState(n.keyword||""),[R,H]=u.useState(!1),[E,S]=u.useState(!1),[$,V]=u.useState([]),z=u.useRef(null),L=n.dateRange||{start:"",end:""},J=(v,Y)=>{l({dateRange:{...L,[v]:Y}})},q=v=>{V(Y=>Y.includes(v)?Y.filter(D=>D!==v):[...Y,v])};u.useEffect(()=>{const v=Y=>{z.current&&!z.current.contains(Y.target)&&S(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),u.useEffect(()=>{n.keyword!==A&&I(n.keyword||"")},[n.keyword]),u.useEffect(()=>{const v=setTimeout(()=>{A!==n.keyword&&l({keyword:A})},300);return()=>clearTimeout(v)},[A,n.keyword,l]);const ee=i.flatMap(v=>{const Y=n[v.key]||[];return Y.map(D=>({key:`${v.key}-${D}`,label:v.label,value:D,onRemove:()=>{l({[v.key]:Y.filter(U=>U!==D)})}}))}),ie=L.start&&L.end?{key:`date-range-${L.start}-${L.end}`,label:"Date Range",value:`${new Date(L.start).toLocaleDateString("vi-VN")} - ${new Date(L.end).toLocaleDateString("vi-VN")}`,onRemove:()=>l({dateRange:{start:"",end:""}})}:null,oe=[...ee];ie&&oe.push(ie);const pe=n.keyword&&n.keyword.length>0||oe.length>0,W=i.map(v=>t.jsx("div",{className:T,children:t.jsx(Bt,{id:v.id,label:v.label,options:v.options,selectedOptions:n[v.key]||[],onChange:Y=>l({[v.key]:Y}),icon:v.icon,displayMode:v.displayMode||"count",size:y,variant:M,searchable:P})},v.id)),Z=t.jsxs("div",{className:`${M==="modern"?"flex items-center gap-2":`flex items-center gap-2 ${c?"!shadow-none !bg-transparent !p-0 !border-none":""}`}`,children:[!g&&t.jsxs("div",{className:`relative flex items-center transition-all duration-300 ${M==="modern"?"w-32 focus-within:w-48 flex-shrink":"flex-grow min-w-[200px] lg:min-w-[300px]"}`,children:[t.jsx("i",{className:`fas fa-search absolute left-2 z-10 ${M==="modern"?"text-accent-primary text-[10px] top-1.5":"left-4 text-gray-400"}`}),t.jsx("input",{type:"text",id:"search-input-desktop",placeholder:h,value:A,onChange:v=>I(v.target.value),className:`w-full ${y==="compact"?"h-9 text-xs py-1.5":"h-10 text-sm py-1.5"} pl-7 pr-8 focus:outline-none text-text-primary placeholder:text-text-placeholder transition-all duration-300 ${M==="modern"?"bg-white border border-border-secondary rounded-full shadow-sm focus:border-accent-primary focus:ring-2 focus:ring-accent-primary/20":"relative"}`}),A&&t.jsx("button",{onClick:()=>{I(""),l({keyword:""})},className:"absolute right-2 text-gray-400 hover:text-danger transition-colors",title:"Xa tm kim",children:t.jsx("i",{className:"fas fa-times-circle text-xs"})})]}),W,t.jsx("div",{className:`w-8 h-8 flex items-center justify-center transition-all duration-200 ${M==="modern"?"":"ml-2"}`,children:t.jsx(X,{onClick:o,variant:"danger",className:`!p-0 w-8 h-8 rounded-full transition-all duration-200 ${pe?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none"}`,title:"Xa tt c b lc",tabIndex:pe?0:-1,children:t.jsx("i",{className:"fas fa-times"})})}),b&&t.jsxs("div",{className:"relative",ref:z,children:[t.jsx(X,{onClick:()=>S(!E),variant:"ghost",className:`h-9 px-3 text-xs ${L.start&&L.end||E?"bg-surface-hover text-accent-primary":""}`,leftIcon:t.jsx("i",{className:"fas fa-calendar-alt text-text-placeholder text-xs"}),children:t.jsx("span",{className:`${L.start&&L.end?"font-semibold":""}`,children:L.start&&L.end?`${Ee(L.start).format("DD/MM")} - ${Ee(L.end).format("DD/MM")}`:"Chn ngy"})}),E&&t.jsx("div",{className:"absolute top-full mt-2 right-0 z-20 bg-surface-card p-4 rounded-lg shadow-lg border border-border-primary date-range-picker-popover",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(Ms,{label:"T ngy",value:L.start,onChange:v=>J("start",v)}),t.jsx(Ms,{label:"n ngy",value:L.end,onChange:v=>J("end",v)})]})})]}),t.jsxs("span",{className:"text-sm font-medium text-text-secondary px-3 whitespace-nowrap border-l border-border-primary/50 ml-auto",children:[m," kt qu"]}),w&&t.jsxs("div",{className:"view-switcher-group flex gap-1",children:[t.jsx(X,{onClick:()=>C==null?void 0:C("table"),variant:_==="table"?"primary":"ghost",size:"sm",className:"!p-2",title:"Xem dng danh sch",children:t.jsx("i",{className:"fas fa-list"})}),t.jsx(X,{onClick:()=>C==null?void 0:C("grid"),variant:_==="grid"?"primary":"ghost",size:"sm",className:"!p-2",title:"Xem dng li",children:t.jsx("i",{className:"fas fa-th-large"})})]}),N,t.jsx(X,{onClick:f,disabled:x,variant:"ghost",className:`w-9 h-9 flex-shrink-0 ${M==="modern"?"!rounded-full !bg-gray-50 hover:!bg-gray-100 !border-transparent":""}`,"aria-label":"Lm mi",title:"Lm mi",children:t.jsx("i",{className:`fas fa-sync-alt text-base ${x?"animate-spin":""}`})})]}),F=t.jsx("div",{className:`hidden md:block flex-shrink-0 ${!c&&M!=="modern"&&"p-2"}`,children:Z});return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"md:hidden flex w-full items-center gap-2 ",children:[!g&&t.jsxs("div",{className:"relative flex-grow flex items-center min-w-0",children:[t.jsx("i",{className:"fas fa-search absolute left-4 text-gray-400 z-10"}),t.jsx("input",{type:"text",id:"search-input-mobile",placeholder:h,value:A,onChange:v=>I(v.target.value),className:"w-full h-9 pl-11 pr-9 py-1.5 relative focus:outline-none text-text-primary placeholder:text-text-placeholder text-sm bg-surface-ground rounded-lg border border-transparent focus:bg-white focus:border-accent-primary transition-all duration-300"}),A&&t.jsx("button",{onClick:()=>{I(""),l({keyword:""})},className:"absolute right-3 text-gray-400 hover:text-danger transition-colors",children:t.jsx("i",{className:"fas fa-times-circle"})})]}),t.jsxs(X,{onClick:()=>H(!0),variant:"ghost",className:"flex-shrink-0 w-9 h-9 relative !p-0",children:[t.jsx("i",{className:"fas fa-filter text-accent-primary"}),oe.length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-danger text-white text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center border-2 border-surface-ground",children:oe.length})]}),t.jsx(X,{onClick:f,disabled:x,variant:"ghost",className:"flex-shrink-0 w-9 h-9 !p-0","aria-label":"Lm mi",title:"Lm mi",children:t.jsx("i",{className:`fas fa-sync-alt text-base ${x?"animate-spin":""}`})})]}),R&&ln.createPortal(t.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex flex-col justify-end md:hidden",onClick:()=>H(!1),children:t.jsxs("div",{className:"bg-surface-card rounded-t-2xl p-4 animate-fade-in-up flex flex-col max-h-[85vh]",style:{animationDuration:"300ms"},onClick:v=>v.stopPropagation(),children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-border-primary flex-shrink-0",children:[t.jsx("h3",{className:"font-bold text-lg text-text-primary",children:"B Lc"}),t.jsx(X,{onClick:()=>H(!1),variant:"ghost",className:"w-8 h-8 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover !p-0",children:t.jsx("i",{className:"fas fa-times"})})]}),t.jsxs("div",{className:"space-y-3 overflow-y-auto pr-2 -mr-2 custom-scrollbar py-2 flex-grow",children:[(b||j)&&t.jsxs("div",{className:"bg-gray-50/50 rounded-xl p-3 border border-gray-100",children:[t.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 block",children:b?"Thi gian":"Ngy"}),t.jsxs("div",{className:`grid ${b?"grid-cols-2 gap-3":"grid-cols-1"}`,children:[t.jsx(Ms,{label:b?"T ngy":"Chn ngy",value:L.start,onChange:v=>J("start",v)}),b&&t.jsx(Ms,{label:"n ngy",value:L.end,onChange:v=>J("end",v)})]})]}),i.map(v=>{var U;const Y=$.includes(v.id),D=((U=n[v.key])==null?void 0:U.length)>0;return t.jsxs("div",{className:`border rounded-xl transition-all duration-300 overflow-hidden ${Y?"bg-white border-accent-primary/30 shadow-sm":"bg-white border-gray-100"}`,children:[t.jsxs("button",{type:"button",onClick:()=>q(v.id),className:"flex items-center justify-between w-full p-3 text-left group",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${D?"bg-accent-primary text-white shadow-sm shadow-accent-primary/30":"bg-gray-100 text-gray-400 group-hover:bg-accent-primary/10 group-hover:text-accent-primary"}`,children:t.jsx("i",{className:`fas ${v.icon} text-xs`})}),t.jsxs("div",{children:[t.jsx("span",{className:`text-sm font-semibold transition-colors ${D?"text-accent-primary":"text-gray-700 group-hover:text-gray-900"}`,children:v.label}),D&&t.jsxs("div",{className:"text-[10px] text-gray-500 font-medium",children:[" chn ",n[v.key].length]})]})]}),t.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center transition-transform duration-300 ${Y?"rotate-180 bg-gray-100 text-gray-600":"text-gray-300"}`,children:t.jsx("i",{className:"fas fa-chevron-down text-xs"})})]}),t.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${Y?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:t.jsx("div",{className:"overflow-hidden",children:t.jsx("div",{className:"p-3 pt-0 border-t border-gray-50",children:t.jsx("div",{className:"mt-3",children:t.jsx(Bt,{id:"mobile-"+v.id,label:v.label,options:v.options,selectedOptions:n[v.key]||[],onChange:te=>l({[v.key]:te}),icon:v.icon,displayMode:v.displayMode,size:"default",mode:v.mode||(v.options.length>6?"inline":"chips"),searchable:!1})})})})})]},"mobile-"+v.id)})]}),t.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3 pt-3 border-t border-border-primary flex-shrink-0",children:[t.jsx(X,{onClick:()=>{o()},disabled:!pe,variant:"secondary",fullWidth:!0,className:"rounded-xl",children:"Xa Lc"}),t.jsxs(X,{onClick:()=>H(!1),variant:"primary",fullWidth:!0,className:"rounded-xl shadow-lg shadow-accent-primary/20",children:["Xem ",m," kt qu"]})]})]})}),document.body),F]})},cc=({currentPage:n,totalPages:l,onPageChange:o,onLoadMore:i,isLoadingArchives:h,isLastArchive:m})=>{if(l<=1&&m)return null;const f=[],x=3;let g,y;l<=x?(g=1,y=l):n<=Math.ceil(x/2)?(g=1,y=x):n+Math.floor(x/2)>=l?(g=l-x+1,y=l):(g=n-Math.floor(x/2),y=n+Math.floor(x/2));for(let C=g;C<=y;C++)f.push(C);const c="flex items-center justify-center text-xs font-medium rounded-md transition-colors duration-200",b=`${c} w-7 h-7 text-gray-500 hover:bg-gray-100 hover:text-gray-700`,j=`${c} px-2.5 py-1 text-blue-600 bg-blue-50 hover:bg-blue-100 font-semibold`,w="disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:text-gray-500",_=(l===0||n===l)&&!m;return t.jsxs("nav",{className:"px-4 py-2 flex items-center justify-center space-x-0.5 flex-wrap gap-y-1",children:[l>1&&t.jsx("button",{onClick:()=>o(n-1),disabled:n===1,className:`${b} ${w}`,"aria-label":"Trang trc",children:t.jsx("svg",{className:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),l>1&&g>1&&t.jsxs(t.Fragment,{children:[t.jsx(X,{onClick:()=>o(1),variant:"ghost",className:`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-medium transition-colors !p-0 ${n===1?"bg-blue-100 text-blue-700 font-bold":"hover:bg-surface-hover"}`,children:"1"}),g>2&&t.jsx(X,{disabled:!0,variant:"ghost",className:"w-9 h-9 flex items-center justify-center rounded-lg text-text-secondary !p-0",children:"..."})]}),l>1&&f.map(C=>t.jsx(X,{onClick:()=>o(C),variant:"ghost",className:`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-medium transition-colors !p-0 ${n===C?"bg-blue-100 text-blue-700 font-bold":"hover:bg-surface-hover"}`,children:C},C)),l>1&&y<l&&t.jsxs(t.Fragment,{children:[y<l-1&&t.jsx(X,{disabled:!0,variant:"ghost",className:"w-9 h-9 flex items-center justify-center rounded-lg text-text-secondary !p-0",children:"..."}),t.jsx(X,{onClick:()=>o(l),variant:"ghost",className:`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-medium transition-colors !p-0 ${n===l?"bg-blue-100 text-blue-700 font-bold":"hover:bg-surface-hover"}`,children:l})]}),l>1&&t.jsx(X,{onClick:()=>o(n+1),disabled:n===l,variant:"ghost",className:"w-9 h-9 flex items-center justify-center rounded-lg hover:bg-surface-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors !p-0","aria-label":"Trang sau",children:t.jsx("svg",{className:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})}),_&&t.jsx("button",{onClick:i,disabled:h,className:`${j} ${w} ml-2`,children:h?t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-spinner fa-spin mr-2"})," ang ti..."]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-archive mr-2"})," Ti thm"]})})]})},dc="/ordermanagement/assets/hoa_dao_branch_bloom-yVxm6oGr.gif",uc="/ordermanagement/assets/hoa_dao_static-BRbspx5L.png",hc="/ordermanagement/assets/hoa_mai_bloom-B4Zuhbv-.gif",mc="/ordermanagement/assets/hoa_mai_static-BwGnp57_.png",fc="/ordermanagement/assets/petal_1-BI1qgdVS.webp",wn="/ordermanagement/assets/petal_2-BMhGF0Jm.webp",jn="/ordermanagement/assets/petal_3-Bvyh7_MT.webp",xc="/ordermanagement/assets/petal_4-Dsz0xQbq.webp",Nn="/ordermanagement/assets/petal_5-CCrXKZhb.webp",gc="/ordermanagement/assets/petal_6-xsqu7hkg.webp",pc="/ordermanagement/assets/petal_7-DsiQX_VS.webp",bc="/ordermanagement/assets/petal_8-BzjmCj-W.webp",yc="/ordermanagement/assets/petal_9-BJSNNJsy.webp",vc="/ordermanagement/assets/petal_10-Bo4wKqSo.webp",kn=[fc,wn,jn,xc,Nn],_n=[gc,pc,bc,yc,vc],wc=[...kn,..._n],Sn=({flowerType:n="mixed",delay:l=0,sizeMode:o="normal"})=>{const i=u.useMemo(()=>{let x=wc;n==="dao"&&(x=kn),n==="mai"&&(x=_n);const g=o==="large"?30:15;return Array.from({length:g}).map((y,c)=>({id:c,img:x[Math.floor(Math.random()*x.length)],left:`${Math.random()*100}%`,duration:`${25+Math.random()*20}s`,delay:`-${Math.random()*25}s`,animationName:`fall-wind-${1+Math.floor(Math.random()*4)}`}))},[n,o]),[h,m]=u.useState(l===0);if(u.useEffect(()=>{if(l>0){const x=setTimeout(()=>m(!0),l);return()=>clearTimeout(x)}else m(!0)},[l]),!h)return null;const f=o==="large"?"w-3 h-3 md:w-4 md:h-4":"w-1.5 h-1.5 md:w-2 md:h-2";return t.jsxs("div",{className:"absolute inset-0 z-[6] pointer-events-none overflow-hidden select-none",children:[i.map(x=>t.jsx("img",{src:x.img,className:`absolute ${f} object-contain drop-shadow-sm will-change-transform`,draggable:"false",style:{left:x.left,top:"-10%",animationName:x.animationName,animationDuration:x.duration,animationDelay:x.delay,animationTimingFunction:"linear",animationIterationCount:"infinite"},alt:""},x.id)),t.jsx("style",{dangerouslySetInnerHTML:{__html:`
                /* Wind-blown animations: Start Right -> Drift Left + Fall Down */
                
                /* Gentle Breeze (Stays mostly right/center) */
                @keyframes fall-wind-1 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    50% { transform: translate3d(-50px, 50vh, 0) rotate(90deg); }
                    100% { transform: translate3d(-80px, 120vh, 0) rotate(180deg); opacity: 0; }
                }
                
                /* Moderate Wind (Reaches center/left) */
                @keyframes fall-wind-2 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    40% { transform: translate3d(-100px, 40vh, 0) rotate(-45deg); }
                    100% { transform: translate3d(-200px, 120vh, 0) rotate(-180deg); opacity: 0; }
                }

                /* Strong Gust (Drifts across to far left) */
                @keyframes fall-wind-3 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    35% { transform: translate3d(-150px, 35vh, 0) rotate(30deg); }
                    100% { transform: translate3d(-350px, 120vh, 0) rotate(120deg); opacity: 0; }
                }

                /* Fast & Flat (Blows almost horizontally) */
                @keyframes fall-wind-4 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    30% { transform: translate3d(-100px, 20vh, 0) rotate(60deg); }
                    100% { transform: translate3d(-400px, 120vh, 0) rotate(360deg); opacity: 0; }
                }
            `}})]})},jc=({order:n,onViewDetails:l,processingOrder:o})=>{const i=n["Trng thi VC"]||n["Kt qu"]||"Cha ghp",h=o===n["S n hng"],m=new Date>=new Date("2026-01-05T00:00:00"),[f,x]=u.useState(""),[g,y]=u.useState("dao"),[c,b]=u.useState(0);return u.useEffect(()=>{if(!m)return;const j=Math.random()>.5?"mai":"dao";y(j),x(j==="dao"?uc:mc);const w=Math.random()*1e4;b(w);const _=setTimeout(()=>{x(`${j==="dao"?dc:hc}?v=${n["S n hng"]}-${Date.now()}`)},w);return()=>{clearTimeout(_)}},[n,m]),t.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-white p-3 shadow-md border border-light-border hover:shadow-lg transition-all duration-200 ease-out active:scale-[0.98] cursor-pointer flex flex-col group",onClick:()=>l(n),children:[t.jsx("div",{className:"absolute -right-10 -bottom-6 w-48 z-0 transition-all duration-700 ease-out group-hover:scale-125 group-hover:-translate-x-4 group-hover:-translate-y-2 group-hover:opacity-100 group-hover:rotate-0 opacity-60 transform -rotate-12 animate-drive-in-right origin-bottom-right",children:t.jsx(xa,{model:n["Dng xe"],exteriorColor:n["Ngoi tht"],className:"w-full h-auto object-contain drop-shadow-xl",alt:""})}),m&&t.jsx("div",{className:"absolute -top-2 -right-2 w-24 h-auto z-[8] pointer-events-none",children:t.jsx("img",{src:f,className:"w-full h-auto object-contain select-none",alt:"",draggable:"false"})}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white via-white/80 to-transparent z-5"}),m&&t.jsx(Sn,{flowerType:g,delay:c}),t.jsxs("div",{className:"relative z-10 flex flex-col flex-grow gap-1.5 min-w-0",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("p",{className:"text-light-text-primary text-sm font-bold leading-tight pr-2 truncate",title:n["Tn khch hng"],children:n["Tn khch hng"]}),t.jsx("div",{className:"flex-shrink-0",onClick:j=>j.stopPropagation(),children:h&&t.jsx("div",{className:"flex items-center justify-center w-8 h-8",children:t.jsx("i",{className:"fas fa-spinner fa-spin text-accent-primary text-lg"})})})]}),t.jsx("p",{className:"text-light-text-secondary text-xs font-mono truncate",title:n["S n hng"],children:n["S n hng"]}),t.jsxs("div",{className:"text-xs text-light-text-secondary space-y-1 my-1 py-1 border-y border-dashed",children:[t.jsxs("p",{className:"truncate",title:`${n["Dng xe"]} - ${n["Phin bn"]}`,children:[t.jsx("i",{className:"fas fa-car fa-fw mr-1.5 text-slate-400"})," ",n["Dng xe"]," - ",n["Phin bn"]]}),t.jsxs("p",{className:"truncate font-medium",title:`${n["Ngoi tht"]} / ${n["Ni tht"]}`,children:[t.jsx("i",{className:"fas fa-palette fa-fw mr-1.5 text-slate-400"}),t.jsx("span",{style:un(n["Ngoi tht"]),children:n["Ngoi tht"]}),t.jsxs("span",{children:[" / ",n["Ni tht"]]})]})]}),t.jsx("div",{className:"flex items-center justify-between text-xs text-light-text-secondary",children:t.jsxs("div",{className:"flex items-center gap-1.5 truncate",title:`TVBH: ${n["Tn t vn bn hng"]}`,children:[t.jsx("i",{className:"fas fa-user-tie fa-fw text-slate-400"}),t.jsx("span",{className:"truncate",children:n["Tn t vn bn hng"]})]})}),t.jsx("div",{className:"mt-auto pt-2",children:t.jsx(dn,{status:i})})]})]})},Nc=n=>n.orders.length===0?t.jsxs("div",{className:"text-center py-16 text-text-secondary",children:[t.jsx("i",{className:"fas fa-folder-open fa-3x mb-4 text-text-placeholder"}),t.jsx("p",{className:"font-semibold text-text-primary",children:"Khng tm thy yu cu no."}),t.jsx("p",{className:"text-sm",children:"Hy th thay i b lc hoc to yu cu mi."})]}):t.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4 p-1",children:n.orders.map(l=>t.jsx(jc,{order:l,...n},l["S n hng"]))}),kc=()=>{const n=typeof window<"u"&&window.electronAPI,[l,o]=u.useState(!0);u.useEffect(()=>{if(!n)return;let f;const x=()=>{o(!0),f&&clearTimeout(f),f=setTimeout(()=>{o(!1)},3e3)},g=setTimeout(()=>{o(!1)},3e3),y=b=>{b.key==="Escape"&&x()},c=b=>{b.clientY<50&&x()};return window.addEventListener("keydown",y),window.addEventListener("mousemove",c),()=>{window.removeEventListener("keydown",y),window.removeEventListener("mousemove",c),f&&clearTimeout(f),clearTimeout(g),f&&clearTimeout(f),clearTimeout(g)}},[n]);const i=()=>{var f;return(f=window.electronAPI)==null?void 0:f.minimizeWindow()},h=()=>{var f;return(f=window.electronAPI)==null?void 0:f.maximizeWindow()},m=()=>{var f;return(f=window.electronAPI)==null?void 0:f.closeWindow()};return!n||!l?null:t.jsxs("div",{className:"fixed top-0 left-0 w-full h-8 bg-slate-900 border-b border-slate-700 flex items-center justify-between px-3 z-[99999] animate-slide-down select-none text-white shadow-lg",style:{WebkitAppRegion:"drag"},children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-slate-300",children:[t.jsx("i",{className:"fas fa-car-side"}),t.jsx("span",{children:"Order Management"})]}),t.jsxs("div",{className:"flex items-center h-full",style:{WebkitAppRegion:"no-drag"},children:[t.jsx("button",{onClick:i,className:"h-8 w-10 flex items-center justify-center hover:bg-slate-700/50 transition-colors",children:t.jsx("i",{className:"fas fa-minus text-[10px]"})}),t.jsx("button",{onClick:h,className:"h-8 w-10 flex items-center justify-center hover:bg-slate-700/50 transition-colors",children:t.jsx("i",{className:"far fa-square text-[10px]"})}),t.jsx("button",{onClick:m,className:"h-8 w-10 flex items-center justify-center hover:bg-red-600 transition-colors",children:t.jsx("i",{className:"fas fa-times text-[10px]"})})]})]})},_c=()=>{const[n,l]=u.useState(!1),[o,i]=u.useState(!1),[h,m]=u.useState("orders"),[f,x]=u.useState(null);u.useEffect(()=>{const j=localStorage.getItem("sidebarState");l(j==="collapsed")},[]);const g=u.useCallback(()=>{l(j=>{const w=!j;return localStorage.setItem("sidebarState",w?"collapsed":"expanded"),w})},[]),y=u.useCallback((j,w)=>{m("admin"),x({orderToShow:j,targetTab:w})},[]),c=u.useCallback(j=>{m("admin"),x({targetTab:j})},[]),b=u.useCallback(()=>{x(null)},[]);return{isSidebarCollapsed:n,isMobileMenuOpen:o,setIsMobileMenuOpen:i,activeView:h,setActiveView:m,initialAdminState:f,toggleSidebar:g,showOrderInAdmin:y,showAdminTab:c,clearInitialState:b}},Sc=n=>{const[l,o]=u.useState([]),[i,h]=u.useState(0),[m,f]=u.useState(!1),x=u.useRef(null),g=u.useCallback(async()=>{try{const{notifications:j=[],unreadCount:w=0}=await No();o(j),h(_=>{if(w>_){const C=document.getElementById("notification-badge");C==null||C.classList.add("animate-pop"),setTimeout(()=>C==null?void 0:C.classList.remove("animate-pop"),300)}return w})}catch(j){console.error("Failed to fetch notifications:",j)}},[]);return u.useEffect(()=>{g();const j=setInterval(g,3e4);return()=>clearInterval(j)},[g]),u.useEffect(()=>{const j=w=>{x.current&&!x.current.contains(w.target)&&f(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),{notifications:l,unreadCount:i,isNotificationPanelOpen:m,notificationContainerRef:x,toggleNotificationPanel:()=>{f(j=>!j)},handleMarkAllAsRead:async j=>{if(j.stopPropagation(),i===0)return;const w=[...l],_=i;h(0),o(C=>C.map(N=>({...N,isRead:!0})));try{await ko()}catch(C){console.error("Failed to mark all notifications as read",C),o(w),h(_),n("Thao Tc Tht Bi","Khng th nh du  c tt c thng bo.","error",3e3)}},handleNotificationClick:async(j,w,_,C)=>{if(w.stopPropagation(),!j.isRead){o(N=>N.map(M=>M.id===j.id?{...M,isRead:!0}:M)),h(N=>Math.max(0,N-1));try{await _o(j.id)}catch(N){console.error("Failed to mark notification as read",N),o(M=>M.map(T=>T.id===j.id?{...T,isRead:!1}:T)),h(M=>M+1)}}if(j.link){const N=j.link.match(/orderNumber=([^&]+)/);if(N&&N[1]){const M=_.find(T=>T["S n hng"]===decodeURIComponent(N[1]));M?C(M):window.location.href=j.link}else window.location.href=j.link}f(!1)},setIsNotificationPanelOpen:f}},nn="archivedOrdersData",Cc=()=>{const[n,l]=u.useState([]),[o,i]=u.useState(!0),[h,m]=u.useState(null),[f,x]=u.useState(!1),g=u.useCallback(async(y=!1)=>{y||i(!0),m(null);try{let b=(await ho()).data||[];const j=sessionStorage.getItem(nn);if(j)try{const w=JSON.parse(j);b=[...b,...w],x(!0)}catch(w){console.error("Failed to parse cached archives:",w),sessionStorage.removeItem(nn),x(!1)}else x(!1);l(b)}catch(c){const b=c instanceof Error?c.message:"An unknown error occurred";m(b)}finally{y||i(!1)}},[]);return u.useEffect(()=>{g()},[g]),{historyData:n,setHistoryData:l,isLoading:o,error:h,refetch:g,archivesLoadedFromCache:f}},Dc=()=>{const[n,l]=u.useState([]),[o,i]=u.useState(!0),[h,m]=u.useState(null),f=u.useCallback(async(x=!1)=>{x||i(!0),m(null);try{const g=await vn();l(g.khoxe||[])}catch(g){const y=g instanceof Error?g.message:"An unknown error occurred";m(y)}finally{x||i(!1)}},[]);return u.useEffect(()=>{f()},[f]),{stockData:n,setStockData:l,isLoading:o,error:h,refetch:f}},Mc=()=>{const[n,l]=u.useState([]),[o,i]=u.useState(!0),[h,m]=u.useState(null),f=u.useCallback(async()=>{i(!0),m(null);try{const x=await Do();if(x.status==="SUCCESS")l(x.data||[]);else throw new Error(x.message||"Failed to fetch sold cars data.")}catch(x){const g=x instanceof Error?x.message:"An unknown error occurred";m(g)}finally{i(!1)}},[]);return u.useEffect(()=>{f()},[f]),{soldData:n,isLoading:o,error:h,refetch:f}},rn=n=>{if(!n)return 0;if(n.includes("T")||n.includes(" ")){const o=Ee(n);if(o.isValid())return o.hour()*60+o.minute()}const l=n.split(":");if(l.length>=2){const o=parseInt(l[0],10),i=parseInt(l[1],10);if(!isNaN(o)&&!isNaN(i))return o*60+i}return 0},Tc=()=>{const[n,l]=u.useState([]),[o,i]=u.useState(!0),[h,m]=u.useState(null),f=u.useCallback(async(x=!1)=>{x||i(!0),m(null);try{const g=await Io();if(g.status==="SUCCESS"&&g.data){const c=g.data.sort((b,j)=>{const w=j.ngayThuXe.localeCompare(b.ngayThuXe);return w!==0?w:rn(j.thoiGianKhoiHanh)-rn(b.thoiGianKhoiHanh)});l(c)}else throw new Error(g.message||"Khng th ti d liu lch li th.")}catch(g){const y=g instanceof Error?g.message:"An unknown error occurred";m(y)}finally{x||i(!1)}},[]);return u.useEffect(()=>{f()},[f]),{testDriveData:n,setTestDriveData:l,isLoading:o,error:h,refetch:f}},Yc=({currentUser:n,userRole:l,isCurrentUserAdmin:o,showToast:i})=>{const{historyData:h,setHistoryData:m,isLoading:f,error:x,refetch:g,archivesLoadedFromCache:y}=Cc(),{stockData:c,setStockData:b,isLoading:j,error:w,refetch:_}=Dc(),{soldData:C,isLoading:N,error:M,refetch:T}=Mc(),{testDriveData:P,setTestDriveData:A,isLoading:I,refetch:R}=Tc(),[H,E]=u.useState([]),[S,$]=u.useState(!0),[V,z]=u.useState(null),[L,J]=u.useState({}),[q,ee]=u.useState([]),[ie,oe]=u.useState(new Set),pe=u.useRef([]),W=u.useCallback(async(D=!1)=>{D||$(!0),z(null);try{const U=await mo();E(U.data||[])}catch(U){const te=U instanceof Error?U.message:"An unknown error occurred";z(te)}finally{D||$(!1)}},[]),Z=u.useCallback(async(D=!1)=>{if(!(!o&&l!=="Trng Phng Kinh Doanh"))try{const[U,te]=await Promise.all([Yo(),Eo()]);U.status==="SUCCESS"&&U.teamData?J(U.teamData):console.error("Failed to fetch team data:",U.message),te.status==="SUCCESS"&&te.users?ee(te.users):console.error("Failed to fetch user list:",te.message)}catch(U){console.error("Failed to fetch admin data:",U),D||i("Li Ti D Liu","Khng th ti d liu qun tr phng ban.","error")}},[o,l,i]);u.useEffect(()=>{Z(),W()},[Z,W]);const F=u.useMemo(()=>{if(l!=="Trng Phng Kinh Doanh")return;const D=Et(n),U=Object.keys(L).find(te=>Et(te)===D);if(U&&L[U]){const te=L[U];return[U,...te].map(de=>Et(de))}return[D]},[n,l,L]),v=u.useMemo(()=>{if(o)return h;if(l==="Trng Phng Kinh Doanh"&&F){const U=new Set(F.map(te=>Et(te)));return h.filter(te=>U.has(Et(te["Tn t vn bn hng"])))}const D=Et(n);return h.filter(U=>Et(U["Tn t vn bn hng"])===D)},[h,o,l,F,n]);u.useEffect(()=>{pe.current=c},[c]);const Y=u.useCallback(async()=>{if(!document.hidden)try{const U=(await vn()).khoxe||[],te=pe.current;if(te.length===0){b(U);return}const de=K=>`${K["Trng thi"]}|${K["Ngi Gi Xe"]||""}`,Me=new Map(te.map(K=>[K.VIN,de(K)])),Qe=new Set;U.forEach(K=>{if(!K.VIN)return;const ue=Me.get(K.VIN),ve=de(K);ue!==void 0&&ue!==ve&&Qe.add(K.VIN)}),b(U),Qe.size>0&&(i("Cp Nht Kho Xe",`C ${Qe.size} xe va thay i trng thi.`,"info",4e3),oe(Qe),setTimeout(()=>oe(new Set),3e3))}catch(D){console.warn("Real-time stock update failed:",D)}},[i,b]);return u.useEffect(()=>{let U;const te=()=>{de(),Y(),W(!0),U=window.setInterval(()=>{Y(),W(!0)},15e3)},de=()=>{U&&clearInterval(U),U=void 0},Me=()=>{document.hidden?de():te()};return!j&&!w&&(te(),document.addEventListener("visibilitychange",Me)),()=>{de(),document.removeEventListener("visibilitychange",Me)}},[j,w,Y,W]),{allHistoryData:h,setAllHistoryData:m,historyData:v,isLoadingHistory:f,errorHistory:x,refetchHistory:g,archivesLoadedFromCache:y,stockData:c,setStockData:b,isLoadingStock:j,errorStock:w,refetchStock:_,highlightedVins:ie,soldData:C,isLoadingSold:N,errorSold:M,refetchSold:T,testDriveData:P,setTestDriveData:A,isLoadingTestDrive:I,refetchTestDrive:R,xuathoadonData:H,isLoadingXuathoadon:S,errorXuathoadon:V,refetchXuathoadon:W,teamData:L,allUsers:q,fetchAdminData:Z,usersToView:F}},Ec=({showToast:n,hideToast:l,refetchHistory:o,refetchStock:i,setAllHistoryData:h})=>{const[m,f]=u.useState(null),[x,g]=u.useState(null),[y,c]=u.useState(null),[b,j]=u.useState(null),[w,_]=u.useState(null),[C,N]=u.useState(null),[M,T]=u.useState(null),[P,A]=u.useState({isOpen:!1}),[I,R]=u.useState(!1),[H,E]=u.useState(null),[S,$]=u.useState(null),[V,z]=u.useState(!1),[L,J]=u.useState(null),[q,ee]=u.useState(null),ie=async K=>{ee(K);try{await xo(K),l(),n("Gi Xe Thnh Cng",` gi xe ${K}.`,"success",3e3),i(!0)}catch(ue){l();const ve=ue instanceof Error?ue.message:"Khng th gi xe.";n("Gi Xe Tht Bi",ve,"error",5e3)}finally{ee(null)}},oe=async K=>{ee(K);try{await go(K),l(),n("Hy Gi Thnh Cng",` hy gi xe ${K}.`,"info",3e3),i(!0)}catch(ue){l();const ve=ue instanceof Error?ue.message:"Khng th hy gi xe.";n("Hy Gi Tht Bi",ve,"error",5e3)}finally{ee(null)}},pe=K=>f(K),W=async(K,ue)=>{J(K["S n hng"]);try{await bo(K["S n hng"],ue),await o(),l(),n("Hy Thnh Cng"," hy yu cu thnh cng.","success",3e3)}catch(ve){l();const Se=ve instanceof Error?ve.message:"Li khng xc nh";n("Hy Tht Bi",Se,"error",5e3)}finally{g(null),J(null)}},Z=async(K,ue,ve,Se,He,Oe)=>{J(K["S n hng"]);try{return await yo(K["S n hng"],ue,ve,Se.join(", "),He,Oe),await o(),l(),n("Gi Thnh Cng"," gi yu cu xut ha n.","success",3e3),!0}catch(Ce){l();const Ye=Ce instanceof Error?Ce.message:"Li khng xc nh";n("Gi Tht Bi",Ye,"error",5e3)}finally{J(null)}},F=async(K,ue,ve)=>{J(K["S n hng"]);try{await vo(K["S n hng"],ue,ve),await o(),l(),n("B Sung Thnh Cng"," b sung h s thnh cng.","success",3e3)}catch(Se){l();const He=Se instanceof Error?Se.message:"Li khng xc nh";n("B Sung Tht Bi",He,"error",5e3)}finally{j(null),J(null)}},v=()=>{_(null),n("Cp nht thnh cng!","Thng tin n hng  c cp nht.","success"),o(!0),i(!0)},Y=async(K,ue)=>{if(!C)return!1;J(C["S n hng"]);const ve=Se=>new Promise((He,Oe)=>{const Ce=new FileReader;Ce.readAsDataURL(Se),Ce.onload=()=>He(Ce.result.split(",")[1]),Ce.onerror=Ye=>Oe(Ye)});try{const Se=[];for(const Ce in K.files)if(K.files[Ce]){const Ye=K.files[Ce],ut=await ve(Ye);Se.push({key:Ce,name:Ye.name,type:Ye.type,data:ut})}const He={orderNumber:K.orderNumber,customerType:K.customerType,dmsCode:K.dmsCode,filesData:JSON.stringify(Se),vin:ue},Oe=await Mo(He);return l(),n("Thnh Cng",Oe.message||"Yu cu VinClub  c gi.","success"),Oe.updatedOrder?h(Ce=>Ce.map(Ye=>Ye["S n hng"]===Oe.updatedOrder["S n hng"]?{...Ye,...Oe.updatedOrder}:Ye)):o(!0),N(null),!0}catch(Se){l();const He=Se instanceof Error?Se.message:"Li khng xc nh.";return n("Yu Cu Tht Bi",He,"error"),!1}finally{J(null)}},D=async()=>{if(!M)return!1;J(M["S n hng"]);try{return await Po("confirmVcUnc",{orderNumber:M["S n hng"]}),await o(),l(),n("Thnh Cng"," xc thc UNC cho VinClub.","success"),T(null),!0}catch(K){l();const ue=String(K instanceof Error?K.message:"Li khng xc nh");return n("Xc Thc VC Tht Bi",ue,"error"),!1}finally{J(null)}},U=K=>{A({isOpen:!0,initialVehicle:K})},te=u.useCallback(()=>{A({isOpen:!1})},[]),de=u.useCallback(K=>{A({isOpen:!1}),h(ue=>[K,...ue].sort((ve,Se)=>new Date(Se["Thi gian nhp"]).getTime()-new Date(ve["Thi gian nhp"]).getTime())),n("Yu Cu  Gi","Yu cu ghp xe ca bn  c ghi nhn thnh cng.","success",4e3),i(!0),setTimeout(()=>{f(K)},500)},[h,n,i]),Me=u.useCallback((K,ue=0,ve)=>{E({images:K,startIndex:ue,customerName:ve})},[]),Qe=u.useCallback((K,ue)=>{$({url:K,label:ue})},[]);return{selectedOrder:m,setSelectedOrder:f,orderToCancel:x,setOrderToCancel:g,orderToRequestInvoice:y,setOrderToRequestInvoice:c,orderToSupplement:b,setOrderToSupplement:j,orderToEdit:w,setOrderToEdit:_,orderToRequestVC:C,setOrderToRequestVC:N,orderToConfirmVC:M,setOrderToConfirmVC:T,createRequestData:P,setCreateRequestData:A,isChangePasswordModalOpen:I,setIsChangePasswordModalOpen:R,imagePreview:H,setImagePreview:E,filePreview:S,setFilePreview:$,isPendingStatsModalOpen:V,setIsPendingStatsModalOpen:z,processingOrder:L,processingVin:q,handleHoldCar:ie,handleReleaseCar:oe,handleViewDetails:pe,handleCancelOrder:W,handleRequestInvoice:Z,handleSupplementFiles:F,handleEditSuccess:v,handleConfirmRequestVC:Y,handleConfirmVC:D,handleCreateRequestForVehicle:U,handleCreateRequestClose:te,handleFormSuccess:de,openImagePreviewModal:Me,openFilePreviewModal:Qe}},Pc=({allHistoryData:n,isSidebarCollapsed:l,activeView:o,orderView:i})=>{const[h,m]=u.useState({keyword:"",carModel:[],version:[],status:[],exterior:[]}),[f,x]=u.useState({key:"Thi gian nhp",direction:"desc"}),[g,y]=u.useState(1),[c,b]=u.useState(20),[j,w]=u.useState(20),[_,C]=u.useState(()=>o==="orders"&&i==="grid"?l?15:12:l?14:12),N=u.useRef(null),M=u.useCallback(()=>{if(N.current)if(o==="orders"&&i==="grid"){const E=N.current.querySelector(".flex-grow.overflow-y-auto"),S=E==null?void 0:E.querySelector(".grid");if(!E||!S){w(20);return}const $=N.current.clientWidth,V=N.current.clientHeight;if(V===0||$===0){w(20);return}const z=190,L=8;let J=230,q=Math.floor(($-8+L)/(z+L));if(S){const F=window.getComputedStyle(S).gridTemplateColumns;F&&F!=="none"&&(q=F.split(" ").length);const v=S.querySelector(".bg-white.rounded-xl");if(v){const Y=v.getBoundingClientRect().height;Y>0&&(J=Y)}}const ee=V-50,ie=ee>=J?Math.ceil((ee-J/2)/(J+L)):0,oe=Math.max(2,ie),pe=Math.max(1,q),W=Math.max(12,oe*pe*2);w(W),b(Z=>Math.max(Z,W))}else C(l?14:12)},[o,i,l]);u.useEffect(()=>{const E=N.current;if(!E)return;const S=new ResizeObserver(()=>{M()});return S.observe(E),M(),()=>S.disconnect()},[M]);const T=u.useCallback(E=>{y(1),b(j),m(S=>({...S,...E}))},[j]),P=u.useCallback(()=>{y(1),b(j),m({keyword:"",carModel:[],version:[],status:[],exterior:[]})},[j]),A=E=>{y(1),b(j);let S="asc";f&&f.key===E&&f.direction==="asc"&&(S="desc"),x({key:E,direction:S})},I=u.useMemo(()=>{let E=[...n];if(h.keyword){const S=h.keyword.toLowerCase();E=E.filter($=>Ze($["Tn khch hng"],S)||Ze($["S n hng"],S)||Ze($.VIN,S)||Ze($["Dng xe"],S)||Ze($["Phin bn"],S)||Ze($["Ngoi tht"],S)||Ze($["Ni tht"],S)||Ze($["Tn t vn bn hng"],S)||Ze($["CHNH SCH"],S)||Ze($["S ng c"],S))}return h.carModel.length>0&&(E=E.filter(S=>h.carModel.includes(S["Dng xe"]))),h.version.length>0&&(E=E.filter(S=>h.version.includes(S["Phin bn"]))),h.status.length>0&&(E=E.filter(S=>h.status.includes(S["Trng thi VC"]||S["Kt qu"]||"Cha ghp"))),h.exterior.length>0&&(E=E.filter(S=>h.exterior.includes(S["Ngoi tht"]))),f!==null&&E.sort((S,$)=>{const V=S[f.key],z=$[f.key];return V==null||V===""?1:z==null||z===""?-1:V<z?f.direction==="asc"?-1:1:V>z?f.direction==="asc"?1:-1:0}),E},[n,h,f]),R=Math.ceil(I.length/_);u.useEffect(()=>{g>R&&R>0&&y(R)},[R,g,_]);const H=u.useMemo(()=>{if(i==="grid")return I.slice(0,c);const E=(g-1)*_;return I.slice(E,E+_)},[I,g,_,i,c]);return u.useEffect(()=>{const E=setTimeout(()=>{M()},200);return()=>clearTimeout(E)},[H.length,M]),{filters:h,sortConfig:f,currentPage:g,setCurrentPage:y,handleFilterChange:T,handleResetFilters:P,handleSort:A,processedData:I,paginatedData:H,totalPages:R,pageSize:_,containerRef:N,visibleCount:c,setVisibleCount:b,batchSize:j}},Ic="/ordermanagement/assets/yeucau-CU2pKZso.json",Fc="/ordermanagement/assets/logo_transparent-BWM8GV8P.png",ma="/ordermanagement/assets/logo1-Be-jI06Y.png",Oc="/ordermanagement/assets/logo2-8A-IgehY.png",Ts="/ordermanagement/assets/lixi_animation-CGpl0Wp_.gif",Ac="/ordermanagement/assets/bell_fixed-mq3DHU6t.gif",Cn="/ordermanagement/assets/hoa_dao_icon_bloom-HCG0szw1.gif",Lc=({setCreateRequestData:n,toggleNotificationPanel:l,unreadCount:o,isNotificationPanelOpen:i,notifications:h,handleMarkAllAsRead:m,handleNotificationClick:f,onLogout:x,notificationContainerRef:g,activeView:y,setActiveView:c,isCurrentUserAdmin:b})=>{const[j,w]=_e.useState(Ts),[_,C]=_e.useState(ma),N=new Date>=new Date("2026-01-05T00:00:00");_e.useEffect(()=>{if(N){const T=[Fc,ma,Oc],P=T[Math.floor(Math.random()*T.length)];C(P)}else C(ma)},[y,N]),_e.useEffect(()=>{N&&w(Math.random()>.5?Ts:Cn)},[y,N]);const M=[{id:"orders",label:"Qun l",icon:"fa-car-side"},{id:"stock",label:"Kho Xe",icon:"fa-warehouse"},{id:"laithu",label:"Li Th",icon:"fa-gauge-high"},{id:"sold",label:"Lch S",icon:"fa-receipt"}];return b&&M.push({id:"admin",label:"Admin",icon:"fa-user-shield"}),t.jsxs("header",{className:"relative sticky top-0 w-full z-20 h-14 bg-surface-card/95 backdrop-blur-md border-b border-border-primary/50 flex items-center justify-between px-4 sm:px-6 shadow-sm",children:[t.jsx("div",{className:"flex items-center gap-4",children:t.jsx("div",{className:"flex flex-col",children:t.jsx("img",{src:_,alt:"OrderMgmt",className:"h-16 w-80 translate-y+4 -ml-6"})})}),t.jsx("nav",{className:"hidden lg:flex items-center absolute left-1/2 transform -translate-x-1/2 bg-white/40 backdrop-blur-xl p-1.5 rounded-full border border-white/60 shadow-[0_4px_20px_rgba(0,0,0,0.03)] hover:shadow-[0_4px_25px_rgba(0,0,0,0.06)] transition-all duration-300",children:M.map(T=>{const P=y===T.id;return t.jsxs("button",{onClick:()=>c(T.id),className:`
                                relative px-6 py-2 rounded-full text-xs font-bold uppercase tracking-widest transition-all duration-300 flex items-center gap-2.5 outline-none group
                                ${P?"bg-white text-accent-primary shadow-[0_2px_10px_rgba(0,0,0,0.1)] ring-1 ring-black/5 scale-100":"text-gray-500 hover:text-gray-900 hover:bg-white/50"}
                            `,children:[P&&N&&t.jsx("div",{className:"absolute -top-3 -right-1 z-20",children:t.jsx("img",{src:j,alt:"Festive Icon",className:"w-8 h-auto drop-shadow-sm"})}),P&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white via-transparent to-white/50 opacity-50 rounded-full"}),t.jsx("span",{className:"relative z-10",children:T.label})]},T.id)})}),t.jsxs("div",{className:"flex items-center justify-end space-x-2 sm:space-x-4",children:[t.jsx("div",{onClick:()=>n({isOpen:!0}),title:"To Yu Cu Mi",className:"cursor-pointer transition-transform hover:scale-105 active:scale-95",children:t.jsx("lottie-player",{src:Ic,background:"transparent",speed:"1",style:{width:"250px",height:"120px",marginTop:"-10px",marginBottom:"-10px"},loop:!0,autoplay:!0})}),t.jsxs("div",{ref:g,className:"relative notification-bell-container",children:[t.jsxs(X,{onClick:l,variant:"ghost",className:"w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center !p-0 action-btn",title:"Thng bo",children:[t.jsx("img",{src:Ac,alt:"Notifications",className:"w-8 h-8 object-contain"}),o>0&&t.jsx("span",{id:"notification-badge",className:"notification-badge",children:o>9?"9+":o})]}),t.jsxs("div",{className:`notification-panel ${i?"visible":""}`,children:[t.jsxs("div",{className:"notification-panel-header flex justify-between items-center",children:[t.jsx("span",{children:"Thng Bo"}),o>0&&t.jsx(X,{onClick:m,variant:"ghost",size:"sm",className:"text-xs font-medium text-accent-secondary hover:text-accent-primary-hover transition-colors !h-auto !p-0",children:"nh du  c tt c"})]}),t.jsx("div",{className:"notification-list",children:h.length>0?h.map(T=>{const P={success:"fa-check",danger:"fa-times-circle",warning:"fa-exclamation-triangle",info:"fa-info-circle",error:"fa-times-circle"},A=T.type==="error"?"danger":T.type;return t.jsxs("div",{className:`notification-item ${T.isRead?"":"unread"}`,onClick:I=>f(T,I),children:[t.jsx("div",{className:`notification-icon type-${A}`,children:t.jsx("i",{className:`fa-solid ${P[A]||"fa-bell"}`})}),t.jsxs("div",{className:"notification-content",children:[t.jsx("p",{className:"notification-message",dangerouslySetInnerHTML:{__html:T.message}}),t.jsx("p",{className:"notification-time",children:Ee(T.timestamp).fromNow()})]})]},T.id)}):t.jsxs("div",{className:"no-notifications",children:[t.jsx("i",{className:"fa-solid fa-bell-slash"}),t.jsx("p",{children:"Khng c thng bo no."})]})})]})]}),t.jsx(X,{onClick:x,variant:"ghost",className:"w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center text-text-secondary hover:text-danger !p-0",title:"ng xut",children:t.jsx("i",{className:"fa-solid fa-sign-out-alt"})})]})]})},Rc=n=>{if(!n)return"?";const l=n.trim().split(" ").filter(Boolean);if(l.length===0)return"?";if(l.length===1)return l[0].charAt(0).toUpperCase();const o=l[0].charAt(0),i=l[l.length-1].charAt(0);return`${o}${i}`.toUpperCase()},$c=({name:n,size:l="md",className:o=""})=>{const i=Rc(n),h=Ql(n),m={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-lg",lg:"w-12 h-12 text-xl"};return t.jsx("div",{className:`rounded-full flex items-center justify-center text-white font-bold flex-shrink-0 ${m[l]} ${o}`,style:{backgroundColor:h},title:n,children:i})},Vc=({activeView:n,setActiveView:l,isCurrentUserAdmin:o,currentUser:i,userRole:h,onLogout:m,setIsChangePasswordModalOpen:f})=>{const[x,g]=u.useState(!1),y=u.useRef(null),[c,b]=u.useState(Ts),j=new Date>=new Date("2026-01-05T00:00:00");u.useEffect(()=>{j&&b(Math.random()>.3?Ts:Cn)},[n,j]);const w=[{id:"orders",label:"Ghp Xe",icon:"fa-car-side"},{id:"stock",label:"Kho Xe",icon:"fa-warehouse"},{id:"laithu",label:"Li Th",icon:"fa-gauge-high"},{id:"sold",label:"Lch S",icon:"fa-receipt"}];return o&&w.push({id:"admin",label:"Admin",icon:"fa-user-shield"}),u.useEffect(()=>{const _=C=>{y.current&&!y.current.contains(C.target)&&g(!1)};return x&&document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[x]),t.jsxs(t.Fragment,{children:[x&&t.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col justify-end lg:hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>g(!1)}),t.jsxs("div",{ref:y,className:"relative bg-surface-card rounded-t-2xl shadow-2xl border-t border-border-primary p-4 animate-slide-up-fade",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-border-primary/50",children:[t.jsx($c,{name:i,size:"lg"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg text-text-primary",children:i}),t.jsx("p",{className:"text-sm text-text-secondary capitalize",children:h})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(X,{onClick:()=>{f(!0),g(!1)},variant:"secondary",fullWidth:!0,className:"justify-start gap-3 py-3 text-base",children:[t.jsx("i",{className:"fas fa-key text-text-secondary w-6 text-center"}),t.jsx("span",{children:"i mt khu"})]}),t.jsxs(X,{onClick:()=>{m(),g(!1)},variant:"ghost",fullWidth:!0,className:"justify-start gap-3 py-3 text-base text-danger hover:bg-danger-bg hover:text-danger",children:[t.jsx("i",{className:"fas fa-sign-out-alt w-6 text-center"}),t.jsx("span",{children:"ng xut"})]})]}),t.jsx("div",{className:"mt-6 pt-2 text-center",children:t.jsx("button",{onClick:()=>g(!1),className:"w-12 h-1 bg-gray-300 rounded-full mx-auto"})})]})]}),t.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-40 lg:hidden pb-safe",children:t.jsxs("div",{className:"flex justify-around items-center h-16",children:[w.map(_=>{const C=n===_.id;return t.jsxs("button",{onClick:()=>{l(_.id),g(!1)},className:`flex flex-col items-center justify-center w-full h-full space-y-1 relative group ${C?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:[C&&j&&t.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 z-20 animate-bounce-small",children:t.jsx("img",{src:c,alt:"Festive Icon",className:"w-8 h-8 object-contain drop-shadow-sm pointer-events-none select-none",draggable:"false"})}),t.jsx("i",{className:`fas ${_.icon} text-lg ${C?"opacity-0 scale-50":"opacity-100 scale-100"} transition-all duration-300`}),t.jsx("span",{className:"text-[10px] font-medium transition-all duration-300 transform translate-y-0",children:_.label})]},_.id)}),t.jsxs("button",{onClick:()=>g(!0),className:`flex flex-col items-center justify-center w-full h-full space-y-1 ${x?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:[t.jsx("i",{className:`fas fa-user-circle text-lg ${x?"animate-bounce-short":""}`}),t.jsx("span",{className:"text-[10px] font-medium",children:"C nhn"})]})]})})]})},Hc=_e.lazy(()=>rs(()=>import("./HistoryTable-Cf8FlYhi.js"),__vite__mapDeps([0,1,2,3]))),zc=_e.lazy(()=>rs(()=>import("./StockView-D41YbmXf.js"),__vite__mapDeps([4,1,2,3]))),Uc=_e.lazy(()=>rs(()=>import("./SoldCarsView-BjpHghC9.js"),__vite__mapDeps([5,1,2,0,3]))),Bc=_e.lazy(()=>rs(()=>import("./AdminView-CEQyUEyD.js"),__vite__mapDeps([6,1,2,3]))),Wc=_e.lazy(()=>rs(()=>import("./TestDriveForm-ZLtw6M2y.js"),__vite__mapDeps([7,1,2,3])));Ee.locale("vi");const ss=()=>t.jsxs("div",{className:"flex items-center justify-center h-full",children:[t.jsx("div",{style:{border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",width:"30px",height:"30px",animation:"spin 1s linear infinite"}}),t.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]}),Gc=({onLogout:n,showToast:l,hideToast:o})=>{const i=sessionStorage.getItem("currentConsultant")||et,h=sessionStorage.getItem("currentUser")||"User",m=sessionStorage.getItem("userRole")||(h.toLowerCase()==="admin"?"Qun tr vin":"T vn bn hng"),f=h.toLowerCase()==="admin",{isSidebarCollapsed:x,isMobileMenuOpen:g,setIsMobileMenuOpen:y,activeView:c,setActiveView:b,initialAdminState:j,showOrderInAdmin:w,showAdminTab:_,clearInitialState:C}=_c(),[N,M]=u.useState(new Set(["orders"]));u.useEffect(()=>{M(se=>{const me=new Set(se);return me.add(c),me})},[c]);const{allHistoryData:T,setAllHistoryData:P,historyData:A,isLoadingHistory:I,errorHistory:R,refetchHistory:H,archivesLoadedFromCache:E,stockData:S,isLoadingStock:$,errorStock:V,refetchStock:z,highlightedVins:L,soldData:J,isLoadingSold:q,errorSold:ee,refetchSold:ie,testDriveData:oe,setTestDriveData:pe,isLoadingTestDrive:W,refetchTestDrive:Z,xuathoadonData:F,isLoadingXuathoadon:v,errorXuathoadon:Y,refetchXuathoadon:D,teamData:U,allUsers:te,fetchAdminData:de}=Yc({currentUser:i,currentUserName:h,userRole:m,isCurrentUserAdmin:f,showToast:l}),{notifications:Me,unreadCount:Qe,isNotificationPanelOpen:K,notificationContainerRef:ue,toggleNotificationPanel:ve,handleMarkAllAsRead:Se,handleNotificationClick:He}=Sc(l),{selectedOrder:Oe,setSelectedOrder:Ce,orderToCancel:Ye,setOrderToCancel:ut,orderToRequestInvoice:Wt,setOrderToRequestInvoice:Te,orderToSupplement:Pt,setOrderToSupplement:It,orderToEdit:bt,setOrderToEdit:yt,orderToRequestVC:Pe,setOrderToRequestVC:vt,orderToConfirmVC:wt,setOrderToConfirmVC:tt,createRequestData:he,setCreateRequestData:os,isChangePasswordModalOpen:cs,setIsChangePasswordModalOpen:jt,imagePreview:Ae,setImagePreview:Ft,filePreview:We,setFilePreview:Ot,isPendingStatsModalOpen:Es,setIsPendingStatsModalOpen:Nt,processingOrder:ds,processingVin:kt,handleHoldCar:ht,handleReleaseCar:Gt,handleViewDetails:_t,handleCancelOrder:B,handleRequestInvoice:Ps,handleSupplementFiles:Is,handleEditSuccess:Ge,handleConfirmRequestVC:Le,handleConfirmVC:ae,handleCreateRequestForVehicle:qt,handleCreateRequestClose:ce,handleFormSuccess:St,openImagePreviewModal:Xt,openFilePreviewModal:At}=Ec({showToast:l,hideToast:o,refetchHistory:H,refetchStock:z,setAllHistoryData:P}),[we,qe]=u.useState("grid"),[Re,je]=u.useState(!1),[Ie,Be]=u.useState(E);_e.useEffect(()=>{Be(E)},[E]),_e.useEffect(()=>{const me={orders:"Qun L n Hng",stock:"Kho Xe",sold:"Lch S",admin:"Qun Tr",laithu:"Li Th"}[c]||"Order Management",Ne=["","","","","",""],De=Ne[Math.floor(Math.random()*Ne.length)];document.title=`${me} ${De}`},[c]),_e.useEffect(()=>{f&&b("admin")},[f,b]);const{filters:st,sortConfig:Fs,currentPage:us,setCurrentPage:Ct,handleFilterChange:hs,handleResetFilters:Os,handleSort:mt,processedData:$e,paginatedData:Kt,totalPages:ms,pageSize:As,containerRef:Ls,visibleCount:xe,setVisibleCount:Lt,batchSize:fs}=Pc({allHistoryData:A,isSidebarCollapsed:x,activeView:c,orderView:we}),ft=_e.useRef(null);_e.useEffect(()=>{if(we!=="grid")return;const se=new IntersectionObserver(me=>{me[0].isIntersecting&&xe<$e.length&&Lt(Ne=>Math.min(Ne+fs,$e.length))},{threshold:.1,rootMargin:"100px"});return ft.current&&se.observe(ft.current),()=>{ft.current&&se.unobserve(ft.current)}},[xe,$e.length,fs,we,Lt]);const Zt=async()=>{je(!0);try{const se=await jo();o(),se.data&&se.data.length>0?(sessionStorage.setItem("archivedOrdersData",JSON.stringify(se.data)),P(me=>[...me,...se.data]),l("Ti Thnh Cng",` ti thm ${se.data.length} mc t kho lu tr.`,"success",3e3)):l("Hon Tt","Khng tm thy thm d liu no trong kho lu tr.","info",3e3),Be(!0)}catch(se){o();const me=se instanceof Error?se.message:"Li khng xc nh";l("Ti Tht Bi",me,"error",5e3)}finally{je(!1)}},Rs=se=>{if(!Oe)return;const me=$e,Ne=me.findIndex(ye=>ye["S n hng"]===Oe["S n hng"]);if(Ne===-1)return;const De=se==="prev"?Ne-1:Ne+1;De>=0&&De<me.length&&Ce(me[De])},$s=u.useMemo(()=>{const se=T.filter(De=>{var ye;return(ye=De["Kt qu"])==null?void 0:ye.toLowerCase().includes("cha")}),me={};se.forEach(De=>{const{"Dng xe":ye,"Phin bn":fe,"Ngoi tht":ze}=De;if(ye&&fe&&ze){const Ve=`${ye}|${fe}|${ze}`.trim().toLowerCase();me[Ve]=(me[Ve]||0)+1}});const Ne={};return S.forEach(De=>{const{"Dng xe":ye,"Phin bn":fe,"Ngoi tht":ze}=De;if(ye&&fe&&ze){const Ve=`${ye}|${fe}|${ze}`.trim().toLowerCase(),Xe=Ne[Ve]||{count:0,isSlowMoving:!1};Xe.count+=1;const ke=De["Thi gian nhp"]?Ee(De["Thi gian nhp"]):null;ke&&Ee().diff(ke,"days")>30&&(Xe.isSlowMoving=!0),Ne[Ve]=Xe}}),{pendingRequestCount:me,stockStatus:Ne}},[T,S]),Vs=u.useMemo(()=>{const me=T.filter(ye=>{var fe;return(fe=ye["Kt qu"])==null?void 0:fe.toLowerCase().includes("cha")}),Ne={};return me.forEach(ye=>{const fe=ye["Dng xe"]||"Khng xc nh";Ne[fe]||(Ne[fe]=[]),Ne[fe].push(ye)}),Object.entries(Ne).map(([ye,fe])=>{const ze=fe.length,Ve={};fe.forEach(ke=>{const ps=`${ke["Phin bn"]&&ke["Phin bn"]!=="N/A"?`${ke["Phin bn"]} - `:""}${ke["Ngoi tht"]||"N/A"} / ${ke["Ni tht"]||"N/A"}`;Ve[ps]=(Ve[ps]||0)+1});const Xe=Object.entries(Ve).map(([ke,Rt])=>({variant:ke,count:Rt})).sort((ke,Rt)=>Rt.count-ke.count);return{model:ye,total:ze,variants:Xe}}).sort((ye,fe)=>fe.total-ye.total)},[T]),Hs=u.useMemo(()=>[...new Set(T.map(se=>se["Dng xe"]).filter(Boolean))].sort(),[T]),zs=u.useMemo(()=>[...new Set(T.map(se=>se["Phin bn"]).filter(Boolean))].sort(),[T]),Us=u.useMemo(()=>[...new Set(T.map(se=>se["Trng thi VC"]||se["Kt qu"]||"Cha ghp").filter(Boolean))].sort(),[T]),xs=u.useMemo(()=>[...new Set(T.map(se=>se["Ngoi tht"]).filter(Boolean))].sort(),[T]),gs=()=>{const se="animate-fade-in-up",me=I,Ne=R,De=[{id:"order-filter-car-model",key:"carModel",label:"Dng Xe",options:Hs,icon:"fa-car"},{id:"order-filter-version",key:"version",label:"Phin Bn",options:zs,icon:"fa-cogs"},{id:"order-filter-status",key:"status",label:"Trng Thi",options:Us,icon:"fa-tag"},{id:"order-filter-exterior",key:"exterior",label:"Ngoi Tht",options:xs,icon:"fa-palette"}].filter(fe=>fe.options.length>0),ye=t.jsxs("button",{onClick:()=>Nt(!0),className:"btn-filter h-9 px-4 text-sm font-semibold !text-accent-primary active",title:"Xem thng k cc xe ang c yu cu ch ghp",children:[t.jsx("i",{className:"fas fa-chart-pie mr-2"}),t.jsx("span",{children:"Thng K"})]});if(me&&T.length===0){const fe=Array.from({length:7},(ze,Ve)=>t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"py-1 px-4 sm:px-6",children:t.jsxs("div",{className:"flex items-center space-x-4 p-4 w-full",children:[t.jsx("div",{className:"skeleton-item h-6 w-6 !rounded-full"}),t.jsxs("div",{className:"flex-1 space-y-2 py-1",children:[t.jsx("div",{className:"skeleton-item h-4 w-3/4"}),t.jsx("div",{className:"skeleton-item h-3 w-1/2"})]}),t.jsxs("div",{className:"flex-1 space-y-2 py-1 hidden md:block",children:[t.jsx("div",{className:"skeleton-item h-4 w-5/6"}),t.jsx("div",{className:"skeleton-item h-3 w-1/3"})]}),t.jsx("div",{className:"flex-1 skeleton-item h-4 w-full hidden md:block"}),t.jsx("div",{className:"flex-1 skeleton-item h-4 w-full hidden md:block"}),t.jsx("div",{className:"flex-1 skeleton-item h-8 w-24 !rounded-full hidden md:block"}),t.jsx("div",{className:"flex-1 skeleton-item h-8 w-8 !rounded-lg hidden md:block"})]})})},Ve));return t.jsxs("div",{className:`flex flex-col h-full ${se}`,children:[t.jsx("div",{className:"flex-shrink-0 bg-surface-card rounded-xl shadow-md border border-border-primary p-3 mb-2",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("div",{className:"skeleton-item h-12 rounded-full",style:{flexBasis:"320px",flexGrow:1}}),t.jsx("div",{className:"skeleton-item h-12 w-32 rounded-full"}),t.jsx("div",{className:"skeleton-item h-12 w-32 rounded-full"}),t.jsx("div",{className:"skeleton-item h-12 w-12 !rounded-full ml-auto"})]})}),t.jsx("div",{className:"flex-1 bg-surface-card rounded-xl shadow-md border border-border-primary flex flex-col min-h-0",children:t.jsx("div",{className:"flex-grow overflow-auto",children:t.jsx("table",{className:"min-w-full",children:t.jsx("tbody",{className:"divide-y divide-border-primary",children:fe})})})})]})}return Ne?t.jsx("div",{className:`flex items-center justify-center h-96 ${se}`,children:t.jsxs("div",{className:"text-center p-8 bg-surface-card rounded-lg shadow-xl",children:[t.jsx("i",{className:"fa-solid fa-exclamation-triangle fa-3x text-danger"}),t.jsx("p",{className:"mt-4 text-lg font-semibold",children:"Khng th ti d liu"}),t.jsx("p",{className:"mt-2 text-sm text-text-secondary max-w-sm",children:Ne}),t.jsx("button",{onClick:()=>H(),className:"mt-6 btn-primary",children:"Th li"})]})}):t.jsxs("div",{className:`flex flex-col h-full ${se}`,children:[t.jsx("div",{className:"flex-shrink-0 bg-surface-card rounded-xl shadow-md border border-border-primary p-3 mb-2 relative z-20",children:t.jsx(oc,{filters:st,onFilterChange:hs,onReset:Os,dropdowns:De,searchPlaceholder:"Tm kim SH, tn khch hng, s VIN...",totalCount:$e.length,onRefresh:()=>H(),isLoading:me,size:"compact",plain:!0,extraActionButton:ye,viewSwitcherEnabled:!0,activeView:we,searchable:!1,onViewChange:qe})}),t.jsx("div",{ref:Ls,className:"flex-1 flex flex-col min-h-0",children:we==="table"?t.jsxs("div",{className:"bg-surface-card rounded-xl shadow-md border border-border-primary flex flex-col h-full",children:[t.jsx("div",{className:"overflow-auto relative hidden-scrollbar",children:t.jsx(u.Suspense,{fallback:t.jsx(ss,{}),children:t.jsx(Hc,{orders:Kt,onViewDetails:_t,onCancel:ut,onRequestInvoice:Te,onSupplement:It,onEdit:yt,onRequestVC:vt,onConfirmVC:tt,sortConfig:Fs,onSort:mt,startIndex:(us-1)*As,processingOrder:ds})})}),(ms>0||!Ie)&&t.jsx(cc,{currentPage:us,totalPages:ms,onPageChange:Ct,onLoadMore:Zt,isLoadingArchives:Re,isLastArchive:Ie})]}):t.jsx("div",{className:"bg-surface-card rounded-xl shadow-md border border-border-primary flex flex-col h-full",children:t.jsxs("div",{className:"flex-grow overflow-y-auto relative hidden-scrollbar p-1",children:[t.jsx(Nc,{orders:Kt,onViewDetails:_t,onCancel:ut,onRequestInvoice:Te,onSupplement:It,onEdit:yt,onRequestVC:vt,onConfirmVC:tt,processingOrder:ds}),xe<$e.length&&t.jsx("div",{ref:ft,className:"h-10 w-full flex items-center justify-center py-4",children:t.jsx("i",{className:"fas fa-spinner fa-spin text-accent-primary text-xl"})}),xe>=$e.length&&!Ie&&t.jsx("div",{className:"p-4 flex justify-center",children:t.jsxs("button",{onClick:Zt,disabled:Re,className:"btn-secondary",children:[Re?t.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}):t.jsx("i",{className:"fas fa-cloud-download-alt mr-2"}),"Ti thm d liu c"]})})]})})})]})};return t.jsxs(t.Fragment,{children:[t.jsx(kc,{}),t.jsx("div",{className:"circuit-background"}),t.jsx("div",{className:"scanline"}),t.jsx("div",{id:"sidebar-overlay",onClick:()=>y(!1),className:`fixed inset-0 bg-black/50 z-30 transition-opacity duration-300 lg:hidden ${g?"opacity-100 visible":"opacity-0 invisible"}`}),t.jsxs("div",{className:"relative h-screen flex flex-col transition-all duration-300 ease-in-out w-full pb-16 lg:pb-0",children:[t.jsx(Lc,{setCreateRequestData:os,toggleNotificationPanel:ve,unreadCount:Qe,isNotificationPanelOpen:K,notifications:Me,handleMarkAllAsRead:Se,handleNotificationClick:(se,me)=>He(se,me,T,Ce),onLogout:n,notificationContainerRef:ue,activeView:c,setActiveView:b,isCurrentUserAdmin:f}),t.jsxs("main",{className:"flex-1 p-2 flex flex-col overflow-y-auto",children:[t.jsx("div",{hidden:c!=="orders",className:"h-full",children:gs()}),N.has("stock")&&t.jsx("div",{hidden:c!=="stock",className:"h-full",children:t.jsx(u.Suspense,{fallback:t.jsx(ss,{}),children:t.jsx(zc,{stockData:S,isLoading:$,error:V,refetchStock:z,highlightedVins:L,showToast:l,currentUser:i,isAdmin:f,onCreateRequestForVehicle:qt,onHoldCar:ht,onReleaseCar:Gt,processingVin:kt,isSidebarCollapsed:x,allOrders:T,showOrderInAdmin:w,showAdminTab:_})})}),N.has("sold")&&t.jsx("div",{hidden:c!=="sold",className:"h-full",children:t.jsx(u.Suspense,{fallback:t.jsx(ss,{}),children:t.jsx(Uc,{showToast:l,soldData:J,isLoading:q,error:ee,refetch:ie,isSidebarCollapsed:x})})}),N.has("laithu")&&t.jsx("div",{hidden:c!=="laithu",className:"h-full",children:t.jsx(u.Suspense,{fallback:t.jsx(ss,{}),children:t.jsx(Wc,{showToast:l,hideToast:o,onOpenImagePreview:Xt,currentUser:i,isAdmin:f,allTestDrives:oe,setAllTestDrives:pe,isLoading:W,refetch:Z})})}),N.has("admin")&&t.jsx("div",{hidden:c!=="admin",className:"h-full",children:f&&t.jsx(u.Suspense,{fallback:t.jsx(ss,{}),children:t.jsx(Bc,{showToast:l,hideToast:o,refetchHistory:H,refetchStock:z,allOrders:T,xuathoadonData:F,refetchXuathoadon:D,stockData:S,isLoadingXuathoadon:v,isLoadingHistory:I,errorXuathoadon:Y,onOpenImagePreview:Xt,onOpenFilePreview:At,teamData:U,allUsers:te,refetchAdminData:de,soldData:J,isSidebarCollapsed:x,initialState:j,clearInitialState:C,onNavigateTo:b,onShowOrderDetails:Ce})})})]}),t.jsx("footer",{className:"hidden lg:flex flex-shrink-0 h-8 bg-surface-card/70 backdrop-blur-xl border-t border-border-primary/50 items-center justify-center px-4 sm:px-6",children:t.jsxs("p",{className:"text-xs text-text-secondary",children:[" ",new Date().getFullYear()," Order Management"]})})]}),t.jsx(zo,{isOpen:he.isOpen,onClose:ce,onSuccess:St,showToast:l,hideToast:o,existingOrderNumbers:T.map(se=>se["S n hng"]),initialVehicle:he.initialVehicle,currentUser:i,vehicleAnalyticsData:$s,onOpenImagePreview:Xt}),t.jsx(Xo,{isOpen:cs,onClose:()=>jt(!1),showToast:l,username:h}),t.jsx(to,{order:Oe,onClose:()=>Ce(null),orderList:$e,onNavigate:Rs,onCancel:ut,onRequestInvoice:Te,onSupplement:It,onRequestVC:vt,onConfirmVC:tt,onEdit:yt}),t.jsx(Uo,{isOpen:!!bt,onClose:()=>yt(null),onSuccess:Ge,order:bt,showToast:l,existingOrderNumbers:T.map(se=>se["S n hng"]).filter(se=>se!==(bt==null?void 0:bt["S n hng"]))}),Ye&&t.jsx(so,{order:Ye,onClose:()=>ut(null),onConfirm:B}),Wt&&t.jsx(Oo,{order:Wt,onClose:()=>Te(null),onConfirm:Ps}),Pt&&t.jsx(Ao,{order:Pt,onClose:()=>It(null),onConfirm:Is}),t.jsx(ec,{order:Pe,onClose:()=>vt(null),onSubmit:Le}),wt&&t.jsx(Qo,{isOpen:!!wt,onClose:()=>tt(null),title:"Xc Thc UNC VinClub",description:"Xc nhn bn  nhn c UNC cho yu cu VinClub ca n hng:",targetId:wt["S n hng"],submitText:" Nhn UNC",submitColor:"success",icon:"fa-check-circle",onSubmit:ae}),t.jsx(Ko,{isOpen:!!Ae,onClose:()=>Ft(null),images:(Ae==null?void 0:Ae.images)||[],startIndex:Ae==null?void 0:Ae.startIndex,customerName:Ae==null?void 0:Ae.customerName}),We&&t.jsx(rc,{isOpen:!!We,onClose:()=>Ot(null),fileUrl:We.url,fileLabel:We.label}),t.jsx(lc,{isOpen:Es,onClose:()=>Nt(!1),stats:Vs}),t.jsx(Vc,{activeView:c,setActiveView:b,isCurrentUserAdmin:f,currentUser:i,userRole:m,onLogout:n,setIsChangePasswordModalOpen:jt})]})},qc="/ordermanagement/assets/emerald_bg-B3TxPc-D.webp",Xc="/ordermanagement/assets/mobile_bg_2026-CqU1E6p8.webp",Kc="/ordermanagement/assets/mobile_mask_2026-Bu3lpM05.webp",Zc="/ordermanagement/assets/lantern_body-ClxCsch6.webp",Jc="/ordermanagement/assets/lantern_tassels-BZqiB8Sc.webp",Qc="/ordermanagement/assets/lantern_string-D9biP1bm.webp",ed="/ordermanagement/assets/xuan_mask-Cy54r02V.webp",td="/ordermanagement/assets/tet_scroll_unroll-B9mu4sjd.gif",sd="/ordermanagement/assets/tet_tassel_left-bajjkeLR.png",ad="/ordermanagement/assets/tet_tassel_right-BRdjdVvb.png",nd=()=>{const[n,l]=u.useState([]);return u.useEffect(()=>{const i=[];for(let h=0;h<50;h++)i.push({id:h,top:Math.random()*100,left:Math.random()*100,size:Math.random()*2+.5,duration:Math.random()*20+10,delay:Math.random()*10,opacityStart:Math.random()*.4+.2});l(i)},[]),t.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10 overflow-hidden",children:[n.map(o=>t.jsx("div",{className:"absolute rounded-full bg-[#FCEE21] animate-float-dust mix-blend-screen",style:{top:`${o.top}%`,left:`${o.left}%`,width:`${o.size}px`,height:`${o.size}px`,animationDuration:`${o.duration}s`,animationDelay:`${o.delay}s`,boxShadow:`0 0 ${o.size}px rgba(252, 238, 33, 0.8)`,opacity:0}},o.id)),t.jsx("style",{children:`
                @keyframes float-dust {
                    0% { transform: translateY(0) translateX(0); opacity: 0; filter: brightness(1); }
                    10% { opacity: 0.8; } 
                    50% { transform: translateY(-60px) translateX(20px); opacity: 0.6; filter: brightness(2); }
                    80% { opacity: 0.8; filter: brightness(3); } 
                    100% { transform: translateY(-120px) translateX(-20px); opacity: 0; }
                }
                .animate-float-dust {
                    animation-name: float-dust;
                    animation-timing-function: ease-in-out;
                    animation-iteration-count: infinite;
                    will-change: transform, opacity;
                }
            `})]})},rd="/ordermanagement/assets/emerald_bg_blink-BcXudJQx.webp",id=()=>{const[n,l]=u.useState(!1);return u.useEffect(()=>{let o,i;const h=()=>{const m=Math.random()*4e3+2e3;o=setTimeout(()=>{l(!0),i=setTimeout(()=>{l(!1),h()},900)},m)};return h(),()=>{clearTimeout(o),clearTimeout(i)}},[]),t.jsx("div",{className:"absolute inset-0 transition-opacity duration-500 ease-in-out pointer-events-none z-0",style:{opacity:n?1:0},children:t.jsx("img",{src:rd,alt:"Horse Blink",className:"w-full h-full object-cover object-left"})})},ld=({onLoginSuccess:n,showToast:l})=>{const[o,i]=u.useState(!1),[h,m]=u.useState("login"),[f,x]=u.useState(""),[g,y]=u.useState(""),[c,b]=u.useState(""),[j,w]=u.useState(""),[_,C]=u.useState(""),[N,M]=u.useState(""),[T,P]=u.useState({x:0,y:0}),[A,I]=u.useState(""),R="Qun L n Hng",H=q=>{const ee=q.clientX-window.innerWidth/2,ie=q.clientY-window.innerHeight/2;P({x:ee,y:ie})};u.useEffect(()=>{let q=0;const ee=setInterval(()=>{q<=R.length?(I(R.slice(0,q)),q++):clearInterval(ee)},100);return()=>clearInterval(ee)},[]);const[E,S]=u.useState({days:0,hours:0,minutes:0,seconds:0});u.useEffect(()=>{const q=new Date("2026-02-17T00:00:00"),ee=setInterval(()=>{const ie=new Date,oe=q.getTime()-ie.getTime();oe>0&&S({days:Math.floor(oe/(1e3*60*60*24)),hours:Math.floor(oe/(1e3*60*60)%24),minutes:Math.floor(oe/1e3/60%60),seconds:Math.floor(oe/1e3%60)})},1e3);return()=>clearInterval(ee)},[]);const $=async q=>{if(q.preventDefault(),!f||!g){l("Thng bo","Vui lng nhp y  thng tin!","warning");return}i(!0),await new Promise(ie=>setTimeout(ie,800));const ee=await Bo(f,g);i(!1),ee.success?n():l("Li",ee.message||"Sai thng tin ng nhp.","error")},V=async q=>{q.preventDefault(),i(!0);const ee=await Go(c);i(!1),ee.success?(l("Thnh cng","M xc thc  gi.","success"),m("reset")):l("Li",ee.message||"Li gi yu cu.","error")},z=async q=>{q.preventDefault(),i(!0);const ee=await qo(c,j,_);i(!1),ee.success?(l("Thnh cng","i mt khu thnh cng.","success"),L()):l("Li",ee.message||"Tht bi.","error")},L=()=>{b(""),w(""),x(""),y(""),m("login")},J=({value:q,label:ee})=>t.jsxs("div",{className:"flex flex-col items-center mx-1.5",children:[t.jsx("div",{className:"w-9 h-9 flex items-center justify-center bg-[#043927]/60 backdrop-blur-md rounded-lg border border-[#C5A059]/30 shadow-lg",children:t.jsx("span",{className:"text-sm font-bold text-[#FCEE21] font-mono",children:String(q).padStart(2,"0")})}),t.jsx("span",{className:"text-[8px] text-[#C5A059] uppercase mt-1 tracking-wider",children:ee})]});return t.jsxs("div",{className:"relative min-h-screen w-full flex items-center justify-center overflow-hidden font-sans selection:bg-[#043927] selection:text-[#FCEE21]",onMouseMove:H,children:[t.jsxs("div",{className:"absolute inset-0 z-0",children:[t.jsx("img",{src:qc,alt:"Emerald Background",className:"hidden lg:block w-full h-full object-cover object-left pointer-events-none select-none",draggable:"false"}),t.jsx("img",{src:Xc,alt:"Mobile Background",className:"block lg:hidden w-full h-full object-cover object-center pointer-events-none select-none",draggable:"false"}),t.jsx("img",{src:Kc,alt:"Mobile Glow",className:"block lg:hidden absolute inset-0 w-full h-full object-cover object-center pointer-events-none select-none mix-blend-screen animate-pulse-fast opacity-100",draggable:"false"}),t.jsx("div",{className:"hidden lg:block",children:t.jsx(id,{})}),t.jsx("img",{src:ed,alt:"Xuan Effect",className:"hidden lg:block absolute inset-0 w-full h-full object-cover object-left z-0 pointer-events-none mix-blend-screen animate-pulse-fast opacity-50 select-none",draggable:"false"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 via-transparent to-black/40 mix-blend-multiply"}),t.jsx(nd,{}),t.jsx(Sn,{flowerType:"mixed",delay:0,sizeMode:"large"})]}),t.jsxs("div",{className:"absolute top-[10%] left-[4%] z-30 w-48 hidden lg:flex flex-col items-center origin-top animate-swing pointer-events-none transition-transform duration-100 ease-out",style:{animationDuration:"5s",transform:`translate(${T.x*-.02}px, ${T.y*-.02}px)`},children:[t.jsx("div",{className:"h-40 w-full flex justify-center -mb-2 overflow-visible relative z-10",children:t.jsx("img",{src:Qc,alt:"Lantern String",className:"h-full w-auto object-contain filter brightness-110 drop-shadow-md",draggable:"false"})}),t.jsxs("div",{className:"-mt-2 relative w-full flex flex-col items-center",children:[t.jsx("img",{src:Zc,alt:"Lantern Body",className:"w-full relative z-20 animate-candle-glow",draggable:"false"}),t.jsx("div",{className:"absolute top-[92%] w-full flex justify-center z-10 animate-sway origin-top",children:t.jsx("img",{src:Jc,alt:"Lantern Tassels",className:"w-full filter brightness-110",draggable:"false"})})]}),t.jsx("img",{src:jn,className:"absolute top-[35%] right-[20%] w-5 h-5 rotate-45 opacity-90 z-30 animate-sway",style:{animationDuration:"5s"},draggable:"false"})]}),t.jsxs("div",{className:"relative z-10 w-full max-w-7xl h-full flex flex-col lg:flex-row items-center justify-center p-4 lg:p-12 gap-12 lg:gap-24",children:[t.jsx("div",{className:"hidden lg:flex flex-col items-center absolute right-[-12%] top-[8%] z-20 animate-swing-slow origin-top select-none",children:t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:td,alt:"Tet Scroll",className:"w-[140px] lg:w-[150px] opacity-70 filter brightness-90 animate-unroll",draggable:"false"}),t.jsxs("div",{className:"absolute bottom-3 left-0 w-full flex justify-between px-6 z-[-1] opacity-0 animate-fade-in",style:{animationDelay:"4s",animationFillMode:"forwards"},children:[t.jsx("img",{src:sd,className:"h-14 w-auto animate-sway origin-top",style:{animationDelay:"5.5s"},draggable:"false"}),t.jsx("img",{src:ad,className:"h-14 w-auto animate-sway origin-top",style:{animationDelay:"6s"},draggable:"false"})]})]})}),t.jsx("style",{children:`
                @keyframes text-glow {
                    0%, 100% { opacity: 0.5; filter: brightness(1.2) blur(1px); }
                    50% { opacity: 1; filter: brightness(2) blur(2px) drop-shadow(0 0 5px #00ff00); }
                }
                .animate-text-glow { animation: text-glow 2s ease-in-out infinite; }
                @keyframes swing-slow {
                    0% { transform: rotate(1deg); }
                    100% { transform: rotate(-1deg); }
                }
                .animate-swing-slow { animation: swing-slow 6s ease-in-out infinite alternate; }
                
                /* Unroll Animation */
                @keyframes unroll {
                    0% { 
                        clip-path: inset(0 0 100% 0);
                        opacity: 0;
                    }
                    100% { 
                        clip-path: inset(0 0 0 0);
                        opacity: 1;
                    }
                }
                .animate-unroll {
                    animation: unroll 3s ease-out forwards;
                }
                @keyframes fade-in {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                .animate-fade-in { animation: fade-in 1s ease-out forwards; }
            `}),t.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 flex lg:hidden z-50 w-max",children:t.jsxs("div",{className:"flex items-center gap-3 bg-black/60 px-4 py-2 rounded-full border border-[#C5A059]/40 backdrop-blur-xl shadow-[0_0_15px_rgba(0,0,0,0.5)] overflow-hidden",children:[t.jsxs("div",{className:"flex flex-col items-end mr-1 animate-part-fly-in-top",style:{animationDelay:"0.2s"},children:[t.jsx("span",{className:"text-[8px] text-[#C5A059] uppercase tracking-wider font-bold",children:"Sp n"}),t.jsx("span",{className:"text-[10px] text-white font-bold leading-3",children:"Tt 2026"})]}),t.jsx("div",{className:"h-6 w-[1px] bg-[#C5A059]/30 animate-part-fly-in-bottom",style:{animationDelay:"0.6s"}}),t.jsxs("div",{className:"flex gap-3 text-center",children:[t.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-left",style:{animationDelay:"1.0s"},children:[t.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(E.days).padStart(2,"0")}),t.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Ngy"})]}),t.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-top",style:{animationDelay:"1.4s"},children:[t.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(E.hours).padStart(2,"0")}),t.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Gi"})]}),t.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-bottom",style:{animationDelay:"1.8s"},children:[t.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(E.minutes).padStart(2,"0")}),t.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Pht"})]}),t.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-right",style:{animationDelay:"2.2s"},children:[t.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(E.seconds).padStart(2,"0")}),t.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Giy"})]})]})]})}),t.jsx("div",{className:"fixed bottom-0 right-0 hidden lg:block z-50 m-2",children:t.jsxs("div",{className:"flex items-center bg-black/40 p-3 rounded-xl border border-[#C5A059]/30 backdrop-blur-md scale-90 origin-bottom-right overflow-hidden",children:[t.jsxs("div",{className:"mr-3 text-right animate-part-fly-in-top",style:{animationDelay:"0.2s"},children:[t.jsx("p",{className:"text-[#C5A059] text-[10px] uppercase tracking-[0.2em] font-bold",children:"Countdown to"}),t.jsx("p",{className:"text-white text-base font-bold",children:"Tt 2026"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"animate-part-fly-in-left",style:{animationDelay:"1.0s"},children:t.jsx(J,{value:E.days,label:"Ngy"})}),t.jsx("div",{className:"animate-part-fly-in-top",style:{animationDelay:"1.4s"},children:t.jsx(J,{value:E.hours,label:"Gi"})}),t.jsx("div",{className:"animate-part-fly-in-bottom",style:{animationDelay:"1.8s"},children:t.jsx(J,{value:E.minutes,label:"Pht"})}),t.jsx("div",{className:"animate-part-fly-in-right",style:{animationDelay:"2.2s"},children:t.jsx(J,{value:E.seconds,label:"Giy"})})]})]})}),t.jsx("div",{className:"w-full flex items-center justify-center animate-fade-in-right relative z-10 px-4 lg:px-0",children:t.jsxs("div",{className:"relative w-full max-w-[400px] p-8 rounded-2xl bg-[#043927]/20 backdrop-blur-xl border border-[#C5A059]/30 shadow-[0_8px_32px_0_rgba(0,0,0,0.36)] flex flex-col items-center justify-center overflow-hidden group",children:[t.jsx("div",{className:"absolute top-0 -left-[100%] w-full h-full bg-gradient-to-r from-transparent via-white/5 to-transparent group-hover:transition-all group-hover:duration-1000 group-hover:left-[100%]"}),t.jsx("div",{className:"absolute inset-0 rounded-2xl shadow-[inset_0_0_20px_rgba(197,160,89,0.1)] pointer-events-none"}),t.jsx("img",{src:wn,className:"absolute top-[-10px] left-8 w-6 h-6 rotate-12 opacity-90 z-20 pointer-events-none drop-shadow-sm select-none",draggable:"false"}),t.jsx("img",{src:Nn,className:"absolute top-[-5px] right-12 w-5 h-5 -rotate-45 opacity-80 z-20 pointer-events-none drop-shadow-sm select-none",draggable:"false"}),t.jsxs("div",{className:"text-center mb-6 w-full relative z-10",children:[t.jsx("h2",{className:"text-2xl font-bold text-[#FCEE21] mb-2 uppercase tracking-widest",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:h==="login"?"ng Nhp":h==="forgot"?"Khi Phc":"Mt Khu Mi"}),t.jsxs("p",{className:"text-[#C5A059] text-[10px] tracking-widest uppercase font-bold min-h-[15px]",children:[A,t.jsx("span",{className:"animate-blink",children:"|"})]})]}),h==="login"&&t.jsxs("form",{onSubmit:$,className:"space-y-3 w-full relative z-10",children:[t.jsx("div",{className:"space-y-1",children:t.jsxs("div",{className:"relative group/input",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("i",{className:"fas fa-user text-[#FCEE21]/70 text-xs transition-colors group-focus-within/input:text-[#FCEE21]"})}),t.jsx("input",{value:f,onChange:q=>x(q.target.value),type:"text",className:"w-full pl-10 pr-4 py-3 bg-black/30 border border-[#C5A059]/40 rounded-xl text-[#FCEE21] placeholder-[#FCEE21]/50 focus:outline-none focus:border-[#FCEE21] focus:bg-black/50 transition-all text-base shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)] backdrop-blur-sm",placeholder:"Tn ng nhp"})]})}),t.jsx("div",{className:"space-y-1",children:t.jsxs("div",{className:"relative group/input",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:t.jsx("i",{className:"fas fa-lock text-[#FCEE21]/70 text-sm transition-colors group-focus-within/input:text-[#FCEE21]"})}),t.jsx("input",{value:g,onChange:q=>y(q.target.value),type:"password",className:"w-full pl-10 pr-4 py-3 bg-black/30 border border-[#C5A059]/40 rounded-xl text-[#FCEE21] placeholder-[#FCEE21]/50 focus:outline-none focus:border-[#FCEE21] focus:bg-black/50 transition-all text-base shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)] backdrop-blur-sm",placeholder:"Mt khu"})]})}),t.jsxs("button",{type:"submit",disabled:o,className:`w-full py-3.5 mt-6 bg-gradient-to-r from-[#C5A059] to-[#997B3C] hover:from-[#D4B36A] hover:to-[#AA8A4B] text-[#043927] font-bold rounded-xl shadow-[0_4px_15px_rgba(197,160,89,0.3)] transform transition-all active:scale-[0.98] uppercase tracking-wider text-sm flex items-center justify-center gap-2 border border-[#FCEE21]/30 relative overflow-hidden ${o?"animate-pulse-gold":""}`,children:[o&&t.jsx("div",{className:"absolute top-0 left-0 h-[2px] w-full bg-gradient-to-r from-transparent via-[#FFF] to-transparent animate-fuse-burn"}),o?t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-spinner fa-spin text-lg"}),t.jsx("span",{children:"ang Xc Thc..."})]}):"ng Nhp"]}),t.jsx("div",{className:"text-center flex justify-center mt-2",children:t.jsx("button",{type:"button",onClick:()=>m("forgot"),className:"text-[#C5A059]/80 hover:text-[#FCEE21] text-xs hover:underline transition-all font-medium",children:"Qun mt khu?"})})]}),h==="forgot"&&t.jsxs("form",{onSubmit:V,className:"space-y-3 w-full relative z-10 px-4",children:[t.jsx("div",{className:"space-y-1",children:t.jsxs("div",{className:"relative group/input",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("i",{className:"fas fa-envelope text-[#FCEE21]/70 text-xs transition-colors group-focus-within/input:text-[#FCEE21]"})}),t.jsx("input",{value:c,onChange:q=>b(q.target.value),type:"email",className:"w-full pl-8 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"Email ng k"})]})}),t.jsx("button",{type:"submit",disabled:o,className:"w-full py-2.5 mt-4 bg-gradient-to-r from-[#C5A059] to-[#997B3C] hover:from-[#D4B36A] hover:to-[#AA8A4B] text-[#043927] font-bold rounded-lg shadow-[0_4px_10px_rgba(0,0,0,0.5)] transform transition-all active:scale-[0.98] uppercase tracking-wider text-xs flex items-center justify-center gap-2 border border-[#FCEE21]/30",children:o?t.jsx("i",{className:"fas fa-spinner fa-spin"}):"Gi M Xc Nhn"}),t.jsx("div",{className:"text-center flex justify-center mt-2",children:t.jsx("button",{type:"button",onClick:L,className:"text-[#C5A059]/80 hover:text-[#FCEE21] text-xs hover:underline transition-all font-medium",children:"Quay li ng nhp"})})]}),h==="reset"&&t.jsxs("form",{onSubmit:z,className:"space-y-3 w-full relative z-10 px-4",children:[t.jsx("div",{className:"space-y-1",children:t.jsx("input",{value:j,onChange:q=>w(q.target.value),type:"text",className:"w-full pl-3 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner text-center tracking-widest focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"M OTP"})}),t.jsx("div",{className:"space-y-1",children:t.jsx("input",{value:_,onChange:q=>C(q.target.value),type:"password",className:"w-full pl-3 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"Mt khu mi"})}),t.jsx("div",{className:"space-y-1",children:t.jsx("input",{value:N,onChange:q=>M(q.target.value),type:"password",className:"w-full pl-3 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"Nhp li mt khu"})}),t.jsx("button",{type:"submit",disabled:o,className:"w-full py-2.5 mt-4 bg-gradient-to-r from-[#C5A059] to-[#997B3C] hover:from-[#D4B36A] hover:to-[#AA8A4B] text-[#043927] font-bold rounded-lg shadow-[0_4px_10px_rgba(0,0,0,0.5)] transform transition-all active:scale-[0.98] uppercase tracking-wider text-xs flex items-center justify-center gap-2 border border-[#FCEE21]/30",children:o?t.jsx("i",{className:"fas fa-spinner fa-spin"}):"i Mt Khu"}),t.jsx("div",{className:"text-center flex justify-center mt-2",children:t.jsx("button",{type:"button",onClick:L,className:"text-[#C5A059]/80 hover:text-[#FCEE21] text-xs hover:underline transition-all font-medium",children:"Hy b"})})]})]})})]}),t.jsx("style",{children:`
                @keyframes fade-in-up {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes fade-in-right {
                    from { opacity: 0; transform: translateX(20px); }
                    to { opacity: 1; transform: translateX(0); }
                }
                @keyframes shimmer {
                    from { transform: translateX(-100%) skewX(12deg); }
                    to { transform: translateX(200%) skewX(12deg); }
                }
                @keyframes swing {
                    0% { transform: rotate(3deg); }
                    100% { transform: rotate(-3deg); }
                }
                @keyframes sway {
                    0% { transform: rotate(-5deg); }
                    100% { transform: rotate(5deg); }
                }
                .animate-fade-in-up { animation: fade-in-up 0.8s ease-out forwards; }
                .animate-fade-in-right { animation: fade-in-right 0.8s ease-out forwards; }
                .animate-shimmer { animation: shimmer 2s infinite; }
                .animate-swing { animation: swing 5s ease-in-out infinite alternate; transform-origin: top center; }
                .animate-sway { animation: sway 3s ease-in-out infinite alternate; transform-origin: top center; }
                @keyframes candle-glow {
                    0%, 100% { filter: brightness(1.1) drop-shadow(0 0 25px rgba(252, 238, 33, 0.4)); }
                    50% { filter: brightness(1.3) drop-shadow(0 0 50px rgba(252, 238, 33, 0.8)); }
                    25% { filter: brightness(1.15) drop-shadow(0 0 30px rgba(252, 238, 33, 0.5)); }
                    75% { filter: brightness(1.25) drop-shadow(0 0 40px rgba(252, 238, 33, 0.6)); }
                }
                .animate-candle-glow { animation: candle-glow 2.5s ease-in-out infinite; }
                @keyframes pulse-fast {
                    0%, 100% { opacity: 0.6; filter: brightness(1.2) drop-shadow(0 0 5px rgba(255, 200, 0, 0.5)); }
                    50% { opacity: 1; filter: brightness(1.6) drop-shadow(0 0 20px rgba(255, 100, 0, 0.9)); }
                }
                .animate-pulse-fast { animation: pulse-fast 0.1s ease-in-out infinite; }
                @keyframes blink {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0; }
                }
                .animate-blink { animation: blink 1s step-end infinite; }
                
                @keyframes fuse-burn {
                    0% { transform: translateX(-100%); }
                    100% { transform: translateX(100%); }
                }
                .animate-fuse-burn { animation: fuse-burn 1s linear infinite; }

                @keyframes pulse-gold {
                    0%, 100% { box-shadow: 0 0 0 0 rgba(252, 238, 33, 0.4); }
                    70% { box-shadow: 0 0 0 10px rgba(252, 238, 33, 0); }
                }
                .animate-pulse-gold { animation: pulse-gold 1.5s infinite; }

                /* Transformer / Mechanical Assembly Effects - Multi-directional */
                @keyframes part-fly-in-left {
                    0% { opacity: 0; transform: translateX(-200px) translateY(-50px) rotate(-45deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateX(0) translateY(0) rotate(0) scale(1); filter: blur(0); }
                }
                @keyframes part-fly-in-right {
                    0% { opacity: 0; transform: translateX(200px) translateY(50px) rotate(45deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateX(0) translateY(0) rotate(0) scale(1); filter: blur(0); }
                }
                @keyframes part-fly-in-top {
                    0% { opacity: 0; transform: translateY(-200px) translateX(50px) rotate(180deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateY(0) translateX(0) rotate(0) scale(1); filter: blur(0); }
                }
                 @keyframes part-fly-in-bottom {
                    0% { opacity: 0; transform: translateY(200px) translateX(-50px) rotate(-90deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateY(0) translateX(0) rotate(0) scale(1); filter: blur(0); }
                }

                .animate-part-fly-in-left { animation: part-fly-in-left 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
                .animate-part-fly-in-right { animation: part-fly-in-right 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
                .animate-part-fly-in-top { animation: part-fly-in-top 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
                .animate-part-fly-in-bottom { animation: part-fly-in-bottom 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
            `})]})},od=({title:n,message:l,type:o,onClose:i,duration:h})=>{const[m,f]=u.useState(!1),x=u.useRef(null),g=u.useCallback(()=>{x.current&&clearTimeout(x.current),f(!0),setTimeout(()=>{i()},400)},[i]);u.useEffect(()=>(o!=="loading"&&h&&h>0&&(x.current=window.setTimeout(g,h)),()=>{x.current&&clearTimeout(x.current)}),[n,l,o,h,g]);const c={success:{icon:"fa-check",gradient:"from-emerald-400 to-green-600",shadow:"shadow-emerald-500/30",textColor:"text-emerald-700"},error:{icon:"fa-times",gradient:"from-rose-400 to-red-600",shadow:"shadow-rose-500/30",textColor:"text-rose-700"},loading:{icon:"fa-spinner fa-spin",gradient:"from-blue-400 to-indigo-600",shadow:"shadow-blue-500/30",textColor:"text-blue-700"},warning:{icon:"fa-exclamation",gradient:"from-amber-400 to-orange-600",shadow:"shadow-amber-500/30",textColor:"text-amber-700"},info:{icon:"fa-info",gradient:"from-sky-400 to-blue-600",shadow:"shadow-sky-500/30",textColor:"text-sky-700"}}[o],b=m?"animate-fade-out":"animate-fade-in-up";return t.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] pointer-events-none flex justify-end",children:t.jsxs("div",{className:`
                    pointer-events-auto 
                    relative overflow-hidden
                    bg-white/95 backdrop-blur-xl 
                    border border-white/60 
                    shadow-xl shadow-black/5 
                    rounded-full
                    py-2 pl-2 pr-4
                    flex items-center gap-3
                    w-auto max-w-sm
                    ${b}
                    transition-all duration-300
                `,role:"alert",children:[t.jsx("div",{className:`absolute -top-6 -left-6 w-16 h-16 bg-gradient-to-br ${c.gradient} opacity-20 blur-xl rounded-full pointer-events-none`}),t.jsx("div",{className:`
                    relative flex-shrink-0 
                    w-8 h-8 
                    rounded-full 
                    bg-gradient-to-br ${c.gradient} 
                    flex items-center justify-center 
                    text-white text-sm
                    ${c.shadow} shadow-md
                `,children:t.jsx("i",{className:`fas ${c.icon}`})}),t.jsxs("div",{className:"flex-grow min-w-0 flex flex-col justify-center",children:[t.jsx("h4",{className:`font-bold text-xs ${c.textColor} leading-tight`,children:n}),l&&t.jsx("p",{className:"text-slate-600 text-[10px] leading-tight truncate max-w-[200px]",children:l})]}),o!=="loading"&&t.jsx("button",{onClick:g,className:"flex-shrink-0 w-5 h-5 rounded-full hover:bg-slate-100 text-slate-400 hover:text-slate-600 flex items-center justify-center transition-colors ml-1",children:t.jsx("i",{className:"fas fa-times text-[10px]"})})]})})},cd="/ordermanagement/assets/message_sent-DyIxiuZB.json",dd=({title:n,message:l,onClose:o,duration:i=3e3})=>{const[h,m]=u.useState(!1),f=u.useRef(null),x=u.useRef(null),g=u.useCallback(()=>{f.current&&clearTimeout(f.current),m(!0),setTimeout(()=>{o()},300)},[o]);u.useEffect(()=>{const c=x.current;return c&&typeof c.stop=="function"&&(c.stop(),c.play()),f.current=window.setTimeout(()=>{g()},i),()=>{f.current&&clearTimeout(f.current)}},[i,g]);const y=h?"toast-hidden":"toast-visible";return t.jsx("div",{className:`toast-container ${y}`,role:"alert","aria-live":"assertive","aria-atomic":"true",children:t.jsxs("div",{className:"toast-content",children:[t.jsx("div",{className:"flex-shrink-0 w-12 h-12 flex items-center justify-center",children:t.jsx("lottie-player",{ref:x,src:cd,background:"transparent",speed:"1",style:{width:"60px",height:"60px",margin:"-5px"},autoplay:!0,loop:!1})}),t.jsxs("div",{className:"toast-body flex-grow",children:[t.jsx("p",{className:"toast-title",children:n}),l&&t.jsx("p",{className:"toast-message",children:l})]}),t.jsx("div",{className:"toast-close",children:t.jsx(X,{onClick:g,variant:"ghost",className:"text-white/80 hover:text-white !p-0 w-8 h-8 rounded-full flex items-center justify-center",children:t.jsx("i",{className:"fas fa-times text-xl"})})})]})})},ud=()=>t.jsxs("div",{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-[#051a14] overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-[#043927]/30 via-black to-black"}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[t.jsxs("div",{className:"relative mb-8",children:[t.jsx("div",{className:"absolute inset-0 bg-[#FCEE21] blur-[40px] opacity-20 animate-pulse"}),t.jsx("h1",{className:"text-6xl md:text-8xl font-bold text-[#FCEE21] tracking-wider animate-bounce-slow",style:{textShadow:"0 0 20px rgba(252, 238, 33, 0.5)"},children:"2026"})]}),t.jsx("div",{className:"w-64 h-1 bg-[#043927] rounded-full overflow-hidden border border-[#C5A059]/30",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-[#C5A059] via-[#FCEE21] to-[#C5A059] animate-loading-bar w-full origin-left"})}),t.jsx("p",{className:"mt-4 text-[#C5A059] text-xs uppercase tracking-[0.3em] animate-pulse",children:"ang ti d liu..."})]}),t.jsx("style",{children:`
                @keyframes bounce-slow {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-10px); }
                }
                .animate-bounce-slow { animation: bounce-slow 3s infinite ease-in-out; }
                
                @keyframes loading-bar {
                    0% { transform: scaleX(0); }
                    50% { transform: scaleX(0.7); }
                    100% { transform: scaleX(1); }
                }
                .animate-loading-bar { animation: loading-bar 2s infinite ease-in-out; }
            `})]}),hd=()=>{const[n,l]=u.useState(!1),[o,i]=u.useState("idle"),[h,m]=u.useState(null),[f,x]=u.useState(0);u.useEffect(()=>{if(!window.electronAPI)return;const j=N=>{m(N),i("available"),l(!0)},w=N=>{i("downloading"),x(N.percent)},_=N=>{i("ready"),m(N),l(!0)},C=N=>{console.error("Update error:",N),i("error"),l(!0)};return window.electronAPI.onUpdateAvailable(j),window.electronAPI.onDownloadProgress(w),window.electronAPI.onUpdateDownloaded(_),window.electronAPI.onUpdateError(C),()=>{window.electronAPI.removeAllListeners("update-available"),window.electronAPI.removeAllListeners("download-progress"),window.electronAPI.removeAllListeners("update-downloaded"),window.electronAPI.removeAllListeners("update-error")}},[]);const g=()=>window.electronAPI.startDownload(),y=()=>window.electronAPI.quitAndInstall(),c=()=>l(!1),b=()=>l(!1);return n?t.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] animate-slide-in-up",children:t.jsxs("div",{className:"bg-black/90 backdrop-blur text-white rounded-full border border-white/10 shadow-xl px-4 py-2 flex items-center gap-3 text-xs font-medium ring-1 ring-white/5 transition-all hover:scale-[1.02] cursor-default select-none",children:[t.jsxs("div",{className:"shrink-0",children:[o==="available"&&t.jsx("i",{className:"fas fa-gift text-blue-400 animate-pulse"}),o==="downloading"&&t.jsxs("div",{className:"relative w-4 h-4 flex items-center justify-center",children:[t.jsx("i",{className:"fas fa-arrow-down text-[10px] text-white/50"}),t.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[t.jsx("path",{className:"text-white/10",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"text-blue-500 transition-all duration-300",strokeDasharray:`${f}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"})]})]}),o==="ready"&&t.jsx("i",{className:"fas fa-check text-emerald-400"}),o==="error"&&t.jsx("i",{className:"fas fa-exclamation text-red-400"})]}),t.jsx("div",{className:"flex flex-col min-w-[80px] max-w-[120px]",children:t.jsxs("span",{className:"truncate font-semibold tracking-wide",children:[o==="available"&&"Update v"+(h==null?void 0:h.version),o==="downloading"&&`${Math.round(f)}% Downloaded`,o==="ready"&&"Ready to Install",o==="error"&&"Update Failed"]})}),t.jsx("div",{className:"h-4 w-[1px] bg-white/10 mx-1"}),o==="available"&&t.jsx("button",{onClick:g,className:"text-blue-400 hover:text-white transition-colors uppercase text-[10px] font-bold tracking-wider",children:"Get"}),o==="downloading"&&t.jsx("button",{onClick:b,className:"text-white/50 hover:text-white transition-colors",children:t.jsx("i",{className:"fas fa-minus"})}),o==="ready"&&t.jsx("button",{onClick:y,className:"text-emerald-400 hover:text-emerald-300 transition-colors uppercase text-[10px] font-bold tracking-wider",children:"Restart"}),(o==="available"||o==="ready"||o==="error")&&t.jsx("button",{onClick:c,className:"text-white/30 hover:text-white transition-colors ml-1",children:t.jsx("i",{className:"fas fa-times"})})]})}):null},md="1.0.10",Dn={version:md},Mn="app_version",fd=()=>{console.log("New version detected. Clearing cache..."),"caches"in window&&caches.keys().then(n=>{n.forEach(l=>{caches.delete(l)})}),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(n=>{n.forEach(l=>{l.unregister()})}),localStorage.setItem(Mn,Dn.version),window.location.reload()},xd=()=>{const n=localStorage.getItem(Mn),l=Dn.version;n!==l&&fd()};xd();const gd=()=>{const[n,l]=u.useState(!1),[o,i]=u.useState(!0),[h,m]=u.useState(null),[f,x]=u.useState(null);u.useEffect(()=>{const w=sessionStorage.getItem("isLoggedIn")==="true";if(l(w),i(!1),w){en();const _=setInterval(en,2*60*1e3);return()=>clearInterval(_)}},[n]);const g=u.useCallback(()=>{l(!0)},[]),y=u.useCallback((w,_,C,N)=>{m({show:!0,title:w,message:_,type:C,duration:C==="loading"?N??0:N??5e3})},[]),c=u.useCallback(()=>m(null),[]),b=u.useCallback(()=>x(null),[]),j=u.useCallback(()=>{sessionStorage.clear(),l(!1)},[y]);return o?new Date>=new Date("2026-01-05T00:00:00")?t.jsx(ud,{}):t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f0f2f5"},children:[t.jsx("div",{style:{border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",width:"40px",height:"40px",animation:"spin 1s linear infinite"}}),t.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]}):t.jsxs(t.Fragment,{children:[n?t.jsx(Gc,{onLogout:j,showToast:y,hideToast:c}):t.jsx(ld,{onLoginSuccess:g,showToast:y}),h&&t.jsx(od,{...h,onClose:c}),f&&t.jsx(dd,{show:!0,title:f.title,message:f.message,onClose:b,duration:3e3}),t.jsx(hd,{})]})},Tn=document.getElementById("root");if(!Tn)throw new Error("Could not find root element to mount to");const pd=fa.createRoot(Tn);pd.render(t.jsx(_e.StrictMode,{children:t.jsx(gd,{})}));export{Qo as A,X as B,xa as C,Uo as E,Sn as F,pn as M,cc as P,dn as S,Kl as a,oc as b,is as c,co as d,gn as e,Et as f,un as g,ot as h,Ze as i,jd as j,Nd as k,wd as l,Bt as m,Jo as n,io as o,Po as p,xn as q,en as r,kd as s,Ja as t,dt as u,as as v,_d as w,Sd as x,Zo as y};
