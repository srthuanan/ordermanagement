const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StockView-D_sutofd.js","assets/vendor-pdf-Dyj7cThZ.js","assets/vendor-react-KfUPlHYY.js","assets/vendor-utils-C5S46NFB.js","assets/SoldCarsView-BGO_zDHz.js","assets/AdminView-BTXu6M3T.js","assets/TestDriveForm-Nb_cGK7J.js"])))=>i.map(i=>d[i]);
import{j as e,G as Wl,g as Gl,D as ql,P as Xl}from"./vendor-pdf-Dyj7cThZ.js";import{a as nr,c as ir,r as m,R as je}from"./vendor-react-KfUPlHYY.js";import{h as Ye}from"./vendor-utils-C5S46NFB.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function o(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(u){if(u.ep)return;u.ep=!0;const h=o(u);fetch(u.href,h)}})();var ca={},Wa=nr;ca.createRoot=Wa.createRoot,ca.hydrateRoot=Wa.hydrateRoot;const Kl="modulepreload",Zl=function(r){return"/ordermanagement/"+r},Ga={},Ds=function(l,o,i){let u=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),x=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));u=Promise.allSettled(o.map(g=>{if(g=Zl(g),g in Ga)return;Ga[g]=!0;const y=g.endsWith(".css"),c=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${c}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Kl,y||(b.as="script"),b.crossOrigin="",b.href=g,x&&b.setAttribute("nonce",x),document.head.appendChild(b),y)return new Promise((N,j)=>{b.addEventListener("load",N),b.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${g}`)))})}))}function h(f){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=f,window.dispatchEvent(x),!x.defaultPrevented)throw f}return u.then(f=>{for(const x of f||[])x.status==="rejected"&&h(x.reason);return l().catch(h)})};function lr(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ra={exports:{}},qa;function Jl(){return qa||(qa=1,function(r,l){(function(o,i){r.exports=i()})(ir,function(){var o;function i(){return o.apply(null,arguments)}function u(t){o=t}function h(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function f(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function x(t,s){return Object.prototype.hasOwnProperty.call(t,s)}function g(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var s;for(s in t)if(x(t,s))return!1;return!0}function y(t){return t===void 0}function c(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function b(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function N(t,s){var a=[],n,d=t.length;for(n=0;n<d;++n)a.push(s(t[n],n));return a}function j(t,s){for(var a in s)x(s,a)&&(t[a]=s[a]);return x(s,"toString")&&(t.toString=s.toString),x(s,"valueOf")&&(t.valueOf=s.valueOf),t}function k(t,s,a,n){return Na(t,s,a,n,!0).utc()}function C(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(t){return t._pf==null&&(t._pf=C()),t._pf}var _;Array.prototype.some?_=Array.prototype.some:_=function(t){var s=Object(this),a=s.length>>>0,n;for(n=0;n<a;n++)if(n in s&&t.call(this,s[n],n,s))return!0;return!1};function M(t){var s=null,a=!1,n=t._d&&!isNaN(t._d.getTime());if(n&&(s=v(t),a=_.call(s.parsedDateParts,function(d){return d!=null}),n=s.overflow<0&&!s.empty&&!s.invalidEra&&!s.invalidMonth&&!s.invalidWeekday&&!s.weekdayMismatch&&!s.nullInput&&!s.invalidFormat&&!s.userInvalidated&&(!s.meridiem||s.meridiem&&a),t._strict&&(n=n&&s.charsLeftOver===0&&s.unusedTokens.length===0&&s.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=n;else return n;return t._isValid}function E(t){var s=k(NaN);return t!=null?j(v(s),t):v(s).userInvalidated=!0,s}var O=i.momentProperties=[],P=!1;function L(t,s){var a,n,d,p=O.length;if(y(s._isAMomentObject)||(t._isAMomentObject=s._isAMomentObject),y(s._i)||(t._i=s._i),y(s._f)||(t._f=s._f),y(s._l)||(t._l=s._l),y(s._strict)||(t._strict=s._strict),y(s._tzm)||(t._tzm=s._tzm),y(s._isUTC)||(t._isUTC=s._isUTC),y(s._offset)||(t._offset=s._offset),y(s._pf)||(t._pf=v(s)),y(s._locale)||(t._locale=s._locale),p>0)for(a=0;a<p;a++)n=O[a],d=s[n],y(d)||(t[n]=d);return t}function V(t){L(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),P===!1&&(P=!0,i.updateOffset(this),P=!1)}function I(t){return t instanceof V||t!=null&&t._isAMomentObject!=null}function S(t){i.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function $(t,s){var a=!0;return j(function(){if(i.deprecationHandler!=null&&i.deprecationHandler(null,t),a){var n=[],d,p,D,W=arguments.length;for(p=0;p<W;p++){if(d="",typeof arguments[p]=="object"){d+=`
[`+p+"] ";for(D in arguments[0])x(arguments[0],D)&&(d+=D+": "+arguments[0][D]+", ");d=d.slice(0,-2)}else d=arguments[p];n.push(d)}S(t+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),a=!1}return s.apply(this,arguments)},s)}var H={};function z(t,s){i.deprecationHandler!=null&&i.deprecationHandler(t,s),H[t]||(S(s),H[t]=!0)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;function R(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Q(t){var s,a;for(a in t)x(t,a)&&(s=t[a],R(s)?this[a]=s:this["_"+a]=s);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function q(t,s){var a=j({},t),n;for(n in s)x(s,n)&&(f(t[n])&&f(s[n])?(a[n]={},j(a[n],t[n]),j(a[n],s[n])):s[n]!=null?a[n]=s[n]:delete a[n]);for(n in t)x(t,n)&&!x(s,n)&&f(t[n])&&(a[n]=j({},a[n]));return a}function ee(t){t!=null&&this.set(t)}var ne;Object.keys?ne=Object.keys:ne=function(t){var s,a=[];for(s in t)x(t,s)&&a.push(s);return a};var oe={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function xe(t,s,a){var n=this._calendar[t]||this._calendar.sameElse;return R(n)?n.call(s,a):n}function G(t,s,a){var n=""+Math.abs(t),d=s-n.length,p=t>=0;return(p?a?"+":"":"-")+Math.pow(10,Math.max(0,d)).toString().substr(1)+n}var Z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,A=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,w={},Y={};function T(t,s,a,n){var d=n;typeof n=="string"&&(d=function(){return this[n]()}),t&&(Y[t]=d),s&&(Y[s[0]]=function(){return G(d.apply(this,arguments),s[1],s[2])}),a&&(Y[a]=function(){return this.localeData().ordinal(d.apply(this,arguments),t)})}function U(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function te(t){var s=t.match(Z),a,n;for(a=0,n=s.length;a<n;a++)Y[s[a]]?s[a]=Y[s[a]]:s[a]=U(s[a]);return function(d){var p="",D;for(D=0;D<n;D++)p+=R(s[D])?s[D].call(d,t):s[D];return p}}function ue(t,s){return t.isValid()?(s=De(s,t.localeData()),w[s]=w[s]||te(s),w[s](t)):t.localeData().invalidDate()}function De(t,s){var a=5;function n(d){return s.longDateFormat(d)||d}for(A.lastIndex=0;a>=0&&A.test(t);)t=t.replace(A,n),A.lastIndex=0,a-=1;return t}var Je={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function X(t){var s=this._longDateFormat[t],a=this._longDateFormat[t.toUpperCase()];return s||!a?s:(this._longDateFormat[t]=a.match(Z).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[t])}var he="Invalid date";function ge(){return this._invalidDate}var be="%d",Oe=/\d{1,2}/;function Fe(t){return this._ordinal.replace("%d",t)}var Se={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Me(t,s,a,n){var d=this._relativeTime[a];return R(d)?d(t,s,a,n):d.replace(/%d/i,t)}function Ct(t,s){var a=this._relativeTime[t>0?"future":"past"];return R(a)?a(s):a.replace(/%s/i,s)}var Dt={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Ce(t){return typeof t=="string"?Dt[t]||Dt[t.toLowerCase()]:void 0}function bt(t){var s={},a,n;for(n in t)x(t,n)&&(a=Ce(n),a&&(s[a]=t[n]));return s}var Ts={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function zt(t){var s=[],a;for(a in t)x(t,a)&&s.push({unit:a,priority:Ts[a]});return s.sort(function(n,d){return n.priority-d.priority}),s}var Mt=/\d/,Te=/\d\d/,Ut=/\d{3}/,Bt=/\d{4}/,Tt=/[+-]?\d{6}/,de=/\d\d?/,$e=/\d\d\d\d?/,is=/\d\d\d\d\d\d?/,tt=/\d{1,3}/,Wt=/\d{1,4}/,Et=/[+-]?\d{1,6}/,st=/\d+/,Pt=/[+-]?\d+/,Es=/Z|[+-]\d\d:?\d\d/gi,Yt=/Z|[+-]\d\d(?::?\d\d)?/gi,Ps=/[+-]?\d+(\.\d{1,3})?/,yt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ht=/^[1-9]\d?/,Gt=/^([1-9]\d|\d)/,It;It={};function B(t,s,a){It[t]=R(s)?s:function(n,d){return n&&a?a:s}}function Ys(t,s){return x(It,t)?It[t](s._strict,s._locale):new RegExp(Is(t))}function Is(t){return Ge(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(s,a,n,d,p){return a||n||d||p}))}function Ge(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ae(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ae(t){var s=+t,a=0;return s!==0&&isFinite(s)&&(a=Ae(s)),a}var vt={};function ce(t,s){var a,n=s,d;for(typeof t=="string"&&(t=[t]),c(s)&&(n=function(p,D){D[s]=ae(p)}),d=t.length,a=0;a<d;a++)vt[t[a]]=n}function mt(t,s){ce(t,function(a,n,d,p){d._w=d._w||{},s(a,d._w,d,p)})}function ls(t,s,a){s!=null&&x(vt,t)&&vt[t](s,a._a,a,t)}function Ot(t){return t%4===0&&t%100!==0||t%400===0}var ke=0,qe=1,Ve=2,Ne=3,He=4,Xe=5,Ee=6,Os=7,Fs=8;T("Y",0,0,function(){var t=this.year();return t<=9999?G(t,4):"+"+t}),T(0,["YY",2],0,function(){return this.year()%100}),T(0,["YYYY",4],0,"year"),T(0,["YYYYY",5],0,"year"),T(0,["YYYYYY",6,!0],0,"year"),B("Y",Pt),B("YY",de,Te),B("YYYY",Wt,Bt),B("YYYYY",Et,Tt),B("YYYYYY",Et,Tt),ce(["YYYYY","YYYYYY"],ke),ce("YYYY",function(t,s){s[ke]=t.length===2?i.parseTwoDigitYear(t):ae(t)}),ce("YY",function(t,s){s[ke]=i.parseTwoDigitYear(t)}),ce("Y",function(t,s){s[ke]=parseInt(t,10)});function Qe(t){return Ot(t)?366:365}i.parseTwoDigitYear=function(t){return ae(t)+(ae(t)>68?1900:2e3)};var qt=Be("FullYear",!0);function os(){return Ot(this.year())}function Be(t,s){return function(a){return a!=null?(cs(this,t,a),i.updateOffset(this,s),this):wt(this,t)}}function wt(t,s){if(!t.isValid())return NaN;var a=t._d,n=t._isUTC;switch(s){case"Milliseconds":return n?a.getUTCMilliseconds():a.getMilliseconds();case"Seconds":return n?a.getUTCSeconds():a.getSeconds();case"Minutes":return n?a.getUTCMinutes():a.getMinutes();case"Hours":return n?a.getUTCHours():a.getHours();case"Date":return n?a.getUTCDate():a.getDate();case"Day":return n?a.getUTCDay():a.getDay();case"Month":return n?a.getUTCMonth():a.getMonth();case"FullYear":return n?a.getUTCFullYear():a.getFullYear();default:return NaN}}function cs(t,s,a){var n,d,p,D,W;if(!(!t.isValid()||isNaN(a))){switch(n=t._d,d=t._isUTC,s){case"Milliseconds":return void(d?n.setUTCMilliseconds(a):n.setMilliseconds(a));case"Seconds":return void(d?n.setUTCSeconds(a):n.setSeconds(a));case"Minutes":return void(d?n.setUTCMinutes(a):n.setMinutes(a));case"Hours":return void(d?n.setUTCHours(a):n.setHours(a));case"Date":return void(d?n.setUTCDate(a):n.setDate(a));case"FullYear":break;default:return}p=a,D=t.month(),W=t.date(),W=W===29&&D===1&&!Ot(p)?28:W,d?n.setUTCFullYear(p,D,W):n.setFullYear(p,D,W)}}function As(t){return t=Ce(t),R(this[t])?this[t]():this}function Ls(t,s){if(typeof t=="object"){t=bt(t);var a=zt(t),n,d=a.length;for(n=0;n<d;n++)this[a[n].unit](t[a[n].unit])}else if(t=Ce(t),R(this[t]))return this[t](s);return this}function Rs(t,s){return(t%s+s)%s}var ye;Array.prototype.indexOf?ye=Array.prototype.indexOf:ye=function(t){var s;for(s=0;s<this.length;++s)if(this[s]===t)return s;return-1};function Xt(t,s){if(isNaN(t)||isNaN(s))return NaN;var a=Rs(s,12);return t+=(s-a)/12,a===1?Ot(t)?29:28:31-a%7%2}T("M",["MM",2],"Mo",function(){return this.month()+1}),T("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),T("MMMM",0,0,function(t){return this.localeData().months(this,t)}),B("M",de,ht),B("MM",de,Te),B("MMM",function(t,s){return s.monthsShortRegex(t)}),B("MMMM",function(t,s){return s.monthsRegex(t)}),ce(["M","MM"],function(t,s){s[qe]=ae(t)-1}),ce(["MMM","MMMM"],function(t,s,a,n){var d=a._locale.monthsParse(t,n,a._strict);d!=null?s[qe]=d:v(a).invalidMonth=t});var $s="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ds="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),se=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,me=yt,_e=yt;function Pe(t,s){return t?h(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||se).test(s)?"format":"standalone"][t.month()]:h(this._months)?this._months:this._months.standalone}function ve(t,s){return t?h(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[se.test(s)?"format":"standalone"][t.month()]:h(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function we(t,s,a){var n,d,p,D=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)p=k([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(p,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(p,"").toLocaleLowerCase();return a?s==="MMM"?(d=ye.call(this._shortMonthsParse,D),d!==-1?d:null):(d=ye.call(this._longMonthsParse,D),d!==-1?d:null):s==="MMM"?(d=ye.call(this._shortMonthsParse,D),d!==-1?d:(d=ye.call(this._longMonthsParse,D),d!==-1?d:null)):(d=ye.call(this._longMonthsParse,D),d!==-1?d:(d=ye.call(this._shortMonthsParse,D),d!==-1?d:null))}function et(t,s,a){var n,d,p;if(this._monthsParseExact)return we.call(this,t,s,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(d=k([2e3,n]),a&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(d,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(d,"").replace(".","")+"$","i")),!a&&!this._monthsParse[n]&&(p="^"+this.months(d,"")+"|^"+this.monthsShort(d,""),this._monthsParse[n]=new RegExp(p.replace(".",""),"i")),a&&s==="MMMM"&&this._longMonthsParse[n].test(t))return n;if(a&&s==="MMM"&&this._shortMonthsParse[n].test(t))return n;if(!a&&this._monthsParse[n].test(t))return n}}function Le(t,s){if(!t.isValid())return t;if(typeof s=="string"){if(/^\d+$/.test(s))s=ae(s);else if(s=t.localeData().monthsParse(s),!c(s))return t}var a=s,n=t.date();return n=n<29?n:Math.min(n,Xt(t.year(),a)),t._isUTC?t._d.setUTCMonth(a,n):t._d.setMonth(a,n),t}function ft(t){return t!=null?(Le(this,t),i.updateOffset(this,!0),this):wt(this,"Month")}function Re(){return Xt(this.year(),this.month())}function Ft(t){return this._monthsParseExact?(x(this,"_monthsRegex")||ma.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(x(this,"_monthsShortRegex")||(this._monthsShortRegex=me),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function us(t){return this._monthsParseExact?(x(this,"_monthsRegex")||ma.call(this),t?this._monthsStrictRegex:this._monthsRegex):(x(this,"_monthsRegex")||(this._monthsRegex=_e),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function ma(){function t(J,re){return re.length-J.length}var s=[],a=[],n=[],d,p,D,W;for(d=0;d<12;d++)p=k([2e3,d]),D=Ge(this.monthsShort(p,"")),W=Ge(this.months(p,"")),s.push(D),a.push(W),n.push(W),n.push(D);s.sort(t),a.sort(t),n.sort(t),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Er(t,s,a,n,d,p,D){var W;return t<100&&t>=0?(W=new Date(t+400,s,a,n,d,p,D),isFinite(W.getFullYear())&&W.setFullYear(t)):W=new Date(t,s,a,n,d,p,D),W}function Kt(t){var s,a;return t<100&&t>=0?(a=Array.prototype.slice.call(arguments),a[0]=t+400,s=new Date(Date.UTC.apply(null,a)),isFinite(s.getUTCFullYear())&&s.setUTCFullYear(t)):s=new Date(Date.UTC.apply(null,arguments)),s}function hs(t,s,a){var n=7+s-a,d=(7+Kt(t,0,n).getUTCDay()-s)%7;return-d+n-1}function fa(t,s,a,n,d){var p=(7+a-n)%7,D=hs(t,n,d),W=1+7*(s-1)+p+D,J,re;return W<=0?(J=t-1,re=Qe(J)+W):W>Qe(t)?(J=t+1,re=W-Qe(t)):(J=t,re=W),{year:J,dayOfYear:re}}function Zt(t,s,a){var n=hs(t.year(),s,a),d=Math.floor((t.dayOfYear()-n-1)/7)+1,p,D;return d<1?(D=t.year()-1,p=d+at(D,s,a)):d>at(t.year(),s,a)?(p=d-at(t.year(),s,a),D=t.year()+1):(D=t.year(),p=d),{week:p,year:D}}function at(t,s,a){var n=hs(t,s,a),d=hs(t+1,s,a);return(Qe(t)-n+d)/7}T("w",["ww",2],"wo","week"),T("W",["WW",2],"Wo","isoWeek"),B("w",de,ht),B("ww",de,Te),B("W",de,ht),B("WW",de,Te),mt(["w","ww","W","WW"],function(t,s,a,n){s[n.substr(0,1)]=ae(t)});function Pr(t){return Zt(t,this._week.dow,this._week.doy).week}var Yr={dow:0,doy:6};function Ir(){return this._week.dow}function Or(){return this._week.doy}function Fr(t){var s=this.localeData().week(this);return t==null?s:this.add((t-s)*7,"d")}function Ar(t){var s=Zt(this,1,4).week;return t==null?s:this.add((t-s)*7,"d")}T("d",0,"do","day"),T("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),T("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),T("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),T("e",0,0,"weekday"),T("E",0,0,"isoWeekday"),B("d",de),B("e",de),B("E",de),B("dd",function(t,s){return s.weekdaysMinRegex(t)}),B("ddd",function(t,s){return s.weekdaysShortRegex(t)}),B("dddd",function(t,s){return s.weekdaysRegex(t)}),mt(["dd","ddd","dddd"],function(t,s,a,n){var d=a._locale.weekdaysParse(t,n,a._strict);d!=null?s.d=d:v(a).invalidWeekday=t}),mt(["d","e","E"],function(t,s,a,n){s[n]=ae(t)});function Lr(t,s){return typeof t!="string"?t:isNaN(t)?(t=s.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function Rr(t,s){return typeof t=="string"?s.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Vs(t,s){return t.slice(s,7).concat(t.slice(0,s))}var $r="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),xa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Vr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Hr=yt,zr=yt,Ur=yt;function Br(t,s){var a=h(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(s)?"format":"standalone"];return t===!0?Vs(a,this._week.dow):t?a[t.day()]:a}function Wr(t){return t===!0?Vs(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Gr(t){return t===!0?Vs(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function qr(t,s,a){var n,d,p,D=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)p=k([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(p,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(p,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(p,"").toLocaleLowerCase();return a?s==="dddd"?(d=ye.call(this._weekdaysParse,D),d!==-1?d:null):s==="ddd"?(d=ye.call(this._shortWeekdaysParse,D),d!==-1?d:null):(d=ye.call(this._minWeekdaysParse,D),d!==-1?d:null):s==="dddd"?(d=ye.call(this._weekdaysParse,D),d!==-1||(d=ye.call(this._shortWeekdaysParse,D),d!==-1)?d:(d=ye.call(this._minWeekdaysParse,D),d!==-1?d:null)):s==="ddd"?(d=ye.call(this._shortWeekdaysParse,D),d!==-1||(d=ye.call(this._weekdaysParse,D),d!==-1)?d:(d=ye.call(this._minWeekdaysParse,D),d!==-1?d:null)):(d=ye.call(this._minWeekdaysParse,D),d!==-1||(d=ye.call(this._weekdaysParse,D),d!==-1)?d:(d=ye.call(this._shortWeekdaysParse,D),d!==-1?d:null))}function Xr(t,s,a){var n,d,p;if(this._weekdaysParseExact)return qr.call(this,t,s,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(d=k([2e3,1]).day(n),a&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(d,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(d,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(d,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(p="^"+this.weekdays(d,"")+"|^"+this.weekdaysShort(d,"")+"|^"+this.weekdaysMin(d,""),this._weekdaysParse[n]=new RegExp(p.replace(".",""),"i")),a&&s==="dddd"&&this._fullWeekdaysParse[n].test(t))return n;if(a&&s==="ddd"&&this._shortWeekdaysParse[n].test(t))return n;if(a&&s==="dd"&&this._minWeekdaysParse[n].test(t))return n;if(!a&&this._weekdaysParse[n].test(t))return n}}function Kr(t){if(!this.isValid())return t!=null?this:NaN;var s=wt(this,"Day");return t!=null?(t=Lr(t,this.localeData()),this.add(t-s,"d")):s}function Zr(t){if(!this.isValid())return t!=null?this:NaN;var s=(this.day()+7-this.localeData()._week.dow)%7;return t==null?s:this.add(t-s,"d")}function Jr(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var s=Rr(t,this.localeData());return this.day(this.day()%7?s:s-7)}else return this.day()||7}function Qr(t){return this._weekdaysParseExact?(x(this,"_weekdaysRegex")||Hs.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(x(this,"_weekdaysRegex")||(this._weekdaysRegex=Hr),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function en(t){return this._weekdaysParseExact?(x(this,"_weekdaysRegex")||Hs.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(x(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=zr),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function tn(t){return this._weekdaysParseExact?(x(this,"_weekdaysRegex")||Hs.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(x(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ur),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Hs(){function t(Ie,ot){return ot.length-Ie.length}var s=[],a=[],n=[],d=[],p,D,W,J,re;for(p=0;p<7;p++)D=k([2e3,1]).day(p),W=Ge(this.weekdaysMin(D,"")),J=Ge(this.weekdaysShort(D,"")),re=Ge(this.weekdays(D,"")),s.push(W),a.push(J),n.push(re),d.push(W),d.push(J),d.push(re);s.sort(t),a.sort(t),n.sort(t),d.sort(t),this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function zs(){return this.hours()%12||12}function sn(){return this.hours()||24}T("H",["HH",2],0,"hour"),T("h",["hh",2],0,zs),T("k",["kk",2],0,sn),T("hmm",0,0,function(){return""+zs.apply(this)+G(this.minutes(),2)}),T("hmmss",0,0,function(){return""+zs.apply(this)+G(this.minutes(),2)+G(this.seconds(),2)}),T("Hmm",0,0,function(){return""+this.hours()+G(this.minutes(),2)}),T("Hmmss",0,0,function(){return""+this.hours()+G(this.minutes(),2)+G(this.seconds(),2)});function ga(t,s){T(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),s)})}ga("a",!0),ga("A",!1);function pa(t,s){return s._meridiemParse}B("a",pa),B("A",pa),B("H",de,Gt),B("h",de,ht),B("k",de,ht),B("HH",de,Te),B("hh",de,Te),B("kk",de,Te),B("hmm",$e),B("hmmss",is),B("Hmm",$e),B("Hmmss",is),ce(["H","HH"],Ne),ce(["k","kk"],function(t,s,a){var n=ae(t);s[Ne]=n===24?0:n}),ce(["a","A"],function(t,s,a){a._isPm=a._locale.isPM(t),a._meridiem=t}),ce(["h","hh"],function(t,s,a){s[Ne]=ae(t),v(a).bigHour=!0}),ce("hmm",function(t,s,a){var n=t.length-2;s[Ne]=ae(t.substr(0,n)),s[He]=ae(t.substr(n)),v(a).bigHour=!0}),ce("hmmss",function(t,s,a){var n=t.length-4,d=t.length-2;s[Ne]=ae(t.substr(0,n)),s[He]=ae(t.substr(n,2)),s[Xe]=ae(t.substr(d)),v(a).bigHour=!0}),ce("Hmm",function(t,s,a){var n=t.length-2;s[Ne]=ae(t.substr(0,n)),s[He]=ae(t.substr(n))}),ce("Hmmss",function(t,s,a){var n=t.length-4,d=t.length-2;s[Ne]=ae(t.substr(0,n)),s[He]=ae(t.substr(n,2)),s[Xe]=ae(t.substr(d))});function an(t){return(t+"").toLowerCase().charAt(0)==="p"}var rn=/[ap]\.?m?\.?/i,nn=Be("Hours",!0);function ln(t,s,a){return t>11?a?"pm":"PM":a?"am":"AM"}var ba={calendar:oe,longDateFormat:Je,invalidDate:he,ordinal:be,dayOfMonthOrdinalParse:Oe,relativeTime:Se,months:$s,monthsShort:ds,week:Yr,weekdays:$r,weekdaysMin:Vr,weekdaysShort:xa,meridiemParse:rn},pe={},Jt={},Qt;function on(t,s){var a,n=Math.min(t.length,s.length);for(a=0;a<n;a+=1)if(t[a]!==s[a])return a;return n}function ya(t){return t&&t.toLowerCase().replace("_","-")}function cn(t){for(var s=0,a,n,d,p;s<t.length;){for(p=ya(t[s]).split("-"),a=p.length,n=ya(t[s+1]),n=n?n.split("-"):null;a>0;){if(d=ms(p.slice(0,a).join("-")),d)return d;if(n&&n.length>=a&&on(p,n)>=a-1)break;a--}s++}return Qt}function dn(t){return!!(t&&t.match("^[^/\\\\]*$"))}function ms(t){var s=null,a;if(pe[t]===void 0&&r&&r.exports&&dn(t))try{s=Qt._abbr,a=lr,a("./locale/"+t),xt(s)}catch{pe[t]=null}return pe[t]}function xt(t,s){var a;return t&&(y(s)?a=rt(t):a=Us(t,s),a?Qt=a:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Qt._abbr}function Us(t,s){if(s!==null){var a,n=ba;if(s.abbr=t,pe[t]!=null)z("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=pe[t]._config;else if(s.parentLocale!=null)if(pe[s.parentLocale]!=null)n=pe[s.parentLocale]._config;else if(a=ms(s.parentLocale),a!=null)n=a._config;else return Jt[s.parentLocale]||(Jt[s.parentLocale]=[]),Jt[s.parentLocale].push({name:t,config:s}),null;return pe[t]=new ee(q(n,s)),Jt[t]&&Jt[t].forEach(function(d){Us(d.name,d.config)}),xt(t),pe[t]}else return delete pe[t],null}function un(t,s){if(s!=null){var a,n,d=ba;pe[t]!=null&&pe[t].parentLocale!=null?pe[t].set(q(pe[t]._config,s)):(n=ms(t),n!=null&&(d=n._config),s=q(d,s),n==null&&(s.abbr=t),a=new ee(s),a.parentLocale=pe[t],pe[t]=a),xt(t)}else pe[t]!=null&&(pe[t].parentLocale!=null?(pe[t]=pe[t].parentLocale,t===xt()&&xt(t)):pe[t]!=null&&delete pe[t]);return pe[t]}function rt(t){var s;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Qt;if(!h(t)){if(s=ms(t),s)return s;t=[t]}return cn(t)}function hn(){return ne(pe)}function Bs(t){var s,a=t._a;return a&&v(t).overflow===-2&&(s=a[qe]<0||a[qe]>11?qe:a[Ve]<1||a[Ve]>Xt(a[ke],a[qe])?Ve:a[Ne]<0||a[Ne]>24||a[Ne]===24&&(a[He]!==0||a[Xe]!==0||a[Ee]!==0)?Ne:a[He]<0||a[He]>59?He:a[Xe]<0||a[Xe]>59?Xe:a[Ee]<0||a[Ee]>999?Ee:-1,v(t)._overflowDayOfYear&&(s<ke||s>Ve)&&(s=Ve),v(t)._overflowWeeks&&s===-1&&(s=Os),v(t)._overflowWeekday&&s===-1&&(s=Fs),v(t).overflow=s),t}var mn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,fn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xn=/Z|[+-]\d\d(?::?\d\d)?/,fs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ws=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],gn=/^\/?Date\((-?\d+)/i,pn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,bn={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function va(t){var s,a,n=t._i,d=mn.exec(n)||fn.exec(n),p,D,W,J,re=fs.length,Ie=Ws.length;if(d){for(v(t).iso=!0,s=0,a=re;s<a;s++)if(fs[s][1].exec(d[1])){D=fs[s][0],p=fs[s][2]!==!1;break}if(D==null){t._isValid=!1;return}if(d[3]){for(s=0,a=Ie;s<a;s++)if(Ws[s][1].exec(d[3])){W=(d[2]||" ")+Ws[s][0];break}if(W==null){t._isValid=!1;return}}if(!p&&W!=null){t._isValid=!1;return}if(d[4])if(xn.exec(d[4]))J="Z";else{t._isValid=!1;return}t._f=D+(W||"")+(J||""),qs(t)}else t._isValid=!1}function yn(t,s,a,n,d,p){var D=[vn(t),ds.indexOf(s),parseInt(a,10),parseInt(n,10),parseInt(d,10)];return p&&D.push(parseInt(p,10)),D}function vn(t){var s=parseInt(t,10);return s<=49?2e3+s:s<=999?1900+s:s}function wn(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function jn(t,s,a){if(t){var n=xa.indexOf(t),d=new Date(s[0],s[1],s[2]).getDay();if(n!==d)return v(a).weekdayMismatch=!0,a._isValid=!1,!1}return!0}function Nn(t,s,a){if(t)return bn[t];if(s)return 0;var n=parseInt(a,10),d=n%100,p=(n-d)/100;return p*60+d}function wa(t){var s=pn.exec(wn(t._i)),a;if(s){if(a=yn(s[4],s[3],s[2],s[5],s[6],s[7]),!jn(s[1],a,t))return;t._a=a,t._tzm=Nn(s[8],s[9],s[10]),t._d=Kt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),v(t).rfc2822=!0}else t._isValid=!1}function kn(t){var s=gn.exec(t._i);if(s!==null){t._d=new Date(+s[1]);return}if(va(t),t._isValid===!1)delete t._isValid;else return;if(wa(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:i.createFromInputFallback(t)}i.createFromInputFallback=$("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function At(t,s,a){return t??s??a}function _n(t){var s=new Date(i.now());return t._useUTC?[s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()]:[s.getFullYear(),s.getMonth(),s.getDate()]}function Gs(t){var s,a,n=[],d,p,D;if(!t._d){for(d=_n(t),t._w&&t._a[Ve]==null&&t._a[qe]==null&&Sn(t),t._dayOfYear!=null&&(D=At(t._a[ke],d[ke]),(t._dayOfYear>Qe(D)||t._dayOfYear===0)&&(v(t)._overflowDayOfYear=!0),a=Kt(D,0,t._dayOfYear),t._a[qe]=a.getUTCMonth(),t._a[Ve]=a.getUTCDate()),s=0;s<3&&t._a[s]==null;++s)t._a[s]=n[s]=d[s];for(;s<7;s++)t._a[s]=n[s]=t._a[s]==null?s===2?1:0:t._a[s];t._a[Ne]===24&&t._a[He]===0&&t._a[Xe]===0&&t._a[Ee]===0&&(t._nextDay=!0,t._a[Ne]=0),t._d=(t._useUTC?Kt:Er).apply(null,n),p=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ne]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==p&&(v(t).weekdayMismatch=!0)}}function Sn(t){var s,a,n,d,p,D,W,J,re;s=t._w,s.GG!=null||s.W!=null||s.E!=null?(p=1,D=4,a=At(s.GG,t._a[ke],Zt(fe(),1,4).year),n=At(s.W,1),d=At(s.E,1),(d<1||d>7)&&(J=!0)):(p=t._locale._week.dow,D=t._locale._week.doy,re=Zt(fe(),p,D),a=At(s.gg,t._a[ke],re.year),n=At(s.w,re.week),s.d!=null?(d=s.d,(d<0||d>6)&&(J=!0)):s.e!=null?(d=s.e+p,(s.e<0||s.e>6)&&(J=!0)):d=p),n<1||n>at(a,p,D)?v(t)._overflowWeeks=!0:J!=null?v(t)._overflowWeekday=!0:(W=fa(a,n,d,p,D),t._a[ke]=W.year,t._dayOfYear=W.dayOfYear)}i.ISO_8601=function(){},i.RFC_2822=function(){};function qs(t){if(t._f===i.ISO_8601){va(t);return}if(t._f===i.RFC_2822){wa(t);return}t._a=[],v(t).empty=!0;var s=""+t._i,a,n,d,p,D,W=s.length,J=0,re,Ie;for(d=De(t._f,t._locale).match(Z)||[],Ie=d.length,a=0;a<Ie;a++)p=d[a],n=(s.match(Ys(p,t))||[])[0],n&&(D=s.substr(0,s.indexOf(n)),D.length>0&&v(t).unusedInput.push(D),s=s.slice(s.indexOf(n)+n.length),J+=n.length),Y[p]?(n?v(t).empty=!1:v(t).unusedTokens.push(p),ls(p,n,t)):t._strict&&!n&&v(t).unusedTokens.push(p);v(t).charsLeftOver=W-J,s.length>0&&v(t).unusedInput.push(s),t._a[Ne]<=12&&v(t).bigHour===!0&&t._a[Ne]>0&&(v(t).bigHour=void 0),v(t).parsedDateParts=t._a.slice(0),v(t).meridiem=t._meridiem,t._a[Ne]=Cn(t._locale,t._a[Ne],t._meridiem),re=v(t).era,re!==null&&(t._a[ke]=t._locale.erasConvertYear(re,t._a[ke])),Gs(t),Bs(t)}function Cn(t,s,a){var n;return a==null?s:t.meridiemHour!=null?t.meridiemHour(s,a):(t.isPM!=null&&(n=t.isPM(a),n&&s<12&&(s+=12),!n&&s===12&&(s=0)),s)}function Dn(t){var s,a,n,d,p,D,W=!1,J=t._f.length;if(J===0){v(t).invalidFormat=!0,t._d=new Date(NaN);return}for(d=0;d<J;d++)p=0,D=!1,s=L({},t),t._useUTC!=null&&(s._useUTC=t._useUTC),s._f=t._f[d],qs(s),M(s)&&(D=!0),p+=v(s).charsLeftOver,p+=v(s).unusedTokens.length*10,v(s).score=p,W?p<n&&(n=p,a=s):(n==null||p<n||D)&&(n=p,a=s,D&&(W=!0));j(t,a||s)}function Mn(t){if(!t._d){var s=bt(t._i),a=s.day===void 0?s.date:s.day;t._a=N([s.year,s.month,a,s.hour,s.minute,s.second,s.millisecond],function(n){return n&&parseInt(n,10)}),Gs(t)}}function Tn(t){var s=new V(Bs(ja(t)));return s._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function ja(t){var s=t._i,a=t._f;return t._locale=t._locale||rt(t._l),s===null||a===void 0&&s===""?E({nullInput:!0}):(typeof s=="string"&&(t._i=s=t._locale.preparse(s)),I(s)?new V(Bs(s)):(b(s)?t._d=s:h(a)?Dn(t):a?qs(t):En(t),M(t)||(t._d=null),t))}function En(t){var s=t._i;y(s)?t._d=new Date(i.now()):b(s)?t._d=new Date(s.valueOf()):typeof s=="string"?kn(t):h(s)?(t._a=N(s.slice(0),function(a){return parseInt(a,10)}),Gs(t)):f(s)?Mn(t):c(s)?t._d=new Date(s):i.createFromInputFallback(t)}function Na(t,s,a,n,d){var p={};return(s===!0||s===!1)&&(n=s,s=void 0),(a===!0||a===!1)&&(n=a,a=void 0),(f(t)&&g(t)||h(t)&&t.length===0)&&(t=void 0),p._isAMomentObject=!0,p._useUTC=p._isUTC=d,p._l=a,p._i=t,p._f=s,p._strict=n,Tn(p)}function fe(t,s,a,n){return Na(t,s,a,n,!1)}var Pn=$("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=fe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:E()}),Yn=$("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=fe.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:E()});function ka(t,s){var a,n;if(s.length===1&&h(s[0])&&(s=s[0]),!s.length)return fe();for(a=s[0],n=1;n<s.length;++n)(!s[n].isValid()||s[n][t](a))&&(a=s[n]);return a}function In(){var t=[].slice.call(arguments,0);return ka("isBefore",t)}function On(){var t=[].slice.call(arguments,0);return ka("isAfter",t)}var Fn=function(){return Date.now?Date.now():+new Date},es=["year","quarter","month","week","day","hour","minute","second","millisecond"];function An(t){var s,a=!1,n,d=es.length;for(s in t)if(x(t,s)&&!(ye.call(es,s)!==-1&&(t[s]==null||!isNaN(t[s]))))return!1;for(n=0;n<d;++n)if(t[es[n]]){if(a)return!1;parseFloat(t[es[n]])!==ae(t[es[n]])&&(a=!0)}return!0}function Ln(){return this._isValid}function Rn(){return Ke(NaN)}function xs(t){var s=bt(t),a=s.year||0,n=s.quarter||0,d=s.month||0,p=s.week||s.isoWeek||0,D=s.day||0,W=s.hour||0,J=s.minute||0,re=s.second||0,Ie=s.millisecond||0;this._isValid=An(s),this._milliseconds=+Ie+re*1e3+J*6e4+W*1e3*60*60,this._days=+D+p*7,this._months=+d+n*3+a*12,this._data={},this._locale=rt(),this._bubble()}function gs(t){return t instanceof xs}function Xs(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function $n(t,s,a){var n=Math.min(t.length,s.length),d=Math.abs(t.length-s.length),p=0,D;for(D=0;D<n;D++)ae(t[D])!==ae(s[D])&&p++;return p+d}function _a(t,s){T(t,0,0,function(){var a=this.utcOffset(),n="+";return a<0&&(a=-a,n="-"),n+G(~~(a/60),2)+s+G(~~a%60,2)})}_a("Z",":"),_a("ZZ",""),B("Z",Yt),B("ZZ",Yt),ce(["Z","ZZ"],function(t,s,a){a._useUTC=!0,a._tzm=Ks(Yt,t)});var Vn=/([\+\-]|\d\d)/gi;function Ks(t,s){var a=(s||"").match(t),n,d,p;return a===null?null:(n=a[a.length-1]||[],d=(n+"").match(Vn)||["-",0,0],p=+(d[1]*60)+ae(d[2]),p===0?0:d[0]==="+"?p:-p)}function Zs(t,s){var a,n;return s._isUTC?(a=s.clone(),n=(I(t)||b(t)?t.valueOf():fe(t).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+n),i.updateOffset(a,!1),a):fe(t).local()}function Js(t){return-Math.round(t._d.getTimezoneOffset())}i.updateOffset=function(){};function Hn(t,s,a){var n=this._offset||0,d;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Ks(Yt,t),t===null)return this}else Math.abs(t)<16&&!a&&(t=t*60);return!this._isUTC&&s&&(d=Js(this)),this._offset=t,this._isUTC=!0,d!=null&&this.add(d,"m"),n!==t&&(!s||this._changeInProgress?Ma(this,Ke(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:Js(this)}function zn(t,s){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,s),this):-this.utcOffset()}function Un(t){return this.utcOffset(0,t)}function Bn(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Js(this),"m")),this}function Wn(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Ks(Es,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Gn(t){return this.isValid()?(t=t?fe(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function qn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Xn(){if(!y(this._isDSTShifted))return this._isDSTShifted;var t={},s;return L(t,this),t=ja(t),t._a?(s=t._isUTC?k(t._a):fe(t._a),this._isDSTShifted=this.isValid()&&$n(t._a,s.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Kn(){return this.isValid()?!this._isUTC:!1}function Zn(){return this.isValid()?this._isUTC:!1}function Sa(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Jn=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Qn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ke(t,s){var a=t,n=null,d,p,D;return gs(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:c(t)||!isNaN(+t)?(a={},s?a[s]=+t:a.milliseconds=+t):(n=Jn.exec(t))?(d=n[1]==="-"?-1:1,a={y:0,d:ae(n[Ve])*d,h:ae(n[Ne])*d,m:ae(n[He])*d,s:ae(n[Xe])*d,ms:ae(Xs(n[Ee]*1e3))*d}):(n=Qn.exec(t))?(d=n[1]==="-"?-1:1,a={y:jt(n[2],d),M:jt(n[3],d),w:jt(n[4],d),d:jt(n[5],d),h:jt(n[6],d),m:jt(n[7],d),s:jt(n[8],d)}):a==null?a={}:typeof a=="object"&&("from"in a||"to"in a)&&(D=ei(fe(a.from),fe(a.to)),a={},a.ms=D.milliseconds,a.M=D.months),p=new xs(a),gs(t)&&x(t,"_locale")&&(p._locale=t._locale),gs(t)&&x(t,"_isValid")&&(p._isValid=t._isValid),p}Ke.fn=xs.prototype,Ke.invalid=Rn;function jt(t,s){var a=t&&parseFloat(t.replace(",","."));return(isNaN(a)?0:a)*s}function Ca(t,s){var a={};return a.months=s.month()-t.month()+(s.year()-t.year())*12,t.clone().add(a.months,"M").isAfter(s)&&--a.months,a.milliseconds=+s-+t.clone().add(a.months,"M"),a}function ei(t,s){var a;return t.isValid()&&s.isValid()?(s=Zs(s,t),t.isBefore(s)?a=Ca(t,s):(a=Ca(s,t),a.milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}function Da(t,s){return function(a,n){var d,p;return n!==null&&!isNaN(+n)&&(z(s,"moment()."+s+"(period, number) is deprecated. Please use moment()."+s+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),p=a,a=n,n=p),d=Ke(a,n),Ma(this,d,t),this}}function Ma(t,s,a,n){var d=s._milliseconds,p=Xs(s._days),D=Xs(s._months);t.isValid()&&(n=n??!0,D&&Le(t,wt(t,"Month")+D*a),p&&cs(t,"Date",wt(t,"Date")+p*a),d&&t._d.setTime(t._d.valueOf()+d*a),n&&i.updateOffset(t,p||D))}var ti=Da(1,"add"),si=Da(-1,"subtract");function Ta(t){return typeof t=="string"||t instanceof String}function ai(t){return I(t)||b(t)||Ta(t)||c(t)||ni(t)||ri(t)||t===null||t===void 0}function ri(t){var s=f(t)&&!g(t),a=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],d,p,D=n.length;for(d=0;d<D;d+=1)p=n[d],a=a||x(t,p);return s&&a}function ni(t){var s=h(t),a=!1;return s&&(a=t.filter(function(n){return!c(n)&&Ta(t)}).length===0),s&&a}function ii(t){var s=f(t)&&!g(t),a=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],d,p;for(d=0;d<n.length;d+=1)p=n[d],a=a||x(t,p);return s&&a}function li(t,s){var a=t.diff(s,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function oi(t,s){arguments.length===1&&(arguments[0]?ai(arguments[0])?(t=arguments[0],s=void 0):ii(arguments[0])&&(s=arguments[0],t=void 0):(t=void 0,s=void 0));var a=t||fe(),n=Zs(a,this).startOf("day"),d=i.calendarFormat(this,n)||"sameElse",p=s&&(R(s[d])?s[d].call(this,a):s[d]);return this.format(p||this.localeData().calendar(d,this,fe(a)))}function ci(){return new V(this)}function di(t,s){var a=I(t)?t:fe(t);return this.isValid()&&a.isValid()?(s=Ce(s)||"millisecond",s==="millisecond"?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(s).valueOf()):!1}function ui(t,s){var a=I(t)?t:fe(t);return this.isValid()&&a.isValid()?(s=Ce(s)||"millisecond",s==="millisecond"?this.valueOf()<a.valueOf():this.clone().endOf(s).valueOf()<a.valueOf()):!1}function hi(t,s,a,n){var d=I(t)?t:fe(t),p=I(s)?s:fe(s);return this.isValid()&&d.isValid()&&p.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(d,a):!this.isBefore(d,a))&&(n[1]===")"?this.isBefore(p,a):!this.isAfter(p,a))):!1}function mi(t,s){var a=I(t)?t:fe(t),n;return this.isValid()&&a.isValid()?(s=Ce(s)||"millisecond",s==="millisecond"?this.valueOf()===a.valueOf():(n=a.valueOf(),this.clone().startOf(s).valueOf()<=n&&n<=this.clone().endOf(s).valueOf())):!1}function fi(t,s){return this.isSame(t,s)||this.isAfter(t,s)}function xi(t,s){return this.isSame(t,s)||this.isBefore(t,s)}function gi(t,s,a){var n,d,p;if(!this.isValid())return NaN;if(n=Zs(t,this),!n.isValid())return NaN;switch(d=(n.utcOffset()-this.utcOffset())*6e4,s=Ce(s),s){case"year":p=ps(this,n)/12;break;case"month":p=ps(this,n);break;case"quarter":p=ps(this,n)/3;break;case"second":p=(this-n)/1e3;break;case"minute":p=(this-n)/6e4;break;case"hour":p=(this-n)/36e5;break;case"day":p=(this-n-d)/864e5;break;case"week":p=(this-n-d)/6048e5;break;default:p=this-n}return a?p:Ae(p)}function ps(t,s){if(t.date()<s.date())return-ps(s,t);var a=(s.year()-t.year())*12+(s.month()-t.month()),n=t.clone().add(a,"months"),d,p;return s-n<0?(d=t.clone().add(a-1,"months"),p=(s-n)/(n-d)):(d=t.clone().add(a+1,"months"),p=(s-n)/(d-n)),-(a+p)||0}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function pi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function bi(t){if(!this.isValid())return null;var s=t!==!0,a=s?this.clone().utc():this;return a.year()<0||a.year()>9999?ue(a,s?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):R(Date.prototype.toISOString)?s?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",ue(a,"Z")):ue(a,s?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function yi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",s="",a,n,d,p;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",s="Z"),a="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",d="-MM-DD[T]HH:mm:ss.SSS",p=s+'[")]',this.format(a+n+d+p)}function vi(t){t||(t=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var s=ue(this,t);return this.localeData().postformat(s)}function wi(t,s){return this.isValid()&&(I(t)&&t.isValid()||fe(t).isValid())?Ke({to:this,from:t}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function ji(t){return this.from(fe(),t)}function Ni(t,s){return this.isValid()&&(I(t)&&t.isValid()||fe(t).isValid())?Ke({from:this,to:t}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function ki(t){return this.to(fe(),t)}function Ea(t){var s;return t===void 0?this._locale._abbr:(s=rt(t),s!=null&&(this._locale=s),this)}var Pa=$("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Ya(){return this._locale}var bs=1e3,Lt=60*bs,ys=60*Lt,Ia=(365*400+97)*24*ys;function Rt(t,s){return(t%s+s)%s}function Oa(t,s,a){return t<100&&t>=0?new Date(t+400,s,a)-Ia:new Date(t,s,a).valueOf()}function Fa(t,s,a){return t<100&&t>=0?Date.UTC(t+400,s,a)-Ia:Date.UTC(t,s,a)}function _i(t){var s,a;if(t=Ce(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?Fa:Oa,t){case"year":s=a(this.year(),0,1);break;case"quarter":s=a(this.year(),this.month()-this.month()%3,1);break;case"month":s=a(this.year(),this.month(),1);break;case"week":s=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":s=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":s=a(this.year(),this.month(),this.date());break;case"hour":s=this._d.valueOf(),s-=Rt(s+(this._isUTC?0:this.utcOffset()*Lt),ys);break;case"minute":s=this._d.valueOf(),s-=Rt(s,Lt);break;case"second":s=this._d.valueOf(),s-=Rt(s,bs);break}return this._d.setTime(s),i.updateOffset(this,!0),this}function Si(t){var s,a;if(t=Ce(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?Fa:Oa,t){case"year":s=a(this.year()+1,0,1)-1;break;case"quarter":s=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":s=a(this.year(),this.month()+1,1)-1;break;case"week":s=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":s=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":s=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":s=this._d.valueOf(),s+=ys-Rt(s+(this._isUTC?0:this.utcOffset()*Lt),ys)-1;break;case"minute":s=this._d.valueOf(),s+=Lt-Rt(s,Lt)-1;break;case"second":s=this._d.valueOf(),s+=bs-Rt(s,bs)-1;break}return this._d.setTime(s),i.updateOffset(this,!0),this}function Ci(){return this._d.valueOf()-(this._offset||0)*6e4}function Di(){return Math.floor(this.valueOf()/1e3)}function Mi(){return new Date(this.valueOf())}function Ti(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Ei(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Pi(){return this.isValid()?this.toISOString():null}function Yi(){return M(this)}function Ii(){return j({},v(this))}function Oi(){return v(this).overflow}function Fi(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}T("N",0,0,"eraAbbr"),T("NN",0,0,"eraAbbr"),T("NNN",0,0,"eraAbbr"),T("NNNN",0,0,"eraName"),T("NNNNN",0,0,"eraNarrow"),T("y",["y",1],"yo","eraYear"),T("y",["yy",2],0,"eraYear"),T("y",["yyy",3],0,"eraYear"),T("y",["yyyy",4],0,"eraYear"),B("N",Qs),B("NN",Qs),B("NNN",Qs),B("NNNN",Gi),B("NNNNN",qi),ce(["N","NN","NNN","NNNN","NNNNN"],function(t,s,a,n){var d=a._locale.erasParse(t,n,a._strict);d?v(a).era=d:v(a).invalidEra=t}),B("y",st),B("yy",st),B("yyy",st),B("yyyy",st),B("yo",Xi),ce(["y","yy","yyy","yyyy"],ke),ce(["yo"],function(t,s,a,n){var d;a._locale._eraYearOrdinalRegex&&(d=t.match(a._locale._eraYearOrdinalRegex)),a._locale.eraYearOrdinalParse?s[ke]=a._locale.eraYearOrdinalParse(t,d):s[ke]=parseInt(t,10)});function Ai(t,s){var a,n,d,p=this._eras||rt("en")._eras;for(a=0,n=p.length;a<n;++a){switch(typeof p[a].since){case"string":d=i(p[a].since).startOf("day"),p[a].since=d.valueOf();break}switch(typeof p[a].until){case"undefined":p[a].until=1/0;break;case"string":d=i(p[a].until).startOf("day").valueOf(),p[a].until=d.valueOf();break}}return p}function Li(t,s,a){var n,d,p=this.eras(),D,W,J;for(t=t.toUpperCase(),n=0,d=p.length;n<d;++n)if(D=p[n].name.toUpperCase(),W=p[n].abbr.toUpperCase(),J=p[n].narrow.toUpperCase(),a)switch(s){case"N":case"NN":case"NNN":if(W===t)return p[n];break;case"NNNN":if(D===t)return p[n];break;case"NNNNN":if(J===t)return p[n];break}else if([D,W,J].indexOf(t)>=0)return p[n]}function Ri(t,s){var a=t.since<=t.until?1:-1;return s===void 0?i(t.since).year():i(t.since).year()+(s-t.offset)*a}function $i(){var t,s,a,n=this.localeData().eras();for(t=0,s=n.length;t<s;++t)if(a=this.clone().startOf("day").valueOf(),n[t].since<=a&&a<=n[t].until||n[t].until<=a&&a<=n[t].since)return n[t].name;return""}function Vi(){var t,s,a,n=this.localeData().eras();for(t=0,s=n.length;t<s;++t)if(a=this.clone().startOf("day").valueOf(),n[t].since<=a&&a<=n[t].until||n[t].until<=a&&a<=n[t].since)return n[t].narrow;return""}function Hi(){var t,s,a,n=this.localeData().eras();for(t=0,s=n.length;t<s;++t)if(a=this.clone().startOf("day").valueOf(),n[t].since<=a&&a<=n[t].until||n[t].until<=a&&a<=n[t].since)return n[t].abbr;return""}function zi(){var t,s,a,n,d=this.localeData().eras();for(t=0,s=d.length;t<s;++t)if(a=d[t].since<=d[t].until?1:-1,n=this.clone().startOf("day").valueOf(),d[t].since<=n&&n<=d[t].until||d[t].until<=n&&n<=d[t].since)return(this.year()-i(d[t].since).year())*a+d[t].offset;return this.year()}function Ui(t){return x(this,"_erasNameRegex")||ea.call(this),t?this._erasNameRegex:this._erasRegex}function Bi(t){return x(this,"_erasAbbrRegex")||ea.call(this),t?this._erasAbbrRegex:this._erasRegex}function Wi(t){return x(this,"_erasNarrowRegex")||ea.call(this),t?this._erasNarrowRegex:this._erasRegex}function Qs(t,s){return s.erasAbbrRegex(t)}function Gi(t,s){return s.erasNameRegex(t)}function qi(t,s){return s.erasNarrowRegex(t)}function Xi(t,s){return s._eraYearOrdinalRegex||st}function ea(){var t=[],s=[],a=[],n=[],d,p,D,W,J,re=this.eras();for(d=0,p=re.length;d<p;++d)D=Ge(re[d].name),W=Ge(re[d].abbr),J=Ge(re[d].narrow),s.push(D),t.push(W),a.push(J),n.push(D),n.push(W),n.push(J);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}T(0,["gg",2],0,function(){return this.weekYear()%100}),T(0,["GG",2],0,function(){return this.isoWeekYear()%100});function vs(t,s){T(0,[t,t.length],0,s)}vs("gggg","weekYear"),vs("ggggg","weekYear"),vs("GGGG","isoWeekYear"),vs("GGGGG","isoWeekYear"),B("G",Pt),B("g",Pt),B("GG",de,Te),B("gg",de,Te),B("GGGG",Wt,Bt),B("gggg",Wt,Bt),B("GGGGG",Et,Tt),B("ggggg",Et,Tt),mt(["gggg","ggggg","GGGG","GGGGG"],function(t,s,a,n){s[n.substr(0,2)]=ae(t)}),mt(["gg","GG"],function(t,s,a,n){s[n]=i.parseTwoDigitYear(t)});function Ki(t){return Aa.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Zi(t){return Aa.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Ji(){return at(this.year(),1,4)}function Qi(){return at(this.isoWeekYear(),1,4)}function el(){var t=this.localeData()._week;return at(this.year(),t.dow,t.doy)}function tl(){var t=this.localeData()._week;return at(this.weekYear(),t.dow,t.doy)}function Aa(t,s,a,n,d){var p;return t==null?Zt(this,n,d).year:(p=at(t,n,d),s>p&&(s=p),sl.call(this,t,s,a,n,d))}function sl(t,s,a,n,d){var p=fa(t,s,a,n,d),D=Kt(p.year,0,p.dayOfYear);return this.year(D.getUTCFullYear()),this.month(D.getUTCMonth()),this.date(D.getUTCDate()),this}T("Q",0,"Qo","quarter"),B("Q",Mt),ce("Q",function(t,s){s[qe]=(ae(t)-1)*3});function al(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}T("D",["DD",2],"Do","date"),B("D",de,ht),B("DD",de,Te),B("Do",function(t,s){return t?s._dayOfMonthOrdinalParse||s._ordinalParse:s._dayOfMonthOrdinalParseLenient}),ce(["D","DD"],Ve),ce("Do",function(t,s){s[Ve]=ae(t.match(de)[0])});var La=Be("Date",!0);T("DDD",["DDDD",3],"DDDo","dayOfYear"),B("DDD",tt),B("DDDD",Ut),ce(["DDD","DDDD"],function(t,s,a){a._dayOfYear=ae(t)});function rl(t){var s=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?s:this.add(t-s,"d")}T("m",["mm",2],0,"minute"),B("m",de,Gt),B("mm",de,Te),ce(["m","mm"],He);var nl=Be("Minutes",!1);T("s",["ss",2],0,"second"),B("s",de,Gt),B("ss",de,Te),ce(["s","ss"],Xe);var il=Be("Seconds",!1);T("S",0,0,function(){return~~(this.millisecond()/100)}),T(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),T(0,["SSS",3],0,"millisecond"),T(0,["SSSS",4],0,function(){return this.millisecond()*10}),T(0,["SSSSS",5],0,function(){return this.millisecond()*100}),T(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),T(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),T(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),T(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),B("S",tt,Mt),B("SS",tt,Te),B("SSS",tt,Ut);var gt,Ra;for(gt="SSSS";gt.length<=9;gt+="S")B(gt,st);function ll(t,s){s[Ee]=ae(("0."+t)*1e3)}for(gt="S";gt.length<=9;gt+="S")ce(gt,ll);Ra=Be("Milliseconds",!1),T("z",0,0,"zoneAbbr"),T("zz",0,0,"zoneName");function ol(){return this._isUTC?"UTC":""}function cl(){return this._isUTC?"Coordinated Universal Time":""}var F=V.prototype;F.add=ti,F.calendar=oi,F.clone=ci,F.diff=gi,F.endOf=Si,F.format=vi,F.from=wi,F.fromNow=ji,F.to=Ni,F.toNow=ki,F.get=As,F.invalidAt=Oi,F.isAfter=di,F.isBefore=ui,F.isBetween=hi,F.isSame=mi,F.isSameOrAfter=fi,F.isSameOrBefore=xi,F.isValid=Yi,F.lang=Pa,F.locale=Ea,F.localeData=Ya,F.max=Yn,F.min=Pn,F.parsingFlags=Ii,F.set=Ls,F.startOf=_i,F.subtract=si,F.toArray=Ti,F.toObject=Ei,F.toDate=Mi,F.toISOString=bi,F.inspect=yi,typeof Symbol<"u"&&Symbol.for!=null&&(F[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),F.toJSON=Pi,F.toString=pi,F.unix=Di,F.valueOf=Ci,F.creationData=Fi,F.eraName=$i,F.eraNarrow=Vi,F.eraAbbr=Hi,F.eraYear=zi,F.year=qt,F.isLeapYear=os,F.weekYear=Ki,F.isoWeekYear=Zi,F.quarter=F.quarters=al,F.month=ft,F.daysInMonth=Re,F.week=F.weeks=Fr,F.isoWeek=F.isoWeeks=Ar,F.weeksInYear=el,F.weeksInWeekYear=tl,F.isoWeeksInYear=Ji,F.isoWeeksInISOWeekYear=Qi,F.date=La,F.day=F.days=Kr,F.weekday=Zr,F.isoWeekday=Jr,F.dayOfYear=rl,F.hour=F.hours=nn,F.minute=F.minutes=nl,F.second=F.seconds=il,F.millisecond=F.milliseconds=Ra,F.utcOffset=Hn,F.utc=Un,F.local=Bn,F.parseZone=Wn,F.hasAlignedHourOffset=Gn,F.isDST=qn,F.isLocal=Kn,F.isUtcOffset=Zn,F.isUtc=Sa,F.isUTC=Sa,F.zoneAbbr=ol,F.zoneName=cl,F.dates=$("dates accessor is deprecated. Use date instead.",La),F.months=$("months accessor is deprecated. Use month instead",ft),F.years=$("years accessor is deprecated. Use year instead",qt),F.zone=$("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",zn),F.isDSTShifted=$("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Xn);function dl(t){return fe(t*1e3)}function ul(){return fe.apply(null,arguments).parseZone()}function $a(t){return t}var le=ee.prototype;le.calendar=xe,le.longDateFormat=X,le.invalidDate=ge,le.ordinal=Fe,le.preparse=$a,le.postformat=$a,le.relativeTime=Me,le.pastFuture=Ct,le.set=Q,le.eras=Ai,le.erasParse=Li,le.erasConvertYear=Ri,le.erasAbbrRegex=Bi,le.erasNameRegex=Ui,le.erasNarrowRegex=Wi,le.months=Pe,le.monthsShort=ve,le.monthsParse=et,le.monthsRegex=us,le.monthsShortRegex=Ft,le.week=Pr,le.firstDayOfYear=Or,le.firstDayOfWeek=Ir,le.weekdays=Br,le.weekdaysMin=Gr,le.weekdaysShort=Wr,le.weekdaysParse=Xr,le.weekdaysRegex=Qr,le.weekdaysShortRegex=en,le.weekdaysMinRegex=tn,le.isPM=an,le.meridiem=ln;function ws(t,s,a,n){var d=rt(),p=k().set(n,s);return d[a](p,t)}function Va(t,s,a){if(c(t)&&(s=t,t=void 0),t=t||"",s!=null)return ws(t,s,a,"month");var n,d=[];for(n=0;n<12;n++)d[n]=ws(t,n,a,"month");return d}function ta(t,s,a,n){typeof t=="boolean"?(c(s)&&(a=s,s=void 0),s=s||""):(s=t,a=s,t=!1,c(s)&&(a=s,s=void 0),s=s||"");var d=rt(),p=t?d._week.dow:0,D,W=[];if(a!=null)return ws(s,(a+p)%7,n,"day");for(D=0;D<7;D++)W[D]=ws(s,(D+p)%7,n,"day");return W}function hl(t,s){return Va(t,s,"months")}function ml(t,s){return Va(t,s,"monthsShort")}function fl(t,s,a){return ta(t,s,a,"weekdays")}function xl(t,s,a){return ta(t,s,a,"weekdaysShort")}function gl(t,s,a){return ta(t,s,a,"weekdaysMin")}xt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var s=t%10,a=ae(t%100/10)===1?"th":s===1?"st":s===2?"nd":s===3?"rd":"th";return t+a}}),i.lang=$("moment.lang is deprecated. Use moment.locale instead.",xt),i.langData=$("moment.langData is deprecated. Use moment.localeData instead.",rt);var nt=Math.abs;function pl(){var t=this._data;return this._milliseconds=nt(this._milliseconds),this._days=nt(this._days),this._months=nt(this._months),t.milliseconds=nt(t.milliseconds),t.seconds=nt(t.seconds),t.minutes=nt(t.minutes),t.hours=nt(t.hours),t.months=nt(t.months),t.years=nt(t.years),this}function Ha(t,s,a,n){var d=Ke(s,a);return t._milliseconds+=n*d._milliseconds,t._days+=n*d._days,t._months+=n*d._months,t._bubble()}function bl(t,s){return Ha(this,t,s,1)}function yl(t,s){return Ha(this,t,s,-1)}function za(t){return t<0?Math.floor(t):Math.ceil(t)}function vl(){var t=this._milliseconds,s=this._days,a=this._months,n=this._data,d,p,D,W,J;return t>=0&&s>=0&&a>=0||t<=0&&s<=0&&a<=0||(t+=za(sa(a)+s)*864e5,s=0,a=0),n.milliseconds=t%1e3,d=Ae(t/1e3),n.seconds=d%60,p=Ae(d/60),n.minutes=p%60,D=Ae(p/60),n.hours=D%24,s+=Ae(D/24),J=Ae(Ua(s)),a+=J,s-=za(sa(J)),W=Ae(a/12),a%=12,n.days=s,n.months=a,n.years=W,this}function Ua(t){return t*4800/146097}function sa(t){return t*146097/4800}function wl(t){if(!this.isValid())return NaN;var s,a,n=this._milliseconds;if(t=Ce(t),t==="month"||t==="quarter"||t==="year")switch(s=this._days+n/864e5,a=this._months+Ua(s),t){case"month":return a;case"quarter":return a/3;case"year":return a/12}else switch(s=this._days+Math.round(sa(this._months)),t){case"week":return s/7+n/6048e5;case"day":return s+n/864e5;case"hour":return s*24+n/36e5;case"minute":return s*1440+n/6e4;case"second":return s*86400+n/1e3;case"millisecond":return Math.floor(s*864e5)+n;default:throw new Error("Unknown unit "+t)}}function it(t){return function(){return this.as(t)}}var Ba=it("ms"),jl=it("s"),Nl=it("m"),kl=it("h"),_l=it("d"),Sl=it("w"),Cl=it("M"),Dl=it("Q"),Ml=it("y"),Tl=Ba;function El(){return Ke(this)}function Pl(t){return t=Ce(t),this.isValid()?this[t+"s"]():NaN}function Nt(t){return function(){return this.isValid()?this._data[t]:NaN}}var Yl=Nt("milliseconds"),Il=Nt("seconds"),Ol=Nt("minutes"),Fl=Nt("hours"),Al=Nt("days"),Ll=Nt("months"),Rl=Nt("years");function $l(){return Ae(this.days()/7)}var lt=Math.round,$t={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Vl(t,s,a,n,d){return d.relativeTime(s||1,!!a,t,n)}function Hl(t,s,a,n){var d=Ke(t).abs(),p=lt(d.as("s")),D=lt(d.as("m")),W=lt(d.as("h")),J=lt(d.as("d")),re=lt(d.as("M")),Ie=lt(d.as("w")),ot=lt(d.as("y")),pt=p<=a.ss&&["s",p]||p<a.s&&["ss",p]||D<=1&&["m"]||D<a.m&&["mm",D]||W<=1&&["h"]||W<a.h&&["hh",W]||J<=1&&["d"]||J<a.d&&["dd",J];return a.w!=null&&(pt=pt||Ie<=1&&["w"]||Ie<a.w&&["ww",Ie]),pt=pt||re<=1&&["M"]||re<a.M&&["MM",re]||ot<=1&&["y"]||["yy",ot],pt[2]=s,pt[3]=+t>0,pt[4]=n,Vl.apply(null,pt)}function zl(t){return t===void 0?lt:typeof t=="function"?(lt=t,!0):!1}function Ul(t,s){return $t[t]===void 0?!1:s===void 0?$t[t]:($t[t]=s,t==="s"&&($t.ss=s-1),!0)}function Bl(t,s){if(!this.isValid())return this.localeData().invalidDate();var a=!1,n=$t,d,p;return typeof t=="object"&&(s=t,t=!1),typeof t=="boolean"&&(a=t),typeof s=="object"&&(n=Object.assign({},$t,s),s.s!=null&&s.ss==null&&(n.ss=s.s-1)),d=this.localeData(),p=Hl(this,!a,n,d),a&&(p=d.pastFuture(+this,p)),d.postformat(p)}var aa=Math.abs;function Vt(t){return(t>0)-(t<0)||+t}function js(){if(!this.isValid())return this.localeData().invalidDate();var t=aa(this._milliseconds)/1e3,s=aa(this._days),a=aa(this._months),n,d,p,D,W=this.asSeconds(),J,re,Ie,ot;return W?(n=Ae(t/60),d=Ae(n/60),t%=60,n%=60,p=Ae(a/12),a%=12,D=t?t.toFixed(3).replace(/\.?0+$/,""):"",J=W<0?"-":"",re=Vt(this._months)!==Vt(W)?"-":"",Ie=Vt(this._days)!==Vt(W)?"-":"",ot=Vt(this._milliseconds)!==Vt(W)?"-":"",J+"P"+(p?re+p+"Y":"")+(a?re+a+"M":"")+(s?Ie+s+"D":"")+(d||n||t?"T":"")+(d?ot+d+"H":"")+(n?ot+n+"M":"")+(t?ot+D+"S":"")):"P0D"}var ie=xs.prototype;ie.isValid=Ln,ie.abs=pl,ie.add=bl,ie.subtract=yl,ie.as=wl,ie.asMilliseconds=Ba,ie.asSeconds=jl,ie.asMinutes=Nl,ie.asHours=kl,ie.asDays=_l,ie.asWeeks=Sl,ie.asMonths=Cl,ie.asQuarters=Dl,ie.asYears=Ml,ie.valueOf=Tl,ie._bubble=vl,ie.clone=El,ie.get=Pl,ie.milliseconds=Yl,ie.seconds=Il,ie.minutes=Ol,ie.hours=Fl,ie.days=Al,ie.weeks=$l,ie.months=Ll,ie.years=Rl,ie.humanize=Bl,ie.toISOString=js,ie.toString=js,ie.toJSON=js,ie.locale=Ea,ie.localeData=Ya,ie.toIsoString=$("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",js),ie.lang=Pa,T("X",0,0,"unix"),T("x",0,0,"valueOf"),B("x",Pt),B("X",Ps),ce("X",function(t,s,a){a._d=new Date(parseFloat(t)*1e3)}),ce("x",function(t,s,a){a._d=new Date(ae(t))});//! moment.js
return i.version="2.30.1",u(fe),i.fn=F,i.min=In,i.max=On,i.now=Fn,i.utc=k,i.unix=dl,i.months=hl,i.isDate=b,i.locale=xt,i.invalid=E,i.duration=Ke,i.isMoment=I,i.weekdays=fl,i.parseZone=ul,i.localeData=rt,i.isDuration=gs,i.monthsShort=ml,i.weekdaysMin=gl,i.defineLocale=Us,i.updateLocale=un,i.locales=hn,i.weekdaysShort=xl,i.normalizeUnits=Ce,i.relativeTimeRounding=zl,i.relativeTimeThreshold=Ul,i.calendarFormat=li,i.prototype=F,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i})}(ra)),ra.exports}(function(r,l){(function(o,i){i(typeof lr=="function"?Jl():o.moment)})(ir,function(o){//! moment.js locale configuration
var i=o.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(u){return/^ch$/i.test(u)},meridiem:function(u,h,f){return u<12?f?"sa":"SA":f?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun trc lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",w:"mt tun",ww:"%d tun",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(u){return u},week:{dow:1,doy:4}});return i})})();const Ql=r=>{if(!r||typeof r!="string")return{className:"status-default",icon:"fa-question-circle",pulse:!1};const l=r.toLowerCase().trim().normalize("NFC");switch(l){case" hy":case" hy (ui)":return{className:"status-da-huy",icon:"fa-times-circle",pulse:!1};case"t chi ycvc":return{className:"status-tu-choi-ycvc",icon:"fa-ban",pulse:!1};case"cha ghp":case"cha tm thy vin":return{className:"status-chua-ghep",icon:"fa-check-circle",pulse:!1};case"ch ph duyt":return{className:"status-cho-phe-duyet",icon:"fa-hourglass-half",pulse:!1};case"ch k ha n":case"ch ky hoa n":return{className:"status-cho-ky-hoa-don",icon:"fa-file-signature",pulse:!1};case"ch duyt ycvc":return{className:"status-cho-duyet-ycvc",icon:"fa-user-clock",pulse:!1};case"ch check-in":return{className:"status-cho-check-in",icon:"fa-calendar-check",pulse:!1};case"yu cu b sung":return{className:"status-yeu-cau-bo-sung",icon:"fa-exclamation-circle",pulse:!0};case"ch xc thc vc (tvbh)":return{className:"status-cho-xac-thuc-vc",icon:"fa-exclamation-circle",pulse:!0};case"ang gi":return{className:"status-dang-giu",icon:"fa-lock",pulse:!1};case"ang li th":return{className:"status-dang-lai-thu",icon:"fa-car-side",pulse:!1};case" ghp":return{className:"status-da-ghep",icon:"fa-link",pulse:!1};case" b sung":return{className:"status-da-bo-sung",icon:"fa-plus-circle",pulse:!1};case" ph duyt":return{className:"status-da-phe-duyet",icon:"fa-check",pulse:!1};case" xut ha n":return{className:"status-da-xuat-hoa-don",icon:"fa-check-double",pulse:!1};case"yu cu vinclub":return{className:"status-yeu-cau-vinclub",icon:"fa-star",pulse:!1};case" c vc":return{className:"status-da-co-vc",icon:"fa-star-half-alt",pulse:!1};case" hon tt":return{className:"status-da-hoan-tat",icon:"fa-flag-checkered",pulse:!1};default:return l.startsWith("vpas")||/^[a-z0-9]{17}$/.test(l)?{className:"status-san-sang",icon:"fa-car",pulse:!1}:{className:"status-default",icon:"fa-question-circle",pulse:!1}}},or=({status:r,size:l="md"})=>{const{className:o,icon:i,pulse:u}=Ql(r),h=l==="sm"?"text-[10px] px-1.5 py-0.5":"";return e.jsxs("div",{className:`status-badge ${o} ${u?"pulse-icon":""} ${h}`,children:[e.jsx("span",{className:"badge-icon",children:e.jsx("i",{className:`fas ${i}`})}),e.jsx("span",{className:"badge-text truncate",children:r})]})},cr=r=>{const o={textShadow:"0 0 4px rgba(0,0,0,0.8)"};if(!r)return{};const i=r.toLowerCase().trim();return i==="brahminy white (ce18)"?{color:"white",...o}:i.includes("sunset orb (ce1a)")?{color:"var(--exterior-orange-text)"}:i.includes("crimson red (ce1m)")?{color:"var(--exterior-red-text)"}:i.includes("vinfast blue (ce1n)")?{color:"var(--exterior-blue-text)"}:i.includes("neptune grey (ce14)")?{color:"#778899"}:i.includes("jet black (ce11)")?{color:"black"}:i.includes("electric blue (ce1j)")?{color:"var(--exterior-blue-text)"}:i.includes("zenith grey (ce1v)")?{color:"#B0C4DE"}:i.includes("jet black roof- summer yellow body (111u)")?{color:"var(--exterior-yellow-text)"}:i.includes("brahminy white roof- aquatic azure body (181y)")?{color:"var(--exterior-blue-text)"}:i.includes("brahminy white roof- rose pink body (1821)")?{color:"var(--exterior-pink-text)"}:i.includes("brahminy white roof - iris berry body (181x)")?{color:"var(--exterior-pink-text)"}:i.includes("urbant mint (ce1w)")?{color:"#3CB371"}:i.includes("vinbus green (ce2b)")?{color:"var(--exterior-green-text)"}:i.includes("deep ocean (ce1h)")?{color:"#006400"}:i.includes("iris berry (ce1x)")?{color:"var(--exterior-pink-text)"}:i.includes("zenith grey-desat silver roof (171v)")?{color:"var(--exterior-grey-text)"}:i.includes("urbant mint green - desat silv (171w)")?{color:"var(--exterior-green-text)"}:i.includes("ivy green-desat silver roof (1722)")?{color:"var(--exterior-green-text)"}:i.includes("atlantic blue-aquatic azure ro (1y26)")?{color:"var(--exterior-blue-text)"}:i.includes("jet black-champagne creme roof (2311)")?{color:"white",...o}:i.includes("infinity blanc _ silky white r (2418)")?{color:"var(--exterior-white-text)"}:i.includes("champagne creme - matte champa (2523)")?{color:"var(--exterior-yellow-text)"}:i.includes("jet black - graphite roof (2811)")?{color:"white",...o}:i.includes("crimson velvet - mystery bronz (2927)")?{color:"var(--exterior-red-text)"}:i.includes("ivy_green_gne (ce22)")?{color:"var(--exterior-green-text)"}:i.includes("champagne_creme_ylg (ce23)")?{color:"var(--exterior-yellow-text)"}:i.includes("crimson red - jet black roof (111m)")?{color:"var(--exterior-red-text)"}:i.includes("infinity blanc_zenith grey roof (1v18)")?{color:"var(--exterior-white-text)"}:i.includes("deep ocean_jet black roof (111h)")?{color:"white",...o}:i.includes("alantic blue_denim blue roof (2a26)")?{color:"var(--exterior-blue-text)"}:i.includes("jet black_mystery bronze roof (2911)")?{color:"white",...o}:i.includes("champagne creme_infinity blanc roof (1823)")?{color:"var(--exterior-yellow-text)"}:i.includes("de sat silver ind12007 (ce17)")?{color:"var(--exterior-grey-text)"}:i.includes("crimson red")||i.includes("crimson velvet")?{color:"var(--exterior-red-text)"}:i.includes("rose pink")||i.includes("iris berry")?{color:"var(--exterior-pink-text)"}:i.includes("vinfast blue")||i.includes("electric blue")||i.includes("atlantic blue")||i.includes("aquatic azure")||i.includes("alantic blue")?{color:"var(--exterior-blue-text)"}:i.includes("deep ocean")?{color:"white",...o}:i.includes("sunset orb")?{color:"var(--exterior-orange-text)"}:i.includes("summer yellow")||i.includes("champagne creme")||i.includes("champagne_creme_ylg")?{color:"var(--exterior-yellow-text)"}:i.includes("urbant mint")||i.includes("vinbus green")||i.includes("ivy green")||i.includes("ivy_green_gne")?{color:"var(--exterior-green-text)"}:i.includes("jet black")?{color:"white",...o}:i.includes("brahminy white")||i.includes("infinity blanc")?{color:"var(--exterior-white-text)"}:i.includes("neptune grey")||i.includes("zenith grey")||i.includes("de sat silver")||i.includes("graphite")?{color:"var(--exterior-grey-text)"}:i.includes("mystery bronz")?{color:"var(--exterior-bronze-text)"}:{}},eo=r=>{if(!r)return{};const l=r.toLowerCase().trim();return l.includes("black")?{color:"#1F2937"}:l.includes("brown")?{color:"#78350F"}:l.includes("beige")?{color:"#B45309"}:{}},dr={"VF 3":"vf3","VF 5":"vf5","VF 6":"vf6","VF 7":"vf7","VF 8":"vf8","VF 9":"vf9","EC Van":"ecvan"},Xa={red:"red",white:"white",blanc:"white",grey:"grey",gray:"grey",black:"black",blue:"blue",orange:"orange",orb:"orange",green:"green",mint:"green",pink:"pink",berry:"pink",yellow:"yellow",zenith:"zenith","deep ocean":"deepocean"},to=(r,l)=>{const o=r?dr[r]||r.toLowerCase().replace(/\s+/g,""):"default",i=(l==null?void 0:l.toLowerCase())||"",u="/ordermanagement/",h=i.match(/\(([^)]+)\)/);if(h&&h[1]){const g=h[1].trim().toLowerCase();if(g)return`${u}pictures/${o}-${g}.webp`}let f="";const x=Object.keys(Xa).sort((g,y)=>y.length-g.length);for(const g of x)if(i.includes(g)){f=Xa[g];break}return f?`${u}pictures/${o}-${f}.webp`:ur(r)},ur=r=>{const l="/ordermanagement/",o=r?dr[r]||r.toLowerCase().replace(/\s+/g,""):"default";return`${l}pictures/${o}-default.webp`},so=()=>"/ordermanagement/pictures/default.webp",na=["#ef4444","#f97316","#eab308","#84cc16","#22c55e","#10b981","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e"],ao=r=>{if(!r)return na[0];let l=0;for(let i=0;i<r.length;i++)l=r.charCodeAt(i)+((l<<5)-l),l=l&l;const o=Math.abs(l%na.length);return na[o]},ut=()=>({}),ua=({model:r,exteriorColor:l,className:o,alt:i})=>{const u=to(r,l),h=ur(r),f=so(),[x,g]=m.useState(u);m.useEffect(()=>{g(u)},[u]);const y=()=>{x===u?(console.warn(`[CarImage] Failed to load primary: ${u}. Trying model fallback: ${h}`),g(h)):x===h?(console.warn(`[CarImage] Failed to load model fallback: ${h}. Trying global fallback: ${f}`),g(f)):console.error(`[CarImage] All fallbacks failed. Last attempted: ${x}`)};return e.jsx("img",{src:x,onError:y,className:o,alt:i||`Image of ${r} in ${l}`,loading:"lazy",draggable:"false"})},K=({children:r,variant:l="primary",size:o="md",isLoading:i=!1,leftIcon:u,rightIcon:h,fullWidth:f=!1,className:x="",disabled:g,...y})=>{const c="inline-flex items-center justify-center rounded-xl font-semibold transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed disabled:shadow-none active:scale-[0.98]",b={primary:"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-[5px_5px_10px_rgba(59,130,246,0.3),-5px_-5px_10px_rgba(255,255,255,0.1)] hover:shadow-[7px_7px_14px_rgba(59,130,246,0.4),-7px_-7px_14px_rgba(255,255,255,0.2)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2),inset_-4px_-4px_8px_rgba(255,255,255,0.1)] border-none",secondary:"bg-[#f0f2f5] text-slate-700 shadow-[5px_5px_10px_#d1d5db,-5px_-5px_10px_#ffffff] hover:shadow-[7px_7px_14px_#d1d5db,-7px_-7px_14px_#ffffff] active:shadow-[inset_4px_4px_8px_#d1d5db,inset_-4px_-4px_8px_#ffffff] border-none",outline:"bg-transparent border-2 border-blue-500 text-blue-600 shadow-none hover:bg-blue-50 active:bg-blue-100",ghost:"bg-transparent text-slate-600 hover:bg-slate-100 hover:shadow-none active:bg-slate-200",danger:"bg-gradient-to-br from-red-500 to-red-600 text-white shadow-[5px_5px_10px_rgba(239,68,68,0.3),-5px_-5px_10px_rgba(255,255,255,0.1)] hover:shadow-[7px_7px_14px_rgba(239,68,68,0.4),-7px_-7px_14px_rgba(255,255,255,0.2)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2),inset_-4px_-4px_8px_rgba(255,255,255,0.1)] border-none",success:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-[5px_5px_10px_rgba(16,185,129,0.3),-5px_-5px_10px_rgba(255,255,255,0.1)] hover:shadow-[7px_7px_14px_rgba(16,185,129,0.4),-7px_-7px_14px_rgba(255,255,255,0.2)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.2),inset_-4px_-4px_8px_rgba(255,255,255,0.1)] border-none"},N={sm:"text-xs px-3 py-1.5 h-8 gap-1.5",md:"text-sm px-4 py-2 h-10 gap-2",lg:"text-base px-6 py-2.5 h-12 gap-2.5"};return e.jsxs("button",{className:`
                ${c}
                ${b[l]}
                ${N[o]}
                ${f?"w-full":""}
                ${i?"cursor-wait opacity-80":""}
                ${x}
            `,disabled:g||i,...y,children:[i&&e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),!i&&u&&e.jsx("span",{className:"inline-flex",children:u}),r,!i&&h&&e.jsx("span",{className:"inline-flex",children:h})]})};Ye.locale("vi");const ia=r=>{if(!r)return"";const l=[Ye.ISO_8601,"DD/MM/YYYY HH:mm:ss","D/M/YYYY H:m:s","YYYY-MM-DD HH:mm:ss"],o=Ye(r,l,"vi",!0);return o.isValid()?o.format("HH:mm DD/MM/YYYY"):""},ts=({icon:r,label:l,value:o,children:i,valueClassName:u="",valueStyle:h})=>e.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-lg bg-red-100 border border-red-200",children:e.jsx("i",{className:`fas ${r} text-red-600 text-lg`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-text-secondary",children:l}),o&&e.jsx("p",{style:h,className:`text-text-primary font-bold break-words ${u}`,children:o}),i]})]}),Ns=({icon:r,label:l,value:o,isLast:i})=>e.jsxs("div",{className:"relative pl-0 md:pl-10 flex flex-row md:block items-center md:items-start gap-3 md:gap-0",children:[e.jsx("div",{className:"relative md:absolute top-0 left-0 flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 border border-red-200 flex items-center justify-center",children:e.jsx("i",{className:`fas ${r} text-red-600`})})}),!i&&e.jsx("div",{className:"hidden md:block absolute top-8 left-[15px] h-full w-px bg-border-secondary"}),e.jsxs("div",{className:"flex flex-col pb-0 md:pb-8",children:[e.jsx("p",{className:"text-xs text-text-secondary",children:l}),e.jsx("p",{className:"text-sm font-semibold text-text-primary break-words",children:o||""})]})]}),ro=({vin:r})=>{const[l,o]=m.useState(!1),i=u=>{u.stopPropagation();const h=document.createElement("textarea");h.value=r,document.body.appendChild(h),h.select();try{document.execCommand("copy"),o(!0),setTimeout(()=>o(!1),2e3)}catch(f){console.error("Khng th sao chp VIN:",f)}document.body.removeChild(h)};return e.jsxs("div",{className:"relative p-3 md:p-4 rounded-xl bg-gradient-to-br from-[#CBBACC] to-[#2580B3] shadow-lg group overflow-hidden cursor-pointer",onClick:i,title:"Click  sao chp VIN",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out pointer-events-none"}),e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("p",{className:"text-xs text-blue-200 uppercase tracking-widest",children:"S Khung (VIN)"}),e.jsx("p",{className:"text-white font-mono tracking-wider text-xl md:text-2xl break-all text-shadow-md font-bold",children:r})]}),e.jsx("button",{onClick:i,className:"absolute top-3 right-3 w-9 h-9 bg-white/10 rounded-full flex items-center justify-center text-blue-200 hover:bg-white/20 hover:text-white transition-all duration-200 z-20",title:"Sao chp VIN",children:e.jsx("i",{className:`fas transition-all ${l?"fa-check-circle text-green-400":"fa-copy"}`})})]})},no=({order:r,onClose:l,orderList:o,onNavigate:i,onCancel:u,onRequestInvoice:h,onSupplement:f,onRequestVC:x,onConfirmVC:g,onEdit:y})=>{const c=ut(),[b,N]=m.useState(null),j=new Date>=new Date("2026-01-05T00:00:00"),k={modalBg:"#FFFBE6",borderColor:"#DA251D",headerBg:"#DA251D",headerText:"#FFCD00"},[C,v]=m.useState(null),[_,M]=m.useState(null);if(!r)return null;const E=(r["Kt qu"]||"cha ghp").toLowerCase().trim().normalize("NFC"),O=(r["Trng thi VC"]||"").toLowerCase().trim().normalize("NFC"),P=O||E,L=["cha ghp"," ghp"].includes(E),V=E===" ghp",I=E==="yu cu b sung",S=!!y&&![" xut ha n"," hy","ch k ha n"].includes(E),$=(E===" xut ha n"||O==="t chi ycvc")&&!["yu cu vinclub","ch duyt ycvc","ch xc thc vc (tvbh)"," c vc"].includes(O),H=P==="ch xc thc vc (tvbh)",z=!!r.LinkHoaDonDaXuat,R=async(Y,T)=>{N(Y);try{await T(r),l()}catch(U){console.error(U)}finally{N(null)}},Q=r["Trng thi VC"]||r["Kt qu"]||"Cha ghp",q=Q.toLowerCase().includes(" hy")||Q.toLowerCase().includes("t chi"),ee=o.findIndex(Y=>Y["S n hng"]===r["S n hng"]),ne=ee>0,oe=ee<o.length-1;let xe="";if(r["Thi gian ghp"]){const Y=[Ye.ISO_8601,"DD/MM/YYYY HH:mm:ss","D/M/YYYY H:m:s","YYYY-MM-DD HH:mm:ss"],T=Ye(r["Thi gian ghp"],Y,"vi",!0);if(T.isValid()){const U=Ye().startOf("day"),te=T.startOf("day"),ue=U.diff(te,"days");xe=`${Math.max(0,ue)} ngy`}}const G=50,Z=Y=>{M(null),v(Y.targetTouches[0].clientX)},A=Y=>{M(Y.targetTouches[0].clientX)},w=()=>{if(!C||!_)return;const Y=C-_,T=Y>G,U=Y<-G;T&&oe?i("next"):U&&ne&&i("prev")};return e.jsxs("div",{className:"fixed inset-0 bg-black/70 z-[60] flex items-center justify-center p-0 md:p-4 transition-opacity duration-300",onClick:l,children:[ne&&e.jsx("button",{onClick:Y=>{Y.stopPropagation(),i("prev")},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 text-white rounded-full flex items-center justify-center text-2xl hover:bg-white/40 transition-colors z-10 hidden md:flex",title:"Yu cu trc",children:e.jsx("i",{className:"fas fa-chevron-left"})}),e.jsxs("div",{className:"bg-surface-ground w-full md:max-w-5xl h-[100dvh] md:h-auto md:max-h-[85vh] rounded-none md:rounded-2xl shadow-2xl flex flex-col transition-all duration-300 transform scale-100 opacity-100 relative overflow-hidden",onClick:Y=>Y.stopPropagation(),style:{...c,backgroundColor:j?k.modalBg:void 0,border:j?`2px solid ${k.borderColor}`:void 0},onTouchStart:Z,onTouchMove:A,onTouchEnd:w,children:[e.jsxs("header",{className:"flex-shrink-0 flex items-start justify-between p-3 md:p-5 border-b border-border-primary relative z-10",style:j?{backgroundColor:k.headerBg,borderBottomColor:"#FFD700"}:{},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary",style:j?{color:k.headerText,textShadow:"1px 1px 2px rgba(0,0,0,0.3)"}:{},children:"Chi Tit Yu Cu"}),e.jsx("p",{className:"text-sm mt-1 font-mono text-text-secondary",style:j?{color:"#FFE4B5"}:{},children:r["S n hng"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(or,{status:Q}),e.jsx("button",{onClick:l,className:"w-9 h-9 flex-shrink-0 rounded-full flex items-center justify-center transition-colors hover:bg-white/20 text-text-primary",style:j?{color:k.headerText}:{},"aria-label":"ng",children:e.jsx("i",{className:"fas fa-times text-xl"})})]})]}),e.jsxs("main",{className:"overflow-y-auto flex-grow min-h-0 p-3 md:p-6 grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 relative z-10",children:[e.jsxs("div",{className:"md:col-span-1 bg-surface-card p-5 rounded-lg border border-border-primary shadow-sm flex flex-col gap-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:block md:space-y-4",children:[e.jsx(ts,{icon:"fa-user-circle",label:"Tn khch hng",value:r["Tn khch hng"],valueClassName:"uppercase text-xs md:text-base"}),e.jsx(ts,{icon:"fa-user-tie",label:"T vn bn hng",value:r["Tn t vn bn hng"],valueClassName:"text-xs md:text-base"})]}),e.jsxs("div",{className:"border-t border-border-primary pt-6",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-4",children:"Mc Thi Gian"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:flex md:flex-col md:gap-0",children:[e.jsx(Ns,{icon:"fa-file-invoice-dollar",label:"Ngy cc",value:ia(r["Ngy cc"])}),e.jsx(Ns,{icon:"fa-paper-plane",label:"Ngy yu cu",value:ia(r["Thi gian nhp"])}),e.jsx(Ns,{icon:"fa-link",label:"Ngy ghp VIN",value:ia(r["Thi gian ghp"])}),e.jsx(Ns,{icon:"fa-hourglass-half",label:"S ngy  ghp",value:xe,isLast:!0})]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[q&&r["Ghi ch hy"]&&e.jsx("div",{className:"p-4 rounded-lg bg-danger-bg border border-danger/30",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-danger text-xl mr-4 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-danger",children:"Yu cu  b hy"}),e.jsxs("p",{className:"text-sm text-red-800 mt-1",children:["L do: ",r["Ghi ch hy"]]})]})]})}),r.VIN&&e.jsx(ro,{vin:r.VIN}),e.jsxs("div",{className:"bg-surface-card p-5 rounded-lg border border-border-primary shadow-sm",children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary mb-4",children:"Thng Tin Xe"}),e.jsx("div",{className:"flex items-center justify-center h-24 md:h-48 mb-4 rounded-lg p-2",children:e.jsx(ua,{model:r["Dng xe"],exteriorColor:r["Ngoi tht"],className:"h-full w-auto object-contain",alt:r["Dng xe"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ts,{icon:"fa-car-side",label:"Dng xe & Phin bn",value:`${r["Dng xe"]} - ${r["Phin bn"]}`,valueClassName:"text-xs md:text-base"}),e.jsx(ts,{icon:"fa-palette",label:"Ngoi tht",value:r["Ngoi tht"],valueStyle:cr(r["Ngoi tht"]),valueClassName:"text-xs md:text-base"}),e.jsx(ts,{icon:"fa-chair",label:"Ni tht",value:r["Ni tht"],valueStyle:eo(r["Ni tht"]),valueClassName:"text-xs md:text-base"})]})]})]})]}),e.jsxs("footer",{className:"flex-shrink-0 flex items-center justify-end flex-wrap gap-2 md:gap-4 p-3 md:p-5 border-t border-red-200 bg-orange-50 rounded-b-2xl relative z-10",children:[e.jsx(K,{onClick:l,variant:"secondary",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",style:j?{backgroundColor:"#FFD700",color:"#DA251D"}:{},children:"ng"}),z&&e.jsx(K,{onClick:()=>window.open(r.LinkHoaDonDaXuat,"_blank"),variant:"secondary",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:e.jsx("i",{className:"fas fa-download"}),style:j?{backgroundColor:"#FFD700",color:"#DA251D"}:{},children:"Ti Ha n"}),S&&e.jsx(K,{onClick:()=>R("edit",y),variant:"secondary",isLoading:b==="edit",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:b!=="edit"?e.jsx("i",{className:"fas fa-pencil-alt"}):void 0,style:j?{backgroundColor:"#FFD700",color:"#DA251D"}:{},children:"Chnh Sa"}),L&&e.jsx(K,{onClick:()=>R("cancel",u),variant:"danger",isLoading:b==="cancel",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:b!=="cancel"?e.jsx("i",{className:"fas fa-trash-alt"}):void 0,style:j?{backgroundColor:"#8B0000",color:"#FFD700"}:{},children:"Hy Yu Cu"}),V&&e.jsx(K,{onClick:()=>R("requestInvoice",h),variant:"primary",isLoading:b==="requestInvoice",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:b!=="requestInvoice"?e.jsx("i",{className:"fas fa-file-invoice-dollar"}):void 0,style:j?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"Y/C Xut Ha n"}),I&&e.jsx(K,{onClick:()=>R("supplement",f),variant:"primary",isLoading:b==="supplement",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:b!=="supplement"?e.jsx("i",{className:"fas fa-edit"}):void 0,style:j?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"B Sung File"}),$&&e.jsx(K,{onClick:()=>R("requestVC",x),variant:"primary",isLoading:b==="requestVC",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:b!=="requestVC"?e.jsx("i",{className:"fas fa-id-card"}):void 0,style:j?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"Y/C Cp VC"}),H&&e.jsx(K,{onClick:()=>R("confirmVC",g),variant:"primary",isLoading:b==="confirmVC",className:"max-md:text-xs max-md:px-3 max-md:py-1.5 max-md:h-8 max-md:gap-1.5",leftIcon:b!=="confirmVC"?e.jsx("i",{className:"fas fa-check"}):void 0,style:j?{backgroundImage:"linear-gradient(to bottom right, #DA251D, #FF0000)",color:"#FFD700"}:{},children:"Xc Thc UNC VC"})]})]}),oe&&e.jsx(K,{onClick:Y=>{Y.stopPropagation(),i("next")},variant:"ghost",className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 text-white rounded-full flex items-center justify-center text-2xl hover:bg-white/40 transition-colors z-10 hidden md:flex !p-0",title:"Yu cu tip theo",children:e.jsx("i",{className:"fas fa-chevron-right"})})]})},io=({order:r,onClose:l,onConfirm:o})=>{const[i,u]=m.useState(""),[h,f]=m.useState(!1),x=ut(),g=()=>{if(!i.trim()){alert("Vui lng nhp l do hy.");return}f(!0),o(r,i)};return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("div",{className:"bg-surface-card w-full md:max-w-md h-[100dvh] md:h-auto rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:y=>y.stopPropagation(),style:x,children:[e.jsxs("header",{className:"relative flex flex-col items-center justify-center p-6 text-center bg-surface-card border-b border-border-primary",children:[e.jsx("div",{className:"animate-fade-in-down",children:e.jsx("h2",{className:"text-xl font-bold text-danger",children:"Xc Nhn Hy Yu Cu"})}),e.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 space-y-4 custom-scrollbar",children:[e.jsxs("p",{className:"text-sm text-text-secondary",children:["Bn c chc chn mun hy yu cu cho n hng ",e.jsx("strong",{className:"font-mono text-text-primary",children:r["S n hng"]})," ca khch hng ",e.jsx("strong",{className:"text-text-primary",children:r["Tn khch hng"]}),"?"]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cancel-reason",className:"block text-sm font-medium text-text-primary mb-2",children:"L do hy (bt buc)"}),e.jsx("textarea",{id:"cancel-reason",rows:3,value:i,onChange:y=>u(y.target.value),className:"w-full bg-surface-card border-border-primary rounded-lg shadow-sm p-2 focus:border-accent-primary transition focus:shadow-glow-accent focus:outline-none",placeholder:"VD: Khch hng i , sai thng tin..."})]})]})}),e.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end items-center gap-3 bg-surface-card relative z-10",children:[e.jsx(K,{onClick:l,disabled:h,variant:"secondary",size:"sm",leftIcon:e.jsx("i",{className:"fas fa-times"}),children:"Hy"}),e.jsx(K,{onClick:g,disabled:h,variant:"danger",size:"sm",isLoading:h,leftIcon:e.jsx("i",{className:"fas fa-trash-alt"}),children:"Xc Nhn Hy"})]})]})})},hr="/ordermanagement/assets/pdf.worker.min-qwK7q_zL.mjs";Wl.workerSrc=hr;console.log("PDF Worker configured:",hr);const mr=(r,l={})=>new Promise((o,i)=>{if(!r.type.startsWith("image/"))return o(r);const{maxWidth:u=1920,maxHeight:h=1920,quality:f=.8}=l,x=new FileReader;x.onload=g=>{var c;const y=new Image;y.onload=()=>{let{width:b,height:N}=y;b>N?b>u&&(N=Math.round(N*u/b),b=u):N>h&&(b=Math.round(b*h/N),N=h);const j=document.createElement("canvas");j.width=b,j.height=N;const k=j.getContext("2d");if(!k)return i(new Error("Khng th ly context ca canvas."));k.drawImage(y,0,0,b,N),j.toBlob(C=>{if(!C)return i(new Error("To blob t canvas tht bi."));const v=r.name.substring(0,r.name.lastIndexOf("."))+".jpg",_=new File([C],v,{type:"image/jpeg",lastModified:Date.now()});o(_)},"image/jpeg",f)},y.onerror=b=>i(b),y.src=(c=g.target)==null?void 0:c.result},x.onerror=g=>i(g),x.readAsDataURL(r)}),lo=async(r,l)=>{if(typeof jspdf>"u")return console.error("jsPDF library not found. Skipping compression."),r;try{console.log(`Starting PDF compression for: ${r.name} (${(r.size/1024/1024).toFixed(2)} MB)`);const o=await r.arrayBuffer(),u=await Gl({data:o}).promise,h=u.numPages;console.log(`PDF has ${h} pages.`);const{jsPDF:f}=jspdf,x=new f,g=1.5,y=.5,c=16777216,b=4096;for(let k=1;k<=h;k++){if(l){const I=Math.round(k/h*100);l(I)}const C=await u.getPage(k);let v=g,_=C.getViewport({scale:v});for(;_.width*_.height>c||_.width>b||_.height>b;)v*=.8,_=C.getViewport({scale:v}),console.warn(`Page ${k} is too large for canvas. Reduced scale to ${v.toFixed(2)}`);const M=document.createElement("canvas"),E=M.getContext("2d");if(M.height=_.height,M.width=_.width,!E)continue;await C.render({canvasContext:E,viewport:_,canvas:M}).promise;const O=M.toDataURL("image/jpeg",y),P=_.width*.264583,L=_.height*.264583,V=P>L?"l":"p";k===1&&x.deletePage(1),x.addPage([P,L],V),x.addImage(O,"JPEG",0,0,P,L)}const N=x.output("arraybuffer"),j=new File([N],r.name,{type:"application/pdf",lastModified:Date.now()});return console.log(`Compression complete. New size: ${(j.size/1024/1024).toFixed(2)} MB`),j.size<r.size?j:(console.log("Compressed file is larger than original. Keeping original."),r)}catch(o){return console.error("Error during PDF compression:",o),r}},oo=(r,l,o,i,u,h)=>{let f=parseInt(r==null?void 0:r.trim(),10),x=-1,g=parseInt(o==null?void 0:o.trim(),10),y=parseInt((i==null?void 0:i.trim())||"00",10),c=parseInt((u==null?void 0:u.trim())||"00",10),b=parseInt((h==null?void 0:h.trim())||"00",10);if(isNaN(f)||isNaN(g)||isNaN(y)||isNaN(c)||isNaN(b))return null;const N=l==null?void 0:l.trim().toLowerCase().replace(/[.,]/g,""),j={1:1,"thng 1":1,"thg 1":1,t1:1,jan:1,january:1,2:2,"thng 2":2,"thg 2":2,t2:2,feb:2,february:2,3:3,"thng 3":3,"thg 3":3,t3:3,mar:3,march:3,4:4,"thng 4":4,"thg 4":4,t4:4,apr:4,april:4,5:5,"thng 5":5,"thg 5":5,t5:5,may:5,6:6,"thng 6":6,"thg 6":6,t6:6,jun:6,june:6,7:7,"thng 7":7,"thg 7":7,t7:7,jul:7,july:7,8:8,"thng 8":8,"thg 8":8,t8:8,aug:8,august:8,9:9,"thng 9":9,"thg 9":9,t9:9,sep:9,september:9,10:10,"thng 10":10,"thg 10":10,t10:10,oct:10,october:10,11:11,"thng 11":11,"thg 11":11,t11:11,nov:11,november:11,12:12,"thng 12":12,"thg 12":12,t12:12,dec:12,december:12},C=Object.keys(j).sort((M,E)=>E.length-M.length).find(M=>N.includes(M));if(C)x=j[C];else{const M=parseInt(N,10);if(!isNaN(M)&&M>=1&&M<=12)x=M;else return null}if(g<100){const M=new Date().getFullYear(),E=Math.floor(M/100)*100;g+=E,g>M+5&&(g-=100)}if(g<2e3||g>new Date().getFullYear()+5||x<1||x>12||f<1||f>31||y<0||y>23||c<0||c>59||b<0||b>59)return null;const v=new Date(g,x-1,f,y,c,b);if(v.getFullYear()!==g||v.getMonth()!==x-1||v.getDate()!==f)return null;const _=M=>M.toString().padStart(2,"0");return`${g}-${_(x)}-${_(f)}T${_(y)}:${_(c)}:${_(b)}`},co=async(r,l)=>{if(typeof Tesseract>"u")throw new Error("Th vin Tesseract cha ti.");try{l("ang nhn dng... (0%)");const{data:{text:o}}=await Tesseract.recognize(r,"vie+eng",{logger:c=>{c.status==="recognizing text"&&l(`ang nhn dng... (${Math.round(c.progress*100)}%)`)}});l("ang tm ngy gi...");let i=o.replace(/\n+/g," ");i=i.replace(/(\d{1,2})\s*(gi|h|hr|g)\s*(\d{1,2})\s*(?:pht|phut|ph|p|min|m)?\s*(?:(\d{1,2})\s*(?:giy|giay|s|sec)?)?/gi,(c,b,N,j,k)=>`${b}:${j}${k?":"+k:""}`),i=i.replace(/(\d{1,2})\s*(?:gi|h|hr|g)\s*(\d{1,2})(?!\s*(?:pht|phut|ph|p|min|m))/gi,"$1:$2"),i=i.replace(/(\d{1,2})\s*(pht|phut|ph|p|min|m)\s*(\d{1,2})/gi,"$1:$2"),i=i.replace(/(\d{1,2})\s*:\s*(\d{1,2})\s*(?:pht|phut|ph|p|min|m)/gi,"$1:$2"),i=i.replace(/(\d{1,2})\s*(pht|phut|ph|p|min|m)/gi,"$1"),i=i.replace(/(\d{1,2})\s*(giy|giay|s|sec)/gi,"$1"),i=i.replace(/\s*:\s*/g,":").replace(/\s*-\s*/g,"-").replace(/\s*\/\s*/g,"/").replace(/\s*\.\s*/g,"."),i=i.replace(/(\d{1,2})([\/.-])(\d{1,2})\2(\d{2})(?!\d)/g,(c,b,N,j,k)=>{const C=new Date().getFullYear(),v=parseInt(k,10);let _;return v>C%100+15&&v<=99?_=1900+v:_=Math.floor(C/100)*100+v,`${b}/${j}/${_}`}),i=i.replace(/(\d{1,2})\.(\d{1,2})\/(\d{1,2})\/(\d{4})/g,"$2/$3/$4"),i=i.replace(/(\d{1,2})\/(\d{1,2})\.(\d{1,2})\/(\d{4})/g,"$1/$2/$4"),i=i.replace(/[\u200B-\u200D\uFEFF]/g,"");let u=null,h=-1,f={};const x="(?:thng|thg|t|Thng|Thg\\.?|T\\.)?\\s*\\d{1,2}[\\.,]{0,2}|[A-Za-z-]{3,}",g="[\\s\\/\\.-]+",y=[{regex:new RegExp("Ngy in:?\\s*(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})\\s+(\\d{1,2}):(\\d{1,2}):(\\d{1,2})","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:20,name:"BIDV Print Date (Ngy in)"},{regex:new RegExp("\\b(\\d{2})(\\d{2})(\\d{2})-(\\d{2}):(\\d{2}):(\\d{2})\\b","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:18,name:"DDMMYY-HH:MM:SS format"},{regex:new RegExp("(?:Ngy|Date(?: time)?)[:\\s]*?(\\d{1,2})-(\\d{1,2})-(\\d{4})","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:"00",minute:"00",second:"00"}),score:16,name:"BIDV/Specific DD-MM-YYYY with Keyword"},{regex:new RegExp(`(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*-\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:15.5,name:"HH:MM(:SS) - DD/MM/YYYY (MB Bank, etc.)"},{regex:new RegExp("(?:Ngy\\s*chuyn|Ngy\\s*thc hin|Transaction Date)\\s*[:\\s]*?(\\d{1,2})\\s*(?:thng|thg|/|-|\\.)\\s*(\\d{1,2})(?:,\\s*|\\s+|/|-|\\.)(\\d{4})\\s*(?:lc|\\@|at|\\s)\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:15,name:"Techcombank & similar"},{regex:new RegExp("(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})-(\\d{1,2}):(\\d{1,2})","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:"00"}),score:14.9,name:"DD/MM/YYYY-HH:MM (Cleaned Vietinbank iPay style)"},{regex:new RegExp(`\\b(\\d{1,2})${g}(\\d{1,2})${g}(\\d{4})\\s+(\\d{1,2}):(\\d{1,2}):(\\d{1,2})\\b`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:14.8,name:"DD/MM/YYYY HH:MM:SS (Common, Boosted)"},{regex:new RegExp(`(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s+(?:Th\\s*[2-7CNTtBbSsHhNn]{1,7}|Ch\\s*Nht|Mon|Tue|Wed|Thu|Fri|Sat|Sun)?\\s*,?\\s*(?:ngy\\s*|date\\s*)?(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3]||"00",day:c[4],month:c[5],year:c[6]}),score:14.5,name:"HH:MM(:SS) [DayOfWeek] DD/MM/YYYY (VCB)"},{regex:new RegExp(`Chuyn\\s*nhanh\\s*Napas\\s*247\\s*:?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s+(\\d{1,2})${g}(${x})${g}(\\d{4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:14,name:"TPBank Napas"},{regex:new RegExp(`(\\d{4})${g}(\\d{1,2})${g}(\\d{1,2})[\\sT]+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({year:c[1],month:c[2],day:c[3],hour:c[4],minute:c[5],second:c[6]}),score:13.5,name:"YYYY-MM-DD[ T]HH:MM:SS (Sacombank, ISO)"},{regex:new RegExp(`(?:Ngy\\s*thc\\s*hin|Date\\s*of\\s*transaction)\\s*:?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s+(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:13,name:"Ngy thc hin HH:MM:SS DD/MM/YYYY"},{regex:new RegExp(`(?:vo\\s*lc|lc|at)\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})\\s*,?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:12.5,name:"(vo) lc/at DD/MM/YYYY HH:MM:SS (BIDV)"},{regex:new RegExp(`(?:Thi\\s*gian|Time)\\s*:?\\s*(\\d{1,2}):(\\d{1,2}):(\\d{1,2}),\\s*(?:ngy\\s*)?(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:12,name:"SHB Thi gian/Time"},{regex:new RegExp(`(\\d{1,2})${g}(${x})${g}(\\d{2})(?!\\d)\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:11.2,name:"DD/MM/YY HH:MM:SS (2-digit year)"},{regex:new RegExp(`(?:Ngy\\s*giao dch|GD|lp lnh|to|thanh ton|chuyn tin|hch ton|lp|hiu lc|ghi nhn|transaction|payment|value)\\s*:?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})(?:\\s*,?\\s*(?:lc|at|@|thi gian|time)|\\s*-)?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:11,name:"Ngy GD/Keyword DD/MM/YYYY lc/time HH:MM(:SS)"},{regex:new RegExp(`(?:Thi\\s*gian|Time)\\s*(?:lp|to|giao dch|thanh ton|GD|thc hin|record)\\s*:?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*(?:ngy|,|on)?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:10,name:"Thi gian/Time ... HH:MM:SS ngy/on DD/MM/YYYY"},{regex:new RegExp(`(?<![:\\d\\w])(\\d{1,2})${g}(${x})${g}(\\d{4})\\s+(\\d{1,2}):(\\d{1,2})(?![:\\d])`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:"00"}),score:9.5,name:"DD/MM/YYYY HH:MM (Standalone, Vietinbank)"},{regex:new RegExp(`(?:Ngy\\s*)?(\\d{1,2})\\s*(?:thng|Thg\\.?|T)?\\s*(${x})\\s*(?:nm|nam)?\\s*(\\d{2,4})\\s*(?:vo\\s*lc|lc|Time|@)?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:9,name:"Ngy DD thng MM nm Yokohama lc HHMMSS"},{regex:new RegExp(`(${x})\\s+(\\d{1,2}),\\s*(\\d{4})\\s+(?:at|lc)\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*(AM|PM)?`,"i"),parser:c=>{let b=parseInt(c[4],10);return c[7]&&c[7].toUpperCase()==="PM"&&b<12&&(b+=12),c[7]&&c[7].toUpperCase()==="AM"&&b===12&&(b=0),{month:c[1],day:c[2],year:c[3],hour:String(b),minute:c[5],second:c[6]}},score:8.8,name:"Month DD, YYYY at HH:MM(:SS) AM/PM"},{regex:new RegExp(`(?:Ngy|Date\\s*Time)?:?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})[\\s,T]+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:c[4],minute:c[5],second:c[6]}),score:8.5,name:"DD/MM/YYYY[ T]HH:MM:SS (Generic)"},{regex:new RegExp(`(?:Vo\\s*lc|Time):?\\s*(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?,\\s*(?:ngy)?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:8,name:"Vo lc HH:MM, ngy DD/MM/YYYY"},{regex:new RegExp(`(?:Date:|Ngy:)?\\s*(\\d{4})${g}(${x})${g}(\\d{1,2})[\\sT,]+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?`,"i"),parser:c=>({year:c[1],month:c[2],day:c[3],hour:c[4],minute:c[5],second:c[6]}),score:7.5,name:"YYYY/MM/DD[ T]HH:MM:SS (Generic)"},{regex:new RegExp(`(?:^|\\s|[^\\d\\w.,])(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?(?!=\\d{3}[,\\.])\\s+(?:ngy\\s*)?(\\d{1,2})${g}(${x})${g}(\\d{2,4})`,"i"),parser:c=>({hour:c[1],minute:c[2],second:c[3],day:c[4],month:c[5],year:c[6]}),score:7,name:"HH:MM:SS DD/MM/YYYY (Improved)"},{regex:new RegExp(`(\\d{1,2})${g}(${x})${g}(\\d{2,4})\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?\\s*(AM|PM|SA|CH)`,"i"),parser:c=>{let b=parseInt(c[4],10);const N=c[7]?c[7].toUpperCase():null;return N&&((N==="PM"||N==="CH")&&b<12&&(b+=12),(N==="AM"||N==="SA")&&b===12&&(b=0)),{day:c[1],month:c[2],year:c[3],hour:String(b),minute:c[5],second:c[6]}},score:6.5,name:"DD/MM/YYYY HH:MM(:SS) AM/PM/SA/CH"},{regex:new RegExp(`(?:Ngy\\s*giao dch|GD|lp lnh|to|thanh ton|chuyn tin|hch ton|lp|hiu lc|ghi nhn|transaction|payment|value)\\s*:?\\s*(\\d{1,2})${g}(${x})${g}(\\d{2,4})(?!\\s*[:\\d])(?!\\s*\\d{1,2}\\s*VND)`,"i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:"00",minute:"00",second:"00"}),score:5,name:"Date only with keyword"},{regex:new RegExp(`(?<![\\d:\\/\\.-])(\\d{1,2})([\\/\\.-])(${x})\\2(\\d{2,4})(?![.,:\\/\\.-]?\\d)(?!\\s*VND|\\s*USD)`,"i"),parser:c=>({day:c[1],month:c[3],year:c[4],hour:"00",minute:"00",second:"00"}),score:4,name:"Date only DD/MM/YYYY (generic)"},{regex:new RegExp("(?:Ngy|Date):?\\s*(\\d{2})(\\d{2})(\\d{4})(?!\\d)","i"),parser:c=>({day:c[1],month:c[2],year:c[3],hour:"00",minute:"00",second:"00"}),score:3.5,name:"Date only DDMMYYYY with keyword"},{regex:new RegExp("(?:Ngy|Date):?\\s*(\\d{4})(\\d{2})(\\d{2})(?!\\d)","i"),parser:c=>({year:c[1],month:c[2],day:c[3],hour:"00",minute:"00",second:"00"}),score:3,name:"Date only YYYYMMDD with keyword"}];for(const c of y){let b;const N=new RegExp(c.regex.source,c.regex.flags+(c.regex.flags.includes("g")?"":"g"));for(;(b=N.exec(i))!==null;){const j=c.parser(b);if(j){const k=oo(j.day,j.month,j.year,j.hour,j.minute,j.second);if(k){if(c.score>h)h=c.score,u=k,f={name:c.name,score:c.score,components:j,match:b,rawText:b[0]};else if(c.score===h){const C=f.components&&(f.components.hour!=="00"||f.components.minute!=="00");j.hour&&(j.hour!=="00"||j.minute!=="00")&&!C&&(u=k,f={name:c.name,score:c.score,components:j,match:b,rawText:b[0]})}}}}if(h>=15&&u)break}return u}catch(o){throw console.error("Li OCR:",o),new Error("X l nh tht bi.")}},rs=r=>{if(!r||typeof r!="string")return null;r.includes("google.com");const l=r.match(/\/d\/([a-zA-Z0-9_-]{25,})|[?&]id=([a-zA-Z0-9_-]{25,})/);return l?l[1]||l[2]:null},Ka=(r,l)=>{if(r&&r.startsWith("data:image"))return r;const o=rs(r);if(o){const i=l?`w${l}`:"w1920";return`https://drive.google.com/thumbnail?id=${o}&sz=${i}`}return r},uo=r=>{const l=rs(r);return l?`https://drive.google.com/uc?export=view&id=${l}`:r},fr=r=>{const l=rs(r);return l?`https://drive.google.com/uc?export=download&id=${l}`:r},ho=(r,l)=>{if(!r||!l)return"image.jpg";const i=(h=>h.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"D").replace(//g,"d"))(r).replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""),u=l.replace(/\s+/g,"_");return`${i}_${u}.jpg`},mo=({url:r,width:l,height:o,className:i})=>{const[u,h]=m.useState(!0),[f,x]=m.useState(!1),[g,y]=m.useState(!1);!l&&!o&&(l=100);const c=m.useMemo(()=>rs(r),[r]),b=m.useMemo(()=>!!c,[c]),N=m.useMemo(()=>r&&(c?fr(r):r),[r,c]),j=m.useMemo(()=>c?`https://drive.google.com/file/d/${c}/preview`:null,[c]);function k(){h(!1),x(!1)}function C(v){console.error("PDF load error:",v),b&&!g?(console.log("Switching to iframe fallback for Google Drive PDF"),y(!0),h(!1)):(x(!0),h(!1))}return f?e.jsx("div",{className:`flex items-center justify-center bg-gray-100 text-red-400 ${i}`,style:{width:l||"auto",height:o||(l?l*1.4:"auto")},children:e.jsx("i",{className:"fas fa-file-pdf text-2xl"})}):g&&j?e.jsxs("div",{className:`relative overflow-hidden ${i}`,style:{width:l||"100%",height:o||"100%"},children:[e.jsx("iframe",{src:j,className:"w-full h-full border-0 pointer-events-none scale-[2] origin-top-left",title:"PDF Preview",tabIndex:-1}),e.jsx("div",{className:"absolute inset-0 bg-transparent"})]}):e.jsxs("div",{className:`relative overflow-hidden ${i}`,children:[u&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-gray-400"})}),e.jsx(ql,{file:N,onLoadSuccess:k,onLoadError:C,loading:e.jsx("div",{className:"w-full h-full bg-gray-100"}),className:"flex items-center justify-center",children:e.jsx(Xl,{pageNumber:1,width:l,height:o,renderTextLayer:!1,renderAnnotationLayer:!1})})]})},fo=je.memo(mo),ct=({id:r,label:l,onFileSelect:o,required:i=!1,accept:u,disableCompression:h=!1})=>{const[f,x]=m.useState(null),[g,y]=m.useState(null),c=m.useRef(null),[b,N]=m.useState(!1),[j,k]=m.useState(!1),[C,v]=m.useState("");m.useEffect(()=>{if(f){const S=URL.createObjectURL(f);return y(S),()=>URL.revokeObjectURL(S)}else y(null)},[f]);const _=m.useCallback(S=>{if(u){const $=S.type;if(!u.split(",").map(R=>R.trim()).some(R=>R.endsWith("/*")?$.startsWith(R.slice(0,-1)):R.startsWith(".")?S.name.toLowerCase().endsWith(R):$===R))return alert(`Loi tp khng hp l. Vui lng chn tp c nh dng: ${u}`),!1}return!0},[u]),M=m.useCallback(async S=>{if(S){if(!_(S)){x(null),o(null),c.current&&(c.current.value="");return}k(!0);try{let $;S.type.startsWith("image/")?h?$=S:(v("ang nn nh..."),$=await mr(S)):S.type==="application/pdf"?h?$=S:(v("ang ti u file..."),$=await lo(S,H=>{v("ang ti u file...")})):$=S,x($),o($)}catch($){console.error("File processing failed:",$),alert("Li x l file. Vui lng th li."),x(null),o(null)}finally{k(!1)}}else x(null),o(null)},[o,_]),E=S=>{var $;M((($=S.target.files)==null?void 0:$[0])||null)},O=S=>{S.stopPropagation(),M(null),c.current&&(c.current.value="")},P=S=>{S.stopPropagation(),S.preventDefault(),k(!1),x(null),o(null),c.current&&(c.current.value="")},L=S=>{S.preventDefault(),S.stopPropagation(),S.type==="dragenter"||S.type==="dragover"?N(!0):S.type==="dragleave"&&N(!1)},V=S=>{S.preventDefault(),S.stopPropagation(),N(!1),S.dataTransfer.files&&S.dataTransfer.files[0]&&M(S.dataTransfer.files[0])},I=()=>u?u.includes(".pdf")?"Ch chp nhn file PDF":u.includes("image/*")?"Ch chp nhn file nh (PNG, JPG)":`Chp nhn: ${u}`:"PDF, PNG, JPG, DOCX, etc.";return e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-text-primary mb-2",children:[l,i&&e.jsx("span",{className:"text-danger ml-1",children:"*"})]}),f?e.jsxs("div",{className:"relative group overflow-hidden rounded-lg border border-accent-primary/20 bg-surface-accent transition-all duration-300 hover:shadow-md",children:[e.jsxs("div",{className:"w-full h-48 bg-surface-ground flex items-start justify-center overflow-hidden relative border-b border-accent-primary/10",children:[f.type==="application/pdf"&&g?e.jsx(fo,{url:g,width:500,className:"w-full h-full flex justify-center"}):e.jsx("i",{className:"fas fa-file-alt text-accent-primary text-6xl opacity-50 self-center"}),e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx(K,{type:"button",onClick:O,disabled:j,variant:"ghost",className:"w-8 h-8 bg-black/50 text-white rounded-full flex items-center justify-center hover:bg-danger hover:text-white transition-colors backdrop-blur-sm !p-0 shadow-sm",children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"p-3 bg-surface-card flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-text-primary truncate",title:f.name,children:f.name}),e.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:[(f.size/1024).toFixed(1)," KB"]})]}),e.jsxs(K,{type:"button",onClick:O,disabled:j,variant:"ghost",className:"text-white hover:text-white bg-danger hover:bg-danger-hover text-xs py-1.5 px-3 rounded shadow-sm flex-shrink-0",children:[e.jsx("i",{className:"fas fa-trash-alt mr-1"}),"Xa"]})]})]}):e.jsx("div",{onClick:()=>{var S;return(S=c.current)==null?void 0:S.click()},onDragEnter:L,onDragLeave:L,onDragOver:L,onDrop:V,className:`mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${b?"border-accent-primary bg-surface-accent":"border-border-primary hover:border-accent-primary"}`,children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("i",{className:"fas fa-folder-open text-text-placeholder text-3xl"}),e.jsxs("div",{className:"flex text-sm text-text-secondary",children:[e.jsxs("span",{className:"relative rounded-md font-semibold text-accent-primary hover:text-accent-primary-hover",children:[e.jsx("span",{children:"Ti ln mt file"}),e.jsx("input",{ref:c,id:r,name:r,type:"file",className:"sr-only",onChange:E,accept:u})]}),e.jsx("p",{className:"pl-1",children:"hoc ko v th"})]}),e.jsx("p",{className:"text-xs text-text-placeholder",children:I()})]})}),j&&e.jsxs("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center rounded-lg z-20",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-accent-primary"}),e.jsx("p",{className:"text-sm font-semibold text-accent-primary mt-2 mb-3",children:C||"ang x l..."}),e.jsx(K,{type:"button",onClick:P,variant:"ghost",className:"text-xs text-danger hover:bg-danger-bg px-3 py-1 rounded-full border border-danger/30",children:"Hy b"})]})]})},ns="https://script.google.com/macros/s/AKfycbx7fmwiiBvA63KT9LEoSIOLooI4jPNSJjGRgZyM3yTYuW54RD3jINBWZNUxcDktjckW/exec",We="PHM THNH NHN",xr=["January","February","March","April","May","June","July","August","September","October","November","December"],ss={"VF 3":["Base","Base Tiu chun 2","Plus"],"VF 5":["Plus"],"VF 6":["Eco Tiu chun","Eco Nng cp","Plus Tiu chun","Plus Nng cp","Plus_US","Plus Tiu chun 1","Plus Tiu chun 2"],"VF 7":["Eco","Eco_HUD","Plus_Metal Nng cp","Plus_Metal Tiu chun","Plus Tiu chun","Plus Nng cp","Eco Tiu chun 1","Eco Tiu chun 2","Eco_HUD Tiu chun 1","Eco_HUD Tiu chun 2","Plus_Metal Tiu chun 1","Plus_Metal Tiu chun 2","Plus Tiu chun 2","Plus Tiu chun 1","Plus_Metal Tiu chun 1 (FWD)","Plus_Metal Tiu chun 1 (AWD)"],"VF 8":["Eco Tiu chun","Eco Nng cp","Plus"],"VF 9":["Plus_CAP_Metal_3ZONES","Plus_Metal_3ZONES","Eco_3ZONES","Plus_Metal","Plus_CAP_Metal"],HERIO:["HERIO"],NERIO:["NERIO"],LIMO:["LIMO"],MINIO:["MINIO"],"EC Van":["Base","Plus","Plus_Ca trt"]},gr=["Base","Plus","Plus Tiu chun","Plus Nng cp","Eco","Eco_HUD","Eco Tiu chun","Eco Nng cp","Plus_Metal Tiu chun","Plus_Metal Nng cp","Plus_CAP_Metal","Plus_Metal_3ZONES","Eco_3ZONES","Plus_CAP_Metal_3ZONES","HERIO","NERIO","LIMO","MINIO","Plus_US","Plus Tiu chun 1","Plus Tiu chun 2","Eco Tiu chun 1","Eco Tiu chun 2","Eco_HUD Tiu chun 1","Eco_HUD Tiu chun 2","Plus_Metal Tiu chun 1","Plus_Metal Tiu chun 2","Base Tiu chun 2","Plus_Metal Tiu chun 1 (FWD)","Plus_Metal Tiu chun 1 (AWD)","EC Van","Plus_Ca trt"],dt=["Brahminy White (CE18)","Yellow (CE1U)","Sunset ORB (CE1A)","Crimson Red (CE1M)","Vinfast Blue (CE1N)","Neptune Grey (CE14)","Jet Black (CE11)","Electric Blue (CE1J)","Zenith Grey (CE1V)","Jet Black Roof- Summer Yellow Body (111U)","Brahminy White Roof- Aquatic Azure Body (181Y)","Brahminy White Roof- Rose Pink Body (1821)","Brahminy White Roof - Iris Berry Body (181X)","Urbant Mint (CE1W)","Vinbus Green (CE2B)","Deep Ocean (CE1H)","Brahminy White Roof- Summer Yellow Body (181U)","Iris Berry (CE1X)","Zenith Grey-desat Silver Roof (171V)","Urbant Mint Green - Desat Silv (171W)","Ivy Green-desat Silver Roof (1722)","Atlantic Blue-Aquatic Azure Ro (1Y26)","Jet Black-Champagne Creme Roof (2311)","Infinity Blanc _ Silky White R (2418)","Champagne Creme - Matte Champa (2523)","Jet Black - Graphite Roof (2811)","Crimson Velvet - Mystery Bronz (2927)","Ivy_Green_GNE (CE22)","Champagne_Creme_YLG (CE23)","Crimson Red - Jet Black Roof (111M)","Infinity Blanc_Zenith Grey Roof (1v18)","Deep Ocean_Jet Black Roof (111H)","Alantic Blue_Denim Blue Roof (2A26)","Jet Black_Mystery Bronze Roof (2911)","Champagne Creme_Infinity Blanc Roof (1823)","Silver (CE17)","Pink Gold (CE2K)"],la=["Black","Brown","Beige"],pr=[{models:["vf 3","vf 5"],colors:["Black"]},{models:["vf 6","vf 7","vf 8","vf 9"],versions:["plus tiu chun","plus nng cp","plus","plus_metal nng cp","plus_metal tiu chun","plus_cap_metal_3zones","plus_metal_3zones","plus_cap_metal","plus_metal","plus_us","plus tiu chun 1","plus tiu chun 2","plus_metal tiu chun 1","plus_metal tiu chun 2","plus_metal tiu chun 1 (fwd)","plus_metal tiu chun 1 (awd)"],colors:["Black","Brown","Beige"]},{models:["vf 6","vf 7","vf 8","vf 9"],versions:["eco tiu chun","eco nng cp","eco","eco_hud","eco_3zones","eco tiu chun 1","eco tiu chun 2","eco_hud tiu chun 1","eco_hud tiu chun 2"],colors:["Black"]},{models:["herio","nerio","limo","minio","ec van"],colors:["Black","Grey"]}],Za={vf3:["181u","181y","1821","ce18","ce1j","ce1m","ce1v","ce1w","ce1x"],vf5:["111u","181y","ce11","ce14","ce18","ce1m","ce1v","ce1w","ce1x"],vf6:["ce11","ce14","ce18","ce1h","ce1m","ce1n","ce1v","ce1w"],vf7:["ce11","ce14","ce17","ce18","ce1h","ce1m","ce1n","ce1v","ce1w"],vf8:["ce11","ce14","ce18","ce1h","ce1m","ce1n","ce1v","ce1w","ce22"],vf9:["ce11","ce14","ce17","ce18","ce1h","ce1m","ce1n","ce1w","ce22"],ecvan:["ce18","ce1m","ce1u","ce1w"],herio:["ce11","ce17","ce1m","ce1u"],limo:["ce11","ce17","ce18","ce1m","ce1u"],nerio:["ce11","ce17","ce1m","ce1u"]},as=r=>new Promise((l,o)=>{const i=new FileReader;i.readAsDataURL(r),i.onload=()=>l(i.result),i.onerror=u=>o(u)}),xo="https://script.google.com/macros/s/AKfycbzElHHCjX_RnObRE3VX42qlz_PnKiF8SvMKieuOwtsV1VlByJXNeZkZ2MvP9fa4ACIgIQ/exec",ze=async(r,l=ns)=>{var o,i;try{const u=new URLSearchParams;for(const x in r)r[x]!==null&&r[x]!==void 0&&u.append(x,String(r[x]));const h=await axios.post(l,u),f=typeof h.data=="string"?JSON.parse(h.data):h.data;if(f.status!=="SUCCESS")throw new Error(f.message||"API returned an unspecified error.");return f}catch(u){const h=((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.message)||u.message||"An unknown API error occurred.";throw console.error("API service error (POST):",u),new Error(h)}},Ue=async(r,l=ns)=>{var o,i;try{const u=new URL(l);Object.keys(r).forEach(x=>{r[x]!==void 0&&r[x]!==null&&u.searchParams.append(x,String(r[x]))});const h=await axios.get(u.toString()),f=typeof h.data=="string"?JSON.parse(h.data):h.data;if(f.status!=="SUCCESS")throw new Error(f.message||"API returned an unspecified error.");return f}catch(u){const h=((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.message)||u.message||"An unknown API error occurred.";throw console.error("API service error (GET):",u),new Error(h)}},Nd=async()=>Ue({action:"getActiveUsers"}),Ss=async()=>{try{const r=sessionStorage.getItem("userEmail");r&&ze({action:"recordUserPresence",userEmail:r})}catch(r){console.warn("Failed to record user presence:",r)}},go=async(r,l,o)=>{const i={};r&&r.length>0&&(i.usersToView=r);const u={action:"getPaginatedData",page:"1",pageSize:"9999",sortBy:"Thi gian nhp",sortOrder:"desc",filters:JSON.stringify(i),isAdmin:String(o),currentUser:l};return Ue(u)},po=async()=>Ue({action:"getXuathoadonData"}),bo=async()=>Ue({action:"getChinhSachData"}),kd=async()=>Ue({action:"getYeuCauVcData"}),br=async()=>{const r=sessionStorage.getItem("currentConsultant")||We,o={action:"getKhoXeData",currentUser:r,isAdmin:String(r===We)};return Ue(o)},yo=async r=>{const l={action:"holdCar",vin:r,updatedBy:sessionStorage.getItem("currentConsultant")||We};return ze(l)},vo=async r=>{const l={action:"releaseCar",vin:r,updatedBy:sessionStorage.getItem("currentConsultant")||We};return ze(l)},wo=async(r,l)=>{const o=await as(l),i={...r};i.vin&&(i.vin_giu_yeu_cau=i.vin,delete i.vin);const u={...i,thoi_gian_nhap:new Date().toISOString(),action:"addRequest",chic_file_base64:o,chic_file_name:l.name,chic_file_type:l.type};return ze(u)},jo=async(r,l)=>{const o={action:"cancelRequest",orderNumber:r,reason:l,cancelledBy:sessionStorage.getItem("currentConsultant")||"Unknown",fromUI:"true"};return ze(o)},No=async(r,l,o,i,u,h)=>{const[f,x]=await Promise.all([as(l),as(o)]),g={action:"requestInvoice",orderNumber:r,requestedBy:sessionStorage.getItem("currentConsultant")||"Unknown User",hop_dong_file_base64:f,hop_dong_file_name:l.name,hop_dong_file_type:l.type,denghi_xhd_file_base64:x,denghi_xhd_file_name:o.name,denghi_xhd_file_type:o.type,policy:i,commission:u,vpoint:h};return ze(g)},ko=async(r,l,o)=>{const i={action:"updateInvoiceFiles",orderNumber:r,updatedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"};return l&&(i.hop_dong_file_base64=await as(l),i.hop_dong_file_name=l.name,i.hop_dong_file_type=l.type),o&&(i.denghi_xhd_file_base64=await as(o),i.denghi_xhd_file_name=o.name,i.denghi_xhd_file_type=o.type),ze(i)},_o=async(r,l)=>{const o={action:"updateOrderDetails",updatedBy:sessionStorage.getItem("currentConsultant")||"Unknown User",orderNumber:r,...l};return ze(o)},So=async()=>{const r=sessionStorage.getItem("currentConsultant")||"Unknown User",l={action:"getAllArchivedDataForUser",currentUser:r,isAdmin:String(r===We)};return Ue(l)},Co=async()=>{const r=sessionStorage.getItem("currentConsultant")||We,l={action:"getNotifications",currentUser:r,isAdmin:String(r===We)};return Ue(l)},Do=async()=>{const r={action:"markAllNotificationsAsRead",currentUser:sessionStorage.getItem("currentConsultant")||We,timestamp:new Date().toISOString()};return ze(r)},Mo=async r=>{const l={action:"markNotificationAsRead",notificationId:r,currentUser:sessionStorage.getItem("currentConsultant")||We,timestamp:new Date().toISOString()};return ze(l)},yr=async(r,l)=>{const o=`${r} ${l}`,i=`${xo}?sheet=${o}`;try{const u=await axios.get(i),h=typeof u.data=="string"?JSON.parse(u.data):u.data;return h&&h[o]&&Array.isArray(h[o])||h&&h[o]?h[o]:Array.isArray(h)?h:[]}catch(u){return console.warn(`Error fetching sold data for ${o}:`,u),[]}},vr=(r,l,o,i)=>{let u=new Date().toISOString();if(o){const h=xr.indexOf(o);if(h>-1){const f=i||new Date().getFullYear();u=new Date(f,h,15).toISOString()}}return{"Tn khch hng":String(r[0]||""),"S n hng":String(r[2]||`SOLD-${o}-${i}-${l}`),"Dng xe":String(r[3]||""),"Phin bn":String(r[4]||""),"Ngoi tht":String(r[5]||""),"Ni tht":String(r[6]||""),"Tn t vn bn hng":String(r[7]||""),VIN:String(r[8]||""),"CHNH SCH":String(r[9]||""),"Ngy cc":u,"Thi gian nhp":u,"Thi gian ghp":u,"Kt qu":" xut ha n"}},To=async(r,l)=>{try{const i=(await yr(r,l)).filter(u=>Array.isArray(u)&&u.length>2&&u[2]).map((u,h)=>vr(u,h,r,l));return{status:"SUCCESS",message:`Successfully fetched data for ${r} ${l}.`,data:i}}catch(o){return{status:"ERROR",message:o instanceof Error?o.message:`An unknown error occurred while fetching data for ${r} ${l}.`}}},Eo=async r=>{try{const l=xr.map(h=>yr(h,r).then(f=>({month:h,data:f}))),u=(await Promise.all(l)).flatMap(({month:h,data:f})=>f.filter(x=>Array.isArray(x)&&x.length>8&&x[8]).map(x=>({row:x,month:h}))).map(({row:h,month:f},x)=>vr(h,x,f,r));return{status:"SUCCESS",message:`Successfully fetched all sold car data for ${r}.`,data:u}}catch(l){return{status:"ERROR",message:l instanceof Error?l.message:"An unknown error occurred while fetching sold cars data."}}},Po=async r=>{const l={action:"requestVinClub",...r,requestedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"};return ze(l)},Yo=async r=>{try{const l=new URLSearchParams;for(const f in r)r[f]!==null&&r[f]!==void 0&&l.append(f,String(r[f]));const o=await axios.post(ns,l),i=typeof o.data=="string"?JSON.parse(o.data):o.data;if(!i.success)throw new Error(i.message||"User API returned an unspecified error.");const{success:u,...h}=i;return{status:"SUCCESS",...h}}catch(l){const o=l instanceof Error?l.message:"An unknown user API error occurred.";throw new Error(o)}},Io=async()=>Ue({action:"getTeamData"}),Oo=async()=>Ue({action:"getUsers"}),Ja=async(r,l="all")=>{const o=sessionStorage.getItem("currentConsultant")||We,i=sessionStorage.getItem("currentUser")||"",u=o===We||i.toLowerCase()==="admin";return Ue({action:"searchGlobal",keyword:r,scope:l,isAdmin:String(u)})},Fo=async(r,l)=>{const o=sessionStorage.getItem("currentUser")||"Unknown Admin";return["addUser","updateTeams"].includes(r)?Yo({action:r,...l,adminUser:o}):ze({action:r,...l,adminUser:o})},_d=async r=>Ue({action:"getOrderHistory",orderNumber:r}),Sd=async r=>{const l={action:"handleBulkUploadIssuedInvoices",filesData:JSON.stringify(r),uploadedBy:sessionStorage.getItem("currentConsultant")||"Admin"};return ze(l)},ha=async r=>{var l,o;try{const i=new URLSearchParams;for(const y in r)r[y]!==void 0&&r[y]!==null&&i.append(y,String(r[y]));const u=await axios.post(ns,i),h=typeof u.data=="string"?JSON.parse(u.data):u.data;if(!(h.success===!0||h.status==="SUCCESS"))throw new Error(h.message||"API returned a failure response.");const{success:x,...g}=h;return{status:"SUCCESS",...g}}catch(i){const u=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.message)||i.message||"An unknown API error occurred.";throw console.error("Legacy API service error (POST):",i),new Error(u)}},Ao=async()=>Ue({action:"getTestDriveSchedule"}),Cd=async r=>ha({action:"saveTestDriveBooking",...r}),Dd=async r=>{const l={action:"submitTestDriveCheckin",soPhieu:r.soPhieu,updatedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"};return r.odoBefore&&(l.odoBefore=r.odoBefore),r.imagesBefore&&(l.imagesBefore=JSON.stringify(r.imagesBefore)),r.odoAfter&&(l.odoAfter=r.odoAfter),r.imagesAfter&&(l.imagesAfter=JSON.stringify(r.imagesAfter)),ha(l)},Md=async r=>ha({action:"deleteTestDriveBooking",soPhieu:r,deletedBy:sessionStorage.getItem("currentConsultant")||"Unknown User"}),Lo=({currentStep:r})=>{const l=["Thng tin BH","Ti chng t","Xc nhn"];return e.jsx("div",{className:"flex items-center justify-center mb-6",children:l.map((o,i)=>{const u=i+1,h=u===r,f=u<r;return e.jsxs(je.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center text-center w-24",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 font-bold ${f?"bg-success text-white":h?"bg-accent-primary text-white":"bg-surface-ground border-2 border-border-primary text-text-secondary"}`,children:f?e.jsx("i",{className:"fas fa-check"}):u}),e.jsx("p",{className:`mt-2 text-xs font-semibold transition-colors ${h||f?"text-text-primary":"text-text-secondary"}`,children:o})]}),i<l.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-colors duration-300 ${f?"bg-success":"bg-border-primary"}`})]},u)})})},Ro=({order:r,onClose:l,onConfirm:o})=>{const[i,u]=m.useState(1),[h,f]=m.useState(null),[x,g]=m.useState(null),[y,c]=m.useState(!1),[b,N]=m.useState(!1),[j,k]=m.useState([]),[C,v]=m.useState(""),[_,M]=m.useState(""),[E,O]=m.useState([]),[P,L]=m.useState(!0),V=ut();m.useEffect(()=>{(async()=>{try{L(!0);const w=await bo();w.status==="SUCCESS"&&Array.isArray(w.data)?O(w.data):(console.error("Failed to fetch sales policies:",w.message),O([]))}catch(w){console.error("Error fetching sales policies:",w),O([])}finally{L(!1)}})()},[]);const I=m.useMemo(()=>{if(!r||!r["Dng xe"]||E.length===0)return E.sort();const A=Object.keys(ss).map(te=>te.replace(/\s+/g,"").toLowerCase()),w=r["Dng xe"].replace(/\s+/g,"").toLowerCase(),Y=E.filter(te=>te.toLowerCase().replace(/\s+/g,"").includes(w)),T=E.filter(te=>{const ue=te.toLowerCase().replace(/\s+/g,"");return!A.some(De=>ue.includes(De))}),U=[...new Set([...Y,...T])];return U.length>0?U.sort():E.sort()},[r,E]);m.useEffect(()=>{I.length>0&&k(A=>A.filter(w=>I.includes(w)))},[I]);const[S,$]=m.useState(0),H=A=>A.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."),z=A=>w=>{const Y=w.target.value;A(H(Y))},R=A=>A.replace(/\./g,""),Q=j.length>0&&C&&parseFloat(R(C))>=0&&_&&parseFloat(R(_))>=0,q=h&&x,ne=Q&&q&&y,oe=()=>u(A=>Math.min(A+1,3)),xe=()=>u(A=>Math.max(A-1,1)),G=async()=>{if(!ne||!h||!x){alert("Vui lng hon thnh tt c cc bc.");return}N(!0);try{$(1),await new Promise(A=>setTimeout(A,800)),$(2),await new Promise(A=>setTimeout(A,800)),$(3),await o(r,h,x,j,R(C),R(_)),$(4),await new Promise(A=>setTimeout(A,2e3)),l()}catch(A){console.error("Submission failed",A),N(!1),$(0)}},Z=({label:A,status:w})=>{let Y="fa-circle text-border-secondary",T="text-text-secondary",U="bg-surface-ground";return w==="active"?(Y="fa-spinner fa-spin text-accent-primary",T="text-accent-primary font-semibold",U="bg-accent-primary/5 border-accent-primary/20"):w==="completed"&&(Y="fa-check-circle text-success",T="text-text-primary font-medium",U="bg-success/5 border-success/20"),e.jsxs("div",{className:`flex items-center p-3 rounded-lg border ${w==="pending"?"border-transparent":"border-border-secondary"} ${U} transition-all duration-300`,children:[e.jsx("div",{className:"w-8 flex justify-center mr-3",children:e.jsx("i",{className:`fas ${Y} text-lg transition-all duration-300`})}),e.jsx("span",{className:`${T} transition-all duration-300`,children:A})]})};return b?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-surface-card w-full max-w-md rounded-2xl shadow-xl p-6 flex flex-col items-center animate-fade-in-scale-up",style:V,children:[e.jsxs("div",{className:"w-16 h-16 mb-4 relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-border-primary"}),e.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${S===4?"border-success":"border-accent-primary border-t-transparent animate-spin"}`}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("i",{className:`fas ${S===4?"fa-check text-success":"fa-paper-plane text-accent-primary"} text-xl`})})]}),e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-1",children:S===4?"Hon tt!":"ang x l h s"}),e.jsx("p",{className:"text-sm text-text-secondary mb-6",children:S===4?"Yu cu  c gi thnh cng.":"Vui lng khng tt trnh duyt..."}),e.jsxs("div",{className:"w-full space-y-3",children:[e.jsx(Z,{label:"X l Hp ng mua bn",status:S>1?"completed":S===1?"active":"pending"}),e.jsx(Z,{label:"X l  ngh xut ha n",status:S>2?"completed":S===2?"active":"pending"}),e.jsx(Z,{label:"ang gi d liu...",status:S>3?"completed":S===3?"active":"pending"})]})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("div",{className:"bg-surface-card w-full md:max-w-4xl h-[100dvh] md:h-[700px] md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:A=>A.stopPropagation(),style:V,children:[e.jsxs("header",{className:"relative flex-shrink-0 flex flex-col items-center justify-center p-4 text-center border-b border-border-primary",children:[e.jsxs("div",{className:"animate-fade-in-down",children:[e.jsx("h2",{className:"text-lg font-bold text-gradient uppercase",children:"YU CU XUT HA N"}),e.jsx("p",{className:"text-xs text-text-secondary mt-0.5",children:"Cung cp chng t  tin hnh xut ha n."})]}),e.jsx("button",{onClick:l,className:"absolute top-3 right-3 w-8 h-8 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 custom-scrollbar",children:[e.jsx(Lo,{currentStep:i}),e.jsxs("div",{className:"bg-surface-accent/50 rounded-xl border border-accent-primary/20 p-2.5 mb-4 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx("i",{className:"fas fa-file-invoice-dollar text-5xl text-accent-primary transform rotate-12"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 relative z-10",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-text-secondary font-semibold mb-0.5",children:"S n hng"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-accent-primary",children:[e.jsx("i",{className:"fas fa-barcode text-base opacity-70"}),e.jsx("span",{className:"text-base font-bold font-mono tracking-tight",children:r["S n hng"]})]})]}),e.jsxs("div",{className:"flex flex-col md:border-l md:border-accent-primary/20 md:pl-3",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-text-secondary font-semibold mb-0.5",children:"Khch hng"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-text-primary",children:[e.jsx("i",{className:"fas fa-user text-base text-accent-secondary opacity-70"}),e.jsx("span",{className:"text-base font-bold truncate",title:r["Tn khch hng"],children:r["Tn khch hng"]})]})]}),e.jsxs("div",{className:"flex flex-col md:border-l md:border-accent-primary/20 md:pl-3",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-text-secondary font-semibold mb-0.5",children:"S VIN"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-text-primary",children:[e.jsx("i",{className:"fas fa-car text-base text-accent-secondary opacity-70"}),e.jsx("span",{className:"text-base font-bold font-mono tracking-tight",children:r.VIN||"---"})]})]})]})]}),e.jsxs("div",{style:{display:i===1?"block":"none"},children:[e.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"1. Thng tin Bn hng"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-primary mb-2",children:["Chnh sch bn hng ",e.jsx("span",{className:"text-danger",children:"*"})]}),P?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary p-2 bg-surface-ground rounded-lg",children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("span",{children:"ang ti danh sch chnh sch..."})]}):e.jsx("div",{className:"flex flex-wrap gap-2 p-2 bg-surface-ground rounded-lg border border-border-primary",children:I.length>0?I.map(A=>{const w=j.includes(A);return e.jsxs("button",{type:"button",onClick:()=>{const Y=w?j.filter(T=>T!==A):[...j,A];k(Y)},className:`group inline-flex items-center gap-2 px-3 py-1.5 text-xs font-semibold rounded-full border cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-primary
                                                            ${w?"bg-accent-primary border-accent-primary text-white shadow-sm hover:bg-accent-primary-hover":"bg-white border-border-secondary text-text-secondary hover:border-accent-primary hover:text-accent-primary"}
                                                        `,children:[e.jsx("i",{className:`fas ${w?"fa-check-circle":"fa-plus-circle"} transition-transform duration-200 ${w?"":"group-hover:rotate-90"}`}),A]},A)}):e.jsx("p",{className:"text-xs text-text-secondary",children:"Khng tm thy chnh sch no ph hp."})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"commission-amount",className:"block text-sm font-medium text-text-primary mb-2",children:["Hoa hng ng trc (VND) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"commission-amount",type:"text",value:C,onChange:z(v),className:"w-full bg-surface-ground border border-border-primary rounded-lg p-2.5 futuristic-input",placeholder:"Nhp s tin",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"vpoint-amount",className:"block text-sm font-medium text-text-primary mb-2",children:["S im Vpoint s dng (im) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"vpoint-amount",type:"text",value:_,onChange:z(M),className:"w-full bg-surface-ground border border-border-primary rounded-lg p-2.5 futuristic-input",placeholder:"Nhp s im",required:!0})]})]})]})]}),e.jsxs("div",{style:{display:i===2?"block":"none"},children:[e.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"2. Ti ln chng t"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ct,{id:"hop_dong_file_input",label:"Hp ng mua bn",onFileSelect:f,required:!0,accept:".pdf"}),e.jsx(ct,{id:"denghi_xhd_file_input",label:" ngh xut ha n",onFileSelect:g,required:!0,accept:".pdf"})]})]}),e.jsxs("div",{style:{display:i===3?"block":"none"},children:[e.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"3. Xc nhn cui cng"}),e.jsx("div",{className:"p-4 bg-surface-ground rounded-lg border border-border-primary mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("p",{className:"text-xs text-text-secondary mb-1.5 font-semibold uppercase",children:"Chnh sch bn hng"}),j.length>0?e.jsx("div",{className:"bg-surface-card rounded-md border border-border-secondary divide-y divide-border-secondary/50 flex-grow overflow-y-auto custom-scrollbar shadow-sm min-h-[120px]",children:j.map((A,w)=>e.jsxs("div",{className:"p-2.5 text-sm font-medium text-text-primary flex items-start hover:bg-surface-hover transition-colors",children:[e.jsx("i",{className:"fas fa-check-circle text-success mt-0.5 mr-2.5 flex-shrink-0"}),e.jsx("span",{className:"leading-tight",children:A})]},w))}):e.jsx("div",{className:"bg-surface-card rounded-md border border-border-secondary flex items-center justify-center flex-grow min-h-[120px]",children:e.jsx("p",{className:"font-semibold text-text-placeholder italic",children:"Cha chn chnh sch no"})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"bg-surface-card p-3 rounded-md border border-border-secondary shadow-sm",children:[e.jsx("p",{className:"text-xs text-text-secondary mb-2 font-semibold uppercase border-b border-border-secondary pb-1",children:"Thng tin thanh ton"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:"Hoa hng ng:"}),e.jsx("span",{className:"font-bold text-text-primary",children:C?`${parseInt(R(C)).toLocaleString("vi-VN")} VND`:"Cha nhp"})]}),_&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:"Vpoint s dng:"}),e.jsx("span",{className:"font-bold text-purple-600",children:`${parseInt(R(_)).toLocaleString("vi-VN")} im`})]})]})]}),e.jsxs("div",{className:"bg-surface-card p-3 rounded-md border border-border-secondary shadow-sm flex-grow",children:[e.jsx("p",{className:"text-xs text-text-secondary mb-2 font-semibold uppercase border-b border-border-secondary pb-1",children:"Tp nh km"}),e.jsxs("ul",{className:"list-none text-sm text-text-primary space-y-2",children:[e.jsxs("li",{className:`flex items-center ${h?"text-text-primary":"text-danger"}`,children:[e.jsx("i",{className:`fas ${h?"fa-file-contract text-success":"fa-times-circle"} mr-2 w-4 text-center`}),e.jsx("span",{className:"truncate flex-1",title:h==null?void 0:h.name,children:(h==null?void 0:h.name)||"Thiu Hp ng"})]}),e.jsxs("li",{className:`flex items-center ${x?"text-text-primary":"text-danger"}`,children:[e.jsx("i",{className:`fas ${x?"fa-file-invoice text-success":"fa-times-circle"} mr-2 w-4 text-center`}),e.jsx("span",{className:"truncate flex-1",title:x==null?void 0:x.name,children:(x==null?void 0:x.name)||"Thiu  ngh XHD"})]})]})]})]})]})}),e.jsx("div",{className:"relative p-4 rounded-lg border border-accent-primary/20 bg-surface-accent",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-6",children:e.jsx("input",{id:"vinclub-confirm",type:"checkbox",checked:y,onChange:A=>c(A.target.checked),className:"focus:ring-accent-primary h-5 w-5 text-accent-primary border-border-secondary rounded-md cursor-pointer"})}),e.jsxs("div",{className:"ml-3 text-sm",children:[e.jsx("label",{htmlFor:"vinclub-confirm",className:"font-medium text-text-primary cursor-pointer",children:"Ti xc nhn khch hng  to ti khon Vinclub."}),e.jsx("p",{className:"text-accent-primary/80",children:"y l iu kin bt buc  tip tc."})]})]})})]})]})}),e.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-between items-center bg-surface-card relative z-10",children:[i>1?e.jsx(K,{onClick:xe,disabled:b,variant:"secondary",size:"sm",leftIcon:e.jsx("i",{className:"fas fa-arrow-left"}),children:"Quay li"}):e.jsx(K,{onClick:l,disabled:b,variant:"secondary",size:"sm",children:"Hy"}),i<3?e.jsx(K,{onClick:oe,disabled:b||i===1&&!Q||i===2&&!q,variant:"primary",size:"sm",rightIcon:e.jsx("i",{className:"fas fa-arrow-right"}),children:"Tip theo"}):e.jsx(K,{onClick:G,disabled:b||!ne,variant:"success",size:"sm",isLoading:b,leftIcon:b?void 0:e.jsx("i",{className:"fas fa-paper-plane"}),children:"Gi Yu Cu"})]})]})})},Qa=({label:r,value:l,icon:o,isMono:i=!1})=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("i",{className:`fas ${o} fa-fw w-4 text-center text-accent-secondary`}),e.jsxs("span",{className:"text-text-secondary",children:[r,":"]}),e.jsx("span",{className:`font-semibold text-text-primary ${i?"font-mono":""}`,children:l})]}),$o=({order:r,onClose:l,onConfirm:o})=>{const[i,u]=m.useState(null),[h,f]=m.useState(null),[x,g]=m.useState(!1),y=ut(),c=()=>{if(!i&&!h){alert("Vui lng chn t nht mt file  b sung.");return}g(!0),o(r,i,h)},b=i||h;return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("div",{className:"bg-surface-card w-full md:max-w-2xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:N=>N.stopPropagation(),style:y,children:[e.jsxs("header",{className:"relative flex flex-col items-center justify-center p-6 text-center bg-surface-card border-b border-border-primary",children:[e.jsxs("div",{className:"animate-fade-in-down",children:[e.jsx("h2",{className:"text-xl font-bold text-gradient",children:"B Sung Chng T"}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Ti ln cc tp mi  cp nht hoc thay th."})]}),e.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex-shrink-0 flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 custom-scrollbar",children:[e.jsxs("div",{className:"p-4 bg-surface-ground rounded-lg border border-border-primary space-y-2",children:[e.jsx("h3",{className:"font-semibold text-text-primary text-base mb-2",children:"Tm tt yu cu"}),e.jsx(Qa,{label:"S n hng",value:r["S n hng"],icon:"fa-barcode",isMono:!0}),e.jsx(Qa,{label:"Khch hng",value:r["Tn khch hng"],icon:"fa-user"})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 text-sm bg-warning-bg rounded-lg border border-warning/30 text-yellow-800 my-4",children:[e.jsx("i",{className:"fas fa-info-circle mt-0.5"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Lu :"})," Ch cn ti ln tp bn mun thay th. Cc tp khng c ti ln s c gi nguyn."]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-text-primary text-base mb-3",children:"Ti ln tp mi"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(ct,{id:"supp_hop_dong_file_input",label:"Hp ng mua bn (Mi)",onFileSelect:u,accept:".pdf"}),e.jsx(ct,{id:"supp_denghi_xhd_file_input",label:" ngh XHD (Mi)",onFileSelect:f,accept:".pdf"})]})]})]})}),e.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end items-center gap-3 bg-surface-card relative z-10",children:[e.jsx(K,{onClick:l,disabled:x,variant:"secondary",size:"sm",leftIcon:e.jsx("i",{className:"fas fa-times"}),children:"Hy"}),e.jsx(K,{onClick:c,disabled:x||!b,variant:"primary",size:"sm",isLoading:x,leftIcon:e.jsx("i",{className:"fas fa-save"}),children:"Cp nht & Gi"})]})]})})},Vo=({onFileSelect:r,isProcessing:l,ocrStatus:o,showToast:i})=>{const[u,h]=m.useState(!1),[f,x]=m.useState(null),[g,y]=m.useState(null),c=m.useRef(null),[b,N]=m.useState(!1),j=m.useCallback(async O=>{if(r(null),x(null),y(null),O){if(!O.type.startsWith("image/")){i("Tp khng hp l","Vui lng ch chn tp hnh nh.","warning");return}N(!0);try{const P=await mr(O);x(P),r(P);const L=new FileReader;L.onloadend=()=>{y(L.result)},L.readAsDataURL(P)}catch(P){console.error("Image compression failed:",P),i("Li Nn nh","Khng th x l nh ca bn. Vui lng th nh khc.","error")}finally{N(!1)}}},[r,i]),k=O=>{O.preventDefault(),O.stopPropagation(),O.type==="dragenter"||O.type==="dragover"?h(!0):O.type==="dragleave"&&h(!1)},C=O=>{O.preventDefault(),O.stopPropagation(),h(!1),O.dataTransfer.files&&O.dataTransfer.files[0]&&j(O.dataTransfer.files[0])},v=O=>{O.preventDefault(),O.target.files&&O.target.files[0]&&j(O.target.files[0])},_=()=>{var O;(O=c.current)==null||O.click()},M=O=>{O.stopPropagation(),j(null)},E=()=>o.includes("Li")||o.includes("Khng tm thy")?"text-danger":o.includes(" in")?"text-success font-medium":"text-accent-secondary";return e.jsxs("div",{onDragEnter:k,className:"w-full",children:[e.jsx("input",{ref:c,type:"file",className:"hidden",accept:"image/*",onChange:v}),e.jsxs("div",{className:`relative w-full h-24 border-2 border-dashed rounded-lg flex items-center justify-center transition-all duration-300 group cursor-pointer overflow-hidden bg-surface-ground
                    ${u?"border-accent-primary bg-surface-accent":"border-border-primary"}
                    ${f?"border-solid border-accent-primary/50":""}`,onClick:_,onDragLeave:k,onDragOver:k,onDrop:C,children:[!f&&e.jsxs("div",{className:"text-center text-text-placeholder group-hover:text-text-primary transition-colors",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt fa-lg mb-1 group-hover:text-accent-primary"}),e.jsx("p",{className:"font-semibold text-text-primary text-xs",children:"Nhn  ti nh"}),e.jsx("p",{className:"text-[10px] hidden md:block opacity-70",children:"Ti a 10MB"})]}),f&&g&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 p-2 z-0",children:e.jsx("img",{src:g,alt:"Preview",className:"w-full h-full object-contain rounded-md"})}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 hover:bg-black/60 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300 rounded-lg cursor-pointer z-10",children:[e.jsx("span",{className:"text-white font-bold",children:"Thay i nh"}),e.jsx(K,{type:"button",onClick:M,disabled:l,variant:"ghost",className:"flex-shrink-0 w-8 h-8 bg-surface-hover text-text-secondary rounded-full flex items-center justify-center hover:bg-danger-bg hover:text-danger-hover transition-colors disabled:opacity-50 !p-0",children:e.jsx("i",{className:"fas fa-times"})})]})]})]}),(b||l||o)&&e.jsx("p",{className:`mt-2 text-sm text-center italic ${E()} `,children:b?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"ang nn nh..."]}):l?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),o]}):o})]})},er=r=>r?r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"d").replace(//g,"d").trim():"",Ze=(r,l)=>{if(!l)return!0;if(!r)return!1;const o=er(l),i=l.toLowerCase();return i!==o?r.normalize("NFC").toLowerCase().includes(i.normalize("NFC")):er(r).includes(o)},Ht=({label:r,options:l,selectedOptions:o,onChange:i,icon:u,displayMode:h="count",size:f="default",variant:x="default",mode:g="dropdown",selectionMode:y="multiple",placeholder:c,disabled:b=!1,searchable:N=!0})=>{const[j,k]=m.useState(!1),[C,v]=m.useState(""),_=m.useRef(null);m.useEffect(()=>{const H=z=>{_.current&&!_.current.contains(z.target)&&k(!1)};return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[]);const M=l.filter(H=>Ze(H,C)),E=H=>{if(y==="single")i([H]),k(!1);else{const z=o.includes(H)?o.filter(R=>R!==H):[...o,H];i(z)}},O=()=>{i(Array.from(new Set([...o,...M])))},P=()=>{i([])},L=()=>{i(o.filter(H=>!M.includes(H)))},V=m.useMemo(()=>o.length===0?c||r:y==="single"?o[0]:h==="selection"?o.length<=2?o.join(", "):`${o.length} la chn`:`${r} (${o.length})`,[o,r,h,y,c]),I=f==="compact",S=y==="multiple"&&M.length>0&&M.every(H=>o.includes(H)),$=m.useMemo(()=>{const H="flex items-center justify-between transition-all duration-200 outline-none focus:ring-2 focus:ring-accent-primary/20",z="rounded-xl",R=b?"opacity-60 cursor-not-allowed bg-gray-50":"cursor-pointer";if(x==="modern"){const ee=I?"px-2 h-7 text-[10px]":"px-4 h-10 text-sm",ne=!b&&(j||o.length>0&&y==="multiple")?"bg-accent-primary/5 border border-accent-primary text-accent-primary shadow-sm":"bg-white border border-gray-200 text-gray-600 hover:border-accent-primary/50 hover:text-gray-900 hover:shadow-sm";return`${H} ${z} ${ee} ${ne} ${R} w-full`}const Q=I?"px-2 h-7 text-[10px]":"px-4 h-11 text-sm lg:h-14 lg:text-lg lg:px-6",q=!b&&(j||o.length>0&&y==="multiple")?"bg-white text-[#6d5dfc] shadow-[inset_2px_2px_5px_#e5e7eb,inset_-2px_-2px_5px_#ffffff] font-bold":"bg-white text-gray-700 shadow-[-2px_-2px_5px_#ffffff,2px_2px_5px_#e5e7eb] hover:text-[#6d5dfc] font-medium";return`${H} ${z} ${Q} ${q} ${R} w-full`},[I,j,o.length,x,y,b]);return g==="chips"?e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(H=>{const z=o.includes(H);return e.jsxs("button",{type:"button",onClick:()=>!b&&E(H),disabled:b,className:`
                px-3 py-1.5 text-xs font-medium rounded-full border transition-all duration-200 ease-out flex items-center gap-1.5
                ${z?"bg-accent-primary text-white border-accent-primary shadow-md shadow-accent-primary/20 transform scale-105":"bg-white text-gray-600 border-gray-200 hover:border-accent-primary/50 hover:text-accent-primary hover:bg-accent-primary/5"}
                ${b?"opacity-50 cursor-not-allowed":""}
              `,children:[z&&e.jsx("i",{className:"fas fa-check text-[10px]"}),H]},H)})}):g==="inline"?e.jsxs("div",{className:`w-full bg-gray-50/50 rounded-xl border border-gray-100 p-2 ${b?"opacity-60 pointer-events-none":""}`,children:[N&&l.length>5&&e.jsxs("div",{className:"relative mb-2",children:[e.jsx("i",{className:"fas fa-search absolute top-1/2 left-3 -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",placeholder:"Tm kim...",value:C,onChange:H=>v(H.target.value),disabled:b,className:"w-full pl-9 pr-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/20 transition-all text-sm placeholder:text-gray-400"})]}),e.jsxs("ul",{className:"max-h-60 overflow-y-auto space-y-0.5 custom-scrollbar pr-1",children:[y==="multiple"&&M.length>0&&e.jsx("li",{children:e.jsxs("label",{className:"flex items-center gap-3 w-full px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-white hover:shadow-sm transition-all cursor-pointer group",children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${S?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:S&&e.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),e.jsx("input",{type:"checkbox",checked:S,onChange:()=>S?L():O(),className:"hidden"}),e.jsx("span",{className:"font-semibold italic text-xs text-gray-500 group-hover:text-accent-primary transition-colors",children:S?"B chn tt c":"Chn tt c"})]})}),M.length>0?M.map(H=>{const z=o.includes(H);return e.jsx("li",{children:e.jsxs("label",{className:`flex items-center gap-3 w-full px-3 py-2 text-sm rounded-lg transition-all cursor-pointer group ${z?"bg-accent-primary/5 text-accent-primary font-medium":"text-gray-700 hover:bg-white hover:shadow-sm"}`,children:[y==="multiple"&&e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${z?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:z&&e.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),e.jsx("input",{type:y==="single"?"radio":"checkbox",checked:z,onChange:()=>E(H),className:"hidden"}),e.jsx("span",{children:H}),y==="single"&&z&&e.jsx("i",{className:"fas fa-check text-accent-primary ml-auto text-xs"})]})},H)}):e.jsx("li",{className:"px-3 py-4 text-sm text-gray-400 text-center italic",children:"Khng tm thy kt qu."})]})]}):e.jsxs("div",{className:"relative w-full",ref:_,children:[e.jsxs("button",{type:"button",onClick:()=>!b&&k(!j),disabled:b,className:$,children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${j||o.length>0&&y==="multiple"?"bg-accent-primary/10 text-accent-primary":"bg-gray-100 text-gray-400"}`,children:e.jsx("i",{className:`fas ${u} text-xs`})}),e.jsx("span",{className:`truncate ${o.length>0?"font-semibold text-gray-900":""}`,children:V})]}),e.jsx("i",{className:`fas fa-chevron-down text-xs transition-transform duration-300 ${j?"rotate-180 text-accent-primary":"text-gray-400"}`})]}),j&&e.jsxs("div",{className:"absolute top-full mt-2 w-full min-w-[200px] bg-white border border-gray-100 rounded-xl shadow-xl shadow-gray-200/50 z-50 animate-in fade-in zoom-in-95 duration-200 flex flex-col overflow-hidden ring-1 ring-black/5",children:[N&&l.length>5&&e.jsx("div",{className:"p-3 border-b border-gray-50 bg-gray-50/30",children:e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-search absolute top-1/2 left-3 -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",placeholder:"Tm kim...",autoFocus:!0,value:C,onChange:H=>v(H.target.value),className:"w-full pl-9 pr-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/20 transition-all text-sm placeholder:text-gray-400"})]})}),e.jsxs("ul",{className:"flex-grow max-h-64 overflow-y-auto p-2 space-y-0.5 custom-scrollbar",children:[y==="multiple"&&M.length>0&&e.jsx("li",{children:e.jsxs("label",{className:`flex items-center gap-3 w-full ${I?"px-2 py-1.5 text-xs":"px-3 py-2 text-sm lg:text-base"} text-gray-700 rounded-lg hover:bg-gray-50 transition-all cursor-pointer group`,children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${S?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:S&&e.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),e.jsx("input",{type:"checkbox",checked:S,onChange:()=>S?L():O(),className:"hidden"}),e.jsx("span",{className:"font-semibold italic text-xs text-gray-500 group-hover:text-accent-primary transition-colors",children:S?"B chn tt c":"Chn tt c"})]})}),M.length>0?M.map(H=>{const z=o.includes(H);return e.jsx("li",{children:e.jsxs("label",{className:`flex items-center gap-3 w-full ${I?"px-2 py-1.5 text-xs":"px-3 py-2 text-sm lg:text-base"} rounded-lg transition-all cursor-pointer group ${z?"bg-accent-primary/5 text-accent-primary font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[y==="multiple"&&e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${z?"bg-accent-primary border-accent-primary":"border-gray-300 group-hover:border-accent-primary"}`,children:z&&e.jsx("i",{className:"fas fa-check text-white text-[10px]"})}),e.jsx("input",{type:y==="single"?"radio":"checkbox",checked:z,onChange:()=>E(H),className:"hidden"}),e.jsx("span",{children:H}),y==="single"&&z&&e.jsx("i",{className:"fas fa-check text-accent-primary ml-auto text-xs"})]})},H)}):e.jsxs("li",{className:`px-3 ${I?"py-4 text-xs":"py-8 text-sm"} text-gray-400 text-center flex flex-col items-center gap-2`,children:[e.jsx("i",{className:"fas fa-search text-2xl opacity-20"}),e.jsx("span",{children:"Khng tm thy kt qu"})]})]}),y==="multiple"&&e.jsxs("div",{className:"p-3 border-t border-gray-50 bg-gray-50/50 flex justify-between items-center",children:[e.jsxs(K,{onClick:P,variant:"ghost",size:"sm",className:"text-xs font-semibold text-red-500 hover:text-red-600 hover:bg-red-50 !px-2 h-8",children:["Xa chn (",o.length,")"]}),e.jsx(K,{onClick:()=>k(!1),variant:"primary",size:"sm",className:"px-4 py-1.5 text-xs font-bold rounded-lg shadow-sm shadow-accent-primary/30",children:"p dng"})]})]})]})},Ho="/ordermanagement/assets/than_tai_anim-D47ZTG_Q.gif",kt=({icon:r,children:l,label:o,htmlFor:i})=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:i,className:"hidden md:block text-sm font-medium text-text-secondary mb-1 md:mb-1.5",children:o}),e.jsxs("div",{className:"relative",children:[r&&e.jsx("i",{className:`fas ${r} absolute top-1/2 left-3 md:left-4 -translate-y-1/2 text-slate-500 peer-focus:text-accent-primary transition-colors text-base z-10`}),l]})]}),oa=({icon:r,title:l})=>e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 p-3 md:p-4 border-b border-white/20 bg-accent-primary/5",children:[e.jsx("i",{className:`fas ${r} text-accent-secondary text-base md:text-lg`}),e.jsx("h3",{className:"text-sm md:text-base font-bold text-text-primary",children:l})]}),zo=({onSuccess:r,showToast:l,hideToast:o,existingOrderNumbers:i,initialVehicle:u,currentUser:h,vehicleAnalyticsData:f,onOpenImagePreview:x})=>{const[g,y]=m.useState({ten_ban_hang:h,ten_khach_hang:"",so_don_hang:"",dong_xe:"",phien_ban:"",ngoai_that:"",noi_that:"",ngay_coc:"",vin:""}),[c,b]=m.useState(null),N=new Date>=new Date("2026-01-05T00:00:00"),[j,k]=m.useState(!1),[C,v]=m.useState(""),[_,M]=m.useState(""),[E,O]=m.useState(null),[P,L]=m.useState(!1),[V,I]=m.useState(dt),[S,$]=m.useState(la),H="peer w-full pl-10 md:pl-11 pr-3 md:pr-4 py-2 md:py-2.5 text-sm md:text-base rounded-lg focus:outline-none transition-all placeholder:text-text-placeholder futuristic-input",z=!!u;m.useEffect(()=>{if(u){y(Z=>({...Z,dong_xe:u["Dng xe"]||"",phien_ban:u["Phin bn"]||"",ngoai_that:u["Ngoi tht"]||"",noi_that:u["Ni tht"]||"",vin:u.VIN||""}));const G=u["Dng xe"];if(G){const Z=G.toLowerCase().replace(/\s+/g,""),A=Za[Z];if(A){const w=dt.filter(Y=>{const T=Y.match(/\(([^)]+)\)/);return T&&T[1]&&A.includes(T[1].toLowerCase())});I(w)}else I(dt)}}},[u]);const R=G=>{const{name:Z,value:A}=G.target;y(w=>{const Y={...w,[Z]:A};if(Z==="dong_xe"){Y.phien_ban="",Y.ngoai_that="",Y.noi_that="",A==="VF 5"&&(Y.phien_ban="Plus");const T=A.toLowerCase().replace(/\s+/g,""),U=Za[T];if(U){const te=dt.filter(ue=>{const De=ue.match(/\(([^)]+)\)/);return De&&De[1]&&U.includes(De[1].toLowerCase())});I(te)}else I(dt)}return Z==="phien_ban"&&(Y.ngoai_that="",Y.noi_that=""),Y})};m.useEffect(()=>{const{dong_xe:G,phien_ban:Z}=g;if(!G){$(la);return}const A=G.toLowerCase(),w=Z.toLowerCase();let Y=la;for(const T of pr)if(T.models.includes(A)&&(!T.versions||T.versions.includes(w))){Y=T.colors;break}$(Y),Y.length===1&&y(T=>({...T,noi_that:Y[0]}))},[g.dong_xe,g.phien_ban]);const Q=m.useCallback(async G=>{if(b(G),y(Z=>({...Z,ngay_coc:""})),v(""),G){k(!0),v("ang chun b x l...");try{const Z=await co(G,A=>v(A));Z?(y(A=>({...A,ngay_coc:Z})),v("  in Ngy Cc thnh cng!")):v("Li: Khng tm thy ngy gi hp l trong nh.")}catch(Z){const A=Z instanceof Error?Z.message:"X l nh tht bi.";A.includes("Tesseract")&&l("Li Ti Th Vin","Th vin nhn dng nh cha sn sng. Vui lng lm mi trang (F5).","error",5e3),v(`Li: ${A}`)}finally{k(!1)}}},[l]),q=()=>{y({ten_ban_hang:h,ten_khach_hang:"",so_don_hang:"",dong_xe:"",phien_ban:"",ngoai_that:"",noi_that:"",ngay_coc:"",vin:""}),Q(null)};m.useEffect(()=>{var U,te;if(!f||z)return;const{dong_xe:G,phien_ban:Z,ngoai_that:A}=g;if(!G||!Z||!A){M(""),O(null);return}const w=`${G}|${Z}|${A}`.trim().toLowerCase(),Y=((U=f.pendingRequestCount)==null?void 0:U[w])||0,T=((te=f.stockStatus)==null?void 0:te[w])||{count:0,isSlowMoving:!1};Y>0?(M(`Lu : ang c <strong>${Y}</strong> yu cu khc ang ch ghp cho Mu xe ny.`),O("hot")):T.isSlowMoving&&T.count>0?(M("Gi : Xe ny ang c sn trong kho, c th giao ngay."),O("slow")):(M(""),O(null))},[g.dong_xe,g.phien_ban,g.ngoai_that,f,z]);const ee=async G=>{if(G.preventDefault(),["ten_khach_hang","so_don_hang","dong_xe","phien_ban","ngoai_that","noi_that"].some(w=>!g[w])){l("Thiu Thng Tin","Vui lng in y  thng tin xe v khch hng.","warning",3e3);return}if(!new RegExp("^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$").test(g.so_don_hang)){l("Sai nh Dng","S n hng khng ng nh dng. VD: N31913-VSO-25-04-0028","warning",4e3);return}if(i.includes(g.so_don_hang)){l("n Hng Trng Lp",`S n hng "${g.so_don_hang}"  tn ti.`,"error",4e3);return}if(!c){l("Thiu Chng T","Vui lng ti ln nh y nhim chi.","warning",3e3);return}if(!g.ngay_coc){l("Ch X L nh","Vui lng ch x l Ngy cc t nh.","warning",3e3);return}L(!0),l("ang Gi Yu Cu","Vui lng ch trong giy lt...","loading");try{const w=await wo(g,c);if(o(),w.status==="SUCCESS"&&w.newRecord)r(w.newRecord),q();else throw new Error(w.message||"Gi yu cu tht bi.")}catch(w){o();const Y=w instanceof Error?w.message:"Li khng xc nh.";l("Gi Yu Cu Tht Bi",Y,"error",5e3)}finally{L(!1)}},ne=G=>{G.preventDefault(),x([{src:"pictures/uynhiemchi.webp",originalUrl:"pictures/uynhiemchi.webp",label:"Mu y nhim chi hp l"}],0,"nh Mu")},oe=g.dong_xe?ss[g.dong_xe]||gr:[],xe={hot:"bg-warning-bg border-warning/50 text-warning",slow:"bg-success-bg border-success/50 text-success"};return e.jsxs("form",{onSubmit:ee,className:"flex flex-col h-full relative",children:[e.jsxs("div",{className:"flex-grow overflow-hidden p-4 md:p-6 relative z-10",children:[z&&e.jsxs("div",{className:"p-3 mb-4 rounded-lg border border-accent-primary/50 bg-surface-accent flex items-start gap-3 shadow-sm relative z-10",children:[e.jsx("i",{className:"fas fa-lock text-accent-primary text-xl mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-text-primary text-sm",children:"Yu cu cho xe  gi"}),e.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:["ang to yu cu cho VIN: ",e.jsx("strong",{className:"font-mono text-accent-primary",children:g.vin}),"."]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-x-6 xl:gap-x-8 gap-y-4 md:gap-y-8 relative z-10 h-full",children:[e.jsxs("section",{className:"bg-white/60 backdrop-blur-md rounded-2xl p-0 border border-white/40 shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full overflow-hidden",children:[e.jsx(oa,{icon:"fa-cogs",title:"1. Cu hnh Xe"}),e.jsxs("div",{className:"p-3 md:p-4 space-y-2 md:space-y-3 flex-grow overflow-y-auto custom-scrollbar",children:[e.jsx(kt,{label:"Dng xe",htmlFor:"dong_xe",children:e.jsx(Ht,{id:"dong_xe",label:"Dng xe",placeholder:"Chn dng xe",options:Object.keys(ss),selectedOptions:g.dong_xe?[g.dong_xe]:[],onChange:G=>R({target:{name:"dong_xe",value:G[0]||""}}),icon:"fa-car",selectionMode:"single",variant:"modern",disabled:z,searchable:!1})}),e.jsx(kt,{label:"Phin bn",htmlFor:"phien_ban",children:e.jsx(Ht,{id:"phien_ban",label:"Phin bn",placeholder:"Chn phin bn",options:oe,selectedOptions:g.phien_ban?[g.phien_ban]:[],onChange:G=>R({target:{name:"phien_ban",value:G[0]||""}}),icon:"fa-code-branch",selectionMode:"single",variant:"modern",disabled:!g.dong_xe||z,searchable:!1})}),e.jsx(kt,{label:"Ngoi tht",htmlFor:"ngoai_that",children:e.jsx(Ht,{id:"ngoai_that",label:"Ngoi tht",placeholder:"Chn mu ngoi tht",options:V,selectedOptions:g.ngoai_that?[g.ngoai_that]:[],onChange:G=>R({target:{name:"ngoai_that",value:G[0]||""}}),icon:"fa-fill-drip",selectionMode:"single",variant:"modern",disabled:!g.phien_ban||z,searchable:!1})}),e.jsx(kt,{label:"Ni tht",htmlFor:"noi_that",children:e.jsx(Ht,{id:"noi_that",label:"Ni tht",placeholder:"Chn ni tht",options:S,selectedOptions:g.noi_that?[g.noi_that]:[],onChange:G=>R({target:{name:"noi_that",value:G[0]||""}}),icon:"fa-couch",selectionMode:"single",variant:"modern",disabled:!g.phien_ban||z,searchable:!1})}),_&&E&&e.jsxs("div",{className:`p-3 mt-2 rounded-lg border text-sm flex items-start ${xe[E]}`,children:[e.jsx("i",{className:`fas ${E==="hot"?"fa-exclamation-triangle":"fa-check-circle"} mr-3 mt-1`}),e.jsx("p",{dangerouslySetInnerHTML:{__html:_}})]})]})]}),e.jsxs("section",{className:"bg-white/60 backdrop-blur-md rounded-2xl p-0 border border-white/40 shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full overflow-hidden",children:[e.jsx(oa,{icon:"fa-user-circle",title:"2. Thng tin & Chng t"}),e.jsxs("div",{className:"p-3 md:p-4 space-y-2 md:space-y-3 flex-grow overflow-y-auto custom-scrollbar",children:[e.jsx(kt,{icon:"fa-user-tie",label:"Tn khch hng",htmlFor:"ten_khach_hang",children:e.jsx("input",{id:"ten_khach_hang",type:"text",name:"ten_khach_hang",value:g.ten_khach_hang,onChange:R,onInput:G=>G.currentTarget.value=G.currentTarget.value.toUpperCase(),required:!0,className:H,placeholder:"VD: NGUYEN VAN A"})}),e.jsx(kt,{icon:"fa-barcode",label:"S n hng",htmlFor:"so_don_hang",children:e.jsx("input",{id:"so_don_hang",type:"text",name:"so_don_hang",value:g.so_don_hang,onChange:R,required:!0,pattern:"^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$",title:"nh dng: Nxxxxx-XXX-yy-mm-zzzz",onInvalid:G=>G.target.setCustomValidity("S n hng khng ng nh dng. Yu cu nh dng: Nxxxxx-XXX-yy-mm-zzzz"),onInput:G=>G.target.setCustomValidity(""),className:H,placeholder:"VD: N12345-VSO-24-01-0001"})}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"y nhim chi"}),e.jsxs(K,{type:"button",onClick:ne,variant:"ghost",size:"sm",className:"text-xs text-accent-secondary hover:underline hover:text-accent-primary-hover !p-0 !h-auto",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Xem mu"]})]}),e.jsx(Vo,{onFileSelect:Q,isProcessing:j,ocrStatus:C,showToast:l})]}),e.jsx("div",{className:"mt-2",children:e.jsx(kt,{icon:"fa-calendar-alt",label:"Ngy Cc (T ng in t nh)",htmlFor:"ngay_coc",children:e.jsx("input",{id:"ngay_coc",name:"ngay_coc",type:"datetime-local",value:g.ngay_coc?g.ngay_coc.slice(0,16):"",required:!0,readOnly:!0,className:`${H} !bg-surface-input cursor-not-allowed`})})})]})]}),e.jsxs("section",{className:"bg-white/60 backdrop-blur-md rounded-2xl p-0 border border-white/40 shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-accent-primary/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsx(oa,{icon:"fa-eye",title:"3. Xem trc & Xc thc"}),e.jsxs("div",{className:"p-3 md:p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"relative h-52 bg-surface-ground rounded-xl flex items-center justify-center p-4 border border-border-primary text-center shadow-inner-sm z-10",children:[g.dong_xe&&g.ngoai_that?e.jsx(ua,{model:g.dong_xe,exteriorColor:g.ngoai_that,className:"max-w-full max-h-full object-contain drop-shadow-lg",alt:"Cu hnh xe"}):e.jsxs("div",{className:"text-text-placeholder transition-all duration-300",children:[e.jsx("i",{className:"fas fa-car text-5xl text-slate-400 mb-3 opacity-50"}),e.jsx("p",{className:"font-semibold text-sm text-slate-500",children:"Xem trc xe ca bn"}),e.jsx("p",{className:"text-xs mt-1",children:"Chn cu hnh xe  xem trc"})]}),(P||j)&&e.jsx("div",{className:"absolute inset-0 bg-white/50 backdrop-blur-sm flex items-center justify-center rounded-xl",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-accent-primary"})})]}),N&&e.jsx("div",{className:"flex-grow relative mt-2 flex justify-center items-end min-h-[60px]",children:e.jsx("img",{src:Ho,alt:"Thn Ti",className:"w-24 md:w-32 object-contain animate-bounce-slow drop-shadow-xl"})})]})]})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row justify-end items-center gap-3 p-4 md:p-6 border-t border-white/20 relative z-10 bg-white/60 backdrop-blur-md",children:[e.jsx(K,{type:"button",onClick:q,disabled:P||z,variant:"secondary",size:"sm",className:"w-auto",leftIcon:e.jsx("i",{className:"fas fa-eraser"}),children:"Xa Nhp"}),e.jsx(K,{type:"submit",disabled:P,isLoading:P,variant:"primary",size:"sm",className:"w-auto",leftIcon:P?void 0:e.jsx("i",{className:"fas fa-paper-plane"}),children:"Xc nhn & Gi"})]})]})},Uo=je.memo(zo),tr="/ordermanagement/assets/lantern_anim_new-DHaWNgRc.gif",Bo=({isOpen:r,onClose:l,onSuccess:o,showToast:i,hideToast:u,existingOrderNumbers:h,initialVehicle:f,currentUser:x,vehicleAnalyticsData:g,onOpenImagePreview:y})=>{const c=new Date>=new Date("2026-01-05T00:00:00");return r?e.jsx("div",{className:"fixed inset-0 bg-slate-900/80 z-[60] flex items-center justify-center p-0 md:p-4 animate-fade-in",onClick:l,children:e.jsxs("div",{className:`relative bg-white w-full h-[100dvh] md:h-[90vh] md:max-w-7xl flex flex-col md:rounded-2xl shadow-2xl animate-fade-in-scale-up border-[3px] overflow-hidden ${c?"border-[#D32F2F]":"border-gray-200"}`,onClick:b=>b.stopPropagation(),children:[e.jsxs("header",{className:`relative flex items-center justify-center p-5 border-b-2 flex-shrink-0 z-10 bg-white ${c?"border-[#D32F2F]/20":"border-gray-100"}`,children:[e.jsxs("div",{className:"relative text-center animate-fade-in-down",children:[c&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:tr,className:"absolute -top-4 -left-12 md:-left-32 w-16 md:w-24 h-auto z-[60] drop-shadow-md pointer-events-none select-none",alt:"",draggable:"false"}),e.jsx("img",{src:tr,className:"absolute -top-4 -right-12 md:-right-32 w-16 md:w-24 h-auto z-[60] drop-shadow-md pointer-events-none select-none",alt:"",draggable:"false"})]}),e.jsx("h2",{className:`text-2xl sm:text-3xl font-bold uppercase tracking-wide drop-shadow-sm ${c?"text-[#D32F2F] font-serif":"text-gray-800 font-sans"}`,children:"Yu Cu Ghp Xe"}),c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-24 h-1 bg-[#FFD700] mx-auto my-1.5 rounded-full shadow-sm"}),e.jsx("p",{className:"text-sm text-[#8B5E3C] font-medium",children:"Khai xun c lc - Vn dm bnh an"})]}):e.jsx("div",{className:"w-16 h-1 bg-blue-500 mx-auto my-2 rounded-full"})]}),e.jsx(K,{onClick:l,variant:"ghost",className:`absolute top-3 right-3 md:top-4 md:right-4 w-9 h-9 rounded-full flex items-center justify-center transition-colors !p-0 z-50 ${c?"text-[#D32F2F] hover:bg-[#FFE0B2] hover:text-[#B71C1C] border border-[#D32F2F]/30":"text-gray-500 hover:bg-gray-100"}`,children:e.jsx("i",{className:"fas fa-times text-lg"})})]}),e.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden relative z-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]",children:e.jsx(Uo,{onSuccess:o,showToast:i,hideToast:u,existingOrderNumbers:h,initialVehicle:f,currentUser:x,vehicleAnalyticsData:g,onOpenImagePreview:y})}),c&&e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-2 bg-gradient-to-r from-[#D32F2F] via-[#FFD700] to-[#D32F2F]"})]})}):null},Wo=je.memo(Bo),_t=({icon:r,children:l})=>e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:`fas ${r} absolute top-1/2 left-4 -translate-y-1/2 text-slate-500 peer-focus:text-accent-primary transition-colors text-base z-10`}),l]})}),Go=({isOpen:r,onClose:l,onSuccess:o,showToast:i,order:u,existingOrderNumbers:h})=>{var M;const[f,x]=m.useState({}),[g,y]=m.useState(!1),[c,b]=m.useState(dt),N=ut();m.useEffect(()=>{u&&x({"Tn khch hng":u["Tn khch hng"],"S n hng":u["S n hng"],"Dng xe":u["Dng xe"],"Phin bn":u["Phin bn"],"Ngoi tht":u["Ngoi tht"],"Ni tht":u["Ni tht"],"Ngy cc":u["Ngy cc"]?Ye(u["Ngy cc"]).format("YYYY-MM-DDTHH:mm"):""})},[u]);const j=E=>{const{name:O,value:P}=E.target;x(L=>{const V={...L,[O]:P};return O==="Dng xe"&&(V["Phin bn"]="",V["Ngoi tht"]="",V["Ni tht"]="",P==="VF 5"&&(V["Phin bn"]="Plus")),O==="Phin bn"&&(V["Ngoi tht"]="",V["Ni tht"]=""),V})};if(m.useEffect(()=>{const{"Dng xe":E,"Phin bn":O}=f;if(!E){b(dt);return}const P=E.toLowerCase(),L=O.toLowerCase();let V=dt;for(const I of pr)if(I.models.includes(P)&&(!I.versions||I.versions.includes(L))){V=I.colors;break}b(V),V.length===1&&f["Ni tht"]!==V[0]&&x(I=>({...I,"Ni tht":V[0]}))},[f["Dng xe"],f["Phin bn"]]),!r||!u)return null;const k=(M=u["Kt qu"])==null?void 0:M.toLowerCase().includes(" ghp"),C="peer w-full pl-11 pr-4 py-2.5 rounded-lg focus:outline-none transition-all placeholder:text-text-placeholder futuristic-input",v=async E=>{if(E.preventDefault(),["Tn khch hng","S n hng","Dng xe","Phin bn","Ngoi tht","Ni tht","Ngy cc"].some(L=>!f[L])){i("Thiu Thng Tin","Vui lng in y  thng tin.","warning");return}if(!new RegExp("^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$").test(f["S n hng"])){i("Sai nh Dng","S n hng khng ng nh dng. VD: N31913-VSO-25-04-0028","warning");return}if(h.includes(f["S n hng"])){i("n Hng Trng Lp",`S n hng "${f["S n hng"]}"  tn ti.`,"error");return}y(!0),i("ang cp nht...","Vui lng ch trong giy lt.","loading");try{const L={};if(Object.keys(f).forEach(I=>{const S=I,$=u[S],H=f[S];if(S==="Ngy cc"){const z=$?Ye($).format("YYYY-MM-DDTHH:mm"):"",R=H?Ye(H).format("YYYY-MM-DDTHH:mm"):"";z!==R&&(L[S]=new Date(H).toISOString())}else String(H||"")!==String($||"")&&(L[S]=H)}),Object.keys(L).length===0){i("Thng Bo","Khng c thay i no  lu.","info"),l();return}const V=await _o(u["S n hng"],L);o(V.message)}catch(L){const V=L instanceof Error?L.message:"Li khng xc nh.";i("Cp Nht Tht Bi",V,"error",5e3)}finally{y(!1)}},_=f["Dng xe"]?ss[f["Dng xe"]]||gr:[];return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("form",{onSubmit:v,className:"bg-surface-card w-full md:max-w-2xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:E=>E.stopPropagation(),style:N,children:[e.jsxs("header",{className:"flex items-center justify-between p-5 border-b border-border-primary",children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Chnh Sa n Hng"}),e.jsx("button",{type:"button",onClick:l,className:"w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 space-y-4 custom-scrollbar",children:[k&&e.jsxs("div",{className:"p-3 mb-4 rounded-lg border border-amber-500/50 bg-amber-500/10 flex items-start gap-3 shadow-sm",children:[e.jsx("i",{className:"fas fa-info-circle text-amber-500 text-lg mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-700 text-sm",children:"n hng  ghp xe"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:'Thng tin xe (Dng xe, Phin bn, Mu sc) khng th thay i. Vui lng "Hy ghp" nu mun thay i.'})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(_t,{icon:"fa-user-tie",label:"Tn khch hng",htmlFor:"Tn khch hng",children:e.jsx("input",{id:"Tn khch hng",type:"text",name:"Tn khch hng",value:f["Tn khch hng"]||"",onChange:j,onInput:E=>E.currentTarget.value=E.currentTarget.value.toUpperCase(),required:!0,className:C,placeholder:"VD: NGUYEN VAN A"})}),e.jsx(_t,{icon:"fa-barcode",label:"S n hng",htmlFor:"S n hng",children:e.jsx("input",{id:"S n hng",type:"text",name:"S n hng",value:f["S n hng"]||"",onChange:j,required:!0,pattern:"^N[0-9]{5}-[A-Z]{3}-[0-9]{2}-[0-9]{2}-[0-9]{4}$",title:"nh dng: Nxxxxx-XXX-yy-mm-zzzz",onInvalid:E=>E.target.setCustomValidity("S n hng khng ng nh dng."),onInput:E=>E.target.setCustomValidity(""),className:C,placeholder:"VD: N12345-VSO-24-01-0001"})}),e.jsx(_t,{icon:"fa-car",label:"Dng xe",htmlFor:"Dng xe",children:e.jsxs("select",{id:"Dng xe",name:"Dng xe",value:f["Dng xe"]||"",onChange:j,required:!0,className:`${C} futuristic-select disabled:opacity-50`,disabled:k,children:[e.jsx("option",{value:"",disabled:!0,children:"Chn dng xe"}),Object.keys(ss).map(E=>e.jsx("option",{value:E,children:E},E))]})}),e.jsx(_t,{icon:"fa-sitemap",label:"Phin bn",htmlFor:"Phin bn",children:e.jsxs("select",{id:"Phin bn",name:"Phin bn",value:f["Phin bn"]||"",onChange:j,required:!0,disabled:!f["Dng xe"]||k,className:`${C} futuristic-select disabled:opacity-50`,children:[e.jsx("option",{value:"",disabled:!0,children:"Chn phin bn"}),_.map(E=>e.jsx("option",{value:E,children:E},E))]})}),e.jsx(_t,{icon:"fa-palette",label:"Ngoi tht",htmlFor:"Ngoi tht",children:e.jsxs("select",{id:"Ngoi tht",name:"Ngoi tht",value:f["Ngoi tht"]||"",onChange:j,required:!0,disabled:!f["Phin bn"]||k,className:`${C} futuristic-select disabled:opacity-50`,children:[e.jsx("option",{value:"",disabled:!0,children:"Chn mu ngoi tht"}),dt.map(E=>e.jsx("option",{value:E,children:E},E))]})}),e.jsx(_t,{icon:"fa-chair",label:"Ni tht",htmlFor:"Ni tht",children:e.jsxs("select",{id:"Ni tht",name:"Ni tht",value:f["Ni tht"]||"",onChange:j,required:!0,disabled:!f["Phin bn"]||k,className:`${C} futuristic-select disabled:opacity-50`,children:[e.jsx("option",{value:"",disabled:!0,children:"Chn ni tht"}),c.map(E=>e.jsx("option",{value:E,children:E},E))]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(_t,{icon:"fa-calendar-alt",label:"Ngy cc",htmlFor:"Ngy cc",children:e.jsx("input",{id:"Ngy cc",name:"Ngy cc",type:"datetime-local",value:f["Ngy cc"]||"",onChange:j,required:!0,className:`${C} disabled:opacity-50 disabled:cursor-not-allowed`,disabled:!0})})})]})]})}),e.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end items-center gap-3 bg-surface-card relative z-10",children:[e.jsx(K,{onClick:l,variant:"secondary",size:"sm",disabled:g,leftIcon:e.jsx("i",{className:"fas fa-times"}),children:"Hy"}),e.jsx(K,{onClick:v,variant:"primary",size:"sm",isLoading:g,leftIcon:e.jsx("i",{className:"fas fa-save"}),children:"Lu Thay i"})]})]})})},St=r=>typeof r!="string"?"":r.trim().replace(/\s+/g," ").normalize("NFC"),Ms=async r=>{const l=new URLSearchParams(r);return(await axios.post(ns,l)).data},qo=async(r,l)=>{try{const o=await Ms({action:"login",username:r.toLowerCase(),password:l});if(o.success&&o.username&&o.consultantName){const i=o.consultantName||o.username,u=o.role||"T vn bn hng",h=o.email;return sessionStorage.setItem("isLoggedIn","true"),sessionStorage.setItem("currentUser",o.username),sessionStorage.setItem("currentConsultant",i),sessionStorage.setItem("userRole",u),h&&sessionStorage.setItem("userEmail",h),{success:!0,username:o.username,consultantName:i,role:u,email:h}}else return{success:!1,message:o.message||"Tn ng nhp hoc mt khu khng ng."}}catch(o){return console.error("Login API error:",o),{success:!1,message:"Khng th kt ni n my ch. Vui lng th li."}}},Xo=async(r,l,o)=>{try{const i=await Ms({action:"changePassword",username:r.toLowerCase(),oldPassword:l,newPassword:o});return i.success?{success:!0,message:i.message}:{success:!1,message:i.message||"i mt khu tht bi."}}catch(i){return console.error("Change Password API error:",i),{success:!1,message:"Khng th kt ni n my ch. Vui lng th li."}}},Ko=async r=>{try{const l=await Ms({action:"forgotPassword",email:r});return l.success?{success:!0,message:l.message}:{success:!1,message:l.message||"Yu cu m OTP tht bi."}}catch(l){return console.error("Forgot Password API error:",l),{success:!1,message:l instanceof Error?l.message:"Khng th kt ni n my ch."}}},Zo=async(r,l,o)=>{try{const i=await Ms({action:"resetPassword",email:r,otp:l,newPassword:o});return i.success?{success:!0,message:i.message}:{success:!1,message:i.message||"t li mt khu tht bi."}}catch(i){return console.error("Reset Password API error:",i),{success:!1,message:i instanceof Error?i.message:"Khng th kt ni n my ch."}}},Jo=({isOpen:r,onClose:l,showToast:o,username:i})=>{const[u,h]=m.useState(""),[f,x]=m.useState(""),[g,y]=m.useState(""),[c,b]=m.useState(!1),N=ut(),j=async v=>{if(v.preventDefault(),!u||!f||!g){o("Thiu Thng Tin","Vui lng in y  cc trng.","warning");return}if(f.length<8){o("Mt Khu Yu","Mt khu mi phi c t nht 8 k t.","warning");return}if(f!==g){o("Li","Mt khu xc nhn khng khp.","error");return}if(u===f){o("Lu ","Mt khu mi phi khc mt khu c.","info");return}b(!0);const _=await Xo(i,u,f);b(!1),_.success?(o("Thnh Cng",_.message||"Mt khu  c thay i thnh cng!","success"),l()):o("Tht Bi",_.message||"i mt khu khng thnh cng.","error")},k=()=>{h(""),x(""),y(""),b(!1),l()};if(!r)return null;const C="peer w-full pl-12 pr-4 py-3 bg-surface-ground text-text-primary border border-border-primary rounded-lg focus:outline-none focus:border-accent-primary transition-all placeholder:text-text-placeholder focus:shadow-glow-accent";return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9999] flex items-center justify-center p-0 md:p-4",onClick:k,children:e.jsx("div",{className:"bg-surface-card w-full md:max-w-md h-[100dvh] md:h-auto rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:v=>v.stopPropagation(),style:N,children:e.jsxs("form",{onSubmit:j,children:[e.jsxs("header",{className:"relative flex flex-col items-center justify-center p-6 text-center bg-surface-card border-b border-border-primary",children:[e.jsxs("div",{className:"animate-fade-in-down",children:[e.jsx("h2",{className:"text-xl font-bold text-gradient",children:"i Mt Khu"}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Bo mt ti khon ca bn."})]}),e.jsx("button",{type:"button",onClick:k,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex-shrink-0 flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("main",{className:"p-4 md:p-6 space-y-4 overflow-y-auto flex-grow min-h-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-shield-alt absolute top-1/2 left-4 -translate-y-1/2 text-text-secondary peer-focus:text-accent-primary"}),e.jsx("input",{type:"password",value:u,onChange:v=>h(v.target.value),placeholder:"Mt khu c",required:!0,className:C})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-lock absolute top-1/2 left-4 -translate-y-1/2 text-text-secondary peer-focus:text-accent-primary"}),e.jsx("input",{type:"password",value:f,onChange:v=>x(v.target.value),placeholder:"Mt khu mi (t nht 8 k t)",required:!0,className:C})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-check-circle absolute top-1/2 left-4 -translate-y-1/2 text-text-secondary peer-focus:text-accent-primary"}),e.jsx("input",{type:"password",value:g,onChange:v=>y(v.target.value),placeholder:"Xc nhn mt khu mi",required:!0,className:C})]})]}),e.jsxs("footer",{className:"p-4 border-t border-border-primary flex justify-end gap-4 bg-surface-ground rounded-b-2xl",children:[e.jsx("button",{type:"button",onClick:k,disabled:c,className:"btn-secondary",children:"Hy"}),e.jsx("button",{type:"submit",disabled:c,className:"btn-primary",children:c?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"})," ang x l..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save mr-2"})," Xc Nhn"]})})]})]})})})},Qo=({isOpen:r,onClose:l,images:o=[],startIndex:i=0,customerName:u})=>{const[h,f]=m.useState(i),[x,g]=m.useState(!0),[y,c]=m.useState(null),[b,N]=m.useState(null),[j,k]=m.useState(0),[C,v]=m.useState(!1),[_,M]=m.useState({scale:1,x:0,y:0,rotate:0}),[E,O]=m.useState(!1),[P,L]=m.useState({x:0,y:0}),[V,I]=m.useState(!0),S=m.useRef(null),$=m.useRef(null),H=()=>M({scale:1,x:0,y:0,rotate:0}),z=m.useCallback(w=>{if(o.length===0)return;const Y=(w+o.length)%o.length;Y!==h&&(f(Y),H())},[o,h]);m.useEffect(()=>{if(r){const w=o.length>0&&i>=0&&i<o.length?i:0;f(w),I(!0)}},[r,i,o]),m.useEffect(()=>{if(!r||o.length===0)return;g(!0),c(null),N(null),k(0),v(!1);const w=o[h];if(!w)return;const Y=Ka(w.src,1920);N(Y)},[r,o,h]);const R=m.useCallback(w=>{w.key==="Escape"&&l(),w.key==="ArrowRight"&&z(h+1),w.key==="ArrowLeft"&&z(h-1),w.key===" "&&(w.preventDefault(),I(Y=>!Y))},[l,z,h]);m.useEffect(()=>{if(r)return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[r,R]);const Q=w=>{if(!S.current)return;w.preventDefault();const Y=.1,{deltaY:T}=w,U=_.scale-(T>0?Y:-Y),te=Math.max(.2,Math.min(U,10));te<=1?M(ue=>({...ue,scale:te,x:0,y:0})):M(ue=>({...ue,scale:te}))},q=w=>{_.scale<=1||(w.preventDefault(),O(!0),L({x:w.clientX-_.x,y:w.clientY-_.y}))},ee=w=>{!E||_.scale<=1||(w.preventDefault(),M(Y=>({...Y,x:w.clientX-P.x,y:w.clientY-P.y})))},ne=w=>{E&&(w.preventDefault(),O(!1))},oe=w=>{const Y=_.scale+(w==="in"?.2:-.2),T=Math.max(.2,Math.min(Y,10));T<=1?M(U=>({...U,scale:T,x:0,y:0})):M(U=>({...U,scale:T}))},xe=w=>{M(Y=>({...Y,rotate:Y.rotate+(w==="right"?90:-90)}))},G=()=>{var w;document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():(w=$.current)==null||w.requestFullscreen().catch(Y=>{console.error(`Error attempting to enable full-screen mode: ${Y.message} (${Y.name})`)})},Z=()=>{const w=o[h];if(!w)return;const Y=fr(w.originalUrl||w.src),T=ho(u,w.label),U=document.createElement("a");U.href=Y,U.setAttribute("download",T),document.body.appendChild(U),U.click(),document.body.removeChild(U)};if(!r)return null;const A=o.length>0?o[h]:null;return e.jsxs("div",{ref:$,className:"fixed inset-0 bg-black/95 z-[100] flex flex-col animate-fade-in overflow-hidden select-none",onClick:()=>I(w=>!w),onWheel:Q,children:[e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",onMouseMove:ee,onMouseUp:ne,onMouseLeave:ne,children:[x&&e.jsxs("div",{className:"flex flex-col items-center gap-3 text-white/70",children:[e.jsx("i",{className:"fas fa-circle-notch fa-spin text-4xl"}),e.jsx("span",{className:"text-sm font-medium",children:"ang ti nh..."})]}),y&&!x&&e.jsxs("div",{className:"text-center p-6 bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 max-w-sm mx-4 text-white",onClick:w=>w.stopPropagation(),children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-4xl text-amber-400 mb-4"}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Khng th ti nh"}),e.jsx("p",{className:"text-sm text-white/70 mb-4",children:y==="IMAGE_LOAD_FAILED"?"C li xy ra khi ti nh t ngun.":y}),(A==null?void 0:A.originalUrl)&&e.jsxs("a",{href:A.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-white text-black rounded-full font-bold hover:bg-gray-200 transition-colors text-sm",children:["M trong tab mi ",e.jsx("i",{className:"fas fa-external-link-alt text-xs"})]})]}),b&&!y&&!C&&e.jsx("img",{ref:S,src:b,alt:A==null?void 0:A.label,className:`max-w-full max-h-full object-contain transition-opacity duration-300 ${x?"opacity-0":"opacity-100"}`,style:{transform:`scale(${_.scale}) translate(${_.x/_.scale}px, ${_.y/_.scale}px) rotate(${_.rotate}deg)`,cursor:E?"grabbing":_.scale>1?"grab":"default",transition:E?"none":"transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)",willChange:"transform"},onLoad:()=>g(!1),onError:()=>{if(A){if(j===0){k(1);const Y=uo(A.src);if(Y!==b){N(Y);return}}const w=rs(A.src);if(w&&!C){v(!0),N(`https://drive.google.com/file/d/${w}/preview`),g(!1);return}}g(!1),c("IMAGE_LOAD_FAILED")},onMouseDown:q,onClick:w=>w.stopPropagation(),onDoubleClick:w=>{w.stopPropagation(),G()}}),C&&b&&e.jsxs("div",{className:"w-full h-full md:max-w-6xl md:max-h-[85vh] relative shadow-2xl md:rounded-2xl overflow-hidden bg-[#1e1e1e] border border-white/10",children:[e.jsx("iframe",{src:b,title:"File Preview",className:"w-full h-full w-full h-full border-0",allow:"autoplay",onLoad:()=>g(!1)}),e.jsx("div",{className:"absolute top-0 right-0 w-14 h-14 bg-[#1e1e1e] z-20 pointer-events-none"})]})]}),e.jsxs("div",{className:`absolute top-0 left-0 right-0 h-24 bg-gradient-to-b from-black/90 via-black/50 to-transparent z-50 flex items-start pt-6 px-6 justify-between transition-all duration-500 transform ${V?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,style:{pointerEvents:V?"auto":"none"},onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-4 animate-slide-in-left",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 backdrop-blur-md border border-white/10 flex items-center justify-center shadow-glow-sm",children:e.jsx("i",{className:"fas fa-image text-xl text-purple-500 drop-shadow-md"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-white tracking-wide drop-shadow-sm line-clamp-1 max-w-[200px] md:max-w-md",children:A==null?void 0:A.label}),e.jsxs("p",{className:"text-xs text-white/60 font-medium tracking-wider uppercase",children:[u,"  ",h+1,"/",o.length]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 animate-slide-in-right",children:[e.jsxs("button",{onClick:Z,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-white/20 backdrop-blur-md border border-white/10 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-cyan-500/20 hover:scale-110 active:scale-95",title:"Ti v",children:[e.jsx("i",{className:"fas fa-download text-lg group-hover:text-cyan-400 transition-colors"}),e.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/80 text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Ti v"})]}),e.jsx("button",{onClick:l,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-red-500/20 backdrop-blur-md border border-white/10 hover:border-red-500/50 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-red-500/20 hover:scale-110 active:scale-95",title:"ng (Esc)",children:e.jsx("i",{className:"fas fa-times text-lg group-hover:text-red-400 transition-colors"})})]})]}),o.length>1&&V&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:w=>{w.stopPropagation(),z(h-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 text-white flex items-center justify-center hover:bg-black/50 transition-all hover:scale-110 active:scale-95 z-10 hidden sm:flex",children:e.jsx("i",{className:"fas fa-chevron-left text-xl"})}),e.jsx("button",{onClick:w=>{w.stopPropagation(),z(h+1)},className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 text-white flex items-center justify-center hover:bg-black/50 transition-all hover:scale-110 active:scale-95 z-10 hidden sm:flex",children:e.jsx("i",{className:"fas fa-chevron-right text-xl"})})]}),e.jsxs("div",{className:`absolute bottom-0 left-0 right-0 p-6 transition-all duration-300 transform ${V?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"max-w-3xl mx-auto flex flex-col gap-4",children:[o.length>1&&e.jsx("div",{className:"flex justify-center overflow-x-auto py-2 px-4 gap-2 no-scrollbar mask-gradient",children:o.map((w,Y)=>e.jsx("button",{onClick:()=>z(Y),className:`relative w-12 h-12 sm:w-16 sm:h-16 flex-shrink-0 rounded-lg overflow-hidden transition-all duration-300 border-2 ${h===Y?"border-white scale-110 shadow-lg ring-2 ring-black/20":"border-transparent opacity-50 hover:opacity-100 hover:scale-105"}`,children:e.jsx("img",{src:Ka(w.src,320),alt:w.label,className:"w-full h-full object-cover"})},Y))}),e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-4 bg-black/60 backdrop-blur-xl border border-white/10 px-6 py-3 rounded-full shadow-2xl mx-auto",children:[e.jsx("button",{onClick:()=>oe("out"),disabled:_.scale<=.2,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors disabled:opacity-30",children:e.jsx("i",{className:"fas fa-minus"})}),e.jsxs("span",{className:"text-sm font-mono text-white/90 w-12 text-center select-none",children:[Math.round(_.scale*100),"%"]}),e.jsx("button",{onClick:()=>oe("in"),disabled:_.scale>=10,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors disabled:opacity-30",children:e.jsx("i",{className:"fas fa-plus"})}),e.jsx("div",{className:"w-px h-6 bg-white/20"}),e.jsx("button",{onClick:()=>xe("left"),className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"Xoay tri",children:e.jsx("i",{className:"fas fa-undo"})}),e.jsx("button",{onClick:()=>xe("right"),className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"Xoay phi",children:e.jsx("i",{className:"fas fa-redo"})}),e.jsx("div",{className:"w-px h-6 bg-white/20"}),e.jsx("button",{onClick:H,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"t li",children:e.jsx("i",{className:"fas fa-compress"})}),e.jsx("button",{onClick:G,className:"w-10 h-10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",title:"Ton mn hnh",children:e.jsx("i",{className:"fas fa-expand"})})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("span",{className:"px-4 py-2 rounded-full bg-black/60 backdrop-blur-md border border-white/5 text-white/50 text-xs inline-block",children:"Nhn vo mn hnh  n/hin cng c"})})]})]})},ec="/ordermanagement/assets/yes-DSvs6nbc.json",tc="/ordermanagement/assets/no-animation-DB21lGdK.json",sc=({isOpen:r,onClose:l,onSubmit:o,title:i,description:u,inputs:h=[],submitText:f,submitColor:x,icon:g,targetId:y,showToast:c})=>{const[b,N]=m.useState({}),[j,k]=m.useState(!1),C=ut();if(m.useEffect(()=>{r?(N(P=>Object.keys(P).length>0&&h.length>0?P:h.reduce((L,V)=>(L[V.id]="",L),{})),k(!1)):(N({}),k(!1))},[r]),!r)return null;const v=P=>{let L=P.target.value;const V=h.find(I=>I.id===P.target.name);V!=null&&V.isVIN&&(L=L.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,17)),N(I=>({...I,[P.target.name]:L}))},_=()=>{var P;for(const L of h){const V=(P=b[L.id])==null?void 0:P.trim();if(!V||L.isVIN&&V.length!==17)return!1}return!0},M=async()=>{if(h.length>0&&!_()){c?c("Thng tin khng hp l","Vui lng in y  v chnh xc thng tin.","warning"):alert("Vui lng in y  v chnh xc thng tin.");return}k(!0),await o(b)||k(!1)},E={primary:{bg:"bg-accent-primary",iconBg:"bg-blue-100",iconText:"text-accent-primary"},danger:{bg:"bg-danger",iconBg:"bg-danger-bg",iconText:"text-danger"},success:{bg:"bg-success",iconBg:"bg-success-bg",iconText:"text-success"}},O=E[x]||E.primary;return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("div",{className:"bg-surface-card w-full md:max-w-md h-full md:h-auto rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:P=>P.stopPropagation(),style:C,children:[e.jsx("div",{className:`h-1.5 rounded-t-none md:rounded-t-2xl ${O.bg} flex-shrink-0`}),e.jsxs("header",{className:"p-3 flex items-start gap-2",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-lg ${O.iconBg}`,children:e.jsx("i",{className:`fas ${g} text-2xl ${O.iconText}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold leading-6 text-text-primary",children:i}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:u})]})]}),e.jsxs("main",{className:"p-4 md:p-6 space-y-4 overflow-y-auto flex-grow min-h-0",children:[y&&e.jsxs("div",{className:"bg-surface-ground border border-border-primary rounded-md p-1.5 text-center",children:[e.jsx("p",{className:"text-xs text-text-secondary",children:"Thc hin cho:"}),e.jsx("p",{className:"text-sm font-semibold text-text-primary font-mono",children:y})]}),h.length>0&&e.jsx("div",{className:"space-y-2",children:h.map(P=>{var L;return e.jsxs("div",{children:[e.jsx("label",{htmlFor:P.id,className:"block text-sm font-medium text-text-secondary mb-1",children:P.label}),P.type==="textarea"?e.jsx("textarea",{id:P.id,name:P.id,value:b[P.id]||"",onChange:v,placeholder:P.placeholder,rows:3,className:"w-full bg-surface-ground border border-border-primary rounded-lg shadow-inner-sm p-2 focus:ring-accent-primary focus:border-accent-primary transition futuristic-input"}):P.type==="select"?e.jsxs("select",{id:P.id,name:P.id,value:b[P.id]||"",onChange:v,className:"w-full bg-surface-ground border border-border-primary rounded-lg shadow-inner-sm p-2 focus:ring-accent-primary focus:border-accent-primary transition futuristic-input",children:[e.jsx("option",{value:"",disabled:!0,children:P.placeholder||"Chn mt ty chn"}),(L=P.options)==null?void 0:L.map(V=>e.jsx("option",{value:V,children:V},V))]}):e.jsx("input",{id:P.id,name:P.id,type:P.type||"text",value:b[P.id]||"",onChange:v,placeholder:P.placeholder,maxLength:P.isVIN?17:void 0,className:"w-full bg-surface-ground border border-border-primary rounded-lg shadow-inner-sm p-2 focus:ring-accent-primary focus:border-accent-primary transition futuristic-input"})]},P.id)})})]}),e.jsxs("footer",{className:"px-3 py-2 flex justify-end items-center gap-1.5 bg-surface-ground rounded-none md:rounded-b-2xl border-t border-border-primary flex-shrink-0",children:[e.jsx("div",{onClick:j?void 0:l,title:"Hy",className:`cursor-pointer ${j?"opacity-50 cursor-not-allowed":"hover:scale-110 transition-transform"}`,children:e.jsx("lottie-player",{src:tc,background:"transparent",speed:"1",style:{width:"52px",height:"52px"},loop:!0,autoplay:!0})}),e.jsx("div",{onClick:j?void 0:M,title:f,className:`cursor-pointer flex items-center justify-center w-[52px] h-[52px] ${j||h.length>0&&!_()?"opacity-50 cursor-not-allowed":"hover:scale-110 transition-transform"}`,children:j?e.jsx("i",{className:"fas fa-spinner fa-spin text-2xl text-accent-primary"}):e.jsx("lottie-player",{src:ec,background:"transparent",speed:"1",style:{width:"52px",height:"52px"},loop:!0,autoplay:!0})})]})]})})},ac=({order:r,onClose:l,onSubmit:o})=>{const[i,u]=m.useState("personal"),[h,f]=m.useState(""),[x,g]=m.useState(null),[y,c]=m.useState(null),[b,N]=m.useState(null),[j,k]=m.useState(null),[C,v]=m.useState(null),[_,M]=m.useState(!1),E=ut();if(m.useEffect(()=>{r||(u("personal"),f(""),g(null),c(null),N(null),k(null),v(null),M(!1))},[r]),!r)return null;const O=()=>!j||!C?!1:i==="personal"?x&&y:i==="company"?b&&h.trim()!=="":!1,P=async()=>{if(!O()){alert("Vui lng in y  thng tin v ti ln tt c cc tp cn thit.");return}M(!0);const L={orderNumber:r["S n hng"],customerType:i,files:{idCardFront:x,idCardBack:y,businessLicense:b,regFront:j,regBack:C}};i==="company"&&(L.dmsCode=h),await o(L,r.VIN)||M(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("div",{className:"bg-surface-card w-full md:max-w-xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:L=>L.stopPropagation(),style:E,children:[e.jsxs("header",{className:"flex-shrink-0 relative flex flex-col items-center justify-center p-6 text-center border-b border-border-primary",children:[e.jsx("h2",{className:"text-xl font-bold text-gradient",children:"Yu Cu Cp VinClub"}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Cung cp chng t  to ti khon VinClub cho khch hng."}),e.jsx("button",{onClick:l,className:"absolute top-4 right-4 w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("main",{className:"flex-grow min-h-0 flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 md:p-6 custom-scrollbar",children:[e.jsxs("div",{className:"p-4 bg-surface-ground rounded-lg border border-border-primary text-sm mb-4",children:["ang yu cu cho SH: ",e.jsx("strong",{className:"font-mono",children:r["S n hng"]})," - KH: ",e.jsx("strong",{children:r["Tn khch hng"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Loi khch hng"}),e.jsxs("div",{className:"flex gap-4 p-1 bg-surface-ground rounded-lg border border-border-primary w-fit",children:[e.jsxs("button",{onClick:()=>u("personal"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-all ${i==="personal"?"bg-white shadow-sm text-accent-primary":"text-text-secondary hover:text-text-primary"}`,children:[e.jsx("i",{className:"fas fa-user mr-2"}),"C Nhn"]}),e.jsxs("button",{onClick:()=>u("company"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-all ${i==="company"?"bg-white shadow-sm text-accent-primary":"text-text-secondary hover:text-text-primary"}`,children:[e.jsx("i",{className:"fas fa-building mr-2"}),"Cng Ty"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[i==="personal"?e.jsxs(e.Fragment,{children:[e.jsx(ct,{id:"cccd-front",label:"CCCD Mt Trc",onFileSelect:g,required:!0,accept:"image/*"}),e.jsx(ct,{id:"cccd-back",label:"CCCD Mt Sau",onFileSelect:c,required:!0,accept:"image/*"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{id:"biz-license",label:"Giy Php Kinh Doanh",onFileSelect:N,required:!0,accept:"image/*"}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"dms-code",className:"block text-sm font-medium text-text-primary mb-2",children:["M KH DMS ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"dms-code",type:"text",value:h,onChange:L=>f(L.target.value),className:"w-full bg-surface-ground border border-border-primary rounded-lg p-2.5 futuristic-input",placeholder:"Nhp m khch hng DMS",required:!0})]})]}),e.jsx(ct,{id:"reg-front",label:"Cavet Xe Mt Trc",onFileSelect:k,required:!0,accept:"image/*"}),e.jsx(ct,{id:"reg-back",label:"Cavet Xe Mt Sau",onFileSelect:v,required:!0,accept:"image/*"})]})]})}),e.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border-primary flex justify-end gap-3 bg-surface-card relative z-10",children:[e.jsx(K,{onClick:l,disabled:_,variant:"secondary",size:"sm",leftIcon:e.jsx("i",{className:"fas fa-times"}),children:"Hy"}),e.jsx(K,{onClick:P,disabled:!O()||_,variant:"primary",size:"sm",isLoading:_,leftIcon:_?void 0:e.jsx("i",{className:"fas fa-paper-plane"}),children:"Gi Yu Cu"})]})]})})},rc=r=>{if(!r||!r.includes("drive.google.com"))return r;const l=r.match(/\/d\/([a-zA-Z0-9_-]{25,})|id=([a-zA-Z0-9_-]{25,})/);if(l){const o=l[1]||l[2];if(o)return`https://drive.google.com/file/d/${o}/preview`}return r.replace("/open?","/preview?")},nc=r=>{if(!r||!r.includes("drive.google.com"))return r;const l=r.match(/\/d\/([a-zA-Z0-9_-]{25,})|id=([a-zA-Z0-9_-]{25,})/);if(l){const o=l[1]||l[2];if(o)return`https://drive.google.com/uc?export=download&id=${o}`}return r},ic=r=>{if(!r||!r.includes("drive.google.com"))return r;const l=r.match(/\/d\/([a-zA-Z0-9_-]{25,})|id=([a-zA-Z0-9_-]{25,})/);if(l){const o=l[1]||l[2];if(o)return`https://drive.google.com/file/d/${o}/view`}return r},lc=r=>(o=>o.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"D").replace(//g,"d"))(r).replace(/[^a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_"),oc=({isOpen:r,onClose:l,fileUrl:o,fileLabel:i})=>{const[u,h]=je.useState(!1),f=m.useCallback(()=>{const N=ic(o);window.open(N,"_blank"),h(!0),setTimeout(()=>h(!1),4e3)},[o]),x=m.useCallback(N=>{N.key==="Escape"?l():(N.ctrlKey||N.metaKey)&&N.key==="p"&&(N.preventDefault(),f())},[l,f]);if(m.useEffect(()=>{if(r)return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[r,x]),!r)return null;const g=rc(o),y=N=>{N.stopPropagation();const j=nc(o),k=lc(i),C=document.createElement("a");C.href=j,C.setAttribute("download",k),document.body.appendChild(C),C.click(),document.body.removeChild(C)},[c,b]=je.useState(!0);return e.jsxs("div",{className:"fixed inset-0 bg-black/95 z-[100] flex flex-col animate-fade-in overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden p-0 md:p-8",onClick:()=>b(N=>!N),children:e.jsxs("div",{className:"relative w-full h-full md:max-w-6xl md:max-h-[85vh] shadow-2xl md:rounded-2xl overflow-hidden bg-[#1e1e1e] border border-white/10 transition-all duration-300",children:[e.jsx("iframe",{src:g,className:"w-full h-full w-full h-full border-0",title:i}),e.jsx("div",{className:"absolute top-0 right-0 w-14 h-14 bg-[#1e1e1e] z-20 pointer-events-none"})]})}),e.jsxs("div",{className:`absolute top-0 left-0 right-0 h-24 bg-gradient-to-b from-black/90 via-black/50 to-transparent z-50 flex items-start pt-6 px-6 justify-between transition-all duration-500 transform ${c?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,style:{pointerEvents:c?"auto":"none"},children:[e.jsxs("div",{className:"flex items-center gap-4 animate-slide-in-left",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 backdrop-blur-md border border-white/10 flex items-center justify-center shadow-glow-sm",children:e.jsx("i",{className:"fas fa-file-pdf text-xl text-red-500 drop-shadow-md"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-white tracking-wide drop-shadow-sm line-clamp-1 max-w-[200px] md:max-w-md",children:i}),e.jsx("p",{className:"text-xs text-white/60 font-medium tracking-wider uppercase",children:"Xem trc ti liu"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 animate-slide-in-right",children:[e.jsxs("button",{onClick:y,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-white/20 backdrop-blur-md border border-white/10 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-cyan-500/20 hover:scale-110 active:scale-95",title:"Ti v",children:[e.jsx("i",{className:"fas fa-download text-lg group-hover:text-cyan-400 transition-colors"}),e.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/80 text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Ti v"})]}),e.jsxs("button",{onClick:f,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-white/20 backdrop-blur-md border border-white/10 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-green-500/20 hover:scale-110 active:scale-95",title:"In (Ctrl+P)",children:[e.jsx("i",{className:"fas fa-print text-lg group-hover:text-green-400 transition-colors"}),e.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/80 text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"In (Ctrl+P)"})]}),e.jsx("button",{onClick:l,className:"group relative w-12 h-12 rounded-full bg-white/5 hover:bg-red-500/20 backdrop-blur-md border border-white/10 hover:border-red-500/50 flex items-center justify-center text-white transition-all duration-300 shadow-lg hover:shadow-red-500/20 hover:scale-110 active:scale-95",title:"ng (Esc)",children:e.jsx("i",{className:"fas fa-times text-lg group-hover:text-red-400 transition-colors"})})]})]}),u&&e.jsx("div",{className:"absolute top-24 left-1/2 -translate-x-1/2 z-50 animate-slide-in-down",children:e.jsx("div",{className:"px-6 py-3 rounded-xl bg-green-500/90 backdrop-blur-md border border-green-400/50 text-white shadow-lg shadow-green-500/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-xl"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:"ang m hp thoi in..."}),e.jsx("div",{className:"text-xs opacity-90",children:"Vui lng ch trong giy lt"})]})]})})}),e.jsx("div",{className:`absolute bottom-8 left-1/2 -translate-x-1/2 transition-opacity duration-500 ${c?"opacity-100":"opacity-0"}`,children:e.jsx("div",{className:"px-4 py-2 rounded-full bg-black/60 backdrop-blur-md border border-white/5 text-white/50 text-xs",children:"Nhn vo mn hnh  n/hin cng c"})})]})},cc=({rank:r})=>r===1?e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-amber-400/20 text-amber-500",title:"Hng 1",children:e.jsx("i",{className:"fas fa-crown"})}):r===2?e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-400/20 font-bold text-slate-500",title:"Hng 2",children:"2"}):r===3?e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-yellow-600/20 font-bold text-yellow-700",title:"Hng 3",children:"3"}):e.jsx("div",{className:"flex items-center justify-center w-8 h-8 font-semibold text-text-secondary",children:r}),dc=({isOpen:r,onClose:l,stats:o})=>{const i=ut(),u=m.useMemo(()=>o.flatMap(h=>h.variants.map(f=>{const[x,g]=f.variant.split(" / "),y=x.split(" - "),c=y.length>1?y.slice(0,-1).join(" - "):"N/A",b=y.length>1?y[y.length-1]:x;return{model:h.model,version:c,exterior:b,interior:g,count:f.count}})).sort((h,f)=>f.count-h.count),[o]);return r?e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-0 md:p-4",onClick:l,children:e.jsxs("div",{className:"bg-surface-card w-full md:max-w-4xl h-[100dvh] md:h-auto md:max-h-[90vh] rounded-none md:rounded-2xl shadow-xl animate-fade-in-scale-up flex flex-col",onClick:h=>h.stopPropagation(),style:i,children:[e.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-5 border-b border-border-primary",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-amber-500/10",children:e.jsx("i",{className:"fas fa-chart-pie text-lg text-amber-500"})}),e.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Thng K Xe Ch Ghp"})]}),e.jsx("button",{onClick:l,className:"w-9 h-9 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("main",{className:"p-4 md:p-6 overflow-y-auto flex-grow min-h-0 bg-surface-ground",children:u.length>0?e.jsxs("div",{className:"bg-surface-card border border-border-primary rounded-lg shadow-sm",children:[e.jsxs("header",{className:"grid grid-cols-[3.5rem_1fr_4rem] items-center gap-4 px-4 py-2 border-b border-border-primary text-xs font-bold text-text-secondary uppercase",children:[e.jsx("span",{className:"text-center",children:"Hng"}),e.jsx("span",{children:"Cu hnh xe"}),e.jsx("span",{className:"text-right",children:"S Lng"})]}),e.jsx("div",{className:"divide-y divide-border-primary/70",children:u.map((h,f)=>e.jsxs("div",{className:"grid grid-cols-[3.5rem_1fr_4rem] items-center gap-4 px-4 py-3 hover:bg-surface-hover transition-colors",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(cc,{rank:f+1})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"font-semibold text-sm text-text-primary truncate",title:`${h.model} - ${h.version}`,children:[h.model," - ",h.version]}),e.jsxs("p",{className:"text-xs text-text-secondary truncate",title:`${h.exterior} / ${h.interior}`,children:[h.exterior," / ",h.interior]})]}),e.jsx("div",{className:"font-bold text-lg text-accent-primary text-right font-mono",children:h.count})]},f))})]}):e.jsxs("div",{className:"text-center text-text-secondary py-12 flex flex-col items-center justify-center h-full",children:[e.jsx("i",{className:"fas fa-box-open fa-3x mb-4"}),e.jsx("p",{children:"Khng c yu cu no ang ch."})]})}),e.jsx("footer",{className:"p-4 border-t flex justify-end gap-4 bg-surface-card rounded-b-2xl",children:e.jsx("button",{onClick:l,className:"btn-secondary",children:"ng"})})]})}):null},uc=({isOpen:r,onClose:l})=>{const[o,i]=m.useState(""),[u,h]=m.useState(!1),[f,x]=m.useState(null),[g,y]=m.useState(null);if(!r)return null;const c=async()=>{if(o.trim()){h(!0),x({}),y(null);try{const k=new Date().getTime(),C=Ja(o,"active"),v=Ja(o,"archive"),_=await C;let M={};if(_&&_.status==="SUCCESS"&&_.data){M={..._.data},x(M);const E=(new Date().getTime()-k)/1e3;y(E)}v.then(E=>{if(E&&E.status==="SUCCESS"&&E.data){const O={...M,...E.data};if(Object.keys(E.data).length>0){x(O);const P=(new Date().getTime()-k)/1e3;y(P)}}h(!1)}).catch(E=>{console.error("Archive search failed",E),h(!1)})}catch(k){console.error("Search error:",k),alert(" xy ra li khi tm kim: "+k),h(!1)}}},b=k=>{k.key==="Enter"&&c()},N=(k,C)=>{if(C==null)return"";const v=String(C);if(v.trim().startsWith("{")||v.trim().startsWith("["))try{const _=JSON.parse(v);if(typeof _=="object"&&_!==null&&!Array.isArray(_)){const M=Object.entries(_);if(M.some(([O,P])=>typeof P=="string"&&(P.startsWith("http")||P.startsWith("data:")))||k.toLowerCase().includes("url")||k.toLowerCase().includes("file"))return e.jsx("div",{className:"flex flex-col gap-1",children:M.map(([O,P])=>typeof P=="string"&&(P.startsWith("http")||P.startsWith("data:"))?e.jsxs("a",{href:P,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-paperclip"})," ",O]},O):e.jsxs("span",{className:"text-xs text-gray-500",children:[O,": ",String(P)]},O))})}if(Array.isArray(_)&&_.some(E=>typeof E=="string"&&E.startsWith("http")||typeof E=="object"&&E&&(E.url||E.data)))return e.jsx("div",{className:"flex flex-wrap gap-1",children:_.map((E,O)=>{if(typeof E=="string"&&E.startsWith("http"))return e.jsx("a",{href:E,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs",title:`Link ${O+1}`,children:e.jsx("i",{className:"fas fa-external-link-alt"})},O);const P=E.url||E.data,L=E.name||`File ${O+1}`;return typeof P=="string"&&(P.startsWith("http")||P.startsWith("data:"))?e.jsx("a",{href:P,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs",title:L,children:e.jsx("i",{className:"fas fa-image"})},O):null})})}catch{}if(typeof v=="string"&&(v.startsWith("http://")||v.startsWith("https://")))return e.jsxs("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs break-all",title:v,children:[e.jsx("i",{className:"fas fa-external-link-alt mr-1"}),"Link"]});if(typeof v=="string"&&/^\d{4}-\d{2}-\d{2}T/.test(v))try{return new Date(v).toLocaleString("vi-VN")}catch{}return v},j=()=>{if(!f)return null;const k=Object.keys(f);return k.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"fas fa-search-minus text-4xl mb-3"}),e.jsxs("p",{children:['Khng tm thy kt qu no cho t kha "',o,'".']})]}):e.jsx("div",{className:"space-y-8",children:k.map(C=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden flex flex-col",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex justify-between items-center sticky left-0",children:e.jsxs("h3",{className:"font-bold text-gray-700 font-lg",children:[e.jsx("i",{className:"fas fa-table mr-2 text-blue-500"}),C," ",e.jsxs("span",{className:"text-gray-400 font-normal text-sm ml-2",children:["(",f[C].length," kt qu)"]})]})}),e.jsx("div",{className:"overflow-x-auto relative",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:f[C].length>0&&Object.keys(f[C][0]).map(v=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider whitespace-nowrap bg-gray-100 border-r border-gray-200 last:border-r-0",children:v},v))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f[C].map((v,_)=>e.jsx("tr",{className:"hover:bg-blue-50 transition-colors",children:Object.keys(v).map(M=>e.jsx("td",{className:"px-4 py-2 text-sm text-gray-700 whitespace-nowrap border-r border-gray-100 last:border-r-0 max-w-xs overflow-hidden text-ellipsis",children:N(M,v[M])},M))},_))})]})})]},C))})};return e.jsxs("div",{className:"fixed inset-0 bg-gray-100 z-[60] flex flex-col animate-fade-in",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm flex-shrink-0 z-20",children:e.jsxs("div",{className:"w-full px-4 py-3 flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:e.jsx("i",{className:"fas fa-search text-lg"})}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 leading-none",children:"Tm Kim"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Ton h thng"})]})]}),e.jsxs("div",{className:"flex-grow max-w-3xl mx-auto relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:`fas fa-search ${u?"text-blue-500 animate-pulse":"text-gray-400"}`})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-24 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-base focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all outline-none",placeholder:"Nhp VIN, SH, Tn khch hng... (nhn Enter  tm)",value:o,onChange:k=>i(k.target.value),onKeyDown:b,autoFocus:!0}),e.jsx("div",{className:"absolute inset-y-0 right-1.5 flex items-center",children:e.jsx(K,{onClick:c,isLoading:u,disabled:o.length<2||u,className:"!rounded-lg !px-4 !py-1.5 !text-sm font-medium shadow-sm",children:"Tm Kim"})})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[g!==null&&e.jsxs("span",{className:"text-xs text-green-600 font-medium hidden lg:block whitespace-nowrap",children:[e.jsx("i",{className:"fas fa-bolt mr-1"}),g,"s"]}),e.jsx("button",{onClick:l,className:"w-9 h-9 rounded-full bg-gray-100 hover:bg-red-50 hover:text-red-500 flex items-center justify-center transition-all duration-200",title:"ng (Esc)",children:e.jsx("i",{className:"fas fa-times text-lg"})})]})]})}),e.jsx("div",{className:"flex-grow overflow-y-auto bg-gray-100 p-4 sm:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-[1920px] mx-auto space-y-8",children:u?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-600",children:"ang qut ton b d liu..."}),e.jsx("p",{className:"text-sm",children:"Qu trnh ny c th mt vi giy ty thuc vo  ln d liu."})]}):j()})}),e.jsx("div",{className:"bg-white border-t border-gray-200 py-2 px-4 text-center text-xs text-gray-400",children:"Mo: Bn c th nhp mt phn ca s VIN hoc tn  tm kim rng hn."})]})},ks=({label:r,value:l,onChange:o})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:r}),e.jsx("input",{type:"date",value:l,onChange:i=>o(i.target.value),className:"w-full bg-surface-input border border-border-primary rounded-md p-2 text-sm focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary futuristic-input"})]}),hc=({filters:r,onFilterChange:l,onReset:o,dropdowns:i,searchPlaceholder:u,totalCount:h,onRefresh:f,isLoading:x,hideSearch:g=!1,size:y="default",plain:c=!1,dateRangeEnabled:b=!1,dateFilterEnabled:N=!1,viewSwitcherEnabled:j=!1,activeView:k="table",onViewChange:C,extraActionButton:v,variant:_="default",dropdownClassName:M="w-28 md:w-36 lg:w-64",searchable:E=!0})=>{const[O,P]=m.useState(r.keyword||""),[L,V]=m.useState(!1),[I,S]=m.useState(!1),[$,H]=m.useState([]),z=m.useRef(null),R=r.dateRange||{start:"",end:""},Q=(w,Y)=>{l({dateRange:{...R,[w]:Y}})},q=w=>{H(Y=>Y.includes(w)?Y.filter(T=>T!==w):[...Y,w])};m.useEffect(()=>{const w=Y=>{z.current&&!z.current.contains(Y.target)&&S(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),m.useEffect(()=>{r.keyword!==O&&P(r.keyword||"")},[r.keyword]),m.useEffect(()=>{const w=setTimeout(()=>{O!==r.keyword&&l({keyword:O})},300);return()=>clearTimeout(w)},[O,r.keyword,l]);const ee=i.flatMap(w=>{const Y=r[w.key]||[];return Y.map(T=>({key:`${w.key}-${T}`,label:w.label,value:T,onRemove:()=>{l({[w.key]:Y.filter(U=>U!==T)})}}))}),ne=R.start&&R.end?{key:`date-range-${R.start}-${R.end}`,label:"Date Range",value:`${new Date(R.start).toLocaleDateString("vi-VN")} - ${new Date(R.end).toLocaleDateString("vi-VN")}`,onRemove:()=>l({dateRange:{start:"",end:""}})}:null,oe=[...ee];ne&&oe.push(ne);const xe=r.keyword&&r.keyword.length>0||oe.length>0,G=i.map(w=>e.jsx("div",{className:M,children:e.jsx(Ht,{id:w.id,label:w.label,options:w.options,selectedOptions:r[w.key]||[],onChange:Y=>l({[w.key]:Y}),icon:w.icon,displayMode:w.displayMode||"count",size:y,variant:_,searchable:E})},w.id)),Z=e.jsxs("div",{className:`${_==="modern"?"flex items-center gap-2":`flex items-center gap-2 ${c?"!shadow-none !bg-transparent !p-0 !border-none":""}`}`,children:[!g&&e.jsxs("div",{className:`relative flex items-center transition-all duration-300 ${_==="modern"?"w-32 focus-within:w-48 flex-shrink":"flex-grow min-w-[200px] lg:min-w-[300px]"}`,children:[e.jsx("i",{className:`fas fa-search absolute left-2 z-10 ${_==="modern"?"text-accent-primary text-[10px] top-1.5":"left-4 text-gray-400"}`}),e.jsx("input",{type:"text",id:"search-input-desktop",placeholder:u,value:O,onChange:w=>P(w.target.value),className:`w-full ${y==="compact"?"h-9 text-xs py-1.5":"h-10 text-sm py-1.5"} pl-7 pr-8 focus:outline-none text-text-primary placeholder:text-text-placeholder transition-all duration-300 ${_==="modern"?"bg-white border border-border-secondary rounded-full shadow-sm focus:border-accent-primary focus:ring-2 focus:ring-accent-primary/20":"relative"}`}),O&&e.jsx("button",{onClick:()=>{P(""),l({keyword:""})},className:"absolute right-2 text-gray-400 hover:text-danger transition-colors",title:"Xa tm kim",children:e.jsx("i",{className:"fas fa-times-circle text-xs"})})]}),G,e.jsx("div",{className:`w-8 h-8 flex items-center justify-center transition-all duration-200 ${_==="modern"?"":"ml-2"}`,children:e.jsx(K,{onClick:o,variant:"danger",className:`!p-0 w-8 h-8 rounded-full transition-all duration-200 ${xe?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none"}`,title:"Xa tt c b lc",tabIndex:xe?0:-1,children:e.jsx("i",{className:"fas fa-times"})})}),b&&e.jsxs("div",{className:"relative",ref:z,children:[e.jsx(K,{onClick:()=>S(!I),variant:"ghost",className:`h-9 px-3 text-xs ${R.start&&R.end||I?"bg-surface-hover text-accent-primary":""}`,leftIcon:e.jsx("i",{className:"fas fa-calendar-alt text-text-placeholder text-xs"}),children:e.jsx("span",{className:`${R.start&&R.end?"font-semibold":""}`,children:R.start&&R.end?`${Ye(R.start).format("DD/MM")} - ${Ye(R.end).format("DD/MM")}`:"Chn ngy"})}),I&&e.jsx("div",{className:"absolute top-full mt-2 right-0 z-20 bg-surface-card p-4 rounded-lg shadow-lg border border-border-primary date-range-picker-popover",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(ks,{label:"T ngy",value:R.start,onChange:w=>Q("start",w)}),e.jsx(ks,{label:"n ngy",value:R.end,onChange:w=>Q("end",w)})]})})]}),e.jsxs("span",{className:"text-sm font-medium text-text-secondary px-3 whitespace-nowrap border-l border-border-primary/50 ml-auto",children:[h," kt qu"]}),j&&e.jsxs("div",{className:"view-switcher-group flex gap-1",children:[e.jsx(K,{onClick:()=>C==null?void 0:C("table"),variant:k==="table"?"primary":"ghost",size:"sm",className:"!p-2",title:"Xem dng danh sch",children:e.jsx("i",{className:"fas fa-list"})}),e.jsx(K,{onClick:()=>C==null?void 0:C("grid"),variant:k==="grid"?"primary":"ghost",size:"sm",className:"!p-2",title:"Xem dng li",children:e.jsx("i",{className:"fas fa-th-large"})})]}),v,e.jsx(K,{onClick:f,disabled:x,variant:"ghost",className:`w-9 h-9 flex-shrink-0 ${_==="modern"?"!rounded-full !bg-gray-50 hover:!bg-gray-100 !border-transparent":""}`,"aria-label":"Lm mi",title:"Lm mi",children:e.jsx("i",{className:`fas fa-sync-alt text-base ${x?"animate-spin":""}`})})]}),A=e.jsx("div",{className:`hidden md:block flex-shrink-0 ${!c&&_!=="modern"&&"p-2"}`,children:Z});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:hidden flex w-full items-center gap-2 ",children:[!g&&e.jsxs("div",{className:"relative flex-grow flex items-center min-w-0",children:[e.jsx("i",{className:"fas fa-search absolute left-4 text-gray-400 z-10"}),e.jsx("input",{type:"text",id:"search-input-mobile",placeholder:u,value:O,onChange:w=>P(w.target.value),className:"w-full h-9 pl-11 pr-9 py-1.5 relative focus:outline-none text-text-primary placeholder:text-text-placeholder text-sm bg-surface-ground rounded-lg border border-transparent focus:bg-white focus:border-accent-primary transition-all duration-300"}),O&&e.jsx("button",{onClick:()=>{P(""),l({keyword:""})},className:"absolute right-3 text-gray-400 hover:text-danger transition-colors",children:e.jsx("i",{className:"fas fa-times-circle"})})]}),e.jsxs(K,{onClick:()=>V(!0),variant:"ghost",className:"flex-shrink-0 w-9 h-9 relative !p-0",children:[e.jsx("i",{className:"fas fa-filter text-accent-primary"}),oe.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-danger text-white text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center border-2 border-surface-ground",children:oe.length})]}),e.jsx(K,{onClick:f,disabled:x,variant:"ghost",className:"flex-shrink-0 w-9 h-9 !p-0","aria-label":"Lm mi",title:"Lm mi",children:e.jsx("i",{className:`fas fa-sync-alt text-base ${x?"animate-spin":""}`})})]}),L&&nr.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex flex-col justify-end md:hidden",onClick:()=>V(!1),children:e.jsxs("div",{className:"bg-surface-card rounded-t-2xl p-4 animate-fade-in-up flex flex-col max-h-[85vh]",style:{animationDuration:"300ms"},onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-border-primary flex-shrink-0",children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary",children:"B Lc"}),e.jsx(K,{onClick:()=>V(!1),variant:"ghost",className:"w-8 h-8 rounded-full flex items-center justify-center text-text-secondary hover:bg-surface-hover !p-0",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"space-y-3 overflow-y-auto pr-2 -mr-2 custom-scrollbar py-2 flex-grow",children:[(b||N)&&e.jsxs("div",{className:"bg-gray-50/50 rounded-xl p-3 border border-gray-100",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 block",children:b?"Thi gian":"Ngy"}),e.jsxs("div",{className:`grid ${b?"grid-cols-2 gap-3":"grid-cols-1"}`,children:[e.jsx(ks,{label:b?"T ngy":"Chn ngy",value:R.start,onChange:w=>Q("start",w)}),b&&e.jsx(ks,{label:"n ngy",value:R.end,onChange:w=>Q("end",w)})]})]}),i.map(w=>{var U;const Y=$.includes(w.id),T=((U=r[w.key])==null?void 0:U.length)>0;return e.jsxs("div",{className:`border rounded-xl transition-all duration-300 overflow-hidden ${Y?"bg-white border-accent-primary/30 shadow-sm":"bg-white border-gray-100"}`,children:[e.jsxs("button",{type:"button",onClick:()=>q(w.id),className:"flex items-center justify-between w-full p-3 text-left group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${T?"bg-accent-primary text-white shadow-sm shadow-accent-primary/30":"bg-gray-100 text-gray-400 group-hover:bg-accent-primary/10 group-hover:text-accent-primary"}`,children:e.jsx("i",{className:`fas ${w.icon} text-xs`})}),e.jsxs("div",{children:[e.jsx("span",{className:`text-sm font-semibold transition-colors ${T?"text-accent-primary":"text-gray-700 group-hover:text-gray-900"}`,children:w.label}),T&&e.jsxs("div",{className:"text-[10px] text-gray-500 font-medium",children:[" chn ",r[w.key].length]})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center transition-transform duration-300 ${Y?"rotate-180 bg-gray-100 text-gray-600":"text-gray-300"}`,children:e.jsx("i",{className:"fas fa-chevron-down text-xs"})})]}),e.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${Y?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"p-3 pt-0 border-t border-gray-50",children:e.jsx("div",{className:"mt-3",children:e.jsx(Ht,{id:"mobile-"+w.id,label:w.label,options:w.options,selectedOptions:r[w.key]||[],onChange:te=>l({[w.key]:te}),icon:w.icon,displayMode:w.displayMode,size:"default",mode:w.mode||(w.options.length>6?"inline":"chips"),searchable:!1})})})})})]},"mobile-"+w.id)})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3 pt-3 border-t border-border-primary flex-shrink-0",children:[e.jsx(K,{onClick:()=>{o()},disabled:!xe,variant:"secondary",fullWidth:!0,className:"rounded-xl",children:"Xa Lc"}),e.jsxs(K,{onClick:()=>V(!1),variant:"primary",fullWidth:!0,className:"rounded-xl shadow-lg shadow-accent-primary/20",children:["Xem ",h," kt qu"]})]})]})}),document.body),A]})},mc="/ordermanagement/assets/hoa_dao_branch_bloom-yVxm6oGr.gif",fc="/ordermanagement/assets/hoa_dao_static-BRbspx5L.png",xc="/ordermanagement/assets/hoa_mai_bloom-B4Zuhbv-.gif",gc="/ordermanagement/assets/hoa_mai_static-BwGnp57_.png",pc="/ordermanagement/assets/petal_1-BI1qgdVS.webp",wr="/ordermanagement/assets/petal_2-BMhGF0Jm.webp",jr="/ordermanagement/assets/petal_3-Bvyh7_MT.webp",bc="/ordermanagement/assets/petal_4-Dsz0xQbq.webp",Nr="/ordermanagement/assets/petal_5-CCrXKZhb.webp",yc="/ordermanagement/assets/petal_6-xsqu7hkg.webp",vc="/ordermanagement/assets/petal_7-DsiQX_VS.webp",wc="/ordermanagement/assets/petal_8-BzjmCj-W.webp",jc="/ordermanagement/assets/petal_9-BJSNNJsy.webp",Nc="/ordermanagement/assets/petal_10-Bo4wKqSo.webp",kr=[pc,wr,jr,bc,Nr],_r=[yc,vc,wc,jc,Nc],kc=[...kr,..._r],Sr=({flowerType:r="mixed",delay:l=0,sizeMode:o="normal"})=>{const i=m.useMemo(()=>{let x=kc;r==="dao"&&(x=kr),r==="mai"&&(x=_r);const g=o==="large"?30:15;return Array.from({length:g}).map((y,c)=>({id:c,img:x[Math.floor(Math.random()*x.length)],left:`${Math.random()*100}%`,duration:`${25+Math.random()*20}s`,delay:`-${Math.random()*25}s`,animationName:`fall-wind-${1+Math.floor(Math.random()*4)}`}))},[r,o]),[u,h]=m.useState(l===0);if(m.useEffect(()=>{if(l>0){const x=setTimeout(()=>h(!0),l);return()=>clearTimeout(x)}else h(!0)},[l]),!u)return null;const f=o==="large"?"w-3 h-3 md:w-4 md:h-4":"w-1.5 h-1.5 md:w-2 md:h-2";return e.jsxs("div",{className:"absolute inset-0 z-[6] pointer-events-none overflow-hidden select-none",children:[i.map(x=>e.jsx("img",{src:x.img,className:`absolute ${f} object-contain drop-shadow-sm will-change-transform`,draggable:"false",style:{left:x.left,top:"-10%",animationName:x.animationName,animationDuration:x.duration,animationDelay:x.delay,animationTimingFunction:"linear",animationIterationCount:"infinite"},alt:""},x.id)),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                /* Wind-blown animations: Start Right -> Drift Left + Fall Down */
                
                /* Gentle Breeze (Stays mostly right/center) */
                @keyframes fall-wind-1 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    50% { transform: translate3d(-50px, 50vh, 0) rotate(90deg); }
                    100% { transform: translate3d(-80px, 120vh, 0) rotate(180deg); opacity: 0; }
                }
                
                /* Moderate Wind (Reaches center/left) */
                @keyframes fall-wind-2 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    40% { transform: translate3d(-100px, 40vh, 0) rotate(-45deg); }
                    100% { transform: translate3d(-200px, 120vh, 0) rotate(-180deg); opacity: 0; }
                }

                /* Strong Gust (Drifts across to far left) */
                @keyframes fall-wind-3 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    35% { transform: translate3d(-150px, 35vh, 0) rotate(30deg); }
                    100% { transform: translate3d(-350px, 120vh, 0) rotate(120deg); opacity: 0; }
                }

                /* Fast & Flat (Blows almost horizontally) */
                @keyframes fall-wind-4 {
                    0% { transform: translate3d(0, 0, 0) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    30% { transform: translate3d(-100px, 20vh, 0) rotate(60deg); }
                    100% { transform: translate3d(-400px, 120vh, 0) rotate(360deg); opacity: 0; }
                }
            `}})]})},_c=({order:r,onViewDetails:l,processingOrder:o})=>{const i=r["Trng thi VC"]||r["Kt qu"]||"Cha ghp",u=o===r["S n hng"],h=new Date>=new Date("2026-01-05T00:00:00"),[f,x]=m.useState(""),[g,y]=m.useState("dao"),[c,b]=m.useState(0);return m.useEffect(()=>{if(!h)return;const N=Math.random()>.5?"mai":"dao";y(N),x(N==="dao"?fc:gc);const j=Math.random()*1e4;b(j);const k=setTimeout(()=>{x(`${N==="dao"?mc:xc}?v=${r["S n hng"]}-${Date.now()}`)},j);return()=>{clearTimeout(k)}},[r,h]),e.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-white p-3 shadow-md border border-light-border hover:shadow-lg transition-all duration-200 ease-out active:scale-[0.98] cursor-pointer flex flex-col group",onClick:()=>l(r),children:[e.jsx("div",{className:"absolute -right-10 -bottom-6 w-48 z-0 transition-all duration-700 ease-out group-hover:scale-125 group-hover:-translate-x-4 group-hover:-translate-y-2 group-hover:opacity-100 group-hover:rotate-0 opacity-60 transform -rotate-12 animate-drive-in-right origin-bottom-right",children:e.jsx(ua,{model:r["Dng xe"],exteriorColor:r["Ngoi tht"],className:"w-full h-auto object-contain drop-shadow-xl",alt:""})}),h&&e.jsx("div",{className:"absolute -top-2 -right-2 w-24 h-auto z-[8] pointer-events-none",children:e.jsx("img",{src:f,className:"w-full h-auto object-contain select-none",alt:"",draggable:"false"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white via-white/80 to-transparent z-5"}),h&&e.jsx(Sr,{flowerType:g,delay:c}),e.jsxs("div",{className:"relative z-10 flex flex-col flex-grow gap-1.5 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-light-text-primary text-sm font-bold leading-tight pr-2 truncate",title:r["Tn khch hng"],children:r["Tn khch hng"]}),e.jsx("div",{className:"flex-shrink-0",onClick:N=>N.stopPropagation(),children:u&&e.jsx("div",{className:"flex items-center justify-center w-8 h-8",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-accent-primary text-lg"})})})]}),e.jsx("p",{className:"text-light-text-secondary text-xs font-mono truncate",title:r["S n hng"],children:r["S n hng"]}),e.jsxs("div",{className:"text-xs text-light-text-secondary space-y-1 my-1 py-1 border-y border-dashed",children:[e.jsxs("p",{className:"truncate",title:`${r["Dng xe"]} - ${r["Phin bn"]}`,children:[e.jsx("i",{className:"fas fa-car fa-fw mr-1.5 text-slate-400"})," ",r["Dng xe"]," - ",r["Phin bn"]]}),e.jsxs("p",{className:"truncate font-medium",title:`${r["Ngoi tht"]} / ${r["Ni tht"]}`,children:[e.jsx("i",{className:"fas fa-palette fa-fw mr-1.5 text-slate-400"}),e.jsx("span",{style:cr(r["Ngoi tht"]),children:r["Ngoi tht"]}),e.jsxs("span",{children:[" / ",r["Ni tht"]]})]})]}),e.jsx("div",{className:"flex items-center justify-between text-xs text-light-text-secondary",children:e.jsxs("div",{className:"flex items-center gap-1.5 truncate",title:`TVBH: ${r["Tn t vn bn hng"]}`,children:[e.jsx("i",{className:"fas fa-user-tie fa-fw text-slate-400"}),e.jsx("span",{className:"truncate",children:r["Tn t vn bn hng"]})]})}),e.jsx("div",{className:"mt-auto pt-2",children:e.jsx(or,{status:i})})]})]})},Sc=r=>r.orders.length===0?e.jsxs("div",{className:"text-center py-16 text-text-secondary",children:[e.jsx("i",{className:"fas fa-folder-open fa-3x mb-4 text-text-placeholder"}),e.jsx("p",{className:"font-semibold text-text-primary",children:"Khng tm thy yu cu no."}),e.jsx("p",{className:"text-sm",children:"Hy th thay i b lc hoc to yu cu mi."})]}):e.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4 p-1",children:r.orders.map(l=>e.jsx(_c,{order:l,...r},l["S n hng"]))}),Cc=()=>{const r=typeof window<"u"&&window.electronAPI,[l,o]=m.useState(!0);m.useEffect(()=>{if(!r)return;let f;const x=()=>{o(!0),f&&clearTimeout(f),f=setTimeout(()=>{o(!1)},3e3)},g=setTimeout(()=>{o(!1)},3e3),y=b=>{b.key==="Escape"&&x()},c=b=>{b.clientY<50&&x()};return window.addEventListener("keydown",y),window.addEventListener("mousemove",c),()=>{window.removeEventListener("keydown",y),window.removeEventListener("mousemove",c),f&&clearTimeout(f),clearTimeout(g),f&&clearTimeout(f),clearTimeout(g)}},[r]);const i=()=>{var f;return(f=window.electronAPI)==null?void 0:f.minimizeWindow()},u=()=>{var f;return(f=window.electronAPI)==null?void 0:f.maximizeWindow()},h=()=>{var f;return(f=window.electronAPI)==null?void 0:f.closeWindow()};return!r||!l?null:e.jsxs("div",{className:"fixed top-0 left-0 w-full h-8 bg-slate-900 border-b border-slate-700 flex items-center justify-between px-3 z-[99999] animate-slide-down select-none text-white shadow-lg",style:{WebkitAppRegion:"drag"},children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-slate-300",children:[e.jsx("i",{className:"fas fa-car-side"}),e.jsx("span",{children:"Order Management"})]}),e.jsxs("div",{className:"flex items-center h-full",style:{WebkitAppRegion:"no-drag"},children:[e.jsx("button",{onClick:i,className:"h-8 w-10 flex items-center justify-center hover:bg-slate-700/50 transition-colors",children:e.jsx("i",{className:"fas fa-minus text-[10px]"})}),e.jsx("button",{onClick:u,className:"h-8 w-10 flex items-center justify-center hover:bg-slate-700/50 transition-colors",children:e.jsx("i",{className:"far fa-square text-[10px]"})}),e.jsx("button",{onClick:h,className:"h-8 w-10 flex items-center justify-center hover:bg-red-600 transition-colors",children:e.jsx("i",{className:"fas fa-times text-[10px]"})})]})]})},Dc=()=>{const[r,l]=m.useState(!1),[o,i]=m.useState(!1),[u,h]=m.useState("orders"),[f,x]=m.useState(null);m.useEffect(()=>{const N=localStorage.getItem("sidebarState");l(N==="collapsed")},[]);const g=m.useCallback(()=>{l(N=>{const j=!N;return localStorage.setItem("sidebarState",j?"collapsed":"expanded"),j})},[]),y=m.useCallback((N,j)=>{h("admin"),x({orderToShow:N,targetTab:j})},[]),c=m.useCallback(N=>{h("admin"),x({targetTab:N})},[]),b=m.useCallback(()=>{x(null)},[]);return{isSidebarCollapsed:r,isMobileMenuOpen:o,setIsMobileMenuOpen:i,activeView:u,setActiveView:h,initialAdminState:f,toggleSidebar:g,showOrderInAdmin:y,showAdminTab:c,clearInitialState:b}},Mc=r=>{const[l,o]=m.useState([]),[i,u]=m.useState(0),[h,f]=m.useState(!1),x=m.useRef(null),g=m.useCallback(async()=>{try{const{notifications:N=[],unreadCount:j=0}=await Co();o(N),u(k=>{if(j>k){const C=document.getElementById("notification-badge");C==null||C.classList.add("animate-pop"),setTimeout(()=>C==null?void 0:C.classList.remove("animate-pop"),300)}return j})}catch(N){console.error("Failed to fetch notifications:",N)}},[]);return m.useEffect(()=>{g();const N=setInterval(g,3e4);return()=>clearInterval(N)},[g]),m.useEffect(()=>{const N=j=>{x.current&&!x.current.contains(j.target)&&f(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),{notifications:l,unreadCount:i,isNotificationPanelOpen:h,notificationContainerRef:x,toggleNotificationPanel:()=>{f(N=>!N)},handleMarkAllAsRead:async N=>{if(N.stopPropagation(),i===0)return;const j=[...l],k=i;u(0),o(C=>C.map(v=>({...v,isRead:!0})));try{await Do()}catch(C){console.error("Failed to mark all notifications as read",C),o(j),u(k),r("Thao Tc Tht Bi","Khng th nh du  c tt c thng bo.","error",3e3)}},handleNotificationClick:async(N,j,k,C)=>{if(j.stopPropagation(),!N.isRead){o(v=>v.map(_=>_.id===N.id?{..._,isRead:!0}:_)),u(v=>Math.max(0,v-1));try{await Mo(N.id)}catch(v){console.error("Failed to mark notification as read",v),o(_=>_.map(M=>M.id===N.id?{...M,isRead:!1}:M)),u(_=>_+1)}}if(N.link){const v=N.link.match(/orderNumber=([^&]+)/);if(v&&v[1]){const _=k.find(M=>M["S n hng"]===decodeURIComponent(v[1]));_?C(_):window.location.href=N.link}else window.location.href=N.link}f(!1)},setIsNotificationPanelOpen:f}},sr="archivedOrdersData",Tc=(r,l,o)=>{const[i,u]=m.useState([]),[h,f]=m.useState(!0),[x,g]=m.useState(null),[y,c]=m.useState(!1),b=m.useRef(0),N=m.useCallback(async(j=!1)=>{const k=++b.current;j||f(!0),g(null);try{const C=await go(o,r,l);if(k!==b.current)return;let v=C.data||[];const _=sessionStorage.getItem(sr);if(_)try{const M=JSON.parse(_);v=[...v,...M],c(!0)}catch(M){console.error("Failed to parse cached archives:",M),sessionStorage.removeItem(sr),c(!1)}else c(!1);u(v)}catch(C){if(k!==b.current)return;const v=C instanceof Error?C.message:"An unknown error occurred";g(v)}finally{k===b.current&&(j||f(!1))}},[r,l,JSON.stringify(o)]);return m.useEffect(()=>{N()},[N]),{historyData:i,setHistoryData:u,isLoading:h,error:x,refetch:N,archivesLoadedFromCache:y}},Ec=()=>{const[r,l]=m.useState([]),[o,i]=m.useState(!0),[u,h]=m.useState(null),f=m.useCallback(async(x=!1)=>{x||i(!0),h(null);try{const g=await br();l(g.khoxe||[])}catch(g){const y=g instanceof Error?g.message:"An unknown error occurred";h(y)}finally{x||i(!1)}},[]);return m.useEffect(()=>{f()},[f]),{stockData:r,setStockData:l,isLoading:o,error:u,refetch:f}},Pc=(r,l)=>{const[o,i]=m.useState([]),[u,h]=m.useState(!0),[f,x]=m.useState(null),g=m.useCallback(async()=>{h(!0),x(null);try{let y;if(r!==null?y=await To(["January","February","March","April","May","June","July","August","September","October","November","December"][r],l):y=await Eo(l),y.status==="SUCCESS")i(y.data||[]);else throw new Error(y.message||"Failed to fetch sold cars data.")}catch(y){const c=y instanceof Error?y.message:"An unknown error occurred";x(c)}finally{h(!1)}},[r,l]);return m.useEffect(()=>{g()},[g]),{soldData:o,isLoading:u,error:f,refetch:g}},ar=r=>{if(!r)return 0;if(r.includes("T")||r.includes(" ")){const o=Ye(r);if(o.isValid())return o.hour()*60+o.minute()}const l=r.split(":");if(l.length>=2){const o=parseInt(l[0],10),i=parseInt(l[1],10);if(!isNaN(o)&&!isNaN(i))return o*60+i}return 0},Yc=()=>{const[r,l]=m.useState([]),[o,i]=m.useState(!0),[u,h]=m.useState(null),f=m.useCallback(async(x=!1)=>{x||i(!0),h(null);try{const g=await Ao();if(g.status==="SUCCESS"&&g.data){const c=g.data.sort((b,N)=>{const j=N.ngayThuXe.localeCompare(b.ngayThuXe);return j!==0?j:ar(N.thoiGianKhoiHanh)-ar(b.thoiGianKhoiHanh)});l(c)}else throw new Error(g.message||"Khng th ti d liu lch li th.")}catch(g){const y=g instanceof Error?g.message:"An unknown error occurred";h(y)}finally{x||i(!1)}},[]);return m.useEffect(()=>{f()},[f]),{testDriveData:r,setTestDriveData:l,isLoading:o,error:u,refetch:f}},Ic=({currentUser:r,userRole:l,isCurrentUserAdmin:o,showToast:i})=>{const[u,h]=m.useState({}),[f,x]=m.useState([]),g=m.useMemo(()=>{if(l!=="Trng Phng Kinh Doanh")return;const T=St(r).toLowerCase(),U=Object.keys(u).find(te=>St(te).toLowerCase()===T);if(U&&u[U]){const te=u[U];return[U,...te].map(ue=>St(ue))}return[r]},[r,l,u]),{historyData:y,setHistoryData:c,isLoading:b,error:N,refetch:j,archivesLoadedFromCache:k}=Tc(r,o,g),{stockData:C,setStockData:v,isLoading:_,error:M,refetch:E}=Ec(),{soldData:O,isLoading:P,error:L,refetch:V}=Pc(null,new Date().getFullYear()),{testDriveData:I,setTestDriveData:S,isLoading:$,refetch:H}=Yc(),[z,R]=m.useState([]),[Q,q]=m.useState(!0),[ee,ne]=m.useState(null),[oe,xe]=m.useState(new Set),G=m.useRef([]),Z=m.useCallback(async(T=!1)=>{T||q(!0),ne(null);try{const U=await po();R(U.data||[])}catch(U){const te=U instanceof Error?U.message:"An unknown error occurred";ne(te)}finally{T||q(!1)}},[]),A=m.useCallback(async(T=!1)=>{if(!(!o&&l!=="Trng Phng Kinh Doanh"))try{const[U,te]=await Promise.all([Io(),Oo()]);U.status==="SUCCESS"&&U.teamData?h(U.teamData):console.error("Failed to fetch team data:",U.message),te.status==="SUCCESS"&&te.users?x(te.users):console.error("Failed to fetch user list:",te.message)}catch(U){console.error("Failed to fetch admin data:",U),T||i("Li Ti D Liu","Khng th ti d liu qun tr phng ban.","error")}},[o,l,i]);m.useEffect(()=>{A(),Z()},[A,Z]);const w=m.useMemo(()=>{if(o)return y;if(l==="Trng Phng Kinh Doanh"&&g){const U=new Set(g.map(te=>St(te)));return y.filter(te=>U.has(St(te["Tn t vn bn hng"])))}const T=St(r);return y.filter(U=>St(U["Tn t vn bn hng"])===T)},[y,o,l,g,r]);m.useEffect(()=>{G.current=C},[C]);const Y=m.useCallback(async()=>{if(!document.hidden)try{const U=(await br()).khoxe||[],te=G.current;if(te.length===0){v(U);return}const ue=X=>`${X["Trng thi"]}|${X["Ngi Gi Xe"]||""}`,De=new Map(te.map(X=>[X.VIN,ue(X)])),Je=new Set;U.forEach(X=>{if(!X.VIN)return;const he=De.get(X.VIN),ge=ue(X);he!==void 0&&he!==ge&&Je.add(X.VIN)}),v(U),Je.size>0&&(i("Cp Nht Kho Xe",`C ${Je.size} xe va thay i trng thi.`,"info",4e3),xe(Je),setTimeout(()=>xe(new Set),3e3))}catch(T){console.warn("Real-time stock update failed:",T)}},[i,v]);return m.useEffect(()=>{let U;const te=()=>{ue(),Y(),Z(!0),U=window.setInterval(()=>{Y(),Z(!0)},15e3)},ue=()=>{U&&clearInterval(U),U=void 0},De=()=>{document.hidden?ue():te()};return!_&&!M&&(te(),document.addEventListener("visibilitychange",De)),()=>{ue(),document.removeEventListener("visibilitychange",De)}},[_,M,Y,Z]),{allHistoryData:y,setAllHistoryData:c,historyData:w,isLoadingHistory:b,errorHistory:N,refetchHistory:j,archivesLoadedFromCache:k,stockData:C,setStockData:v,isLoadingStock:_,errorStock:M,refetchStock:E,highlightedVins:oe,soldData:O,isLoadingSold:P,errorSold:L,refetchSold:V,testDriveData:I,setTestDriveData:S,isLoadingTestDrive:$,refetchTestDrive:H,xuathoadonData:z,isLoadingXuathoadon:Q,errorXuathoadon:ee,refetchXuathoadon:Z,teamData:u,allUsers:f,fetchAdminData:A,usersToView:g}},Oc=({showToast:r,hideToast:l,refetchHistory:o,refetchStock:i,setAllHistoryData:u})=>{const[h,f]=m.useState(null),[x,g]=m.useState(null),[y,c]=m.useState(null),[b,N]=m.useState(null),[j,k]=m.useState(null),[C,v]=m.useState(null),[_,M]=m.useState(null),[E,O]=m.useState({isOpen:!1}),[P,L]=m.useState(!1),[V,I]=m.useState(null),[S,$]=m.useState(null),[H,z]=m.useState(!1),[R,Q]=m.useState(null),[q,ee]=m.useState(null),ne=async X=>{ee(X);try{await yo(X),l(),r("Gi Xe Thnh Cng",` gi xe ${X}.`,"success",3e3),i(!0)}catch(he){l();const ge=he instanceof Error?he.message:"Khng th gi xe.";r("Gi Xe Tht Bi",ge,"error",5e3)}finally{ee(null)}},oe=async X=>{ee(X);try{await vo(X),l(),r("Hy Gi Thnh Cng",` hy gi xe ${X}.`,"info",3e3),i(!0)}catch(he){l();const ge=he instanceof Error?he.message:"Khng th hy gi xe.";r("Hy Gi Tht Bi",ge,"error",5e3)}finally{ee(null)}},xe=X=>f(X),G=async(X,he)=>{Q(X["S n hng"]);try{await jo(X["S n hng"],he),await o(),l(),r("Hy Thnh Cng"," hy yu cu thnh cng.","success",3e3)}catch(ge){l();const be=ge instanceof Error?ge.message:"Li khng xc nh";r("Hy Tht Bi",be,"error",5e3)}finally{g(null),Q(null)}},Z=async(X,he,ge,be,Oe,Fe)=>{Q(X["S n hng"]);try{return await No(X["S n hng"],he,ge,be.join(", "),Oe,Fe),await o(),l(),r("Gi Thnh Cng"," gi yu cu xut ha n.","success",3e3),!0}catch(Se){l();const Me=Se instanceof Error?Se.message:"Li khng xc nh";r("Gi Tht Bi",Me,"error",5e3)}finally{Q(null)}},A=async(X,he,ge)=>{Q(X["S n hng"]);try{await ko(X["S n hng"],he,ge),await o(),l(),r("B Sung Thnh Cng"," b sung h s thnh cng.","success",3e3)}catch(be){l();const Oe=be instanceof Error?be.message:"Li khng xc nh";r("B Sung Tht Bi",Oe,"error",5e3)}finally{N(null),Q(null)}},w=()=>{k(null),r("Cp nht thnh cng!","Thng tin n hng  c cp nht.","success"),o(!0),i(!0)},Y=async(X,he)=>{if(!C)return!1;Q(C["S n hng"]);const ge=be=>new Promise((Oe,Fe)=>{const Se=new FileReader;Se.readAsDataURL(be),Se.onload=()=>Oe(Se.result.split(",")[1]),Se.onerror=Me=>Fe(Me)});try{const be=[];for(const Se in X.files)if(X.files[Se]){const Me=X.files[Se],Ct=await ge(Me);be.push({key:Se,name:Me.name,type:Me.type,data:Ct})}const Oe={orderNumber:X.orderNumber,customerType:X.customerType,dmsCode:X.dmsCode,filesData:JSON.stringify(be),vin:he},Fe=await Po(Oe);return l(),r("Thnh Cng",Fe.message||"Yu cu VinClub  c gi.","success"),Fe.updatedOrder?u(Se=>Se.map(Me=>Me["S n hng"]===Fe.updatedOrder["S n hng"]?{...Me,...Fe.updatedOrder}:Me)):o(!0),v(null),!0}catch(be){l();const Oe=be instanceof Error?be.message:"Li khng xc nh.";return r("Yu Cu Tht Bi",Oe,"error"),!1}finally{Q(null)}},T=async()=>{if(!_)return!1;Q(_["S n hng"]);try{return await Fo("confirmVcUnc",{orderNumber:_["S n hng"]}),await o(),l(),r("Thnh Cng"," xc thc UNC cho VinClub.","success"),M(null),!0}catch(X){l();const he=String(X instanceof Error?X.message:"Li khng xc nh");return r("Xc Thc VC Tht Bi",he,"error"),!1}finally{Q(null)}},U=X=>{O({isOpen:!0,initialVehicle:X})},te=m.useCallback(()=>{O({isOpen:!1})},[]),ue=m.useCallback(X=>{O({isOpen:!1}),u(he=>[X,...he].sort((ge,be)=>new Date(be["Thi gian nhp"]).getTime()-new Date(ge["Thi gian nhp"]).getTime())),r("Yu Cu  Gi","Yu cu ghp xe ca bn  c ghi nhn thnh cng.","success",4e3),i(!0),setTimeout(()=>{f(X)},500)},[u,r,i]),De=m.useCallback((X,he=0,ge)=>{I({images:X,startIndex:he,customerName:ge})},[]),Je=m.useCallback((X,he)=>{$({url:X,label:he})},[]);return{selectedOrder:h,setSelectedOrder:f,orderToCancel:x,setOrderToCancel:g,orderToRequestInvoice:y,setOrderToRequestInvoice:c,orderToSupplement:b,setOrderToSupplement:N,orderToEdit:j,setOrderToEdit:k,orderToRequestVC:C,setOrderToRequestVC:v,orderToConfirmVC:_,setOrderToConfirmVC:M,createRequestData:E,setCreateRequestData:O,isChangePasswordModalOpen:P,setIsChangePasswordModalOpen:L,imagePreview:V,setImagePreview:I,filePreview:S,setFilePreview:$,isPendingStatsModalOpen:H,setIsPendingStatsModalOpen:z,processingOrder:R,processingVin:q,handleHoldCar:ne,handleReleaseCar:oe,handleViewDetails:xe,handleCancelOrder:G,handleRequestInvoice:Z,handleSupplementFiles:A,handleEditSuccess:w,handleConfirmRequestVC:Y,handleConfirmVC:T,handleCreateRequestForVehicle:U,handleCreateRequestClose:te,handleFormSuccess:ue,openImagePreviewModal:De,openFilePreviewModal:Je}},Fc=({allHistoryData:r,isSidebarCollapsed:l,activeView:o,orderView:i})=>{const[u,h]=m.useState({keyword:"",carModel:[],version:[],status:[],exterior:[]}),[f,x]=m.useState({key:"Thi gian nhp",direction:"desc"}),[g,y]=m.useState(1),[c,b]=m.useState(20),[N,j]=m.useState(20),[k,C]=m.useState(()=>o==="orders"&&i==="grid"?l?15:12:l?14:12),v=m.useRef(null),_=m.useCallback(()=>{if(v.current)if(o==="orders"&&i==="grid"){const I=v.current.querySelector(".flex-grow.overflow-y-auto"),S=I==null?void 0:I.querySelector(".grid");if(!I||!S){j(20);return}const $=v.current.clientWidth,H=v.current.clientHeight;if(H===0||$===0){j(20);return}const z=190,R=8;let Q=230,q=Math.floor(($-8+R)/(z+R));if(S){const A=window.getComputedStyle(S).gridTemplateColumns;A&&A!=="none"&&(q=A.split(" ").length);const w=S.querySelector(".bg-white.rounded-xl");if(w){const Y=w.getBoundingClientRect().height;Y>0&&(Q=Y)}}const ee=H-50,ne=ee>=Q?Math.ceil((ee-Q/2)/(Q+R)):0,oe=Math.max(2,ne),xe=Math.max(1,q),G=Math.max(12,oe*xe*2);j(G),b(Z=>Math.max(Z,G))}else C(l?14:12)},[o,i,l]);m.useEffect(()=>{const I=v.current;if(!I)return;const S=new ResizeObserver(()=>{_()});return S.observe(I),_(),()=>S.disconnect()},[_]);const M=m.useCallback(I=>{y(1),b(N),h(S=>({...S,...I}))},[N]),E=m.useCallback(()=>{y(1),b(N),h({keyword:"",carModel:[],version:[],status:[],exterior:[]})},[N]),O=I=>{y(1),b(N);let S="asc";f&&f.key===I&&f.direction==="asc"&&(S="desc"),x({key:I,direction:S})},P=m.useMemo(()=>{let I=[...r];if(u.keyword){const S=u.keyword.toLowerCase();I=I.filter($=>Ze($["Tn khch hng"],S)||Ze($["S n hng"],S)||Ze($.VIN,S)||Ze($["Dng xe"],S)||Ze($["Phin bn"],S)||Ze($["Ngoi tht"],S)||Ze($["Ni tht"],S)||Ze($["Tn t vn bn hng"],S)||Ze($["CHNH SCH"],S)||Ze($["S ng c"],S))}return u.carModel.length>0&&(I=I.filter(S=>u.carModel.includes(S["Dng xe"]))),u.version.length>0&&(I=I.filter(S=>u.version.includes(S["Phin bn"]))),u.status.length>0&&(I=I.filter(S=>u.status.includes(S["Trng thi VC"]||S["Kt qu"]||"Cha ghp"))),u.exterior.length>0&&(I=I.filter(S=>u.exterior.includes(S["Ngoi tht"]))),f!==null&&I.sort((S,$)=>{const H=S[f.key],z=$[f.key];return H==null||H===""?1:z==null||z===""?-1:H<z?f.direction==="asc"?-1:1:H>z?f.direction==="asc"?1:-1:0}),I},[r,u,f]),L=Math.ceil(P.length/k);m.useEffect(()=>{g>L&&L>0&&y(L)},[L,g,k]);const V=m.useMemo(()=>P.slice(0,c),[P,g,k,i,c]);return m.useEffect(()=>{const I=setTimeout(()=>{_()},200);return()=>clearTimeout(I)},[V.length,_]),{filters:u,sortConfig:f,currentPage:g,setCurrentPage:y,handleFilterChange:M,handleResetFilters:E,handleSort:O,processedData:P,paginatedData:V,totalPages:L,pageSize:k,containerRef:v,visibleCount:c,setVisibleCount:b,batchSize:N}},Ac="/ordermanagement/assets/yeucau-CU2pKZso.json",rr="/ordermanagement/assets/logo1-Be-jI06Y.png",Lc=r=>{if(!r)return"?";const l=r.trim().split(" ").filter(Boolean);if(l.length===0)return"?";if(l.length===1)return l[0].charAt(0).toUpperCase();const o=l[0].charAt(0),i=l[l.length-1].charAt(0);return`${o}${i}`.toUpperCase()},Rc=Math.floor(Math.random()*1e4),da=({name:r,size:l="md",className:o=""})=>{const[i,u]=je.useState(!1),h=Lc(r),f=ao(r),x={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-lg",lg:"w-12 h-12 text-xl"},y=(()=>{let c=0;const b=r||"default";for(let v=0;v<b.length;v++)c=b.charCodeAt(v)+((c<<5)-c);const N=(Math.abs(c)+Rc)%40,j=Math.floor(N/10),k=N%10;return`${"/ordermanagement/".endsWith("/")?"/ordermanagement/":"/ordermanagement//"}avatars/avatar_set${j}_${k}.webp?v=1`})();return e.jsx("div",{className:`rounded-full flex items-center justify-center text-white font-bold flex-shrink-0 overflow-hidden relative ${x[l]} ${o}`,style:{backgroundColor:i?f:"transparent"},title:r,children:i?e.jsx("span",{children:h}):e.jsx("img",{src:y,alt:r,className:"w-full h-full object-cover",onError:()=>u(!0)})})},Cs="/ordermanagement/assets/lixi_animation-CGpl0Wp_.gif",$c="/ordermanagement/assets/bell_fixed-mq3DHU6t.gif",Cr="/ordermanagement/assets/hoa_dao_icon_bloom-HCG0szw1.gif",Vc="/ordermanagement/assets/hello_2026_loop-MyhPFczx.webp",Hc=({setCreateRequestData:r,toggleNotificationPanel:l,unreadCount:o,isNotificationPanelOpen:i,notifications:u,handleMarkAllAsRead:h,handleNotificationClick:f,onLogout:x,notificationContainerRef:g,activeView:y,setActiveView:c,isCurrentUserAdmin:b,onOpenGlobalSearch:N,currentUser:j,userRole:k,onOpenChangePassword:C=()=>{}})=>{const[v,_]=je.useState(Cs),[M,E]=je.useState(rr),[O,P]=je.useState(!1),L=je.useRef(null);je.useEffect(()=>{const S=$=>{L.current&&!L.current.contains($.target)&&P(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const V=new Date>=new Date("2026-01-05T00:00:00");je.useEffect(()=>{E(V?Vc:rr)},[y,V]),je.useEffect(()=>{V&&_(Math.random()>.5?Cs:Cr)},[y,V]);const I=[{id:"orders",label:"Qun l",icon:"fa-car-side"},{id:"stock",label:"Kho Xe",icon:"fa-warehouse"},{id:"laithu",label:"Li Th",icon:"fa-gauge-high"},{id:"sold",label:"Lch S",icon:"fa-receipt"}];return b&&I.push({id:"admin",label:"Admin",icon:"fa-user-shield"}),e.jsxs("header",{className:"relative sticky top-0 w-full z-50 h-14 bg-surface-card/95 backdrop-blur-md border-b border-border-primary/50 flex items-center justify-between px-4 sm:px-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("img",{src:M,alt:"OrderMgmt",className:"h-[4.5rem] w-auto -ml-2 object-contain"})})}),e.jsx("nav",{className:"hidden lg:flex items-center absolute left-1/2 transform -translate-x-1/2 bg-white/40 backdrop-blur-xl p-1.5 rounded-full border border-white/60 shadow-[0_4px_20px_rgba(0,0,0,0.03)] hover:shadow-[0_4px_25px_rgba(0,0,0,0.06)] transition-all duration-300",children:I.map(S=>{const $=y===S.id;return e.jsxs("button",{onClick:()=>c(S.id),className:`
                                relative px-6 py-2 rounded-full text-xs font-bold uppercase tracking-widest flex items-center gap-2.5 outline-none group
                                ${$?"bg-white text-accent-primary shadow-[0_2px_10px_rgba(0,0,0,0.1)] ring-1 ring-black/5 scale-100":"text-gray-500 hover:text-gray-900 hover:bg-white/50"}
                            `,children:[$&&V&&e.jsx("div",{className:"absolute -top-3 -right-1 z-20",children:e.jsx("img",{src:v,alt:"Festive Icon",className:"w-8 h-auto drop-shadow-sm"})}),$&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white via-transparent to-white/50 opacity-50 rounded-full"}),e.jsx("span",{className:"relative z-10",children:S.label})]},S.id)})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 sm:space-x-4",children:[e.jsx("div",{onClick:()=>r({isOpen:!0}),title:"To Yu Cu Mi",className:"cursor-pointer transition-transform hover:scale-105 active:scale-95",children:e.jsx("lottie-player",{src:Ac,background:"transparent",speed:"1",style:{width:"250px",height:"120px",marginTop:"-10px",marginBottom:"-10px"},loop:!0,autoplay:!0})}),b&&e.jsx(K,{onClick:N,variant:"ghost",className:"w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center !p-0 action-btn text-blue-600 hover:bg-blue-50",title:"Tm kim ton cc",children:e.jsx("i",{className:"fas fa-search text-xl"})}),e.jsxs("div",{ref:g,className:"relative notification-bell-container",children:[e.jsxs(K,{onClick:l,variant:"ghost",className:"w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center !p-0 action-btn",title:"Thng bo",children:[e.jsx("img",{src:$c,alt:"Notifications",className:"w-8 h-8 object-contain"}),o>0&&e.jsx("span",{id:"notification-badge",className:"notification-badge",children:o>9?"9+":o})]}),e.jsxs("div",{className:`notification-panel ${i?"visible":""}`,children:[e.jsxs("div",{className:"notification-panel-header flex justify-between items-center",children:[e.jsx("span",{children:"Thng Bo"}),o>0&&e.jsx(K,{onClick:h,variant:"ghost",size:"sm",className:"text-xs font-medium text-accent-secondary hover:text-accent-primary-hover transition-colors !h-auto !p-0",children:"nh du  c tt c"})]}),e.jsx("div",{className:"notification-list",children:u.length>0?u.map(S=>{const $={success:"fa-check",danger:"fa-times-circle",warning:"fa-exclamation-triangle",info:"fa-info-circle",error:"fa-times-circle"},H=S.type==="error"?"danger":S.type;return e.jsxs("div",{className:`notification-item ${S.isRead?"":"unread"}`,onClick:z=>f(S,z),children:[e.jsx("div",{className:`notification-icon type-${H}`,children:e.jsx("i",{className:`fa-solid ${$[H]||"fa-bell"}`})}),e.jsxs("div",{className:"notification-content",children:[e.jsx("p",{className:"notification-message",dangerouslySetInnerHTML:{__html:S.message}}),e.jsx("p",{className:"notification-time",children:Ye(S.timestamp).fromNow()})]})]},S.id)}):e.jsxs("div",{className:"no-notifications",children:[e.jsx("i",{className:"fa-solid fa-bell-slash"}),e.jsx("p",{children:"Khng c thng bo no."})]})})]})]}),e.jsxs("div",{ref:L,className:"relative hidden lg:block ml-2",children:[e.jsxs("div",{onClick:()=>P(!O),className:"flex items-center gap-2 cursor-pointer hover:bg-surface-hover/50 p-1.5 rounded-full pl-1 transition-colors border border-transparent hover:border-border-primary/30",children:[e.jsxs("div",{className:"relative",children:[e.jsx(da,{name:j,size:"sm"}),e.jsx("span",{className:"absolute bottom-0 right-0 block h-2 w-2 rounded-full bg-success ring-2 ring-white"})]}),e.jsxs("div",{className:"flex flex-col max-w-[100px]",children:[e.jsx("span",{className:"text-xs font-bold text-text-primary truncate leading-none mb-0.5",children:j}),e.jsx("span",{className:"text-[10px] text-text-secondary capitalize truncate leading-none",children:k})]}),e.jsx("i",{className:`fas fa-chevron-down text-xs text-text-secondary ml-1 transition-transform duration-200 ${O?"rotate-180":""}`})]}),O&&e.jsxs("div",{className:"absolute top-full right-0 mt-3 w-64 bg-surface-card rounded-xl shadow-[0_10px_40px_-10px_rgba(0,0,0,0.2)] border border-border-primary/50 py-2 animate-fade-in-up origin-top-right z-[100] ring-1 ring-black/5",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-border-primary/50 bg-surface-hover/30 flex items-center gap-3",children:[e.jsx(da,{name:j,size:"md"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm text-text-primary truncate",children:j||"User"}),e.jsx("p",{className:"text-xs text-text-secondary capitalize",children:k||"Member"})]})]}),e.jsxs("div",{className:"p-1",children:[e.jsxs(K,{onClick:()=>{C(),P(!1)},variant:"ghost",fullWidth:!0,className:"justify-start gap-3 px-3 py-2.5 text-sm rounded-lg text-text-primary hover:bg-surface-hover font-normal transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center text-blue-500 shadow-sm",children:e.jsx("i",{className:"fas fa-key text-xs"})}),e.jsx("span",{children:"i mt khu"})]}),e.jsx("div",{className:"h-px bg-border-primary/50 my-1 mx-2"}),e.jsxs(K,{onClick:()=>{x(),P(!1)},variant:"ghost",fullWidth:!0,className:"justify-start gap-3 px-3 py-2.5 text-sm rounded-lg text-danger hover:bg-danger-bg/10 hover:text-danger font-normal transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-50 flex items-center justify-center text-danger shadow-sm",children:e.jsx("i",{className:"fas fa-sign-out-alt text-xs"})}),e.jsx("span",{children:"ng xut"})]})]})]})]}),e.jsx(K,{onClick:x,variant:"ghost",className:"lg:hidden w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center text-text-secondary hover:text-danger !p-0",title:"ng xut",children:e.jsx("i",{className:"fa-solid fa-sign-out-alt"})})]})]})},zc=({activeView:r,setActiveView:l,isCurrentUserAdmin:o,currentUser:i,userRole:u,onLogout:h,setIsChangePasswordModalOpen:f})=>{const[x,g]=m.useState(!1),y=m.useRef(null),[c,b]=m.useState(Cs),N=new Date>=new Date("2026-01-05T00:00:00");m.useEffect(()=>{N&&b(Math.random()>.3?Cs:Cr)},[r,N]);const j=[{id:"orders",label:"Ghp Xe",icon:"fa-car-side"},{id:"stock",label:"Kho Xe",icon:"fa-warehouse"},{id:"laithu",label:"Li Th",icon:"fa-gauge-high"},{id:"sold",label:"Lch S",icon:"fa-receipt"}];return o&&j.push({id:"admin",label:"Admin",icon:"fa-user-shield"}),m.useEffect(()=>{const k=C=>{y.current&&!y.current.contains(C.target)&&g(!1)};return x&&document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[x]),e.jsxs(e.Fragment,{children:[x&&e.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col justify-end lg:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>g(!1)}),e.jsxs("div",{ref:y,className:"relative bg-surface-card rounded-t-2xl shadow-2xl border-t border-border-primary p-4 animate-slide-up-fade",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-border-primary/50",children:[e.jsx(da,{name:i,size:"lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary",children:i}),e.jsx("p",{className:"text-sm text-text-secondary capitalize",children:u})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{onClick:()=>{f(!0),g(!1)},variant:"secondary",fullWidth:!0,className:"justify-start gap-3 py-3 text-base",children:[e.jsx("i",{className:"fas fa-key text-text-secondary w-6 text-center"}),e.jsx("span",{children:"i mt khu"})]}),e.jsxs(K,{onClick:()=>{h(),g(!1)},variant:"ghost",fullWidth:!0,className:"justify-start gap-3 py-3 text-base text-danger hover:bg-danger-bg hover:text-danger",children:[e.jsx("i",{className:"fas fa-sign-out-alt w-6 text-center"}),e.jsx("span",{children:"ng xut"})]})]}),e.jsx("div",{className:"mt-6 pt-2 text-center",children:e.jsx("button",{onClick:()=>g(!1),className:"w-12 h-1 bg-gray-300 rounded-full mx-auto"})})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-40 lg:hidden pb-safe",children:e.jsxs("div",{className:"flex justify-around items-center h-16",children:[j.map(k=>{const C=r===k.id;return e.jsxs("button",{onClick:()=>{l(k.id),g(!1)},className:`flex flex-col items-center justify-center w-full h-full space-y-1 relative group ${C?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:[C&&N&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 z-20 animate-bounce-small",children:e.jsx("img",{src:c,alt:"Festive Icon",className:"w-8 h-8 object-contain drop-shadow-sm pointer-events-none select-none",draggable:"false"})}),e.jsx("i",{className:`fas ${k.icon} text-lg ${C?"opacity-0 scale-50":"opacity-100 scale-100"} transition-all duration-300`}),e.jsx("span",{className:"text-[10px] font-medium transition-all duration-300 transform translate-y-0",children:k.label})]},k.id)}),e.jsxs("button",{onClick:()=>g(!0),className:`flex flex-col items-center justify-center w-full h-full space-y-1 ${x?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx("i",{className:`fas fa-user-circle text-lg ${x?"animate-bounce-short":""}`}),e.jsx("span",{className:"text-[10px] font-medium",children:"C nhn"})]})]})})]})},Uc="/ordermanagement/assets/footer-DG9Dww7K.png",Bc=je.lazy(()=>Ds(()=>import("./StockView-D_sutofd.js"),__vite__mapDeps([0,1,2,3]))),Wc=je.lazy(()=>Ds(()=>import("./SoldCarsView-BGO_zDHz.js"),__vite__mapDeps([4,1,2,3]))),Gc=je.lazy(()=>Ds(()=>import("./AdminView-BTXu6M3T.js"),__vite__mapDeps([5,1,2,3]))),qc=je.lazy(()=>Ds(()=>import("./TestDriveForm-Nb_cGK7J.js"),__vite__mapDeps([6,1,2,3])));Ye.locale("vi");const _s=()=>e.jsxs("div",{className:"flex items-center justify-center h-full",children:[e.jsx("div",{style:{border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",width:"30px",height:"30px",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]}),Xc=({onLogout:r,showToast:l,hideToast:o})=>{const i=sessionStorage.getItem("currentConsultant")||We,u=sessionStorage.getItem("currentUser")||"User",h=sessionStorage.getItem("userRole")||(u.toLowerCase()==="admin"?"Qun tr vin":"T vn bn hng"),f=u.toLowerCase()==="admin",{isSidebarCollapsed:x,isMobileMenuOpen:g,setIsMobileMenuOpen:y,activeView:c,setActiveView:b,initialAdminState:N,showOrderInAdmin:j,showAdminTab:k,clearInitialState:C}=Dc(),[v,_]=m.useState(new Set(["orders"]));m.useEffect(()=>{_(se=>{const me=new Set(se);return me.add(c),me})},[c]);const{allHistoryData:M,setAllHistoryData:E,historyData:O,isLoadingHistory:P,errorHistory:L,refetchHistory:V,archivesLoadedFromCache:I,stockData:S,isLoadingStock:$,errorStock:H,refetchStock:z,highlightedVins:R,soldData:Q,testDriveData:q,setTestDriveData:ee,isLoadingTestDrive:ne,refetchTestDrive:oe,xuathoadonData:xe,isLoadingXuathoadon:G,errorXuathoadon:Z,refetchXuathoadon:A,teamData:w,allUsers:Y,fetchAdminData:T}=Ic({currentUser:i,currentUserName:u,userRole:h,isCurrentUserAdmin:f,showToast:l}),{notifications:U,unreadCount:te,isNotificationPanelOpen:ue,notificationContainerRef:De,toggleNotificationPanel:Je,handleMarkAllAsRead:X,handleNotificationClick:he}=Mc(l),{selectedOrder:ge,setSelectedOrder:be,orderToCancel:Oe,setOrderToCancel:Fe,orderToRequestInvoice:Se,setOrderToRequestInvoice:Me,orderToSupplement:Ct,setOrderToSupplement:Dt,orderToEdit:Ce,setOrderToEdit:bt,orderToRequestVC:Ts,setOrderToRequestVC:zt,orderToConfirmVC:Mt,setOrderToConfirmVC:Te,createRequestData:Ut,setCreateRequestData:Bt,isChangePasswordModalOpen:Tt,setIsChangePasswordModalOpen:de,imagePreview:$e,setImagePreview:is,filePreview:tt,setFilePreview:Wt,isPendingStatsModalOpen:Et,setIsPendingStatsModalOpen:st,processingOrder:Pt,processingVin:Es,handleHoldCar:Yt,handleReleaseCar:Ps,handleViewDetails:yt,handleCancelOrder:ht,handleRequestInvoice:Gt,handleSupplementFiles:It,handleEditSuccess:B,handleConfirmRequestVC:Ys,handleConfirmVC:Is,handleCreateRequestForVehicle:Ge,handleCreateRequestClose:Ae,handleFormSuccess:ae,openImagePreviewModal:vt,openFilePreviewModal:ce}=Oc({showToast:l,hideToast:o,refetchHistory:V,refetchStock:z,setAllHistoryData:E}),[mt,ls]=m.useState(!1),[Ot,ke]=m.useState(I),[qe,Ve]=m.useState(!1);je.useEffect(()=>{ke(I)},[I]),je.useEffect(()=>{const me={orders:"Qun L n Hng",stock:"Kho Xe",sold:"Lch S",admin:"Qun Tr",laithu:"Li Th"}[c]||"Order Management";document.title=me},[c]),m.useEffect(()=>{f&&b("admin")},[f,b]),m.useEffect(()=>{const se=setInterval(()=>{Ss()},3e5);return Ss(),()=>clearInterval(se)},[i]);const{filters:Ne,handleFilterChange:He,handleResetFilters:Xe,processedData:Ee,paginatedData:Os,containerRef:Fs,visibleCount:Qe,setVisibleCount:qt,batchSize:os}=Fc({allHistoryData:O,isSidebarCollapsed:x,activeView:c,orderView:"grid"}),Be=je.useRef(null);je.useEffect(()=>{const se=new IntersectionObserver(me=>{me[0].isIntersecting&&Qe<Ee.length&&qt(_e=>Math.min(_e+os,Ee.length))},{threshold:.1,rootMargin:"100px"});return Be.current&&se.observe(Be.current),()=>{Be.current&&se.unobserve(Be.current)}},[Qe,Ee.length,os,qt]);const wt=async()=>{ls(!0);try{const se=await So();o(),se.data&&se.data.length>0?(sessionStorage.setItem("archivedOrdersData",JSON.stringify(se.data)),E(me=>[...me,...se.data]),l("Ti Thnh Cng",` ti thm ${se.data.length} mc t kho lu tr.`,"success",3e3)):l("Hon Tt","Khng tm thy thm d liu no trong kho lu tr.","info",3e3),ke(!0)}catch(se){o();const me=se instanceof Error?se.message:"Li khng xc nh";l("Ti Tht Bi",me,"error",5e3)}finally{ls(!1)}},cs=se=>{if(!ge)return;const me=Ee,_e=me.findIndex(ve=>ve["S n hng"]===ge["S n hng"]);if(_e===-1)return;const Pe=se==="prev"?_e-1:_e+1;Pe>=0&&Pe<me.length&&be(me[Pe])},As=m.useMemo(()=>{const se=M.filter(Pe=>{var ve;return(ve=Pe["Kt qu"])==null?void 0:ve.toLowerCase().includes("cha")}),me={};se.forEach(Pe=>{const{"Dng xe":ve,"Phin bn":we,"Ngoi tht":et}=Pe;if(ve&&we&&et){const Le=`${ve}|${we}|${et}`.trim().toLowerCase();me[Le]=(me[Le]||0)+1}});const _e={};return S.forEach(Pe=>{const{"Dng xe":ve,"Phin bn":we,"Ngoi tht":et}=Pe;if(ve&&we&&et){const Le=`${ve}|${we}|${et}`.trim().toLowerCase(),ft=_e[Le]||{count:0,isSlowMoving:!1};ft.count+=1;const Re=Pe["Thi gian nhp"]?Ye(Pe["Thi gian nhp"]):null;Re&&Ye().diff(Re,"days")>30&&(ft.isSlowMoving=!0),_e[Le]=ft}}),{pendingRequestCount:me,stockStatus:_e}},[M,S]),Ls=m.useMemo(()=>{const me=M.filter(ve=>{var we;return(we=ve["Kt qu"])==null?void 0:we.toLowerCase().includes("cha")}),_e={};return me.forEach(ve=>{const we=ve["Dng xe"]||"Khng xc nh";_e[we]||(_e[we]=[]),_e[we].push(ve)}),Object.entries(_e).map(([ve,we])=>{const et=we.length,Le={};we.forEach(Re=>{const us=`${Re["Phin bn"]&&Re["Phin bn"]!=="N/A"?`${Re["Phin bn"]} - `:""}${Re["Ngoi tht"]||"N/A"} / ${Re["Ni tht"]||"N/A"}`;Le[us]=(Le[us]||0)+1});const ft=Object.entries(Le).map(([Re,Ft])=>({variant:Re,count:Ft})).sort((Re,Ft)=>Ft.count-Re.count);return{model:ve,total:et,variants:ft}}).sort((ve,we)=>we.total-ve.total)},[M]),Rs=m.useMemo(()=>[...new Set(M.map(se=>se["Dng xe"]).filter(Boolean))].sort(),[M]),ye=m.useMemo(()=>[...new Set(M.map(se=>se["Phin bn"]).filter(Boolean))].sort(),[M]),Xt=m.useMemo(()=>[...new Set(M.map(se=>se["Trng thi VC"]||se["Kt qu"]||"Cha ghp").filter(Boolean))].sort(),[M]),$s=m.useMemo(()=>[...new Set(M.map(se=>se["Ngoi tht"]).filter(Boolean))].sort(),[M]),ds=()=>{const se="animate-fade-in-up",me=P,_e=L,Pe=[{id:"order-filter-car-model",key:"carModel",label:"Dng Xe",options:Rs,icon:"fa-car"},{id:"order-filter-version",key:"version",label:"Phin Bn",options:ye,icon:"fa-cogs"},{id:"order-filter-status",key:"status",label:"Trng Thi",options:Xt,icon:"fa-tag"},{id:"order-filter-exterior",key:"exterior",label:"Ngoi Tht",options:$s,icon:"fa-palette"}].filter(we=>we.options.length>0),ve=e.jsx("button",{onClick:()=>st(!0),className:"btn-filter w-9 h-9",title:"Xem thng k cc xe ang c yu cu ch ghp",children:e.jsx("i",{className:"fas fa-chart-pie"})});if(me&&M.length===0){const we=Array.from({length:7},(et,Le)=>e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-1 px-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center space-x-4 p-4 w-full",children:[e.jsx("div",{className:"skeleton-item h-6 w-6 !rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2 py-1",children:[e.jsx("div",{className:"skeleton-item h-4 w-3/4"}),e.jsx("div",{className:"skeleton-item h-3 w-1/2"})]}),e.jsxs("div",{className:"flex-1 space-y-2 py-1 hidden md:block",children:[e.jsx("div",{className:"skeleton-item h-4 w-5/6"}),e.jsx("div",{className:"skeleton-item h-3 w-1/3"})]}),e.jsx("div",{className:"flex-1 skeleton-item h-4 w-full hidden md:block"}),e.jsx("div",{className:"flex-1 skeleton-item h-4 w-full hidden md:block"}),e.jsx("div",{className:"flex-1 skeleton-item h-8 w-24 !rounded-full hidden md:block"}),e.jsx("div",{className:"flex-1 skeleton-item h-8 w-8 !rounded-lg hidden md:block"})]})})},Le));return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-shrink-0 bg-surface-card rounded-xl shadow-md border border-border-primary p-3 mb-2",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"skeleton-item h-12 rounded-full",style:{flexBasis:"320px",flexGrow:1}}),e.jsx("div",{className:"skeleton-item h-12 w-32 rounded-full"}),e.jsx("div",{className:"skeleton-item h-12 w-32 rounded-full"}),e.jsx("div",{className:"skeleton-item h-12 w-12 !rounded-full ml-auto"})]})}),e.jsx("div",{className:"flex-1 bg-surface-card rounded-xl shadow-md border border-border-primary flex flex-col min-h-0",children:e.jsx("div",{className:"flex-grow overflow-auto",children:e.jsx("table",{className:"min-w-full",children:e.jsx("tbody",{className:"divide-y divide-border-primary",children:we})})})})]})}return _e?e.jsx("div",{className:`flex items-center justify-center h-96 ${se}`,children:e.jsxs("div",{className:"text-center p-8 bg-surface-card rounded-lg shadow-xl",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle fa-3x text-danger"}),e.jsx("p",{className:"mt-4 text-lg font-semibold",children:"Khng th ti d liu"}),e.jsx("p",{className:"mt-2 text-sm text-text-secondary max-w-sm",children:_e}),e.jsx("button",{onClick:()=>V(),className:"mt-6 btn-primary",children:"Th li"})]})}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-shrink-0 bg-surface-card rounded-xl shadow-md border border-border-primary p-3 mb-2 relative z-20",children:e.jsx(hc,{filters:Ne,onFilterChange:He,onReset:Xe,dropdowns:Pe,searchPlaceholder:"Tm kim SH, tn khch hng, s VIN...",totalCount:Ee.length,onRefresh:()=>V(),isLoading:me,size:"compact",plain:!0,extraActionButton:ve,viewSwitcherEnabled:!1,searchable:!1})}),e.jsx("div",{ref:Fs,className:"flex-1 flex flex-col min-h-0",children:e.jsx("div",{className:"bg-surface-card rounded-xl shadow-md border border-border-primary flex flex-col h-full",children:e.jsxs("div",{className:"flex-grow overflow-y-auto relative hidden-scrollbar p-1",children:[e.jsx(Sc,{orders:Os,onViewDetails:yt,onCancel:Fe,onRequestInvoice:Me,onSupplement:Dt,onEdit:bt,onRequestVC:zt,onConfirmVC:Te,processingOrder:Pt}),Qe<Ee.length&&e.jsx("div",{ref:Be,className:"h-10 w-full flex items-center justify-center py-4",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-accent-primary text-xl"})}),Qe>=Ee.length&&!Ot&&e.jsx("div",{className:"p-4 flex justify-center",children:e.jsxs("button",{onClick:wt,disabled:mt,className:"btn-secondary",children:[mt?e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}):e.jsx("i",{className:"fas fa-cloud-download-alt mr-2"}),"Ti thm d liu c"]})})]})})})]})};return e.jsxs(e.Fragment,{children:[e.jsx(Cc,{}),e.jsx("div",{className:"circuit-background"}),e.jsx("div",{className:"scanline"}),e.jsx("div",{id:"sidebar-overlay",onClick:()=>y(!1),className:`fixed inset-0 bg-black/50 z-30 transition-opacity duration-300 lg:hidden ${g?"opacity-100 visible":"opacity-0 invisible"}`}),e.jsxs("div",{className:"relative h-screen flex flex-col transition-all duration-300 ease-in-out w-full pb-16 lg:pb-0",children:[e.jsx(Hc,{setCreateRequestData:Bt,toggleNotificationPanel:Je,unreadCount:te,isNotificationPanelOpen:ue,notifications:U,handleMarkAllAsRead:X,handleNotificationClick:(se,me)=>he(se,me,M,be),onLogout:r,notificationContainerRef:De,activeView:c,setActiveView:b,isCurrentUserAdmin:f,onOpenGlobalSearch:()=>Ve(!0),currentUser:i,userRole:h,onOpenChangePassword:()=>de(!0)}),e.jsxs("main",{className:"flex-1 p-2 flex flex-col overflow-y-auto",children:[e.jsx("div",{hidden:c!=="orders",className:"h-full",children:ds()}),v.has("stock")&&e.jsx("div",{hidden:c!=="stock",className:"h-full",children:e.jsx(m.Suspense,{fallback:e.jsx(_s,{}),children:e.jsx(Bc,{stockData:S,isLoading:$,error:H,refetchStock:z,highlightedVins:R,showToast:l,currentUser:i,isAdmin:f,onCreateRequestForVehicle:Ge,onHoldCar:Yt,onReleaseCar:Ps,processingVin:Es,isSidebarCollapsed:x,allOrders:M,showOrderInAdmin:j,showAdminTab:k})})}),v.has("sold")&&e.jsx("div",{hidden:c!=="sold",className:"h-full",children:e.jsx(m.Suspense,{fallback:e.jsx(_s,{}),children:e.jsx(Wc,{showToast:l,isSidebarCollapsed:x})})}),v.has("laithu")&&e.jsx("div",{hidden:c!=="laithu",className:"h-full",children:e.jsx(m.Suspense,{fallback:e.jsx(_s,{}),children:e.jsx(qc,{showToast:l,hideToast:o,onOpenImagePreview:vt,currentUser:i,isAdmin:f,allTestDrives:q,setAllTestDrives:ee,isLoading:ne,refetch:oe})})}),v.has("admin")&&e.jsx("div",{hidden:c!=="admin",className:"h-full",children:f&&e.jsx(m.Suspense,{fallback:e.jsx(_s,{}),children:e.jsx(Gc,{showToast:l,hideToast:o,refetchHistory:V,refetchStock:z,allOrders:M,xuathoadonData:xe,refetchXuathoadon:A,stockData:S,isLoadingXuathoadon:G,isLoadingHistory:P,errorXuathoadon:Z,onOpenImagePreview:vt,onOpenFilePreview:ce,teamData:w,allUsers:Y,refetchAdminData:T,soldData:Q,isSidebarCollapsed:x,initialState:N,clearInitialState:C,onNavigateTo:b,onShowOrderDetails:be})})})]}),e.jsx("footer",{className:"hidden lg:flex flex-shrink-0 h-8 bg-surface-card/70 backdrop-blur-xl border-t border-border-primary/50 items-center justify-center px-4 sm:px-6",children:e.jsx("img",{src:Uc,alt:"Order Management 2026",className:"h-5 w-auto object-contain opacity-80"})})]}),e.jsx(Wo,{isOpen:Ut.isOpen,onClose:Ae,onSuccess:ae,showToast:l,hideToast:o,existingOrderNumbers:M.map(se=>se["S n hng"]),initialVehicle:Ut.initialVehicle,currentUser:i,vehicleAnalyticsData:As,onOpenImagePreview:vt}),e.jsx(Jo,{isOpen:Tt,onClose:()=>de(!1),showToast:l,username:u}),e.jsx(no,{order:ge,onClose:()=>be(null),orderList:Ee,onNavigate:cs,onCancel:Fe,onRequestInvoice:Me,onSupplement:Dt,onRequestVC:zt,onConfirmVC:Te,onEdit:bt}),e.jsx(Go,{isOpen:!!Ce,onClose:()=>bt(null),onSuccess:B,order:Ce,showToast:l,existingOrderNumbers:M.map(se=>se["S n hng"]).filter(se=>se!==(Ce==null?void 0:Ce["S n hng"]))}),Oe&&e.jsx(io,{order:Oe,onClose:()=>Fe(null),onConfirm:ht}),Se&&e.jsx(Ro,{order:Se,onClose:()=>Me(null),onConfirm:Gt}),Ct&&e.jsx($o,{order:Ct,onClose:()=>Dt(null),onConfirm:It}),e.jsx(ac,{order:Ts,onClose:()=>zt(null),onSubmit:Ys}),Mt&&e.jsx(sc,{isOpen:!!Mt,onClose:()=>Te(null),title:"Xc Thc UNC VinClub",description:"Xc nhn bn  nhn c UNC cho yu cu VinClub ca n hng:",targetId:Mt["S n hng"],submitText:" Nhn UNC",submitColor:"success",icon:"fa-check-circle",onSubmit:Is}),e.jsx(Qo,{isOpen:!!$e,onClose:()=>is(null),images:($e==null?void 0:$e.images)||[],startIndex:$e==null?void 0:$e.startIndex,customerName:$e==null?void 0:$e.customerName}),tt&&e.jsx(oc,{isOpen:!!tt,onClose:()=>Wt(null),fileUrl:tt.url,fileLabel:tt.label}),e.jsx(dc,{isOpen:Et,onClose:()=>st(!1),stats:Ls}),e.jsx(uc,{isOpen:qe,onClose:()=>Ve(!1)}),e.jsx(zc,{activeView:c,setActiveView:b,isCurrentUserAdmin:f,currentUser:i,userRole:h,onLogout:r,setIsChangePasswordModalOpen:de})]})},Kc="/ordermanagement/assets/emerald_bg-B3TxPc-D.webp",Zc="/ordermanagement/assets/mobile_bg_2026-CqU1E6p8.webp",Jc="/ordermanagement/assets/mobile_mask_2026-Bu3lpM05.webp",Qc="/ordermanagement/assets/lantern_body-ClxCsch6.webp",ed="/ordermanagement/assets/lantern_tassels-BZqiB8Sc.webp",td="/ordermanagement/assets/lantern_string-D9biP1bm.webp",sd="/ordermanagement/assets/xuan_mask-Cy54r02V.webp",ad="/ordermanagement/assets/tet_scroll_unroll-B9mu4sjd.gif",rd="/ordermanagement/assets/tet_tassel_left-bajjkeLR.png",nd="/ordermanagement/assets/tet_tassel_right-BRdjdVvb.png",id=()=>{const[r,l]=m.useState([]);return m.useEffect(()=>{const i=[];for(let u=0;u<50;u++)i.push({id:u,top:Math.random()*100,left:Math.random()*100,size:Math.random()*2+.5,duration:Math.random()*20+10,delay:Math.random()*10,opacityStart:Math.random()*.4+.2});l(i)},[]),e.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10 overflow-hidden",children:[r.map(o=>e.jsx("div",{className:"absolute rounded-full bg-[#FCEE21] animate-float-dust mix-blend-screen",style:{top:`${o.top}%`,left:`${o.left}%`,width:`${o.size}px`,height:`${o.size}px`,animationDuration:`${o.duration}s`,animationDelay:`${o.delay}s`,boxShadow:`0 0 ${o.size}px rgba(252, 238, 33, 0.8)`,opacity:0}},o.id)),e.jsx("style",{children:`
                @keyframes float-dust {
                    0% { transform: translateY(0) translateX(0); opacity: 0; filter: brightness(1); }
                    10% { opacity: 0.8; } 
                    50% { transform: translateY(-60px) translateX(20px); opacity: 0.6; filter: brightness(2); }
                    80% { opacity: 0.8; filter: brightness(3); } 
                    100% { transform: translateY(-120px) translateX(-20px); opacity: 0; }
                }
                .animate-float-dust {
                    animation-name: float-dust;
                    animation-timing-function: ease-in-out;
                    animation-iteration-count: infinite;
                    will-change: transform, opacity;
                }
            `})]})},ld="/ordermanagement/assets/emerald_bg_blink-BcXudJQx.webp",od=()=>{const[r,l]=m.useState(!1);return m.useEffect(()=>{let o,i;const u=()=>{const h=Math.random()*4e3+2e3;o=setTimeout(()=>{l(!0),i=setTimeout(()=>{l(!1),u()},900)},h)};return u(),()=>{clearTimeout(o),clearTimeout(i)}},[]),e.jsx("div",{className:"absolute inset-0 transition-opacity duration-500 ease-in-out pointer-events-none z-0",style:{opacity:r?1:0},children:e.jsx("img",{src:ld,alt:"Horse Blink",className:"w-full h-full object-cover object-left"})})},cd=({onLoginSuccess:r,showToast:l})=>{const[o,i]=m.useState(!1),[u,h]=m.useState("login"),[f,x]=m.useState(""),[g,y]=m.useState(""),[c,b]=m.useState(""),[N,j]=m.useState(""),[k,C]=m.useState(""),[v,_]=m.useState(""),[M,E]=m.useState({x:0,y:0}),[O,P]=m.useState(""),L="Qun L n Hng",V=q=>{const ee=q.clientX-window.innerWidth/2,ne=q.clientY-window.innerHeight/2;E({x:ee,y:ne})};m.useEffect(()=>{let q=0;const ee=setInterval(()=>{q<=L.length?(P(L.slice(0,q)),q++):clearInterval(ee)},100);return()=>clearInterval(ee)},[]);const[I,S]=m.useState({days:0,hours:0,minutes:0,seconds:0});m.useEffect(()=>{const q=new Date("2026-02-17T00:00:00"),ee=setInterval(()=>{const ne=new Date,oe=q.getTime()-ne.getTime();oe>0&&S({days:Math.floor(oe/(1e3*60*60*24)),hours:Math.floor(oe/(1e3*60*60)%24),minutes:Math.floor(oe/1e3/60%60),seconds:Math.floor(oe/1e3%60)})},1e3);return()=>clearInterval(ee)},[]);const $=async q=>{if(q.preventDefault(),!f||!g){l("Thng bo","Vui lng nhp y  thng tin!","warning");return}i(!0),await new Promise(ne=>setTimeout(ne,800));const ee=await qo(f,g);i(!1),ee.success?r():l("Li",ee.message||"Sai thng tin ng nhp.","error")},H=async q=>{q.preventDefault(),i(!0);const ee=await Ko(c);i(!1),ee.success?(l("Thnh cng","M xc thc  gi.","success"),h("reset")):l("Li",ee.message||"Li gi yu cu.","error")},z=async q=>{q.preventDefault(),i(!0);const ee=await Zo(c,N,k);i(!1),ee.success?(l("Thnh cng","i mt khu thnh cng.","success"),R()):l("Li",ee.message||"Tht bi.","error")},R=()=>{b(""),j(""),x(""),y(""),h("login")},Q=({value:q,label:ee})=>e.jsxs("div",{className:"flex flex-col items-center mx-1.5",children:[e.jsx("div",{className:"w-9 h-9 flex items-center justify-center bg-[#043927]/60 backdrop-blur-md rounded-lg border border-[#C5A059]/30 shadow-lg",children:e.jsx("span",{className:"text-sm font-bold text-[#FCEE21] font-mono",children:String(q).padStart(2,"0")})}),e.jsx("span",{className:"text-[8px] text-[#C5A059] uppercase mt-1 tracking-wider",children:ee})]});return e.jsxs("div",{className:"relative min-h-screen w-full flex items-center justify-center overflow-hidden font-sans selection:bg-[#043927] selection:text-[#FCEE21]",onMouseMove:V,children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:Kc,alt:"Emerald Background",className:"hidden lg:block w-full h-full object-cover object-left pointer-events-none select-none",draggable:"false"}),e.jsx("img",{src:Zc,alt:"Mobile Background",className:"block lg:hidden w-full h-full object-cover object-center pointer-events-none select-none",draggable:"false"}),e.jsx("img",{src:Jc,alt:"Mobile Glow",className:"block lg:hidden absolute inset-0 w-full h-full object-cover object-center pointer-events-none select-none mix-blend-screen animate-pulse-fast opacity-100",draggable:"false"}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(od,{})}),e.jsx("img",{src:sd,alt:"Xuan Effect",className:"hidden lg:block absolute inset-0 w-full h-full object-cover object-left z-0 pointer-events-none mix-blend-screen animate-pulse-fast opacity-50 select-none",draggable:"false"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 via-transparent to-black/40 mix-blend-multiply"}),e.jsx(id,{}),e.jsx(Sr,{flowerType:"mixed",delay:0,sizeMode:"large"})]}),e.jsxs("div",{className:"absolute top-[10%] left-[4%] z-30 w-48 hidden lg:flex flex-col items-center origin-top animate-swing pointer-events-none transition-transform duration-100 ease-out",style:{animationDuration:"5s",transform:`translate(${M.x*-.02}px, ${M.y*-.02}px)`},children:[e.jsx("div",{className:"h-40 w-full flex justify-center -mb-2 overflow-visible relative z-10",children:e.jsx("img",{src:td,alt:"Lantern String",className:"h-full w-auto object-contain filter brightness-110 drop-shadow-md",draggable:"false"})}),e.jsxs("div",{className:"-mt-2 relative w-full flex flex-col items-center",children:[e.jsx("img",{src:Qc,alt:"Lantern Body",className:"w-full relative z-20 animate-candle-glow",draggable:"false"}),e.jsx("div",{className:"absolute top-[92%] w-full flex justify-center z-10 animate-sway origin-top",children:e.jsx("img",{src:ed,alt:"Lantern Tassels",className:"w-full filter brightness-110",draggable:"false"})})]}),e.jsx("img",{src:jr,className:"absolute top-[35%] right-[20%] w-5 h-5 rotate-45 opacity-90 z-30 animate-sway",style:{animationDuration:"5s"},draggable:"false"})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-7xl h-full flex flex-col lg:flex-row items-center justify-center p-4 lg:p-12 gap-12 lg:gap-24",children:[e.jsx("div",{className:"hidden lg:flex flex-col items-center absolute right-[-12%] top-[8%] z-20 animate-swing-slow origin-top select-none",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ad,alt:"Tet Scroll",className:"w-[140px] lg:w-[150px] opacity-70 filter brightness-90 animate-unroll",draggable:"false"}),e.jsxs("div",{className:"absolute bottom-3 left-0 w-full flex justify-between px-6 z-[-1] opacity-0 animate-fade-in",style:{animationDelay:"4s",animationFillMode:"forwards"},children:[e.jsx("img",{src:rd,className:"h-14 w-auto animate-sway origin-top",style:{animationDelay:"5.5s"},draggable:"false"}),e.jsx("img",{src:nd,className:"h-14 w-auto animate-sway origin-top",style:{animationDelay:"6s"},draggable:"false"})]})]})}),e.jsx("style",{children:`
                @keyframes text-glow {
                    0%, 100% { opacity: 0.5; filter: brightness(1.2) blur(1px); }
                    50% { opacity: 1; filter: brightness(2) blur(2px) drop-shadow(0 0 5px #00ff00); }
                }
                .animate-text-glow { animation: text-glow 2s ease-in-out infinite; }
                @keyframes swing-slow {
                    0% { transform: rotate(1deg); }
                    100% { transform: rotate(-1deg); }
                }
                .animate-swing-slow { animation: swing-slow 6s ease-in-out infinite alternate; }
                
                /* Unroll Animation */
                @keyframes unroll {
                    0% { 
                        clip-path: inset(0 0 100% 0);
                        opacity: 0;
                    }
                    100% { 
                        clip-path: inset(0 0 0 0);
                        opacity: 1;
                    }
                }
                .animate-unroll {
                    animation: unroll 3s ease-out forwards;
                }
                @keyframes fade-in {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                .animate-fade-in { animation: fade-in 1s ease-out forwards; }
            `}),e.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 flex lg:hidden z-50 w-max",children:e.jsxs("div",{className:"flex items-center gap-3 bg-black/60 px-4 py-2 rounded-full border border-[#C5A059]/40 backdrop-blur-xl shadow-[0_0_15px_rgba(0,0,0,0.5)] overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col items-end mr-1 animate-part-fly-in-top",style:{animationDelay:"0.2s"},children:[e.jsx("span",{className:"text-[8px] text-[#C5A059] uppercase tracking-wider font-bold",children:"Sp n"}),e.jsx("span",{className:"text-[10px] text-white font-bold leading-3",children:"Tt 2026"})]}),e.jsx("div",{className:"h-6 w-[1px] bg-[#C5A059]/30 animate-part-fly-in-bottom",style:{animationDelay:"0.6s"}}),e.jsxs("div",{className:"flex gap-3 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-left",style:{animationDelay:"1.0s"},children:[e.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(I.days).padStart(2,"0")}),e.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Ngy"})]}),e.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-top",style:{animationDelay:"1.4s"},children:[e.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(I.hours).padStart(2,"0")}),e.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Gi"})]}),e.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-bottom",style:{animationDelay:"1.8s"},children:[e.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(I.minutes).padStart(2,"0")}),e.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Pht"})]}),e.jsxs("div",{className:"flex flex-col items-center min-w-[20px] animate-part-fly-in-right",style:{animationDelay:"2.2s"},children:[e.jsx("span",{className:"text-[#FCEE21] font-bold text-sm leading-4 font-mono",children:String(I.seconds).padStart(2,"0")}),e.jsx("span",{className:"text-[8px] text-white/70 uppercase",children:"Giy"})]})]})]})}),e.jsx("div",{className:"fixed bottom-0 right-0 hidden lg:block z-50 m-2",children:e.jsxs("div",{className:"flex items-center bg-black/40 p-3 rounded-xl border border-[#C5A059]/30 backdrop-blur-md scale-90 origin-bottom-right overflow-hidden",children:[e.jsxs("div",{className:"mr-3 text-right animate-part-fly-in-top",style:{animationDelay:"0.2s"},children:[e.jsx("p",{className:"text-[#C5A059] text-[10px] uppercase tracking-[0.2em] font-bold",children:"Countdown to"}),e.jsx("p",{className:"text-white text-base font-bold",children:"Tt 2026"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"animate-part-fly-in-left",style:{animationDelay:"1.0s"},children:e.jsx(Q,{value:I.days,label:"Ngy"})}),e.jsx("div",{className:"animate-part-fly-in-top",style:{animationDelay:"1.4s"},children:e.jsx(Q,{value:I.hours,label:"Gi"})}),e.jsx("div",{className:"animate-part-fly-in-bottom",style:{animationDelay:"1.8s"},children:e.jsx(Q,{value:I.minutes,label:"Pht"})}),e.jsx("div",{className:"animate-part-fly-in-right",style:{animationDelay:"2.2s"},children:e.jsx(Q,{value:I.seconds,label:"Giy"})})]})]})}),e.jsx("div",{className:"w-full flex items-center justify-center animate-fade-in-right relative z-10 px-4 lg:px-0",children:e.jsxs("div",{className:"relative w-full max-w-[400px] p-8 rounded-2xl bg-[#043927]/20 backdrop-blur-xl border border-[#C5A059]/30 shadow-[0_8px_32px_0_rgba(0,0,0,0.36)] flex flex-col items-center justify-center overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 -left-[100%] w-full h-full bg-gradient-to-r from-transparent via-white/5 to-transparent group-hover:transition-all group-hover:duration-1000 group-hover:left-[100%]"}),e.jsx("div",{className:"absolute inset-0 rounded-2xl shadow-[inset_0_0_20px_rgba(197,160,89,0.1)] pointer-events-none"}),e.jsx("img",{src:wr,className:"absolute top-[-10px] left-8 w-6 h-6 rotate-12 opacity-90 z-20 pointer-events-none drop-shadow-sm select-none",draggable:"false"}),e.jsx("img",{src:Nr,className:"absolute top-[-5px] right-12 w-5 h-5 -rotate-45 opacity-80 z-20 pointer-events-none drop-shadow-sm select-none",draggable:"false"}),e.jsxs("div",{className:"text-center mb-6 w-full relative z-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#FCEE21] mb-2 uppercase tracking-widest",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:u==="login"?"ng Nhp":u==="forgot"?"Khi Phc":"Mt Khu Mi"}),e.jsxs("p",{className:"text-[#C5A059] text-[10px] tracking-widest uppercase font-bold min-h-[15px]",children:[O,e.jsx("span",{className:"animate-blink",children:"|"})]})]}),u==="login"&&e.jsxs("form",{onSubmit:$,className:"space-y-3 w-full relative z-10",children:[e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"relative group/input",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-user text-[#FCEE21]/70 text-xs transition-colors group-focus-within/input:text-[#FCEE21]"})}),e.jsx("input",{value:f,onChange:q=>x(q.target.value),type:"text",className:"w-full pl-10 pr-4 py-3 bg-black/30 border border-[#C5A059]/40 rounded-xl text-[#FCEE21] placeholder-[#FCEE21]/50 focus:outline-none focus:border-[#FCEE21] focus:bg-black/50 transition-all text-base shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)] backdrop-blur-sm",placeholder:"Tn ng nhp"})]})}),e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"relative group/input",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-lock text-[#FCEE21]/70 text-sm transition-colors group-focus-within/input:text-[#FCEE21]"})}),e.jsx("input",{value:g,onChange:q=>y(q.target.value),type:"password",className:"w-full pl-10 pr-4 py-3 bg-black/30 border border-[#C5A059]/40 rounded-xl text-[#FCEE21] placeholder-[#FCEE21]/50 focus:outline-none focus:border-[#FCEE21] focus:bg-black/50 transition-all text-base shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)] backdrop-blur-sm",placeholder:"Mt khu"})]})}),e.jsxs("button",{type:"submit",disabled:o,className:`w-full py-3.5 mt-6 bg-gradient-to-r from-[#C5A059] to-[#997B3C] hover:from-[#D4B36A] hover:to-[#AA8A4B] text-[#043927] font-bold rounded-xl shadow-[0_4px_15px_rgba(197,160,89,0.3)] transform transition-all active:scale-[0.98] uppercase tracking-wider text-sm flex items-center justify-center gap-2 border border-[#FCEE21]/30 relative overflow-hidden ${o?"animate-pulse-gold":""}`,children:[o&&e.jsx("div",{className:"absolute top-0 left-0 h-[2px] w-full bg-gradient-to-r from-transparent via-[#FFF] to-transparent animate-fuse-burn"}),o?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-lg"}),e.jsx("span",{children:"ang Xc Thc..."})]}):"ng Nhp"]}),e.jsx("div",{className:"text-center flex justify-center mt-2",children:e.jsx("button",{type:"button",onClick:()=>h("forgot"),className:"text-[#C5A059]/80 hover:text-[#FCEE21] text-xs hover:underline transition-all font-medium",children:"Qun mt khu?"})})]}),u==="forgot"&&e.jsxs("form",{onSubmit:H,className:"space-y-3 w-full relative z-10 px-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"relative group/input",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-envelope text-[#FCEE21]/70 text-xs transition-colors group-focus-within/input:text-[#FCEE21]"})}),e.jsx("input",{value:c,onChange:q=>b(q.target.value),type:"email",className:"w-full pl-8 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"Email ng k"})]})}),e.jsx("button",{type:"submit",disabled:o,className:"w-full py-2.5 mt-4 bg-gradient-to-r from-[#C5A059] to-[#997B3C] hover:from-[#D4B36A] hover:to-[#AA8A4B] text-[#043927] font-bold rounded-lg shadow-[0_4px_10px_rgba(0,0,0,0.5)] transform transition-all active:scale-[0.98] uppercase tracking-wider text-xs flex items-center justify-center gap-2 border border-[#FCEE21]/30",children:o?e.jsx("i",{className:"fas fa-spinner fa-spin"}):"Gi M Xc Nhn"}),e.jsx("div",{className:"text-center flex justify-center mt-2",children:e.jsx("button",{type:"button",onClick:R,className:"text-[#C5A059]/80 hover:text-[#FCEE21] text-xs hover:underline transition-all font-medium",children:"Quay li ng nhp"})})]}),u==="reset"&&e.jsxs("form",{onSubmit:z,className:"space-y-3 w-full relative z-10 px-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx("input",{value:N,onChange:q=>j(q.target.value),type:"text",className:"w-full pl-3 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner text-center tracking-widest focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"M OTP"})}),e.jsx("div",{className:"space-y-1",children:e.jsx("input",{value:k,onChange:q=>C(q.target.value),type:"password",className:"w-full pl-3 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"Mt khu mi"})}),e.jsx("div",{className:"space-y-1",children:e.jsx("input",{value:v,onChange:q=>_(q.target.value),type:"password",className:"w-full pl-3 pr-3 py-2 bg-black/20 border border-[#C5A059]/30 rounded-lg text-[#FCEE21] placeholder-[#FCEE21]/30 focus:outline-none focus:border-[#FCEE21] focus:bg-black/40 transition-all text-sm shadow-inner focus:shadow-[0_0_15px_rgba(252,238,33,0.3)]",placeholder:"Nhp li mt khu"})}),e.jsx("button",{type:"submit",disabled:o,className:"w-full py-2.5 mt-4 bg-gradient-to-r from-[#C5A059] to-[#997B3C] hover:from-[#D4B36A] hover:to-[#AA8A4B] text-[#043927] font-bold rounded-lg shadow-[0_4px_10px_rgba(0,0,0,0.5)] transform transition-all active:scale-[0.98] uppercase tracking-wider text-xs flex items-center justify-center gap-2 border border-[#FCEE21]/30",children:o?e.jsx("i",{className:"fas fa-spinner fa-spin"}):"i Mt Khu"}),e.jsx("div",{className:"text-center flex justify-center mt-2",children:e.jsx("button",{type:"button",onClick:R,className:"text-[#C5A059]/80 hover:text-[#FCEE21] text-xs hover:underline transition-all font-medium",children:"Hy b"})})]})]})})]}),e.jsx("style",{children:`
                @keyframes fade-in-up {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes fade-in-right {
                    from { opacity: 0; transform: translateX(20px); }
                    to { opacity: 1; transform: translateX(0); }
                }
                @keyframes shimmer {
                    from { transform: translateX(-100%) skewX(12deg); }
                    to { transform: translateX(200%) skewX(12deg); }
                }
                @keyframes swing {
                    0% { transform: rotate(3deg); }
                    100% { transform: rotate(-3deg); }
                }
                @keyframes sway {
                    0% { transform: rotate(-5deg); }
                    100% { transform: rotate(5deg); }
                }
                .animate-fade-in-up { animation: fade-in-up 0.8s ease-out forwards; }
                .animate-fade-in-right { animation: fade-in-right 0.8s ease-out forwards; }
                .animate-shimmer { animation: shimmer 2s infinite; }
                .animate-swing { animation: swing 5s ease-in-out infinite alternate; transform-origin: top center; }
                .animate-sway { animation: sway 3s ease-in-out infinite alternate; transform-origin: top center; }
                @keyframes candle-glow {
                    0%, 100% { filter: brightness(1.1) drop-shadow(0 0 25px rgba(252, 238, 33, 0.4)); }
                    50% { filter: brightness(1.3) drop-shadow(0 0 50px rgba(252, 238, 33, 0.8)); }
                    25% { filter: brightness(1.15) drop-shadow(0 0 30px rgba(252, 238, 33, 0.5)); }
                    75% { filter: brightness(1.25) drop-shadow(0 0 40px rgba(252, 238, 33, 0.6)); }
                }
                .animate-candle-glow { animation: candle-glow 2.5s ease-in-out infinite; }
                @keyframes pulse-fast {
                    0%, 100% { opacity: 0.6; filter: brightness(1.2) drop-shadow(0 0 5px rgba(255, 200, 0, 0.5)); }
                    50% { opacity: 1; filter: brightness(1.6) drop-shadow(0 0 20px rgba(255, 100, 0, 0.9)); }
                }
                .animate-pulse-fast { animation: pulse-fast 0.1s ease-in-out infinite; }
                @keyframes blink {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0; }
                }
                .animate-blink { animation: blink 1s step-end infinite; }
                
                @keyframes fuse-burn {
                    0% { transform: translateX(-100%); }
                    100% { transform: translateX(100%); }
                }
                .animate-fuse-burn { animation: fuse-burn 1s linear infinite; }

                @keyframes pulse-gold {
                    0%, 100% { box-shadow: 0 0 0 0 rgba(252, 238, 33, 0.4); }
                    70% { box-shadow: 0 0 0 10px rgba(252, 238, 33, 0); }
                }
                .animate-pulse-gold { animation: pulse-gold 1.5s infinite; }

                /* Transformer / Mechanical Assembly Effects - Multi-directional */
                @keyframes part-fly-in-left {
                    0% { opacity: 0; transform: translateX(-200px) translateY(-50px) rotate(-45deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateX(0) translateY(0) rotate(0) scale(1); filter: blur(0); }
                }
                @keyframes part-fly-in-right {
                    0% { opacity: 0; transform: translateX(200px) translateY(50px) rotate(45deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateX(0) translateY(0) rotate(0) scale(1); filter: blur(0); }
                }
                @keyframes part-fly-in-top {
                    0% { opacity: 0; transform: translateY(-200px) translateX(50px) rotate(180deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateY(0) translateX(0) rotate(0) scale(1); filter: blur(0); }
                }
                 @keyframes part-fly-in-bottom {
                    0% { opacity: 0; transform: translateY(200px) translateX(-50px) rotate(-90deg) scale(0.5); filter: blur(10px); }
                    100% { opacity: 1; transform: translateY(0) translateX(0) rotate(0) scale(1); filter: blur(0); }
                }

                .animate-part-fly-in-left { animation: part-fly-in-left 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
                .animate-part-fly-in-right { animation: part-fly-in-right 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
                .animate-part-fly-in-top { animation: part-fly-in-top 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
                .animate-part-fly-in-bottom { animation: part-fly-in-bottom 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }
            `})]})},dd=({title:r,message:l,type:o,onClose:i,duration:u})=>{const[h,f]=m.useState(!1),x=m.useRef(null),g=m.useCallback(()=>{x.current&&clearTimeout(x.current),f(!0),setTimeout(()=>{i()},400)},[i]);m.useEffect(()=>(o!=="loading"&&u&&u>0&&(x.current=window.setTimeout(g,u)),()=>{x.current&&clearTimeout(x.current)}),[r,l,o,u,g]);const c={success:{icon:"fa-check",gradient:"from-emerald-400 to-green-600",shadow:"shadow-emerald-500/30",textColor:"text-emerald-700"},error:{icon:"fa-times",gradient:"from-rose-400 to-red-600",shadow:"shadow-rose-500/30",textColor:"text-rose-700"},loading:{icon:"fa-spinner fa-spin",gradient:"from-blue-400 to-indigo-600",shadow:"shadow-blue-500/30",textColor:"text-blue-700"},warning:{icon:"fa-exclamation",gradient:"from-amber-400 to-orange-600",shadow:"shadow-amber-500/30",textColor:"text-amber-700"},info:{icon:"fa-info",gradient:"from-sky-400 to-blue-600",shadow:"shadow-sky-500/30",textColor:"text-sky-700"}}[o],b=h?"animate-fade-out":"animate-fade-in-up";return e.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] pointer-events-none flex justify-end",children:e.jsxs("div",{className:`
                    pointer-events-auto 
                    relative overflow-hidden
                    bg-white/95 backdrop-blur-xl 
                    border border-white/60 
                    shadow-xl shadow-black/5 
                    rounded-full
                    py-2 pl-2 pr-4
                    flex items-center gap-3
                    w-auto max-w-sm
                    ${b}
                    transition-all duration-300
                `,role:"alert",children:[e.jsx("div",{className:`absolute -top-6 -left-6 w-16 h-16 bg-gradient-to-br ${c.gradient} opacity-20 blur-xl rounded-full pointer-events-none`}),e.jsx("div",{className:`
                    relative flex-shrink-0 
                    w-8 h-8 
                    rounded-full 
                    bg-gradient-to-br ${c.gradient} 
                    flex items-center justify-center 
                    text-white text-sm
                    ${c.shadow} shadow-md
                `,children:e.jsx("i",{className:`fas ${c.icon}`})}),e.jsxs("div",{className:"flex-grow min-w-0 flex flex-col justify-center",children:[e.jsx("h4",{className:`font-bold text-xs ${c.textColor} leading-tight`,children:r}),l&&e.jsx("p",{className:"text-slate-600 text-[10px] leading-tight truncate max-w-[200px]",children:l})]}),o!=="loading"&&e.jsx("button",{onClick:g,className:"flex-shrink-0 w-5 h-5 rounded-full hover:bg-slate-100 text-slate-400 hover:text-slate-600 flex items-center justify-center transition-colors ml-1",children:e.jsx("i",{className:"fas fa-times text-[10px]"})})]})})},ud="/ordermanagement/assets/message_sent-DyIxiuZB.json",hd=({title:r,message:l,onClose:o,duration:i=3e3})=>{const[u,h]=m.useState(!1),f=m.useRef(null),x=m.useRef(null),g=m.useCallback(()=>{f.current&&clearTimeout(f.current),h(!0),setTimeout(()=>{o()},300)},[o]);m.useEffect(()=>{const c=x.current;return c&&typeof c.stop=="function"&&(c.stop(),c.play()),f.current=window.setTimeout(()=>{g()},i),()=>{f.current&&clearTimeout(f.current)}},[i,g]);const y=u?"toast-hidden":"toast-visible";return e.jsx("div",{className:`toast-container ${y}`,role:"alert","aria-live":"assertive","aria-atomic":"true",children:e.jsxs("div",{className:"toast-content",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 flex items-center justify-center",children:e.jsx("lottie-player",{ref:x,src:ud,background:"transparent",speed:"1",style:{width:"60px",height:"60px",margin:"-5px"},autoplay:!0,loop:!1})}),e.jsxs("div",{className:"toast-body flex-grow",children:[e.jsx("p",{className:"toast-title",children:r}),l&&e.jsx("p",{className:"toast-message",children:l})]}),e.jsx("div",{className:"toast-close",children:e.jsx(K,{onClick:g,variant:"ghost",className:"text-white/80 hover:text-white !p-0 w-8 h-8 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"fas fa-times text-xl"})})})]})})},md=()=>e.jsxs("div",{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-[#051a14] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-[#043927]/30 via-black to-black"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-[#FCEE21] blur-[40px] opacity-20 animate-pulse"}),e.jsx("h1",{className:"text-6xl md:text-8xl font-bold text-[#FCEE21] tracking-wider animate-bounce-slow",style:{textShadow:"0 0 20px rgba(252, 238, 33, 0.5)"},children:"2026"})]}),e.jsx("div",{className:"w-64 h-1 bg-[#043927] rounded-full overflow-hidden border border-[#C5A059]/30",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#C5A059] via-[#FCEE21] to-[#C5A059] animate-loading-bar w-full origin-left"})}),e.jsx("p",{className:"mt-4 text-[#C5A059] text-xs uppercase tracking-[0.3em] animate-pulse",children:"ang ti d liu..."})]}),e.jsx("style",{children:`
                @keyframes bounce-slow {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-10px); }
                }
                .animate-bounce-slow { animation: bounce-slow 3s infinite ease-in-out; }
                
                @keyframes loading-bar {
                    0% { transform: scaleX(0); }
                    50% { transform: scaleX(0.7); }
                    100% { transform: scaleX(1); }
                }
                .animate-loading-bar { animation: loading-bar 2s infinite ease-in-out; }
            `})]}),fd=()=>{const[r,l]=m.useState(!1),[o,i]=m.useState("idle"),[u,h]=m.useState(null),[f,x]=m.useState(0);m.useEffect(()=>{if(!window.electronAPI)return;const N=v=>{h(v),i("available"),l(!0)},j=v=>{i("downloading"),x(v.percent)},k=v=>{i("ready"),h(v),l(!0)},C=v=>{console.error("Update error:",v),i("error"),l(!0)};return window.electronAPI.onUpdateAvailable(N),window.electronAPI.onDownloadProgress(j),window.electronAPI.onUpdateDownloaded(k),window.electronAPI.onUpdateError(C),()=>{window.electronAPI.removeAllListeners("update-available"),window.electronAPI.removeAllListeners("download-progress"),window.electronAPI.removeAllListeners("update-downloaded"),window.electronAPI.removeAllListeners("update-error")}},[]);const g=()=>window.electronAPI.startDownload(),y=()=>window.electronAPI.quitAndInstall(),c=()=>l(!1),b=()=>l(!1);return r?e.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] animate-slide-in-up",children:e.jsxs("div",{className:"bg-black/90 backdrop-blur text-white rounded-full border border-white/10 shadow-xl px-4 py-2 flex items-center gap-3 text-xs font-medium ring-1 ring-white/5 transition-all hover:scale-[1.02] cursor-default select-none",children:[e.jsxs("div",{className:"shrink-0",children:[o==="available"&&e.jsx("i",{className:"fas fa-gift text-blue-400 animate-pulse"}),o==="downloading"&&e.jsxs("div",{className:"relative w-4 h-4 flex items-center justify-center",children:[e.jsx("i",{className:"fas fa-arrow-down text-[10px] text-white/50"}),e.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[e.jsx("path",{className:"text-white/10",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"text-blue-500 transition-all duration-300",strokeDasharray:`${f}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"})]})]}),o==="ready"&&e.jsx("i",{className:"fas fa-check text-emerald-400"}),o==="error"&&e.jsx("i",{className:"fas fa-exclamation text-red-400"})]}),e.jsx("div",{className:"flex flex-col min-w-[80px] max-w-[120px]",children:e.jsxs("span",{className:"truncate font-semibold tracking-wide",children:[o==="available"&&"Update v"+(u==null?void 0:u.version),o==="downloading"&&`${Math.round(f)}% Downloaded`,o==="ready"&&"Ready to Install",o==="error"&&"Update Failed"]})}),e.jsx("div",{className:"h-4 w-[1px] bg-white/10 mx-1"}),o==="available"&&e.jsx("button",{onClick:g,className:"text-blue-400 hover:text-white transition-colors uppercase text-[10px] font-bold tracking-wider",children:"Get"}),o==="downloading"&&e.jsx("button",{onClick:b,className:"text-white/50 hover:text-white transition-colors",children:e.jsx("i",{className:"fas fa-minus"})}),o==="ready"&&e.jsx("button",{onClick:y,className:"text-emerald-400 hover:text-emerald-300 transition-colors uppercase text-[10px] font-bold tracking-wider",children:"Restart"}),(o==="available"||o==="ready"||o==="error")&&e.jsx("button",{onClick:c,className:"text-white/30 hover:text-white transition-colors ml-1",children:e.jsx("i",{className:"fas fa-times"})})]})}):null},xd="1.0.10",Dr={version:xd},Mr="app_version",gd=()=>{console.log("New version detected. Clearing cache..."),"caches"in window&&caches.keys().then(r=>{r.forEach(l=>{caches.delete(l)})}),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(r=>{r.forEach(l=>{l.unregister()})}),localStorage.setItem(Mr,Dr.version),window.location.reload()},pd=()=>{const r=localStorage.getItem(Mr),l=Dr.version;r!==l&&gd()};pd();const bd=()=>{const[r,l]=m.useState(!1),[o,i]=m.useState(!0),[u,h]=m.useState(null),[f,x]=m.useState(null);m.useEffect(()=>{const j=sessionStorage.getItem("isLoggedIn")==="true";if(l(j),i(!1),j){Ss();const k=setInterval(Ss,2*60*1e3);return()=>clearInterval(k)}},[r]);const g=m.useCallback(()=>{l(!0)},[]),y=m.useCallback((j,k,C,v)=>{h({show:!0,title:j,message:k,type:C,duration:C==="loading"?v??0:v??5e3})},[]),c=m.useCallback(()=>h(null),[]),b=m.useCallback(()=>x(null),[]),N=m.useCallback(()=>{sessionStorage.clear(),l(!1)},[y]);return o?new Date>=new Date("2026-01-05T00:00:00")?e.jsx(md,{}):e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f0f2f5"},children:[e.jsx("div",{style:{border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",width:"40px",height:"40px",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]}):e.jsxs(e.Fragment,{children:[r?e.jsx(Xc,{onLogout:N,showToast:y,hideToast:c}):e.jsx(cd,{onLoginSuccess:g,showToast:y}),u&&e.jsx(dd,{...u,onClose:c}),f&&e.jsx(hd,{show:!0,title:f.title,message:f.message,onClose:b,duration:3e3}),e.jsx(fd,{})]})},Tr=document.getElementById("root");if(!Tr)throw new Error("Could not find root element to mount to");const yd=ca.createRoot(Tr);yd.render(e.jsx(je.StrictMode,{children:e.jsx(bd,{})}));export{sc as A,K as B,ua as C,Go as E,Sr as F,xr as M,fo as P,or as S,eo as a,hc as b,rs as c,fr as d,St as e,ut as f,cr as g,ct as h,Ze as i,_d as j,Sd as k,kd as l,Ht as m,tc as n,Nd as o,Fo as p,uo as q,Ss as r,mr as s,Ka as t,Pc as u,ss as v,Cd as w,Dd as x,ec as y,Md as z};
